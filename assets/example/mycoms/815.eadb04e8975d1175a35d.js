(self.webpackChunkcomponent_library=self.webpackChunkcomponent_library||[]).push([[815],{95863:(b,I,p)=>{b.exports={graphlib:p(68460),dagre:p(55467),intersect:p(30686),render:p(28626),util:p(62437),version:p(75059)}},31640:(b,I,p)=>{var u=p(62437);function x(g,_,o,C){var D=g.append("marker").attr("id",_).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").style("stroke-width",1).style("stroke-dasharray","1,0");u.applyStyle(D,o[C+"Style"]),o[C+"Class"]&&D.attr("class",o[C+"Class"])}b.exports={default:x,normal:x,vee:function(g,_,o,C){var D=g.append("marker").attr("id",_).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 L 4 5 z").style("stroke-width",1).style("stroke-dasharray","1,0");u.applyStyle(D,o[C+"Style"]),o[C+"Class"]&&D.attr("class",o[C+"Class"])},undirected:function(g,_,o,C){var D=g.append("marker").attr("id",_).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 5 L 10 5").style("stroke-width",1).style("stroke-dasharray","1,0");u.applyStyle(D,o[C+"Style"]),o[C+"Class"]&&D.attr("class",o[C+"Class"])}}},6548:(b,I,p)=>{var u=p(62437),x=p(29111),y=p(33921);b.exports=function(g,_){var O,o=_.nodes().filter(function(D){return u.isSubgraph(_,D)}),C=g.selectAll("g.cluster").data(o,function(D){return D});return C.selectAll("*").remove(),C.enter().append("g").attr("class","cluster").attr("id",function(D){return _.node(D).id}).style("opacity",0),C=g.selectAll("g.cluster"),u.applyTransition(C,_).style("opacity",1),C.each(function(D){var A=_.node(D),M=x.select(this);x.select(this).append("rect");var z=M.append("g").attr("class","label");y(z,A,A.clusterLabelPos)}),C.selectAll("rect").each(function(D){var A=_.node(D),M=x.select(this);u.applyStyle(M,A.style)}),O=C.exit?C.exit():C.selectAll(null),u.applyTransition(O,_).style("opacity",0).remove(),C}},45910:(b,I,p)=>{"use strict";var u=p(46224),x=p(33921),y=p(62437),w=p(29111);b.exports=function(_,o){var O,C=_.selectAll("g.edgeLabel").data(o.edges(),function(D){return y.edgeToId(D)}).classed("update",!0);return C.exit().remove(),C.enter().append("g").classed("edgeLabel",!0).style("opacity",0),(C=_.selectAll("g.edgeLabel")).each(function(D){var A=w.select(this);A.select(".label").remove();var M=o.edge(D),z=x(A,o.edge(D),0,0).classed("label",!0),H=z.node().getBBox();M.labelId&&z.attr("id",M.labelId),u.has(M,"width")||(M.width=H.width),u.has(M,"height")||(M.height=H.height)}),O=C.exit?C.exit():C.selectAll(null),y.applyTransition(O,o).style("opacity",0).remove(),C}},28905:(b,I,p)=>{"use strict";var u=p(46224),x=p(78628),y=p(62437),w=p(29111);function C(M,z){var H=(w.line||w.svg.line)().x(function(st){return st.x}).y(function(st){return st.y});return(H.curve||H.interpolate)(M.curve),H(z)}b.exports=function(M,z,H){var st=M.selectAll("g.edgePath").data(z.edges(),function(it){return y.edgeToId(it)}).classed("update",!0),et=function(M,z){var H=M.enter().append("g").attr("class","edgePath").style("opacity",0);return H.append("path").attr("class","path").attr("d",function(st){var et=z.edge(st),U=z.node(st.v).elem,it=u.range(et.points.length).map(function(){return function(M){var z=M.getBBox(),H=M.ownerSVGElement.getScreenCTM().inverse().multiply(M.getScreenCTM()).translate(z.width/2,z.height/2);return{x:H.e,y:H.f}}(U)});return C(et,it)}),H.append("defs"),H}(st,z);!function(M,z){var H=M.exit();y.applyTransition(H,z).style("opacity",0).remove()}(st,z);var U=void 0!==st.merge?st.merge(et):st;return y.applyTransition(U,z).style("opacity",1),U.each(function(it){var J=w.select(this),rt=z.edge(it);rt.elem=this,rt.id&&J.attr("id",rt.id),y.applyClass(J,rt.class,(J.classed("update")?"update ":"")+"edgePath")}),U.selectAll("path.path").each(function(it){var J=z.edge(it);J.arrowheadId=u.uniqueId("arrowhead");var rt=w.select(this).attr("marker-end",function(){return"url("+function(M,z){return M.split("#")[0]+"#"+z}(location.href,J.arrowheadId)+")"}).style("fill","none");y.applyTransition(rt,z).attr("d",function(K){return function(M,z){var H=M.edge(z),st=M.node(z.v),et=M.node(z.w),U=H.points.slice(1,H.points.length-1);return U.unshift(x(st,U[0])),U.push(x(et,U[U.length-1])),C(H,U)}(z,K)}),y.applyStyle(rt,J.style)}),U.selectAll("defs *").remove(),U.selectAll("defs").each(function(it){var J=z.edge(it);(0,H[J.arrowhead])(w.select(this),J.arrowheadId,J,"arrowhead")}),U}},83773:(b,I,p)=>{"use strict";var u=p(46224),x=p(33921),y=p(62437),w=p(29111);b.exports=function(_,o,C){var A,O=o.nodes().filter(function(M){return!y.isSubgraph(o,M)}),D=_.selectAll("g.node").data(O,function(M){return M}).classed("update",!0);return D.exit().remove(),D.enter().append("g").attr("class","node").style("opacity",0),(D=_.selectAll("g.node")).each(function(M){var z=o.node(M),H=w.select(this);y.applyClass(H,z.class,(H.classed("update")?"update ":"")+"node"),H.select("g.label").remove();var st=H.append("g").attr("class","label"),et=x(st,z),U=C[z.shape],it=u.pick(et.node().getBBox(),"width","height");z.elem=this,z.id&&H.attr("id",z.id),z.labelId&&st.attr("id",z.labelId),u.has(z,"width")&&(it.width=z.width),u.has(z,"height")&&(it.height=z.height),it.width+=z.paddingLeft+z.paddingRight,it.height+=z.paddingTop+z.paddingBottom,st.attr("transform","translate("+(z.paddingLeft-z.paddingRight)/2+","+(z.paddingTop-z.paddingBottom)/2+")");var J=w.select(this);J.select(".label-container").remove();var rt=U(J,it,z).classed("label-container",!0);y.applyStyle(rt,z.style);var K=rt.node().getBBox();z.width=K.width,z.height=K.height}),A=D.exit?D.exit():D.selectAll(null),y.applyTransition(A,o).style("opacity",0).remove(),D}},29111:(b,I,p)=>{var u;if(!u)try{u=p(79287)}catch(x){}u||(u=window.d3),b.exports=u},55467:(b,I,p)=>{var u;try{u=p(20218)}catch(x){}u||(u=window.dagre),b.exports=u},68460:(b,I,p)=>{var u;try{u=p(30)}catch(x){}u||(u=window.graphlib),b.exports=u},30686:(b,I,p)=>{b.exports={node:p(78628),circle:p(93667),ellipse:p(70285),polygon:p(96770),rect:p(42342)}},93667:(b,I,p)=>{var u=p(70285);b.exports=function(y,w,g){return u(y,w,w,g)}},70285:b=>{b.exports=function(p,u,x,y){var w=p.x,g=p.y,_=w-y.x,o=g-y.y,C=Math.sqrt(u*u*o*o+x*x*_*_),O=Math.abs(u*x*_/C);y.x<w&&(O=-O);var D=Math.abs(u*x*o/C);return y.y<g&&(D=-D),{x:w+O,y:g+D}}},45280:b=>{function p(u,x){return u*x>0}b.exports=function(u,x,y,w){var g,_,o,C,O,D,A,M,z,H,st,et,U;if(H=(g=x.y-u.y)*w.x+(o=u.x-x.x)*w.y+(O=x.x*u.y-u.x*x.y),!(0!==(z=g*y.x+o*y.y+O)&&0!==H&&p(z,H)||(M=(_=w.y-y.y)*x.x+(C=y.x-w.x)*x.y+(D=w.x*y.y-y.x*w.y),0!==(A=_*u.x+C*u.y+D)&&0!==M&&p(A,M)||0==(st=g*C-_*o))))return et=Math.abs(st/2),{x:(U=o*D-C*O)<0?(U-et)/st:(U+et)/st,y:(U=_*O-g*D)<0?(U-et)/st:(U+et)/st}}},78628:b=>{b.exports=function(p,u){return p.intersect(u)}},96770:(b,I,p)=>{var u=p(45280);b.exports=function(y,w,g){var _=y.x,o=y.y,C=[],O=Number.POSITIVE_INFINITY,D=Number.POSITIVE_INFINITY;w.forEach(function(U){O=Math.min(O,U.x),D=Math.min(D,U.y)});for(var A=_-y.width/2-O,M=o-y.height/2-D,z=0;z<w.length;z++){var H=w[z],st=w[z<w.length-1?z+1:0],et=u(y,g,{x:A+H.x,y:M+H.y},{x:A+st.x,y:M+st.y});et&&C.push(et)}return C.length?(C.length>1&&C.sort(function(U,it){var J=U.x-g.x,rt=U.y-g.y,K=Math.sqrt(J*J+rt*rt),at=it.x-g.x,pt=it.y-g.y,dt=Math.sqrt(at*at+pt*pt);return K<dt?-1:K===dt?0:1}),C[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",y),y)}},42342:b=>{b.exports=function(p,u){var C,O,x=p.x,y=p.y,w=u.x-x,g=u.y-y,_=p.width/2,o=p.height/2;return Math.abs(g)*_>Math.abs(w)*o?(g<0&&(o=-o),C=0===g?0:o*w/g,O=o):(w<0&&(_=-_),C=_,O=0===w?0:_*g/w),{x:x+C,y:y+O}}},8288:(b,I,p)=>{var u=p(62437);b.exports=function(y,w){var g=y.append("foreignObject").attr("width","100000"),_=g.append("xhtml:div");_.attr("xmlns","http://www.w3.org/1999/xhtml");var o=w.label;switch(typeof o){case"function":_.insert(o);break;case"object":_.insert(function(){return o});break;default:_.html(o)}u.applyStyle(_,w.labelStyle),_.style("display","inline-block"),_.style("white-space","nowrap");var C=_.node().getBoundingClientRect();return g.attr("width",C.width).attr("height",C.height),g}},33921:(b,I,p)=>{var u=p(64728),x=p(8288),y=p(86238);b.exports=function(g,_,o){var C=_.label,O=g.append("g");"svg"===_.labelType?y(O,_):"string"!=typeof C||"html"===_.labelType?x(O,_):u(O,_);var A,D=O.node().getBBox();switch(o){case"top":A=-_.height/2;break;case"bottom":A=_.height/2-D.height;break;default:A=-D.height/2}return O.attr("transform","translate("+-D.width/2+","+A+")"),O}},86238:(b,I,p)=>{var u=p(62437);b.exports=function(y,w){var g=y;return g.node().appendChild(w.label),u.applyStyle(g,w.labelStyle),g}},64728:(b,I,p)=>{var u=p(62437);b.exports=function(w,g){for(var _=w.append("text"),o=function(w){for(var o,g="",_=!1,C=0;C<w.length;++C)o=w[C],_?(g+="n"===o?"\n":o,_=!1):"\\"===o?_=!0:g+=o;return g}(g.label).split("\n"),C=0;C<o.length;C++)_.append("tspan").attr("xml:space","preserve").attr("dy","1em").attr("x","1").text(o[C]);return u.applyStyle(_,g.labelStyle),_}},46224:(b,I,p)=>{var u;try{u={defaults:p(36726),each:p(33718),isFunction:p(55836),isPlainObject:p(82358),pick:p(31133),has:p(32335),range:p(21221),uniqueId:p(65927)}}catch(x){}u||(u=window._),b.exports=u},6846:(b,I,p)=>{"use strict";var u=p(62437),x=p(29111);b.exports=function(w,g){var _=w.filter(function(){return!x.select(this).classed("update")});function o(C){var O=g.node(C);return"translate("+O.x+","+O.y+")"}_.attr("transform",o),u.applyTransition(w,g).style("opacity",1).attr("transform",o),u.applyTransition(_.selectAll("rect"),g).attr("width",function(C){return g.node(C).width}).attr("height",function(C){return g.node(C).height}).attr("x",function(C){return-g.node(C).width/2}).attr("y",function(C){return-g.node(C).height/2})}},95088:(b,I,p)=>{"use strict";var u=p(62437),x=p(29111),y=p(46224);b.exports=function(g,_){function C(O){var D=_.edge(O);return y.has(D,"x")?"translate("+D.x+","+D.y+")":""}g.filter(function(){return!x.select(this).classed("update")}).attr("transform",C),u.applyTransition(g,_).style("opacity",1).attr("transform",C)}},86272:(b,I,p)=>{"use strict";var u=p(62437),x=p(29111);b.exports=function(w,g){function o(C){var O=g.node(C);return"translate("+O.x+","+O.y+")"}w.filter(function(){return!x.select(this).classed("update")}).attr("transform",o),u.applyTransition(w,g).style("opacity",1).attr("transform",o)}},28626:(b,I,p)=>{var u=p(46224),x=p(29111),y=p(55467).layout;b.exports=function(){var D=p(83773),A=p(6548),M=p(45910),z=p(28905),H=p(86272),st=p(95088),et=p(6846),U=p(97933),it=p(31640),J=function(rt,K){!function(D){D.nodes().forEach(function(A){var M=D.node(A);!u.has(M,"label")&&!D.children(A).length&&(M.label=A),u.has(M,"paddingX")&&u.defaults(M,{paddingLeft:M.paddingX,paddingRight:M.paddingX}),u.has(M,"paddingY")&&u.defaults(M,{paddingTop:M.paddingY,paddingBottom:M.paddingY}),u.has(M,"padding")&&u.defaults(M,{paddingLeft:M.padding,paddingRight:M.padding,paddingTop:M.padding,paddingBottom:M.padding}),u.defaults(M,g),u.each(["paddingLeft","paddingRight","paddingTop","paddingBottom"],function(z){M[z]=Number(M[z])}),u.has(M,"width")&&(M._prevWidth=M.width),u.has(M,"height")&&(M._prevHeight=M.height)}),D.edges().forEach(function(A){var M=D.edge(A);u.has(M,"label")||(M.label=""),u.defaults(M,_)})}(K);var at=O(rt,"output"),pt=O(at,"clusters"),dt=O(at,"edgePaths"),Ct=M(O(at,"edgeLabels"),K),bt=D(O(at,"nodes"),K,U);y(K),H(bt,K),st(Ct,K),z(dt,K,it);var wt=A(pt,K);et(wt,K),function(D){u.each(D.nodes(),function(A){var M=D.node(A);u.has(M,"_prevWidth")?M.width=M._prevWidth:delete M.width,u.has(M,"_prevHeight")?M.height=M._prevHeight:delete M.height,delete M._prevWidth,delete M._prevHeight})}(K)};return J.createNodes=function(rt){return arguments.length?(D=rt,J):D},J.createClusters=function(rt){return arguments.length?(A=rt,J):A},J.createEdgeLabels=function(rt){return arguments.length?(M=rt,J):M},J.createEdgePaths=function(rt){return arguments.length?(z=rt,J):z},J.shapes=function(rt){return arguments.length?(U=rt,J):U},J.arrows=function(rt){return arguments.length?(it=rt,J):it},J};var g={paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rx:0,ry:0,shape:"rect"},_={arrowhead:"normal",curve:x.curveLinear};function O(D,A){var M=D.select("g."+A);return M.empty()&&(M=D.append("g").attr("class",A)),M}},97933:(b,I,p)=>{"use strict";var u=p(42342),x=p(70285),y=p(93667),w=p(96770);b.exports={rect:function(O,D,A){var M=O.insert("rect",":first-child").attr("rx",A.rx).attr("ry",A.ry).attr("x",-D.width/2).attr("y",-D.height/2).attr("width",D.width).attr("height",D.height);return A.intersect=function(z){return u(A,z)},M},ellipse:function(O,D,A){var M=D.width/2,z=D.height/2,H=O.insert("ellipse",":first-child").attr("x",-D.width/2).attr("y",-D.height/2).attr("rx",M).attr("ry",z);return A.intersect=function(st){return x(A,M,z,st)},H},circle:function(O,D,A){var M=Math.max(D.width,D.height)/2,z=O.insert("circle",":first-child").attr("x",-D.width/2).attr("y",-D.height/2).attr("r",M);return A.intersect=function(H){return y(A,M,H)},z},diamond:function(O,D,A){var M=D.width*Math.SQRT2/2,z=D.height*Math.SQRT2/2,H=[{x:0,y:-z},{x:-M,y:0},{x:0,y:z},{x:M,y:0}],st=O.insert("polygon",":first-child").attr("points",H.map(function(et){return et.x+","+et.y}).join(" "));return A.intersect=function(et){return w(A,H,et)},st}}},62437:(b,I,p)=>{var u=p(46224);b.exports={isSubgraph:function(O,D){return!!O.children(D).length},edgeToId:function(O){return g(O.v)+":"+g(O.w)+":"+g(O.name)},applyStyle:function(O,D){D&&O.attr("style",D)},applyClass:function(O,D,A){D&&O.attr("class",D).attr("class",A+" "+O.attr("class"))},applyTransition:function(O,D){var A=D.graph();if(u.isPlainObject(A)){var M=A.transition;if(u.isFunction(M))return M(O)}return O}};var w=/:/g;function g(O){return O?String(O).replace(w,"\\:"):""}},75059:b=>{b.exports="0.6.4"},20218:(b,I,p)=>{b.exports={graphlib:p(77759),layout:p(98090),debug:p(71544),util:{time:p(71824).time,notime:p(71824).notime},version:p(56854)}},66467:(b,I,p)=>{"use strict";var u=p(32712),x=p(43199);b.exports={run:function(_){var O,o="greedy"===_.graph().acyclicer?x(_,(O=_,function(D){return O.edge(D).weight})):function(_){var o=[],C={},O={};return u.forEach(_.nodes(),function D(A){u.has(O,A)||(O[A]=!0,C[A]=!0,u.forEach(_.outEdges(A),function(M){u.has(C,M.w)?o.push(M):D(M.w)}),delete C[A])}),o}(_);u.forEach(o,function(O){var D=_.edge(O);_.removeEdge(O),D.forwardName=O.name,D.reversed=!0,_.setEdge(O.w,O.v,D,u.uniqueId("rev"))})},undo:function(_){u.forEach(_.edges(),function(o){var C=_.edge(o);if(C.reversed){_.removeEdge(o);var O=C.forwardName;delete C.reversed,delete C.forwardName,_.setEdge(o.w,o.v,C,O)}})}}},89752:(b,I,p)=>{var u=p(32712),x=p(71824);function w(g,_,o,C,O,D){var M=O[_][D-1],z=x.addDummyNode(g,"border",{width:0,height:0,rank:D,borderType:_},o);O[_][D]=z,g.setParent(z,C),M&&g.setEdge(M,z,{weight:1})}b.exports=function(g){u.forEach(g.children(),function _(o){var C=g.children(o),O=g.node(o);if(C.length&&u.forEach(C,_),u.has(O,"minRank")){O.borderLeft=[],O.borderRight=[];for(var D=O.minRank,A=O.maxRank+1;D<A;++D)w(g,"borderLeft","_bl",o,O,D),w(g,"borderRight","_br",o,O,D)}})}},16232:(b,I,p)=>{"use strict";var u=p(32712);function w(D){u.forEach(D.nodes(),function(A){g(D.node(A))}),u.forEach(D.edges(),function(A){g(D.edge(A))})}function g(D){var A=D.width;D.width=D.height,D.height=A}function o(D){D.y=-D.y}function O(D){var A=D.x;D.x=D.y,D.y=A}b.exports={adjust:function(D){var A=D.graph().rankdir.toLowerCase();("lr"===A||"rl"===A)&&w(D)},undo:function(D){var A=D.graph().rankdir.toLowerCase();("bt"===A||"rl"===A)&&function(D){u.forEach(D.nodes(),function(A){o(D.node(A))}),u.forEach(D.edges(),function(A){var M=D.edge(A);u.forEach(M.points,o),u.has(M,"y")&&o(M)})}(D),("lr"===A||"rl"===A)&&(function(D){u.forEach(D.nodes(),function(A){O(D.node(A))}),u.forEach(D.edges(),function(A){var M=D.edge(A);u.forEach(M.points,O),u.has(M,"x")&&O(M)})}(D),w(D))}}},48190:b=>{function I(){var x={};x._next=x._prev=x,this._sentinel=x}function p(x){x._prev._next=x._next,x._next._prev=x._prev,delete x._next,delete x._prev}function u(x,y){if("_next"!==x&&"_prev"!==x)return y}b.exports=I,I.prototype.dequeue=function(){var x=this._sentinel,y=x._prev;if(y!==x)return p(y),y},I.prototype.enqueue=function(x){var y=this._sentinel;x._prev&&x._next&&p(x),x._next=y._next,y._next._prev=x,y._next=x,x._prev=y},I.prototype.toString=function(){for(var x=[],y=this._sentinel,w=y._prev;w!==y;)x.push(JSON.stringify(w,u)),w=w._prev;return"["+x.join(", ")+"]"}},71544:(b,I,p)=>{var u=p(32712),x=p(71824),y=p(77759).Graph;b.exports={debugOrdering:function(g){var _=x.buildLayerMatrix(g),o=new y({compound:!0,multigraph:!0}).setGraph({});return u.forEach(g.nodes(),function(C){o.setNode(C,{label:C}),o.setParent(C,"layer"+g.node(C).rank)}),u.forEach(g.edges(),function(C){o.setEdge(C.v,C.w,{},C.name)}),u.forEach(_,function(C,O){o.setNode("layer"+O,{rank:"same"}),u.reduce(C,function(A,M){return o.setEdge(A,M,{style:"invis"}),M})}),o}}},77759:(b,I,p)=>{var u;try{u=p(30)}catch(x){}u||(u=window.graphlib),b.exports=u},43199:(b,I,p)=>{var u=p(32712),x=p(77759).Graph,y=p(48190);b.exports=function(D,A){if(D.nodeCount()<=1)return[];var M=function(D,A){var M=new x,z=0,H=0;u.forEach(D.nodes(),function(U){M.setNode(U,{v:U,in:0,out:0})}),u.forEach(D.edges(),function(U){var it=M.edge(U.v,U.w)||0,J=A(U);M.setEdge(U.v,U.w,it+J),H=Math.max(H,M.node(U.v).out+=J),z=Math.max(z,M.node(U.w).in+=J)});var st=u.range(H+z+3).map(function(){return new y}),et=z+1;return u.forEach(M.nodes(),function(U){O(st,et,M.node(U))}),{graph:M,buckets:st,zeroIdx:et}}(D,A||w),z=function(D,A,M){for(var et,z=[],H=A[A.length-1],st=A[0];D.nodeCount();){for(;et=st.dequeue();)o(D,A,M,et);for(;et=H.dequeue();)o(D,A,M,et);if(D.nodeCount())for(var U=A.length-2;U>0;--U)if(et=A[U].dequeue()){z=z.concat(o(D,A,M,et,!0));break}}return z}(M.graph,M.buckets,M.zeroIdx);return u.flatten(u.map(z,function(H){return D.outEdges(H.v,H.w)}),!0)};var w=u.constant(1);function o(D,A,M,z,H){var st=H?[]:void 0;return u.forEach(D.inEdges(z.v),function(et){var U=D.edge(et),it=D.node(et.v);H&&st.push({v:et.v,w:et.w}),it.out-=U,O(A,M,it)}),u.forEach(D.outEdges(z.v),function(et){var U=D.edge(et),J=D.node(et.w);J.in-=U,O(A,M,J)}),D.removeNode(z.v),st}function O(D,A,M){M.out?M.in?D[M.out-M.in+A].enqueue(M):D[D.length-1].enqueue(M):D[0].enqueue(M)}},98090:(b,I,p)=>{"use strict";var u=p(32712),x=p(66467),y=p(68284),w=p(42445),g=p(71824).normalizeRanks,_=p(62375),o=p(71824).removeEmptyRanks,C=p(25970),O=p(89752),D=p(16232),A=p(91989),M=p(46685),z=p(71824),H=p(77759).Graph;b.exports=function(ut,gt){var Mt=gt&&gt.debugTiming?z.time:z.notime;Mt("layout",function(){var It=Mt("  buildLayoutGraph",function(){return function(ut){var gt=new H({multigraph:!0,compound:!0}),Mt=Qt(ut.graph());return gt.setGraph(u.merge({},J,Zt(Mt,it),u.pick(Mt,rt))),u.forEach(ut.nodes(),function(It){var Xt=Qt(ut.node(It));gt.setNode(It,u.defaults(Zt(Xt,K),at)),gt.setParent(It,ut.parent(It))}),u.forEach(ut.edges(),function(It){var Xt=Qt(ut.edge(It));gt.setEdge(It,u.merge({},dt,Zt(Xt,pt),u.pick(Xt,Ct)))}),gt}(ut)});Mt("  runLayout",function(){!function(ut,gt){gt("    makeSpaceForEdgeLabels",function(){!function(ut){var gt=ut.graph();gt.ranksep/=2,u.forEach(ut.edges(),function(Mt){var It=ut.edge(Mt);It.minlen*=2,"c"!==It.labelpos.toLowerCase()&&("TB"===gt.rankdir||"BT"===gt.rankdir?It.width+=It.labeloffset:It.height+=It.labeloffset)})}(ut)}),gt("    removeSelfEdges",function(){!function(ut){u.forEach(ut.edges(),function(gt){if(gt.v===gt.w){var Mt=ut.node(gt.v);Mt.selfEdges||(Mt.selfEdges=[]),Mt.selfEdges.push({e:gt,label:ut.edge(gt)}),ut.removeEdge(gt)}})}(ut)}),gt("    acyclic",function(){x.run(ut)}),gt("    nestingGraph.run",function(){C.run(ut)}),gt("    rank",function(){w(z.asNonCompoundGraph(ut))}),gt("    injectEdgeLabelProxies",function(){!function(ut){u.forEach(ut.edges(),function(gt){var Mt=ut.edge(gt);if(Mt.width&&Mt.height){var It=ut.node(gt.v),Xt=ut.node(gt.w);z.addDummyNode(ut,"edge-proxy",{rank:(Xt.rank-It.rank)/2+It.rank,e:gt},"_ep")}})}(ut)}),gt("    removeEmptyRanks",function(){o(ut)}),gt("    nestingGraph.cleanup",function(){C.cleanup(ut)}),gt("    normalizeRanks",function(){g(ut)}),gt("    assignRankMinMax",function(){!function(ut){var gt=0;u.forEach(ut.nodes(),function(Mt){var It=ut.node(Mt);It.borderTop&&(It.minRank=ut.node(It.borderTop).rank,It.maxRank=ut.node(It.borderBottom).rank,gt=u.max(gt,It.maxRank))}),ut.graph().maxRank=gt}(ut)}),gt("    removeEdgeLabelProxies",function(){!function(ut){u.forEach(ut.nodes(),function(gt){var Mt=ut.node(gt);"edge-proxy"===Mt.dummy&&(ut.edge(Mt.e).labelRank=Mt.rank,ut.removeNode(gt))})}(ut)}),gt("    normalize.run",function(){y.run(ut)}),gt("    parentDummyChains",function(){_(ut)}),gt("    addBorderSegments",function(){O(ut)}),gt("    order",function(){A(ut)}),gt("    insertSelfEdges",function(){!function(ut){var gt=z.buildLayerMatrix(ut);u.forEach(gt,function(Mt){var It=0;u.forEach(Mt,function(Xt,de){var le=ut.node(Xt);le.order=de+It,u.forEach(le.selfEdges,function(fe){z.addDummyNode(ut,"selfedge",{width:fe.label.width,height:fe.label.height,rank:le.rank,order:de+ ++It,e:fe.e,label:fe.label},"_se")}),delete le.selfEdges})})}(ut)}),gt("    adjustCoordinateSystem",function(){D.adjust(ut)}),gt("    position",function(){M(ut)}),gt("    positionSelfEdges",function(){!function(ut){u.forEach(ut.nodes(),function(gt){var Mt=ut.node(gt);if("selfedge"===Mt.dummy){var It=ut.node(Mt.e.v),Xt=It.x+It.width/2,de=It.y,le=Mt.x-Xt,fe=It.height/2;ut.setEdge(Mt.e,Mt.label),ut.removeNode(gt),Mt.label.points=[{x:Xt+2*le/3,y:de-fe},{x:Xt+5*le/6,y:de-fe},{x:Xt+le,y:de},{x:Xt+5*le/6,y:de+fe},{x:Xt+2*le/3,y:de+fe}],Mt.label.x=Mt.x,Mt.label.y=Mt.y}})}(ut)}),gt("    removeBorderNodes",function(){!function(ut){u.forEach(ut.nodes(),function(gt){if(ut.children(gt).length){var Mt=ut.node(gt),It=ut.node(Mt.borderTop),Xt=ut.node(Mt.borderBottom),de=ut.node(u.last(Mt.borderLeft)),le=ut.node(u.last(Mt.borderRight));Mt.width=Math.abs(le.x-de.x),Mt.height=Math.abs(Xt.y-It.y),Mt.x=de.x+Mt.width/2,Mt.y=It.y+Mt.height/2}}),u.forEach(ut.nodes(),function(gt){"border"===ut.node(gt).dummy&&ut.removeNode(gt)})}(ut)}),gt("    normalize.undo",function(){y.undo(ut)}),gt("    fixupEdgeLabelCoords",function(){!function(ut){u.forEach(ut.edges(),function(gt){var Mt=ut.edge(gt);if(u.has(Mt,"x"))switch(("l"===Mt.labelpos||"r"===Mt.labelpos)&&(Mt.width-=Mt.labeloffset),Mt.labelpos){case"l":Mt.x-=Mt.width/2+Mt.labeloffset;break;case"r":Mt.x+=Mt.width/2+Mt.labeloffset}})}(ut)}),gt("    undoCoordinateSystem",function(){D.undo(ut)}),gt("    translateGraph",function(){!function(ut){var gt=Number.POSITIVE_INFINITY,Mt=0,It=Number.POSITIVE_INFINITY,Xt=0,de=ut.graph(),le=de.marginx||0,fe=de.marginy||0;function Xe(Me){var Oe=Me.x,re=Me.y,cn=Me.width,se=Me.height;gt=Math.min(gt,Oe-cn/2),Mt=Math.max(Mt,Oe+cn/2),It=Math.min(It,re-se/2),Xt=Math.max(Xt,re+se/2)}u.forEach(ut.nodes(),function(Me){Xe(ut.node(Me))}),u.forEach(ut.edges(),function(Me){var Oe=ut.edge(Me);u.has(Oe,"x")&&Xe(Oe)}),gt-=le,It-=fe,u.forEach(ut.nodes(),function(Me){var Oe=ut.node(Me);Oe.x-=gt,Oe.y-=It}),u.forEach(ut.edges(),function(Me){var Oe=ut.edge(Me);u.forEach(Oe.points,function(re){re.x-=gt,re.y-=It}),u.has(Oe,"x")&&(Oe.x-=gt),u.has(Oe,"y")&&(Oe.y-=It)}),de.width=Mt-gt+le,de.height=Xt-It+fe}(ut)}),gt("    assignNodeIntersects",function(){!function(ut){u.forEach(ut.edges(),function(gt){var de,le,Mt=ut.edge(gt),It=ut.node(gt.v),Xt=ut.node(gt.w);Mt.points?(de=Mt.points[0],le=Mt.points[Mt.points.length-1]):(Mt.points=[],de=Xt,le=It),Mt.points.unshift(z.intersectRect(It,de)),Mt.points.push(z.intersectRect(Xt,le))})}(ut)}),gt("    reversePoints",function(){!function(ut){u.forEach(ut.edges(),function(gt){var Mt=ut.edge(gt);Mt.reversed&&Mt.points.reverse()})}(ut)}),gt("    acyclic.undo",function(){x.undo(ut)})}(It,Mt)}),Mt("  updateInputGraph",function(){!function(ut,gt){u.forEach(ut.nodes(),function(Mt){var It=ut.node(Mt),Xt=gt.node(Mt);It&&(It.x=Xt.x,It.y=Xt.y,gt.children(Mt).length&&(It.width=Xt.width,It.height=Xt.height))}),u.forEach(ut.edges(),function(Mt){var It=ut.edge(Mt),Xt=gt.edge(Mt);It.points=Xt.points,u.has(Xt,"x")&&(It.x=Xt.x,It.y=Xt.y)}),ut.graph().width=gt.graph().width,ut.graph().height=gt.graph().height}(ut,It)})})};var it=["nodesep","edgesep","ranksep","marginx","marginy"],J={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},rt=["acyclicer","ranker","rankdir","align"],K=["width","height"],at={width:0,height:0},pt=["minlen","weight","width","height","labeloffset"],dt={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Ct=["labelpos"];function Zt(ut,gt){return u.mapValues(u.pick(ut,gt),Number)}function Qt(ut){var gt={};return u.forEach(ut,function(Mt,It){gt[It.toLowerCase()]=Mt}),gt}},32712:(b,I,p)=>{var u;try{u={cloneDeep:p(37524),constant:p(45654),defaults:p(36726),each:p(33718),filter:p(33834),find:p(98990),flatten:p(94694),forEach:p(64733),forIn:p(88577),has:p(32335),isUndefined:p(29569),last:p(27842),map:p(89718),mapValues:p(10182),max:p(31334),merge:p(3912),min:p(41518),minBy:p(5353),now:p(30765),pick:p(31133),range:p(21221),reduce:p(86101),sortBy:p(70280),uniqueId:p(65927),values:p(23348),zipObject:p(31507)}}catch(x){}u||(u=window._),b.exports=u},25970:(b,I,p)=>{var u=p(32712),x=p(71824);function w(C,O,D,A,M,z,H){var st=C.children(H);if(st.length){var et=x.addBorderNode(C,"_bt"),U=x.addBorderNode(C,"_bb"),it=C.node(H);C.setParent(et,H),it.borderTop=et,C.setParent(U,H),it.borderBottom=U,u.forEach(st,function(J){w(C,O,D,A,M,z,J);var rt=C.node(J),K=rt.borderTop?rt.borderTop:J,at=rt.borderBottom?rt.borderBottom:J,pt=rt.borderTop?A:2*A,dt=K!==at?1:M-z[H]+1;C.setEdge(et,K,{weight:pt,minlen:dt,nestingEdge:!0}),C.setEdge(at,U,{weight:pt,minlen:dt,nestingEdge:!0})}),C.parent(H)||C.setEdge(O,et,{weight:0,minlen:M+z[H]})}else H!==O&&C.setEdge(O,H,{weight:0,minlen:D})}b.exports={run:function(C){var O=x.addDummyNode(C,"root",{},"_root"),D=function(C){var O={};function D(A,M){var z=C.children(A);z&&z.length&&u.forEach(z,function(H){D(H,M+1)}),O[A]=M}return u.forEach(C.children(),function(A){D(A,1)}),O}(C),A=u.max(u.values(D))-1,M=2*A+1;C.graph().nestingRoot=O,u.forEach(C.edges(),function(H){C.edge(H).minlen*=M});var z=function(C){return u.reduce(C.edges(),function(O,D){return O+C.edge(D).weight},0)}(C)+1;u.forEach(C.children(),function(H){w(C,O,M,z,A,D,H)}),C.graph().nodeRankFactor=M},cleanup:function(C){var O=C.graph();C.removeNode(O.nestingRoot),delete O.nestingRoot,u.forEach(C.edges(),function(D){C.edge(D).nestingEdge&&C.removeEdge(D)})}}},68284:(b,I,p)=>{"use strict";var u=p(32712),x=p(71824);b.exports={run:function(_){_.graph().dummyChains=[],u.forEach(_.edges(),function(o){!function(_,o){var C=o.v,O=_.node(C).rank,D=o.w,A=_.node(D).rank,M=o.name,z=_.edge(o),H=z.labelRank;if(A!==O+1){var st,et,U;for(_.removeEdge(o),U=0,++O;O<A;++U,++O)z.points=[],st=x.addDummyNode(_,"edge",et={width:0,height:0,edgeLabel:z,edgeObj:o,rank:O},"_d"),O===H&&(et.width=z.width,et.height=z.height,et.dummy="edge-label",et.labelpos=z.labelpos),_.setEdge(C,st,{weight:z.weight},M),0===U&&_.graph().dummyChains.push(st),C=st;_.setEdge(C,D,{weight:z.weight},M)}}(_,o)})},undo:function(_){u.forEach(_.graph().dummyChains,function(o){var D,C=_.node(o),O=C.edgeLabel;for(_.setEdge(C.edgeObj,O);C.dummy;)D=_.successors(o)[0],_.removeNode(o),O.points.push({x:C.x,y:C.y}),"edge-label"===C.dummy&&(O.x=C.x,O.y=C.y,O.width=C.width,O.height=C.height),C=_.node(o=D)})}}},16600:(b,I,p)=>{var u=p(32712);b.exports=function(y,w,g){var o,_={};u.forEach(g,function(C){for(var D,A,O=y.parent(C);O;){if((D=y.parent(O))?(A=_[D],_[D]=O):(A=o,o=O),A&&A!==O)return void w.setEdge(A,O);O=D}})}},28372:(b,I,p)=>{var u=p(32712);b.exports=function(y,w){return u.map(w,function(g){var _=y.inEdges(g);if(_.length){var o=u.reduce(_,function(C,O){var D=y.edge(O),A=y.node(O.v);return{sum:C.sum+D.weight*A.order,weight:C.weight+D.weight}},{sum:0,weight:0});return{v:g,barycenter:o.sum/o.weight,weight:o.weight}}return{v:g}})}},61273:(b,I,p)=>{var u=p(32712),x=p(77759).Graph;b.exports=function(g,_,o){var C=function(g){for(var _;g.hasNode(_=u.uniqueId("_root")););return _}(g),O=new x({compound:!0}).setGraph({root:C}).setDefaultNodeLabel(function(D){return g.node(D)});return u.forEach(g.nodes(),function(D){var A=g.node(D),M=g.parent(D);(A.rank===_||A.minRank<=_&&_<=A.maxRank)&&(O.setNode(D),O.setParent(D,M||C),u.forEach(g[o](D),function(z){var H=z.v===D?z.w:z.v,st=O.edge(H,D),et=u.isUndefined(st)?0:st.weight;O.setEdge(H,D,{weight:g.edge(z).weight+et})}),u.has(A,"minRank")&&O.setNode(D,{borderLeft:A.borderLeft[_],borderRight:A.borderRight[_]}))}),O}},87021:(b,I,p)=>{"use strict";var u=p(32712);function y(w,g,_){for(var o=u.zipObject(_,u.map(_,function(z,H){return H})),C=u.flatten(u.map(g,function(z){return u.sortBy(u.map(w.outEdges(z),function(H){return{pos:o[H.w],weight:w.edge(H).weight}}),"pos")}),!0),O=1;O<_.length;)O<<=1;var D=2*O-1;O-=1;var A=u.map(new Array(D),function(){return 0}),M=0;return u.forEach(C.forEach(function(z){var H=z.pos+O;A[H]+=z.weight;for(var st=0;H>0;)H%2&&(st+=A[H+1]),A[H=H-1>>1]+=z.weight;M+=z.weight*st})),M}b.exports=function(w,g){for(var _=0,o=1;o<g.length;++o)_+=y(w,g[o-1],g[o]);return _}},91989:(b,I,p)=>{"use strict";var u=p(32712),x=p(4189),y=p(87021),w=p(19939),g=p(61273),_=p(16600),o=p(77759).Graph,C=p(71824);function D(z,H,st){return u.map(H,function(et){return g(z,et,st)})}function A(z,H){var st=new o;u.forEach(z,function(et){var U=et.graph().root,it=w(et,U,st,H);u.forEach(it.vs,function(J,rt){et.node(J).order=rt}),_(et,st,it.vs)})}function M(z,H){u.forEach(H,function(st){u.forEach(st,function(et,U){z.node(et).order=U})})}b.exports=function(z){var H=C.maxRank(z),st=D(z,u.range(1,H+1),"inEdges"),et=D(z,u.range(H-1,-1,-1),"outEdges"),U=x(z);M(z,U);for(var J,it=Number.POSITIVE_INFINITY,rt=0,K=0;K<4;++rt,++K){A(rt%2?st:et,rt%4>=2),U=C.buildLayerMatrix(z);var at=y(z,U);at<it&&(K=0,J=u.cloneDeep(U),it=at)}M(z,J)}},4189:(b,I,p)=>{"use strict";var u=p(32712);b.exports=function(y){var w={},g=u.filter(y.nodes(),function(D){return!y.children(D).length}),_=u.max(u.map(g,function(D){return y.node(D).rank})),o=u.map(u.range(_+1),function(){return[]}),O=u.sortBy(g,function(D){return y.node(D).rank});return u.forEach(O,function C(D){if(!u.has(w,D)){w[D]=!0;var A=y.node(D);o[A.rank].push(D),u.forEach(y.successors(D),C)}}),o}},90965:(b,I,p)=>{"use strict";var u=p(32712);b.exports=function(g,_){var o={};return u.forEach(g,function(O,D){var A=o[O.v]={indegree:0,in:[],out:[],vs:[O.v],i:D};u.isUndefined(O.barycenter)||(A.barycenter=O.barycenter,A.weight=O.weight)}),u.forEach(_.edges(),function(O){var D=o[O.v],A=o[O.w];!u.isUndefined(D)&&!u.isUndefined(A)&&(A.indegree++,D.out.push(o[O.w]))}),function(g){var _=[];function o(D){return function(A){A.merged||(u.isUndefined(A.barycenter)||u.isUndefined(D.barycenter)||A.barycenter>=D.barycenter)&&function(g,_){var o=0,C=0;g.weight&&(o+=g.barycenter*g.weight,C+=g.weight),_.weight&&(o+=_.barycenter*_.weight,C+=_.weight),g.vs=_.vs.concat(g.vs),g.barycenter=o/C,g.weight=C,g.i=Math.min(_.i,g.i),_.merged=!0}(D,A)}}function C(D){return function(A){A.in.push(D),0==--A.indegree&&g.push(A)}}for(;g.length;){var O=g.pop();_.push(O),u.forEach(O.in.reverse(),o(O)),u.forEach(O.out,C(O))}return u.map(u.filter(_,function(D){return!D.merged}),function(D){return u.pick(D,["vs","i","barycenter","weight"])})}(u.filter(o,function(O){return!O.indegree}))}},19939:(b,I,p)=>{var u=p(32712),x=p(28372),y=p(90965),w=p(95291);b.exports=function g(C,O,D,A){var M=C.children(O),z=C.node(O),H=z?z.borderLeft:void 0,st=z?z.borderRight:void 0,et={};H&&(M=u.filter(M,function(at){return at!==H&&at!==st}));var U=x(C,M);u.forEach(U,function(at){if(C.children(at.v).length){var pt=g(C,at.v,D,A);et[at.v]=pt,u.has(pt,"barycenter")&&function(C,O){u.isUndefined(C.barycenter)?(C.barycenter=O.barycenter,C.weight=O.weight):(C.barycenter=(C.barycenter*C.weight+O.barycenter*O.weight)/(C.weight+O.weight),C.weight+=O.weight)}(at,pt)}});var it=y(U,D);!function(C,O){u.forEach(C,function(D){D.vs=u.flatten(D.vs.map(function(A){return O[A]?O[A].vs:A}),!0)})}(it,et);var J=w(it,A);if(H&&(J.vs=u.flatten([H,J.vs,st],!0),C.predecessors(H).length)){var rt=C.node(C.predecessors(H)[0]),K=C.node(C.predecessors(st)[0]);u.has(J,"barycenter")||(J.barycenter=0,J.weight=0),J.barycenter=(J.barycenter*J.weight+rt.order+K.order)/(J.weight+2),J.weight+=2}return J}},95291:(b,I,p)=>{var u=p(32712),x=p(71824);function w(_,o,C){for(var O;o.length&&(O=u.last(o)).i<=C;)o.pop(),_.push(O.vs),C++;return C}b.exports=function(_,o){var C=x.partition(_,function(et){return u.has(et,"barycenter")}),O=C.lhs,D=u.sortBy(C.rhs,function(et){return-et.i}),A=[],M=0,z=0,H=0;O.sort(function(_){return function(o,C){return o.barycenter<C.barycenter?-1:o.barycenter>C.barycenter?1:_?C.i-o.i:o.i-C.i}}(!!o)),H=w(A,D,H),u.forEach(O,function(et){H+=et.vs.length,A.push(et.vs),M+=et.barycenter*et.weight,z+=et.weight,H=w(A,D,H)});var st={vs:u.flatten(A,!0)};return z&&(st.barycenter=M/z,st.weight=z),st}},62375:(b,I,p)=>{var u=p(32712);b.exports=function(g){var _=function(g){var _={},o=0;return u.forEach(g.children(),function C(O){var D=o;u.forEach(g.children(O),C),_[O]={low:D,lim:o++}}),_}(g);u.forEach(g.graph().dummyChains,function(o){for(var C=g.node(o),O=C.edgeObj,D=function(g,_,o,C){var z,H,O=[],D=[],A=Math.min(_[o].low,_[C].low),M=Math.max(_[o].lim,_[C].lim);z=o;do{z=g.parent(z),O.push(z)}while(z&&(_[z].low>A||M>_[z].lim));for(H=z,z=C;(z=g.parent(z))!==H;)D.push(z);return{path:O.concat(D.reverse()),lca:H}}(g,_,O.v,O.w),A=D.path,M=D.lca,z=0,H=A[z],st=!0;o!==O.w;){if(C=g.node(o),st){for(;(H=A[z])!==M&&g.node(H).maxRank<C.rank;)z++;H===M&&(st=!1)}if(!st){for(;z<A.length-1&&g.node(H=A[z+1]).minRank<=C.rank;)z++;H=A[z]}g.setParent(o,H),o=g.successors(o)[0]}})}},1331:(b,I,p)=>{"use strict";var u=p(32712),x=p(77759).Graph,y=p(71824);function w(it,J){var rt={};return u.reduce(J,function(at,pt){var dt=0,Ct=0,bt=at.length,wt=u.last(pt);return u.forEach(pt,function(St,zt){var Lt=function(it,J){if(it.node(J).dummy)return u.find(it.predecessors(J),function(rt){return it.node(rt).dummy})}(it,St),Wt=Lt?it.node(Lt).order:bt;(Lt||St===wt)&&(u.forEach(pt.slice(Ct,zt+1),function(ee){u.forEach(it.predecessors(ee),function(ae){var me=it.node(ae),_e=me.order;(_e<dt||Wt<_e)&&(!me.dummy||!it.node(ee).dummy)&&o(rt,ae,ee)})}),Ct=zt+1,dt=Wt)}),pt}),rt}function g(it,J){var rt={};function K(pt,dt,Ct,bt,wt){var St;u.forEach(u.range(dt,Ct),function(zt){it.node(St=pt[zt]).dummy&&u.forEach(it.predecessors(St),function(Lt){var Wt=it.node(Lt);Wt.dummy&&(Wt.order<bt||Wt.order>wt)&&o(rt,Lt,St)})})}return u.reduce(J,function(pt,dt){var bt,Ct=-1,wt=0;return u.forEach(dt,function(St,zt){if("border"===it.node(St).dummy){var Lt=it.predecessors(St);Lt.length&&(bt=it.node(Lt[0]).order,K(dt,wt,zt,Ct,bt),wt=zt,Ct=bt)}K(dt,wt,dt.length,bt,pt.length)}),dt}),rt}function o(it,J,rt){if(J>rt){var K=J;J=rt,rt=K}var at=it[J];at||(it[J]=at={}),at[rt]=!0}function C(it,J,rt){if(J>rt){var K=J;J=rt,rt=K}return u.has(it[J],rt)}function O(it,J,rt,K){var at={},pt={},dt={};return u.forEach(J,function(Ct){u.forEach(Ct,function(bt,wt){at[bt]=bt,pt[bt]=bt,dt[bt]=wt})}),u.forEach(J,function(Ct){var bt=-1;u.forEach(Ct,function(wt){var St=K(wt);if(St.length)for(var zt=((St=u.sortBy(St,function(ae){return dt[ae]})).length-1)/2,Lt=Math.floor(zt),Wt=Math.ceil(zt);Lt<=Wt;++Lt){var ee=St[Lt];pt[wt]===wt&&bt<dt[ee]&&!C(rt,wt,ee)&&(pt[ee]=wt,pt[wt]=at[wt]=at[ee],bt=dt[ee])}})}),{root:at,align:pt}}function D(it,J,rt,K,at){var pt={},dt=function(it,J,rt,K){var at=new x,pt=it.graph(),dt=function(it,J,rt){return function(K,at,pt){var wt,dt=K.node(at),Ct=K.node(pt),bt=0;if(bt+=dt.width/2,u.has(dt,"labelpos"))switch(dt.labelpos.toLowerCase()){case"l":wt=-dt.width/2;break;case"r":wt=dt.width/2}if(wt&&(bt+=rt?wt:-wt),wt=0,bt+=(dt.dummy?J:it)/2,bt+=(Ct.dummy?J:it)/2,bt+=Ct.width/2,u.has(Ct,"labelpos"))switch(Ct.labelpos.toLowerCase()){case"l":wt=Ct.width/2;break;case"r":wt=-Ct.width/2}return wt&&(bt+=rt?wt:-wt),wt=0,bt}}(pt.nodesep,pt.edgesep,K);return u.forEach(J,function(Ct){var bt;u.forEach(Ct,function(wt){var St=rt[wt];if(at.setNode(St),bt){var zt=rt[bt],Lt=at.edge(zt,St);at.setEdge(zt,St,Math.max(dt(it,wt,bt),Lt||0))}bt=wt})}),at}(it,J,rt,at),Ct=at?"borderLeft":"borderRight";function bt(zt,Lt){for(var Wt=dt.nodes(),ee=Wt.pop(),ae={};ee;)ae[ee]?zt(ee):(ae[ee]=!0,Wt.push(ee),Wt=Wt.concat(Lt(ee))),ee=Wt.pop()}return bt(function(zt){pt[zt]=dt.inEdges(zt).reduce(function(Lt,Wt){return Math.max(Lt,pt[Wt.v]+dt.edge(Wt))},0)},dt.predecessors.bind(dt)),bt(function(zt){var Lt=dt.outEdges(zt).reduce(function(ee,ae){return Math.min(ee,pt[ae.w]-dt.edge(ae))},Number.POSITIVE_INFINITY),Wt=it.node(zt);Lt!==Number.POSITIVE_INFINITY&&Wt.borderType!==Ct&&(pt[zt]=Math.max(pt[zt],Lt))},dt.successors.bind(dt)),u.forEach(K,function(zt){pt[zt]=pt[rt[zt]]}),pt}function M(it,J){return u.minBy(u.values(J),function(rt){var K=Number.NEGATIVE_INFINITY,at=Number.POSITIVE_INFINITY;return u.forIn(rt,function(pt,dt){var Ct=function(it,J){return it.node(J).width}(it,dt)/2;K=Math.max(pt+Ct,K),at=Math.min(pt-Ct,at)}),K-at})}function z(it,J){var rt=u.values(J),K=u.min(rt),at=u.max(rt);u.forEach(["u","d"],function(pt){u.forEach(["l","r"],function(dt){var wt,Ct=pt+dt,bt=it[Ct];if(bt!==J){var St=u.values(bt);(wt="l"===dt?K-u.min(St):at-u.max(St))&&(it[Ct]=u.mapValues(bt,function(zt){return zt+wt}))}})})}function H(it,J){return u.mapValues(it.ul,function(rt,K){if(J)return it[J.toLowerCase()][K];var at=u.sortBy(u.map(it,K));return(at[1]+at[2])/2})}b.exports={positionX:function(it){var at,J=y.buildLayerMatrix(it),rt=u.merge(w(it,J),g(it,J)),K={};u.forEach(["u","d"],function(dt){at="u"===dt?J:u.values(J).reverse(),u.forEach(["l","r"],function(Ct){"r"===Ct&&(at=u.map(at,function(zt){return u.values(zt).reverse()}));var bt=("u"===dt?it.predecessors:it.successors).bind(it),wt=O(0,at,rt,bt),St=D(it,at,wt.root,wt.align,"r"===Ct);"r"===Ct&&(St=u.mapValues(St,function(zt){return-zt})),K[dt+Ct]=St})});var pt=M(it,K);return z(K,pt),H(K,it.graph().align)},findType1Conflicts:w,findType2Conflicts:g,addConflict:o,hasConflict:C,verticalAlignment:O,horizontalCompaction:D,alignCoordinates:z,findSmallestWidthAlignment:M,balance:H}},46685:(b,I,p)=>{"use strict";var u=p(32712),x=p(71824),y=p(1331).positionX;b.exports=function(_){(function(_){var o=x.buildLayerMatrix(_),C=_.graph().ranksep,O=0;u.forEach(o,function(D){var A=u.max(u.map(D,function(M){return _.node(M).height}));u.forEach(D,function(M){_.node(M).y=O+A/2}),O+=A+C})})(_=x.asNonCompoundGraph(_)),u.forEach(y(_),function(o,C){_.node(C).x=o})}},25936:(b,I,p)=>{"use strict";var u=p(32712),x=p(77759).Graph,y=p(21618).slack;function g(C,O){return u.forEach(C.nodes(),function D(A){u.forEach(O.nodeEdges(A),function(M){var z=M.v,H=A===z?M.w:z;!C.hasNode(H)&&!y(O,M)&&(C.setNode(H,{}),C.setEdge(A,H,{}),D(H))})}),C.nodeCount()}function _(C,O){return u.minBy(O.edges(),function(D){if(C.hasNode(D.v)!==C.hasNode(D.w))return y(O,D)})}function o(C,O,D){u.forEach(C.nodes(),function(A){O.node(A).rank+=D})}b.exports=function(C){var M,z,O=new x({directed:!1}),D=C.nodes()[0],A=C.nodeCount();for(O.setNode(D,{});g(O,C)<A;)M=_(O,C),z=O.hasNode(M.v)?y(C,M):-y(C,M),o(O,C,z);return O}},42445:(b,I,p)=>{"use strict";var x=p(21618).longestPath,y=p(25936),w=p(61844);b.exports=function(O){switch(O.graph().ranker){case"network-simplex":default:!function(O){w(O)}(O);break;case"tight-tree":!function(O){x(O),y(O)}(O);break;case"longest-path":_(O)}};var _=x},61844:(b,I,p)=>{"use strict";var u=p(32712),x=p(25936),y=p(21618).slack,w=p(21618).longestPath,g=p(77759).alg.preorder,_=p(77759).alg.postorder,o=p(71824).simplify;function C(rt){rt=o(rt),w(rt);var at,K=x(rt);for(M(K),O(K,rt);at=H(K);)et(K,rt,at,st(K,rt,at))}function O(rt,K){var at=_(rt,rt.nodes());at=at.slice(0,at.length-1),u.forEach(at,function(pt){!function(rt,K,at){var pt=rt.node(at);rt.edge(at,pt.parent).cutvalue=A(rt,K,at)}(rt,K,pt)})}function A(rt,K,at){var dt=rt.node(at).parent,Ct=!0,bt=K.edge(at,dt),wt=0;return bt||(Ct=!1,bt=K.edge(dt,at)),wt=bt.weight,u.forEach(K.nodeEdges(at),function(St){var zt=St.v===at,Lt=zt?St.w:St.v;if(Lt!==dt){var Wt=zt===Ct,ee=K.edge(St).weight;if(wt+=Wt?ee:-ee,function(rt,K,at){return rt.hasEdge(K,at)}(rt,at,Lt)){var ae=rt.edge(at,Lt).cutvalue;wt+=Wt?-ae:ae}}}),wt}function M(rt,K){arguments.length<2&&(K=rt.nodes()[0]),z(rt,{},1,K)}function z(rt,K,at,pt,dt){var Ct=at,bt=rt.node(pt);return K[pt]=!0,u.forEach(rt.neighbors(pt),function(wt){u.has(K,wt)||(at=z(rt,K,at,wt,pt))}),bt.low=Ct,bt.lim=at++,dt?bt.parent=dt:delete bt.parent,at}function H(rt){return u.find(rt.edges(),function(K){return rt.edge(K).cutvalue<0})}function st(rt,K,at){var pt=at.v,dt=at.w;K.hasEdge(pt,dt)||(pt=at.w,dt=at.v);var Ct=rt.node(pt),bt=rt.node(dt),wt=Ct,St=!1;Ct.lim>bt.lim&&(wt=bt,St=!0);var zt=u.filter(K.edges(),function(Lt){return St===J(0,rt.node(Lt.v),wt)&&St!==J(0,rt.node(Lt.w),wt)});return u.minBy(zt,function(Lt){return y(K,Lt)})}function et(rt,K,at,pt){rt.removeEdge(at.v,at.w),rt.setEdge(pt.v,pt.w,{}),M(rt),O(rt,K),function(rt,K){var at=u.find(rt.nodes(),function(dt){return!K.node(dt).parent}),pt=g(rt,at);pt=pt.slice(1),u.forEach(pt,function(dt){var Ct=rt.node(dt).parent,bt=K.edge(dt,Ct),wt=!1;bt||(bt=K.edge(Ct,dt),wt=!0),K.node(dt).rank=K.node(Ct).rank+(wt?bt.minlen:-bt.minlen)})}(rt,K)}function J(rt,K,at){return at.low<=K.lim&&K.lim<=at.lim}b.exports=C,C.initLowLimValues=M,C.initCutValues=O,C.calcCutValue=A,C.leaveEdge=H,C.enterEdge=st,C.exchangeEdges=et},21618:(b,I,p)=>{"use strict";var u=p(32712);b.exports={longestPath:function(w){var g={};u.forEach(w.sources(),function _(o){var C=w.node(o);if(u.has(g,o))return C.rank;g[o]=!0;var O=u.min(u.map(w.outEdges(o),function(D){return _(D.w)-w.edge(D).minlen}));return(O===Number.POSITIVE_INFINITY||null==O)&&(O=0),C.rank=O})},slack:function(w,g){return w.node(g.w).rank-w.node(g.v).rank-w.edge(g).minlen}}},71824:(b,I,p)=>{"use strict";var u=p(32712),x=p(77759).Graph;function y(U,it,J,rt){var K;do{K=u.uniqueId(rt)}while(U.hasNode(K));return J.dummy=it,U.setNode(K,J),K}function z(U){return u.max(u.map(U.nodes(),function(it){var J=U.node(it).rank;if(!u.isUndefined(J))return J}))}b.exports={addDummyNode:y,simplify:function(U){var it=(new x).setGraph(U.graph());return u.forEach(U.nodes(),function(J){it.setNode(J,U.node(J))}),u.forEach(U.edges(),function(J){var rt=it.edge(J.v,J.w)||{weight:0,minlen:1},K=U.edge(J);it.setEdge(J.v,J.w,{weight:rt.weight+K.weight,minlen:Math.max(rt.minlen,K.minlen)})}),it},asNonCompoundGraph:function(U){var it=new x({multigraph:U.isMultigraph()}).setGraph(U.graph());return u.forEach(U.nodes(),function(J){U.children(J).length||it.setNode(J,U.node(J))}),u.forEach(U.edges(),function(J){it.setEdge(J,U.edge(J))}),it},successorWeights:function(U){var it=u.map(U.nodes(),function(J){var rt={};return u.forEach(U.outEdges(J),function(K){rt[K.w]=(rt[K.w]||0)+U.edge(K).weight}),rt});return u.zipObject(U.nodes(),it)},predecessorWeights:function(U){var it=u.map(U.nodes(),function(J){var rt={};return u.forEach(U.inEdges(J),function(K){rt[K.v]=(rt[K.v]||0)+U.edge(K).weight}),rt});return u.zipObject(U.nodes(),it)},intersectRect:function(U,it){var Ct,bt,J=U.x,rt=U.y,K=it.x-J,at=it.y-rt,pt=U.width/2,dt=U.height/2;if(!K&&!at)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(at)*pt>Math.abs(K)*dt?(at<0&&(dt=-dt),Ct=dt*K/at,bt=dt):(K<0&&(pt=-pt),Ct=pt,bt=pt*at/K),{x:J+Ct,y:rt+bt}},buildLayerMatrix:function(U){var it=u.map(u.range(z(U)+1),function(){return[]});return u.forEach(U.nodes(),function(J){var rt=U.node(J),K=rt.rank;u.isUndefined(K)||(it[K][rt.order]=J)}),it},normalizeRanks:function(U){var it=u.min(u.map(U.nodes(),function(J){return U.node(J).rank}));u.forEach(U.nodes(),function(J){var rt=U.node(J);u.has(rt,"rank")&&(rt.rank-=it)})},removeEmptyRanks:function(U){var it=u.min(u.map(U.nodes(),function(at){return U.node(at).rank})),J=[];u.forEach(U.nodes(),function(at){var pt=U.node(at).rank-it;J[pt]||(J[pt]=[]),J[pt].push(at)});var rt=0,K=U.graph().nodeRankFactor;u.forEach(J,function(at,pt){u.isUndefined(at)&&pt%K!=0?--rt:rt&&u.forEach(at,function(dt){U.node(dt).rank+=rt})})},addBorderNode:function(U,it,J,rt){var K={width:0,height:0};return arguments.length>=4&&(K.rank=J,K.order=rt),y(U,"border",K,it)},maxRank:z,partition:function(U,it){var J={lhs:[],rhs:[]};return u.forEach(U,function(rt){it(rt)?J.lhs.push(rt):J.rhs.push(rt)}),J},time:function(U,it){var J=u.now();try{return it()}finally{console.log(U+" time: "+(u.now()-J)+"ms")}},notime:function(U,it){return it()}}},56854:b=>{b.exports="0.8.5"},83697:function(b){!function(I){"use strict";var p=function(){return{escape:function(Zt){return Zt.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:at,mimeType:function(Zt){var Qt=at(Zt).toLowerCase();return function(){var Zt="application/font-woff",Qt="image/jpeg";return{woff:Zt,woff2:Zt,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Qt,jpeg:Qt,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[Qt]||""},dataAsUrl:function(Zt,Qt){return"data:"+Qt+";base64,"+Zt},isDataUrl:function(Zt){return-1!==Zt.search(/^(data:)/)},canvasToBlob:function(Zt){return Zt.toBlob?new Promise(function(Qt){Zt.toBlob(Qt)}):function(Zt){return new Promise(function(Qt){for(var ut=window.atob(Zt.toDataURL().split(",")[1]),gt=ut.length,Mt=new Uint8Array(gt),It=0;It<gt;It++)Mt[It]=ut.charCodeAt(It);Qt(new Blob([Mt],{type:"image/png"}))})}(Zt)},resolveUrl:function(Zt,Qt){var ut=document.implementation.createHTMLDocument(),gt=ut.createElement("base");ut.head.appendChild(gt);var Mt=ut.createElement("a");return ut.body.appendChild(Mt),gt.href=Qt,Mt.href=Zt,Mt.href},getAndEncode:function(Zt){return g.impl.options.cacheBust&&(Zt+=(/\?/.test(Zt)?"&":"?")+(new Date).getTime()),new Promise(function(ut){var Mt,gt=new XMLHttpRequest;if(gt.onreadystatechange=function(){if(4===gt.readyState){if(200!==gt.status)return void(Mt?ut(Mt):le("cannot fetch resource: "+Zt+", status: "+gt.status));var fe=new FileReader;fe.onloadend=function(){var Xe=fe.result.split(/,/)[1];ut(Xe)},fe.readAsDataURL(gt.response)}},gt.ontimeout=function(){Mt?ut(Mt):le("timeout of 30000ms occured while fetching resource: "+Zt)},gt.responseType="blob",gt.timeout=3e4,gt.open("GET",Zt,!0),gt.send(),g.impl.options.imagePlaceholder){var It=g.impl.options.imagePlaceholder.split(/,/);It&&It[1]&&(Mt=It[1])}function le(fe){console.error(fe),ut("")}})},uid:(Zt=0,function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+Zt++}),delay:function(Zt){return function(Qt){return new Promise(function(ut){setTimeout(function(){ut(Qt)},Zt)})}},asArray:function(Zt){for(var Qt=[],ut=Zt.length,gt=0;gt<ut;gt++)Qt.push(Zt[gt]);return Qt},escapeXhtml:function(Zt){return Zt.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(Zt){return new Promise(function(Qt,ut){var gt=new Image;gt.onload=function(){Qt(gt)},gt.onerror=ut,gt.src=Zt})},width:function(Zt){var Qt=Ge(Zt,"border-left-width"),ut=Ge(Zt,"border-right-width");return Zt.scrollWidth+Qt+ut},height:function(Zt){var Qt=Ge(Zt,"border-top-width"),ut=Ge(Zt,"border-bottom-width");return Zt.scrollHeight+Qt+ut}};var Zt;function at(Zt){var Qt=/\.([^\.\/]*?)$/g.exec(Zt);return Qt?Qt[1]:""}function Ge(Zt,Qt){var ut=window.getComputedStyle(Zt).getPropertyValue(Qt);return parseFloat(ut.replace("px",""))}}(),u=function(){var K=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(bt,wt,St){return at(bt)?Promise.resolve(bt).then(pt).then(function(Lt){var Wt=Promise.resolve(bt);return Lt.forEach(function(ee){Wt=Wt.then(function(ae){return dt(ae,ee,wt,St)})}),Wt}):Promise.resolve(bt)},shouldProcess:at,impl:{readUrls:pt,inline:dt}};function at(bt){return-1!==bt.search(K)}function pt(bt){for(var St,wt=[];null!==(St=K.exec(bt));)wt.push(St[1]);return wt.filter(function(zt){return!p.isDataUrl(zt)})}function dt(bt,wt,St,zt){return Promise.resolve(wt).then(function(Wt){return St?p.resolveUrl(Wt,St):Wt}).then(zt||p.getAndEncode).then(function(Wt){return p.dataAsUrl(Wt,p.mimeType(wt))}).then(function(Wt){return bt.replace(function(Wt){return new RegExp("(url\\(['\"]?)("+p.escape(Wt)+")(['\"]?\\))","g")}(wt),"$1"+Wt+"$3")})}}(),x=function(){return{resolveAll:function(){return at(document).then(function(pt){return Promise.all(pt.map(function(dt){return dt.resolve()}))}).then(function(pt){return pt.join("\n")})},impl:{readAll:at}};function at(){return Promise.resolve(p.asArray(document.styleSheets)).then(function(bt){var wt=[];return bt.forEach(function(St){try{p.asArray(St.cssRules||[]).forEach(wt.push.bind(wt))}catch(zt){console.log("Error while reading CSS rules from "+St.href,zt.toString())}}),wt}).then(function(bt){return bt.filter(function(wt){return wt.type===CSSRule.FONT_FACE_RULE}).filter(function(wt){return u.shouldProcess(wt.style.getPropertyValue("src"))})}).then(function(bt){return bt.map(Ct)});function Ct(bt){return{resolve:function(){return u.inlineAll(bt.cssText,(bt.parentStyleSheet||{}).href)},src:function(){return bt.style.getPropertyValue("src")}}}}}(),y=function(){return{inlineAll:function at(pt){return pt instanceof Element?(Ct=pt,bt=Ct.style.getPropertyValue("background"),bt?u.inlineAll(bt).then(function(wt){Ct.style.setProperty("background",wt,Ct.style.getPropertyPriority("background"))}).then(function(){return Ct}):Promise.resolve(Ct)).then(function(){return pt instanceof HTMLImageElement?K(pt).inline():Promise.all(p.asArray(pt.childNodes).map(function(Ct){return at(Ct)}))}):Promise.resolve(pt);var Ct,bt},impl:{newImage:K}};function K(pt){return{inline:function(Ct){return p.isDataUrl(pt.src)?Promise.resolve():Promise.resolve(pt.src).then(Ct||p.getAndEncode).then(function(bt){return p.dataAsUrl(bt,p.mimeType(pt.src))}).then(function(bt){return new Promise(function(wt,St){pt.onload=wt,pt.onerror=St,pt.src=bt})})}}}}(),g={toSvg:_,toPng:function(K,at){return M(K,at||{}).then(function(pt){return pt.toDataURL()})},toJpeg:function(K,at){return M(K,at=at||{}).then(function(pt){return pt.toDataURL("image/jpeg",at.quality||1)})},toBlob:function(K,at){return M(K,at||{}).then(p.canvasToBlob)},toPixelData:function(K,at){return M(K,at||{}).then(function(pt){return pt.getContext("2d").getImageData(0,0,p.width(K),p.height(K)).data})},impl:{fontFaces:x,images:y,util:p,inliner:u,options:{}}};function _(K,at){return function(K){g.impl.options.imagePlaceholder=void 0===K.imagePlaceholder?undefined:K.imagePlaceholder,g.impl.options.cacheBust=void 0!==K.cacheBust&&K.cacheBust}(at=at||{}),Promise.resolve(K).then(function(dt){return z(dt,at.filter,!0)}).then(H).then(st).then(function(dt){return at.bgcolor&&(dt.style.backgroundColor=at.bgcolor),at.width&&(dt.style.width=at.width+"px"),at.height&&(dt.style.height=at.height+"px"),at.style&&Object.keys(at.style).forEach(function(Ct){dt.style[Ct]=at.style[Ct]}),dt}).then(function(dt){return function(K,at,pt){return Promise.resolve(K).then(function(dt){return dt.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(dt)}).then(p.escapeXhtml).then(function(dt){return'<foreignObject x="0" y="0" width="100%" height="100%">'+dt+"</foreignObject>"}).then(function(dt){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+at+'" height="'+pt+'">'+dt+"</svg>"}).then(function(dt){return"data:image/svg+xml;charset=utf-8,"+dt})}(dt,at.width||p.width(K),at.height||p.height(K))})}function M(K,at){return _(K,at).then(p.makeImage).then(p.delay(100)).then(function(dt){var Ct=function(dt){var Ct=document.createElement("canvas");if(Ct.width=at.width||p.width(dt),Ct.height=at.height||p.height(dt),at.bgcolor){var bt=Ct.getContext("2d");bt.fillStyle=at.bgcolor,bt.fillRect(0,0,Ct.width,Ct.height)}return Ct}(K);return Ct.getContext("2d").drawImage(dt,0,0),Ct})}function z(K,at,pt){return pt||!at||at(K)?Promise.resolve(K).then(function(wt){return wt instanceof HTMLCanvasElement?p.makeImage(wt.toDataURL()):wt.cloneNode(!1)}).then(function(wt){return function(wt,St,zt){var ee,ae,me,_e,Lt=wt.childNodes;return 0===Lt.length?Promise.resolve(St):(ee=St,ae=p.asArray(Lt),me=zt,_e=Promise.resolve(),ae.forEach(function(Ze){_e=_e.then(function(){return z(Ze,me)}).then(function(Ee){Ee&&ee.appendChild(Ee)})}),_e).then(function(){return St})}(K,wt,at)}).then(function(wt){return function(wt,St){return St instanceof Element?Promise.resolve().then(function(){me=window.getComputedStyle(wt),_e=St.style,me.cssText?_e.cssText=me.cssText:(Ge=_e,p.asArray(Ee=me).forEach(function(Zt){Ge.setProperty(Zt,Ee.getPropertyValue(Zt),Ee.getPropertyPriority(Zt))}));var me,_e,Ee,Ge}).then(function(){[":before",":after"].forEach(function(me){!function(me){var _e=window.getComputedStyle(wt,me),Ze=_e.getPropertyValue("content");if(""!==Ze&&"none"!==Ze){var Ee=p.uid();St.className=St.className+" "+Ee;var Ge=document.createElement("style");Ge.appendChild(function(Qt,ut,gt){var Mt="."+Qt+":"+ut,It=gt.cssText?Xt(gt):de(gt);return document.createTextNode(Mt+"{"+It+"}");function Xt(le){var fe=le.getPropertyValue("content");return le.cssText+" content: "+fe+";"}function de(le){return p.asArray(le).map(fe).join("; ")+";";function fe(Xe){return Xe+": "+le.getPropertyValue(Xe)+(le.getPropertyPriority(Xe)?" !important":"")}}}(Ee,me,_e)),St.appendChild(Ge)}}(me)})}).then(function(){wt instanceof HTMLTextAreaElement&&(St.innerHTML=wt.value),wt instanceof HTMLInputElement&&St.setAttribute("value",wt.value)}).then(function(){St instanceof SVGElement&&(St.setAttribute("xmlns","http://www.w3.org/2000/svg"),St instanceof SVGRectElement&&["width","height"].forEach(function(ae){var me=St.getAttribute(ae);!me||St.style.setProperty(ae,me)}))}).then(function(){return St}):St}(K,wt)}):Promise.resolve()}function H(K){return x.resolveAll().then(function(at){var pt=document.createElement("style");return K.appendChild(pt),pt.appendChild(document.createTextNode(at)),K})}function st(K){return y.inlineAll(K).then(function(){return K})}b.exports=g}()},30:(b,I,p)=>{var u=p(28057);b.exports={Graph:u.Graph,json:p(51852),alg:p(29761),version:u.version}},59174:(b,I,p)=>{var u=p(14269);b.exports=function(y){var _,w={},g=[];function o(C){u.has(w,C)||(w[C]=!0,_.push(C),u.each(y.successors(C),o),u.each(y.predecessors(C),o))}return u.each(y.nodes(),function(C){_=[],o(C),_.length&&g.push(_)}),g}},79831:(b,I,p)=>{var u=p(14269);function y(w,g,_,o,C,O){u.has(o,g)||(o[g]=!0,_||O.push(g),u.each(C(g),function(D){y(w,D,_,o,C,O)}),_&&O.push(g))}b.exports=function(w,g,_){u.isArray(g)||(g=[g]);var o=(w.isDirected()?w.successors:w.neighbors).bind(w),C=[],O={};return u.each(g,function(D){if(!w.hasNode(D))throw new Error("Graph does not have node: "+D);y(w,D,"post"===_,O,o,C)}),C}},72568:(b,I,p)=>{var u=p(58406),x=p(14269);b.exports=function(w,g,_){return x.transform(w.nodes(),function(o,C){o[C]=u(w,C,g,_)},{})}},58406:(b,I,p)=>{var u=p(14269),x=p(22643);b.exports=function(_,o,C,O){return function(_,o,C,O){var M,z,D={},A=new x,H=function(st){var et=st.v!==M?st.v:st.w,U=D[et],it=C(st),J=z.distance+it;if(it<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+st+" Weight: "+it);J<U.distance&&(U.distance=J,U.predecessor=M,A.decrease(et,J))};for(_.nodes().forEach(function(st){var et=st===o?0:Number.POSITIVE_INFINITY;D[st]={distance:et},A.add(st,et)});A.size()>0&&(M=A.removeMin(),(z=D[M]).distance!==Number.POSITIVE_INFINITY);)O(M).forEach(H);return D}(_,String(o),C||y,O||function(D){return _.outEdges(D)})};var y=u.constant(1)},52777:(b,I,p)=>{var u=p(14269),x=p(20468);b.exports=function(w){return u.filter(x(w),function(g){return g.length>1||1===g.length&&w.hasEdge(g[0],g[0])})}},6926:(b,I,p)=>{var u=p(14269);b.exports=function(g,_,o){return function(g,_,o){var C={},O=g.nodes();return O.forEach(function(D){C[D]={},C[D][D]={distance:0},O.forEach(function(A){D!==A&&(C[D][A]={distance:Number.POSITIVE_INFINITY})}),o(D).forEach(function(A){var M=A.v===D?A.w:A.v,z=_(A);C[D][M]={distance:z,predecessor:D}})}),O.forEach(function(D){var A=C[D];O.forEach(function(M){var z=C[M];O.forEach(function(H){var et=A[H],U=z[H],it=z[D].distance+et.distance;it<U.distance&&(U.distance=it,U.predecessor=et.predecessor)})})}),C}(g,_||x,o||function(C){return g.outEdges(C)})};var x=u.constant(1)},29761:(b,I,p)=>{b.exports={components:p(59174),dijkstra:p(58406),dijkstraAll:p(72568),findCycles:p(52777),floydWarshall:p(6926),isAcyclic:p(99160),postorder:p(2487),preorder:p(22e3),prim:p(60644),tarjan:p(20468),topsort:p(16501)}},99160:(b,I,p)=>{var u=p(16501);b.exports=function(y){try{u(y)}catch(w){if(w instanceof u.CycleException)return!1;throw w}return!0}},2487:(b,I,p)=>{var u=p(79831);b.exports=function(y,w){return u(y,w,"post")}},22e3:(b,I,p)=>{var u=p(79831);b.exports=function(y,w){return u(y,w,"pre")}},60644:(b,I,p)=>{var u=p(14269),x=p(97051),y=p(22643);b.exports=function(g,_){var D,o=new x,C={},O=new y;function A(z){var H=z.v===D?z.w:z.v,st=O.priority(H);if(void 0!==st){var et=_(z);et<st&&(C[H]=D,O.decrease(H,et))}}if(0===g.nodeCount())return o;u.each(g.nodes(),function(z){O.add(z,Number.POSITIVE_INFINITY),o.setNode(z)}),O.decrease(g.nodes()[0],0);for(var M=!1;O.size()>0;){if(D=O.removeMin(),u.has(C,D))o.setEdge(D,C[D]);else{if(M)throw new Error("Input graph is not connected: "+g);M=!0}g.nodeEdges(D).forEach(A)}return o}},20468:(b,I,p)=>{var u=p(14269);b.exports=function(y){var w=0,g=[],_={},o=[];function C(O){var D=_[O]={onStack:!0,lowlink:w,index:w++};if(g.push(O),y.successors(O).forEach(function(z){u.has(_,z)?_[z].onStack&&(D.lowlink=Math.min(D.lowlink,_[z].index)):(C(z),D.lowlink=Math.min(D.lowlink,_[z].lowlink))}),D.lowlink===D.index){var M,A=[];do{M=g.pop(),_[M].onStack=!1,A.push(M)}while(O!==M);o.push(A)}}return y.nodes().forEach(function(O){u.has(_,O)||C(O)}),o}},16501:(b,I,p)=>{var u=p(14269);function x(w){var g={},_={},o=[];if(u.each(w.sinks(),function C(O){if(u.has(_,O))throw new y;u.has(g,O)||(_[O]=!0,g[O]=!0,u.each(w.predecessors(O),C),delete _[O],o.push(O))}),u.size(g)!==w.nodeCount())throw new y;return o}function y(){}b.exports=x,x.CycleException=y,y.prototype=new Error},22643:(b,I,p)=>{var u=p(14269);function x(){this._arr=[],this._keyIndices={}}b.exports=x,x.prototype.size=function(){return this._arr.length},x.prototype.keys=function(){return this._arr.map(function(y){return y.key})},x.prototype.has=function(y){return u.has(this._keyIndices,y)},x.prototype.priority=function(y){var w=this._keyIndices[y];if(void 0!==w)return this._arr[w].priority},x.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},x.prototype.add=function(y,w){var g=this._keyIndices;if(y=String(y),!u.has(g,y)){var _=this._arr,o=_.length;return g[y]=o,_.push({key:y,priority:w}),this._decrease(o),!0}return!1},x.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var y=this._arr.pop();return delete this._keyIndices[y.key],this._heapify(0),y.key},x.prototype.decrease=function(y,w){var g=this._keyIndices[y];if(w>this._arr[g].priority)throw new Error("New priority is greater than current priority. Key: "+y+" Old: "+this._arr[g].priority+" New: "+w);this._arr[g].priority=w,this._decrease(g)},x.prototype._heapify=function(y){var w=this._arr,g=2*y,_=g+1,o=y;g<w.length&&(o=w[g].priority<w[o].priority?g:o,_<w.length&&(o=w[_].priority<w[o].priority?_:o),o!==y&&(this._swap(y,o),this._heapify(o)))},x.prototype._decrease=function(y){for(var _,w=this._arr,g=w[y].priority;0!==y&&!(w[_=y>>1].priority<g);)this._swap(y,_),y=_},x.prototype._swap=function(y,w){var g=this._arr,_=this._keyIndices,o=g[y],C=g[w];g[y]=C,g[w]=o,_[C.key]=y,_[o.key]=w}},97051:(b,I,p)=>{"use strict";var u=p(14269);b.exports=g;var y="\0";function g(A){this._isDirected=!u.has(A,"directed")||A.directed,this._isMultigraph=!!u.has(A,"multigraph")&&A.multigraph,this._isCompound=!!u.has(A,"compound")&&A.compound,this._label=void 0,this._defaultNodeLabelFn=u.constant(void 0),this._defaultEdgeLabelFn=u.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[y]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function _(A,M){A[M]?A[M]++:A[M]=1}function o(A,M){--A[M]||delete A[M]}function C(A,M,z,H){var st=""+M,et=""+z;if(!A&&st>et){var U=st;st=et,et=U}return st+"\x01"+et+"\x01"+(u.isUndefined(H)?"\0":H)}function O(A,M,z,H){var st=""+M,et=""+z;if(!A&&st>et){var U=st;st=et,et=U}var it={v:st,w:et};return H&&(it.name=H),it}function D(A,M){return C(A,M.v,M.w,M.name)}g.prototype._nodeCount=0,g.prototype._edgeCount=0,g.prototype.isDirected=function(){return this._isDirected},g.prototype.isMultigraph=function(){return this._isMultigraph},g.prototype.isCompound=function(){return this._isCompound},g.prototype.setGraph=function(A){return this._label=A,this},g.prototype.graph=function(){return this._label},g.prototype.setDefaultNodeLabel=function(A){return u.isFunction(A)||(A=u.constant(A)),this._defaultNodeLabelFn=A,this},g.prototype.nodeCount=function(){return this._nodeCount},g.prototype.nodes=function(){return u.keys(this._nodes)},g.prototype.sources=function(){var A=this;return u.filter(this.nodes(),function(M){return u.isEmpty(A._in[M])})},g.prototype.sinks=function(){var A=this;return u.filter(this.nodes(),function(M){return u.isEmpty(A._out[M])})},g.prototype.setNodes=function(A,M){var z=arguments,H=this;return u.each(A,function(st){z.length>1?H.setNode(st,M):H.setNode(st)}),this},g.prototype.setNode=function(A,M){return u.has(this._nodes,A)?(arguments.length>1&&(this._nodes[A]=M),this):(this._nodes[A]=arguments.length>1?M:this._defaultNodeLabelFn(A),this._isCompound&&(this._parent[A]=y,this._children[A]={},this._children[y][A]=!0),this._in[A]={},this._preds[A]={},this._out[A]={},this._sucs[A]={},++this._nodeCount,this)},g.prototype.node=function(A){return this._nodes[A]},g.prototype.hasNode=function(A){return u.has(this._nodes,A)},g.prototype.removeNode=function(A){var M=this;if(u.has(this._nodes,A)){var z=function(H){M.removeEdge(M._edgeObjs[H])};delete this._nodes[A],this._isCompound&&(this._removeFromParentsChildList(A),delete this._parent[A],u.each(this.children(A),function(H){M.setParent(H)}),delete this._children[A]),u.each(u.keys(this._in[A]),z),delete this._in[A],delete this._preds[A],u.each(u.keys(this._out[A]),z),delete this._out[A],delete this._sucs[A],--this._nodeCount}return this},g.prototype.setParent=function(A,M){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(u.isUndefined(M))M=y;else{for(var z=M+="";!u.isUndefined(z);z=this.parent(z))if(z===A)throw new Error("Setting "+M+" as parent of "+A+" would create a cycle");this.setNode(M)}return this.setNode(A),this._removeFromParentsChildList(A),this._parent[A]=M,this._children[M][A]=!0,this},g.prototype._removeFromParentsChildList=function(A){delete this._children[this._parent[A]][A]},g.prototype.parent=function(A){if(this._isCompound){var M=this._parent[A];if(M!==y)return M}},g.prototype.children=function(A){if(u.isUndefined(A)&&(A=y),this._isCompound){var M=this._children[A];if(M)return u.keys(M)}else{if(A===y)return this.nodes();if(this.hasNode(A))return[]}},g.prototype.predecessors=function(A){var M=this._preds[A];if(M)return u.keys(M)},g.prototype.successors=function(A){var M=this._sucs[A];if(M)return u.keys(M)},g.prototype.neighbors=function(A){var M=this.predecessors(A);if(M)return u.union(M,this.successors(A))},g.prototype.isLeaf=function(A){return 0===(this.isDirected()?this.successors(A):this.neighbors(A)).length},g.prototype.filterNodes=function(A){var M=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});M.setGraph(this.graph());var z=this;u.each(this._nodes,function(et,U){A(U)&&M.setNode(U,et)}),u.each(this._edgeObjs,function(et){M.hasNode(et.v)&&M.hasNode(et.w)&&M.setEdge(et,z.edge(et))});var H={};function st(et){var U=z.parent(et);return void 0===U||M.hasNode(U)?(H[et]=U,U):U in H?H[U]:st(U)}return this._isCompound&&u.each(M.nodes(),function(et){M.setParent(et,st(et))}),M},g.prototype.setDefaultEdgeLabel=function(A){return u.isFunction(A)||(A=u.constant(A)),this._defaultEdgeLabelFn=A,this},g.prototype.edgeCount=function(){return this._edgeCount},g.prototype.edges=function(){return u.values(this._edgeObjs)},g.prototype.setPath=function(A,M){var z=this,H=arguments;return u.reduce(A,function(st,et){return H.length>1?z.setEdge(st,et,M):z.setEdge(st,et),et}),this},g.prototype.setEdge=function(){var A,M,z,H,st=!1,et=arguments[0];"object"==typeof et&&null!==et&&"v"in et?(A=et.v,M=et.w,z=et.name,2===arguments.length&&(H=arguments[1],st=!0)):(A=et,M=arguments[1],z=arguments[3],arguments.length>2&&(H=arguments[2],st=!0)),A=""+A,M=""+M,u.isUndefined(z)||(z=""+z);var U=C(this._isDirected,A,M,z);if(u.has(this._edgeLabels,U))return st&&(this._edgeLabels[U]=H),this;if(!u.isUndefined(z)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(A),this.setNode(M),this._edgeLabels[U]=st?H:this._defaultEdgeLabelFn(A,M,z);var it=O(this._isDirected,A,M,z);return A=it.v,M=it.w,Object.freeze(it),this._edgeObjs[U]=it,_(this._preds[M],A),_(this._sucs[A],M),this._in[M][U]=it,this._out[A][U]=it,this._edgeCount++,this},g.prototype.edge=function(A,M,z){var H=1===arguments.length?D(this._isDirected,arguments[0]):C(this._isDirected,A,M,z);return this._edgeLabels[H]},g.prototype.hasEdge=function(A,M,z){var H=1===arguments.length?D(this._isDirected,arguments[0]):C(this._isDirected,A,M,z);return u.has(this._edgeLabels,H)},g.prototype.removeEdge=function(A,M,z){var H=1===arguments.length?D(this._isDirected,arguments[0]):C(this._isDirected,A,M,z),st=this._edgeObjs[H];return st&&(A=st.v,M=st.w,delete this._edgeLabels[H],delete this._edgeObjs[H],o(this._preds[M],A),o(this._sucs[A],M),delete this._in[M][H],delete this._out[A][H],this._edgeCount--),this},g.prototype.inEdges=function(A,M){var z=this._in[A];if(z){var H=u.values(z);return M?u.filter(H,function(st){return st.v===M}):H}},g.prototype.outEdges=function(A,M){var z=this._out[A];if(z){var H=u.values(z);return M?u.filter(H,function(st){return st.w===M}):H}},g.prototype.nodeEdges=function(A,M){var z=this.inEdges(A,M);if(z)return z.concat(this.outEdges(A,M))}},28057:(b,I,p)=>{b.exports={Graph:p(97051),version:p(40751)}},51852:(b,I,p)=>{var u=p(14269),x=p(97051);function w(o){return u.map(o.nodes(),function(C){var O=o.node(C),D=o.parent(C),A={v:C};return u.isUndefined(O)||(A.value=O),u.isUndefined(D)||(A.parent=D),A})}function g(o){return u.map(o.edges(),function(C){var O=o.edge(C),D={v:C.v,w:C.w};return u.isUndefined(C.name)||(D.name=C.name),u.isUndefined(O)||(D.value=O),D})}b.exports={write:function(o){var C={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:w(o),edges:g(o)};return u.isUndefined(o.graph())||(C.value=u.clone(o.graph())),C},read:function(o){var C=new x(o.options).setGraph(o.value);return u.each(o.nodes,function(O){C.setNode(O.v,O.value),O.parent&&C.setParent(O.v,O.parent)}),u.each(o.edges,function(O){C.setEdge({v:O.v,w:O.w,name:O.name},O.value)}),C}}},14269:(b,I,p)=>{var u;try{u={clone:p(13742),constant:p(45654),each:p(33718),filter:p(33834),has:p(32335),isArray:p(81690),isEmpty:p(12232),isFunction:p(55836),isUndefined:p(29569),keys:p(59108),map:p(89718),reduce:p(86101),size:p(84951),transform:p(3593),union:p(9728),values:p(23348)}}catch(x){}u||(u=window._),b.exports=u},40751:b=>{b.exports="2.1.8"},81235:(b,I,p)=>{var y=p(4153)(p(27038),"DataView");b.exports=y},41505:(b,I,p)=>{var u=p(59410),x=p(21143),y=p(604),w=p(80584),g=p(7792);function _(o){var C=-1,O=null==o?0:o.length;for(this.clear();++C<O;){var D=o[C];this.set(D[0],D[1])}}_.prototype.clear=u,_.prototype.delete=x,_.prototype.get=y,_.prototype.has=w,_.prototype.set=g,b.exports=_},73545:(b,I,p)=>{var u=p(63391),x=p(68971),y=p(18858),w=p(13913),g=p(68944);function _(o){var C=-1,O=null==o?0:o.length;for(this.clear();++C<O;){var D=o[C];this.set(D[0],D[1])}}_.prototype.clear=u,_.prototype.delete=x,_.prototype.get=y,_.prototype.has=w,_.prototype.set=g,b.exports=_},39046:(b,I,p)=>{var y=p(4153)(p(27038),"Map");b.exports=y},93177:(b,I,p)=>{var u=p(70536),x=p(61502),y=p(94960),w=p(61539),g=p(34138);function _(o){var C=-1,O=null==o?0:o.length;for(this.clear();++C<O;){var D=o[C];this.set(D[0],D[1])}}_.prototype.clear=u,_.prototype.delete=x,_.prototype.get=y,_.prototype.has=w,_.prototype.set=g,b.exports=_},97129:(b,I,p)=>{var y=p(4153)(p(27038),"Promise");b.exports=y},74918:(b,I,p)=>{var y=p(4153)(p(27038),"Set");b.exports=y},48690:(b,I,p)=>{var u=p(93177),x=p(30365),y=p(58235);function w(g){var _=-1,o=null==g?0:g.length;for(this.__data__=new u;++_<o;)this.add(g[_])}w.prototype.add=w.prototype.push=x,w.prototype.has=y,b.exports=w},33667:(b,I,p)=>{var u=p(73545),x=p(18034),y=p(37238),w=p(75887),g=p(81450),_=p(61386);function o(C){var O=this.__data__=new u(C);this.size=O.size}o.prototype.clear=x,o.prototype.delete=y,o.prototype.get=w,o.prototype.has=g,o.prototype.set=_,b.exports=o},57333:(b,I,p)=>{var u=p(27038);b.exports=u.Symbol},96820:(b,I,p)=>{var u=p(27038);b.exports=u.Uint8Array},54203:(b,I,p)=>{var y=p(4153)(p(27038),"WeakMap");b.exports=y},81638:b=>{b.exports=function(p,u,x){switch(x.length){case 0:return p.call(u);case 1:return p.call(u,x[0]);case 2:return p.call(u,x[0],x[1]);case 3:return p.call(u,x[0],x[1],x[2])}return p.apply(u,x)}},4500:b=>{b.exports=function(p,u){for(var x=-1,y=null==p?0:p.length;++x<y&&!1!==u(p[x],x,p););return p}},11375:b=>{b.exports=function(p,u){for(var x=-1,y=null==p?0:p.length,w=0,g=[];++x<y;){var _=p[x];u(_,x,p)&&(g[w++]=_)}return g}},5242:(b,I,p)=>{var u=p(2166);b.exports=function(y,w){return!(null==y||!y.length)&&u(y,w,0)>-1}},80679:b=>{b.exports=function(p,u,x){for(var y=-1,w=null==p?0:p.length;++y<w;)if(x(u,p[y]))return!0;return!1}},71890:(b,I,p)=>{var u=p(48282),x=p(2952),y=p(81690),w=p(84444),g=p(20968),_=p(47679),C=Object.prototype.hasOwnProperty;b.exports=function(D,A){var M=y(D),z=!M&&x(D),H=!M&&!z&&w(D),st=!M&&!z&&!H&&_(D),et=M||z||H||st,U=et?u(D.length,String):[],it=U.length;for(var J in D)(A||C.call(D,J))&&(!et||!("length"==J||H&&("offset"==J||"parent"==J)||st&&("buffer"==J||"byteLength"==J||"byteOffset"==J)||g(J,it)))&&U.push(J);return U}},14992:b=>{b.exports=function(p,u){for(var x=-1,y=null==p?0:p.length,w=Array(y);++x<y;)w[x]=u(p[x],x,p);return w}},94165:b=>{b.exports=function(p,u){for(var x=-1,y=u.length,w=p.length;++x<y;)p[w+x]=u[x];return p}},89731:b=>{b.exports=function(p,u,x,y){var w=-1,g=null==p?0:p.length;for(y&&g&&(x=p[++w]);++w<g;)x=u(x,p[w],w,p);return x}},8141:b=>{b.exports=function(p,u){for(var x=-1,y=null==p?0:p.length;++x<y;)if(u(p[x],x,p))return!0;return!1}},38956:(b,I,p)=>{var x=p(68840)("length");b.exports=x},63530:(b,I,p)=>{var u=p(92007),x=p(71166);b.exports=function(w,g,_){(void 0!==_&&!x(w[g],_)||void 0===_&&!(g in w))&&u(w,g,_)}},23898:(b,I,p)=>{var u=p(92007),x=p(71166),w=Object.prototype.hasOwnProperty;b.exports=function(_,o,C){var O=_[o];(!w.call(_,o)||!x(O,C)||void 0===C&&!(o in _))&&u(_,o,C)}},15758:(b,I,p)=>{var u=p(71166);b.exports=function(y,w){for(var g=y.length;g--;)if(u(y[g][0],w))return g;return-1}},22067:(b,I,p)=>{var u=p(11694),x=p(59108);b.exports=function(w,g){return w&&u(g,x(g),w)}},70882:(b,I,p)=>{var u=p(11694),x=p(42970);b.exports=function(w,g){return w&&u(g,x(g),w)}},92007:(b,I,p)=>{var u=p(20395);b.exports=function(y,w,g){"__proto__"==w&&u?u(y,w,{configurable:!0,enumerable:!0,value:g,writable:!0}):y[w]=g}},77007:(b,I,p)=>{var u=p(33667),x=p(4500),y=p(23898),w=p(22067),g=p(70882),_=p(50694),o=p(53595),C=p(14746),O=p(78857),D=p(58605),A=p(51675),M=p(26663),z=p(62963),H=p(32143),st=p(31563),et=p(81690),U=p(84444),it=p(32e3),J=p(53867),rt=p(48855),K=p(59108),at=p(42970),bt="[object Arguments]",Wt="[object Function]",_e="[object Object]",re={};re[bt]=re["[object Array]"]=re["[object ArrayBuffer]"]=re["[object DataView]"]=re["[object Boolean]"]=re["[object Date]"]=re["[object Float32Array]"]=re["[object Float64Array]"]=re["[object Int8Array]"]=re["[object Int16Array]"]=re["[object Int32Array]"]=re["[object Map]"]=re["[object Number]"]=re[_e]=re["[object RegExp]"]=re["[object Set]"]=re["[object String]"]=re["[object Symbol]"]=re["[object Uint8Array]"]=re["[object Uint8ClampedArray]"]=re["[object Uint16Array]"]=re["[object Uint32Array]"]=!0,re["[object Error]"]=re[Wt]=re["[object WeakMap]"]=!1,b.exports=function cn(se,On,Tn,Qr,Je,en){var ce,Si=1&On,nn=2&On,wn=4&On;if(Tn&&(ce=Je?Tn(se,Qr,Je,en):Tn(se)),void 0!==ce)return ce;if(!J(se))return se;var oi=et(se);if(oi){if(ce=z(se),!Si)return o(se,ce)}else{var bn=M(se),Di=bn==Wt||"[object GeneratorFunction]"==bn;if(U(se))return _(se,Si);if(bn==_e||bn==bt||Di&&!Je){if(ce=nn||Di?{}:st(se),!Si)return nn?O(se,g(ce,se)):C(se,w(ce,se))}else{if(!re[bn])return Je?se:{};ce=H(se,bn,Si)}}en||(en=new u);var ai=en.get(se);if(ai)return ai;en.set(se,ce),rt(se)?se.forEach(function(pn){ce.add(cn(pn,On,Tn,pn,se,en))}):it(se)&&se.forEach(function(pn,dn){ce.set(dn,cn(pn,On,Tn,dn,se,en))});var sr=oi?void 0:(wn?nn?A:D:nn?at:K)(se);return x(sr||se,function(pn,dn){sr&&(pn=se[dn=pn]),y(ce,dn,cn(pn,On,Tn,dn,se,en))}),ce}},60920:(b,I,p)=>{var u=p(53867),x=Object.create,y=function(){function w(){}return function(g){if(!u(g))return{};if(x)return x(g);w.prototype=g;var _=new w;return w.prototype=void 0,_}}();b.exports=y},59026:(b,I,p)=>{var u=p(18022),y=p(99889)(u);b.exports=y},96681:(b,I,p)=>{var u=p(7786);b.exports=function(y,w,g){for(var _=-1,o=y.length;++_<o;){var C=y[_],O=w(C);if(null!=O&&(void 0===D?O==O&&!u(O):g(O,D)))var D=O,A=C}return A}},78711:(b,I,p)=>{var u=p(59026);b.exports=function(y,w){var g=[];return u(y,function(_,o,C){w(_,o,C)&&g.push(_)}),g}},12229:b=>{b.exports=function(p,u,x,y){for(var w=p.length,g=x+(y?1:-1);y?g--:++g<w;)if(u(p[g],g,p))return g;return-1}},56369:(b,I,p)=>{var u=p(94165),x=p(21006);b.exports=function y(w,g,_,o,C){var O=-1,D=w.length;for(_||(_=x),C||(C=[]);++O<D;){var A=w[O];g>0&&_(A)?g>1?y(A,g-1,_,o,C):u(C,A):o||(C[C.length]=A)}return C}},75290:(b,I,p)=>{var x=p(8269)();b.exports=x},18022:(b,I,p)=>{var u=p(75290),x=p(59108);b.exports=function(w,g){return w&&u(w,g,x)}},93436:(b,I,p)=>{var u=p(64667),x=p(82773);b.exports=function(w,g){for(var _=0,o=(g=u(g,w)).length;null!=w&&_<o;)w=w[x(g[_++])];return _&&_==o?w:void 0}},19215:(b,I,p)=>{var u=p(94165),x=p(81690);b.exports=function(w,g,_){var o=g(w);return x(w)?o:u(o,_(w))}},72802:(b,I,p)=>{var u=p(57333),x=p(21613),y=p(81244),_=u?u.toStringTag:void 0;b.exports=function(C){return null==C?void 0===C?"[object Undefined]":"[object Null]":_&&_ in Object(C)?x(C):y(C)}},78354:b=>{b.exports=function(p,u){return p>u}},20731:b=>{var p=Object.prototype.hasOwnProperty;b.exports=function(x,y){return null!=x&&p.call(x,y)}},55333:b=>{b.exports=function(p,u){return null!=p&&u in Object(p)}},2166:(b,I,p)=>{var u=p(12229),x=p(2469),y=p(54299);b.exports=function(g,_,o){return _==_?y(g,_,o):u(g,x,o)}},77090:(b,I,p)=>{var u=p(72802),x=p(27503);b.exports=function(g){return x(g)&&"[object Arguments]"==u(g)}},30696:(b,I,p)=>{var u=p(36863),x=p(27503);b.exports=function y(w,g,_,o,C){return w===g||(null==w||null==g||!x(w)&&!x(g)?w!=w&&g!=g:u(w,g,_,o,y,C))}},36863:(b,I,p)=>{var u=p(33667),x=p(27667),y=p(64630),w=p(70838),g=p(26663),_=p(81690),o=p(84444),C=p(47679),D="[object Arguments]",A="[object Array]",M="[object Object]",H=Object.prototype.hasOwnProperty;b.exports=function(et,U,it,J,rt,K){var at=_(et),pt=_(U),dt=at?A:g(et),Ct=pt?A:g(U),bt=(dt=dt==D?M:dt)==M,wt=(Ct=Ct==D?M:Ct)==M,St=dt==Ct;if(St&&o(et)){if(!o(U))return!1;at=!0,bt=!1}if(St&&!bt)return K||(K=new u),at||C(et)?x(et,U,it,J,rt,K):y(et,U,dt,it,J,rt,K);if(!(1&it)){var zt=bt&&H.call(et,"__wrapped__"),Lt=wt&&H.call(U,"__wrapped__");if(zt||Lt){var Wt=zt?et.value():et,ee=Lt?U.value():U;return K||(K=new u),rt(Wt,ee,it,J,K)}}return!!St&&(K||(K=new u),w(et,U,it,J,rt,K))}},63434:(b,I,p)=>{var u=p(26663),x=p(27503);b.exports=function(g){return x(g)&&"[object Map]"==u(g)}},88783:(b,I,p)=>{var u=p(33667),x=p(30696);b.exports=function(_,o,C,O){var D=C.length,A=D,M=!O;if(null==_)return!A;for(_=Object(_);D--;){var z=C[D];if(M&&z[2]?z[1]!==_[z[0]]:!(z[0]in _))return!1}for(;++D<A;){var H=(z=C[D])[0],st=_[H],et=z[1];if(M&&z[2]){if(void 0===st&&!(H in _))return!1}else{var U=new u;if(O)var it=O(st,et,H,_,o,U);if(!(void 0===it?x(et,st,3,O,U):it))return!1}}return!0}},2469:b=>{b.exports=function(p){return p!=p}},43540:(b,I,p)=>{var u=p(55836),x=p(38466),y=p(53867),w=p(51217),_=/^\[object .+?Constructor\]$/,A=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");b.exports=function(z){return!(!y(z)||x(z))&&(u(z)?A:_).test(w(z))}},67495:(b,I,p)=>{var u=p(26663),x=p(27503);b.exports=function(g){return x(g)&&"[object Set]"==u(g)}},99390:(b,I,p)=>{var u=p(72802),x=p(8613),y=p(27503),St={};St["[object Float32Array]"]=St["[object Float64Array]"]=St["[object Int8Array]"]=St["[object Int16Array]"]=St["[object Int32Array]"]=St["[object Uint8Array]"]=St["[object Uint8ClampedArray]"]=St["[object Uint16Array]"]=St["[object Uint32Array]"]=!0,St["[object Arguments]"]=St["[object Array]"]=St["[object ArrayBuffer]"]=St["[object Boolean]"]=St["[object DataView]"]=St["[object Date]"]=St["[object Error]"]=St["[object Function]"]=St["[object Map]"]=St["[object Number]"]=St["[object Object]"]=St["[object RegExp]"]=St["[object Set]"]=St["[object String]"]=St["[object WeakMap]"]=!1,b.exports=function(Lt){return y(Lt)&&x(Lt.length)&&!!St[u(Lt)]}},5245:(b,I,p)=>{var u=p(69433),x=p(68608),y=p(80290),w=p(81690),g=p(63354);b.exports=function(o){return"function"==typeof o?o:null==o?y:"object"==typeof o?w(o)?x(o[0],o[1]):u(o):g(o)}},92488:(b,I,p)=>{var u=p(58845),x=p(36700),w=Object.prototype.hasOwnProperty;b.exports=function(_){if(!u(_))return x(_);var o=[];for(var C in Object(_))w.call(_,C)&&"constructor"!=C&&o.push(C);return o}},50762:(b,I,p)=>{var u=p(53867),x=p(58845),y=p(25618),g=Object.prototype.hasOwnProperty;b.exports=function(o){if(!u(o))return y(o);var C=x(o),O=[];for(var D in o)"constructor"==D&&(C||!g.call(o,D))||O.push(D);return O}},71054:b=>{b.exports=function(p,u){return p<u}},38641:(b,I,p)=>{var u=p(59026),x=p(93406);b.exports=function(w,g){var _=-1,o=x(w)?Array(w.length):[];return u(w,function(C,O,D){o[++_]=g(C,O,D)}),o}},69433:(b,I,p)=>{var u=p(88783),x=p(48834),y=p(63587);b.exports=function(g){var _=x(g);return 1==_.length&&_[0][2]?y(_[0][0],_[0][1]):function(o){return o===g||u(o,g,_)}}},68608:(b,I,p)=>{var u=p(30696),x=p(58102),y=p(18303),w=p(99743),g=p(45774),_=p(63587),o=p(82773);b.exports=function(A,M){return w(A)&&g(M)?_(o(A),M):function(z){var H=x(z,A);return void 0===H&&H===M?y(z,A):u(M,H,3)}}},9085:(b,I,p)=>{var u=p(33667),x=p(63530),y=p(75290),w=p(23607),g=p(53867),_=p(42970),o=p(45959);b.exports=function C(O,D,A,M,z){O!==D&&y(D,function(H,st){if(z||(z=new u),g(H))w(O,D,st,A,C,M,z);else{var et=M?M(o(O,st),H,st+"",O,D,z):void 0;void 0===et&&(et=H),x(O,st,et)}},_)}},23607:(b,I,p)=>{var u=p(63530),x=p(50694),y=p(96282),w=p(53595),g=p(31563),_=p(2952),o=p(81690),C=p(82027),O=p(84444),D=p(55836),A=p(53867),M=p(82358),z=p(47679),H=p(45959),st=p(31413);b.exports=function(U,it,J,rt,K,at,pt){var dt=H(U,J),Ct=H(it,J),bt=pt.get(Ct);if(bt)u(U,J,bt);else{var wt=at?at(dt,Ct,J+"",U,it,pt):void 0,St=void 0===wt;if(St){var zt=o(Ct),Lt=!zt&&O(Ct),Wt=!zt&&!Lt&&z(Ct);wt=Ct,zt||Lt||Wt?o(dt)?wt=dt:C(dt)?wt=w(dt):Lt?(St=!1,wt=x(Ct,!0)):Wt?(St=!1,wt=y(Ct,!0)):wt=[]:M(Ct)||_(Ct)?(wt=dt,_(dt)?wt=st(dt):(!A(dt)||D(dt))&&(wt=g(Ct))):St=!1}St&&(pt.set(Ct,wt),K(wt,Ct,rt,at,pt),pt.delete(Ct)),u(U,J,wt)}}},37977:(b,I,p)=>{var u=p(14992),x=p(93436),y=p(5245),w=p(38641),g=p(28421),_=p(70544),o=p(15379),C=p(80290),O=p(81690);b.exports=function(A,M,z){M=M.length?u(M,function(et){return O(et)?function(U){return x(U,1===et.length?et[0]:et)}:et}):[C];var H=-1;M=u(M,_(y));var st=w(A,function(et,U,it){return{criteria:u(M,function(rt){return rt(et)}),index:++H,value:et}});return g(st,function(et,U){return o(et,U,z)})}},36737:(b,I,p)=>{var u=p(72897),x=p(18303);b.exports=function(w,g){return u(w,g,function(_,o){return x(w,o)})}},72897:(b,I,p)=>{var u=p(93436),x=p(32773),y=p(64667);b.exports=function(g,_,o){for(var C=-1,O=_.length,D={};++C<O;){var A=_[C],M=u(g,A);o(M,A)&&x(D,y(A,g),M)}return D}},68840:b=>{b.exports=function(p){return function(u){return null==u?void 0:u[p]}}},59866:(b,I,p)=>{var u=p(93436);b.exports=function(y){return function(w){return u(w,y)}}},60863:b=>{var I=Math.ceil,p=Math.max;b.exports=function(x,y,w,g){for(var _=-1,o=p(I((y-x)/(w||1)),0),C=Array(o);o--;)C[g?o:++_]=x,x+=w;return C}},85105:b=>{b.exports=function(p,u,x,y,w){return w(p,function(g,_,o){x=y?(y=!1,g):u(x,g,_,o)}),x}},84441:(b,I,p)=>{var u=p(80290),x=p(15529),y=p(39009);b.exports=function(g,_){return y(x(g,_,u),g+"")}},32773:(b,I,p)=>{var u=p(23898),x=p(64667),y=p(20968),w=p(53867),g=p(82773);b.exports=function(o,C,O,D){if(!w(o))return o;for(var A=-1,M=(C=x(C,o)).length,z=M-1,H=o;null!=H&&++A<M;){var st=g(C[A]),et=O;if("__proto__"===st||"constructor"===st||"prototype"===st)return o;if(A!=z){var U=H[st];void 0===(et=D?D(U,st,H):void 0)&&(et=w(U)?U:y(C[A+1])?[]:{})}u(H,st,et),H=H[st]}return o}},99372:(b,I,p)=>{var u=p(45654),x=p(20395),y=p(80290);b.exports=x?function(g,_){return x(g,"toString",{configurable:!0,enumerable:!1,value:u(_),writable:!0})}:y},28421:b=>{b.exports=function(p,u){var x=p.length;for(p.sort(u);x--;)p[x]=p[x].value;return p}},48282:b=>{b.exports=function(p,u){for(var x=-1,y=Array(p);++x<p;)y[x]=u(x);return y}},68166:(b,I,p)=>{var u=p(57333),x=p(14992),y=p(81690),w=p(7786),_=u?u.prototype:void 0,o=_?_.toString:void 0;b.exports=function C(O){if("string"==typeof O)return O;if(y(O))return x(O,C)+"";if(w(O))return o?o.call(O):"";var D=O+"";return"0"==D&&1/O==-1/0?"-0":D}},13743:(b,I,p)=>{var u=p(87478),x=/^\s+/;b.exports=function(w){return w&&w.slice(0,u(w)+1).replace(x,"")}},70544:b=>{b.exports=function(p){return function(u){return p(u)}}},83987:(b,I,p)=>{var u=p(48690),x=p(5242),y=p(80679),w=p(13747),g=p(52252),_=p(57673);b.exports=function(O,D,A){var M=-1,z=x,H=O.length,st=!0,et=[],U=et;if(A)st=!1,z=y;else if(H>=200){var it=D?null:g(O);if(it)return _(it);st=!1,z=w,U=new u}else U=D?[]:et;t:for(;++M<H;){var J=O[M],rt=D?D(J):J;if(J=A||0!==J?J:0,st&&rt==rt){for(var K=U.length;K--;)if(U[K]===rt)continue t;D&&U.push(rt),et.push(J)}else z(U,rt,A)||(U!==et&&U.push(rt),et.push(J))}return et}},60253:(b,I,p)=>{var u=p(14992);b.exports=function(y,w){return u(w,function(g){return y[g]})}},25687:b=>{b.exports=function(p,u,x){for(var y=-1,w=p.length,g=u.length,_={};++y<w;)x(_,p[y],y<g?u[y]:void 0);return _}},13747:b=>{b.exports=function(p,u){return p.has(u)}},8727:(b,I,p)=>{var u=p(80290);b.exports=function(y){return"function"==typeof y?y:u}},64667:(b,I,p)=>{var u=p(81690),x=p(99743),y=p(89775),w=p(41233);b.exports=function(_,o){return u(_)?_:x(_,o)?[_]:y(w(_))}},88461:(b,I,p)=>{var u=p(96820);b.exports=function(y){var w=new y.constructor(y.byteLength);return new u(w).set(new u(y)),w}},50694:(b,I,p)=>{b=p.nmd(b);var u=p(27038),x=I&&!I.nodeType&&I,y=x&&b&&!b.nodeType&&b,g=y&&y.exports===x?u.Buffer:void 0,_=g?g.allocUnsafe:void 0;b.exports=function(C,O){if(O)return C.slice();var D=C.length,A=_?_(D):new C.constructor(D);return C.copy(A),A}},59757:(b,I,p)=>{var u=p(88461);b.exports=function(y,w){var g=w?u(y.buffer):y.buffer;return new y.constructor(g,y.byteOffset,y.byteLength)}},83615:b=>{var I=/\w*$/;b.exports=function(u){var x=new u.constructor(u.source,I.exec(u));return x.lastIndex=u.lastIndex,x}},42282:(b,I,p)=>{var u=p(57333),x=u?u.prototype:void 0,y=x?x.valueOf:void 0;b.exports=function(g){return y?Object(y.call(g)):{}}},96282:(b,I,p)=>{var u=p(88461);b.exports=function(y,w){var g=w?u(y.buffer):y.buffer;return new y.constructor(g,y.byteOffset,y.length)}},70809:(b,I,p)=>{var u=p(7786);b.exports=function(y,w){if(y!==w){var g=void 0!==y,_=null===y,o=y==y,C=u(y),O=void 0!==w,D=null===w,A=w==w,M=u(w);if(!D&&!M&&!C&&y>w||C&&O&&A&&!D&&!M||_&&O&&A||!g&&A||!o)return 1;if(!_&&!C&&!M&&y<w||M&&g&&o&&!_&&!C||D&&g&&o||!O&&o||!A)return-1}return 0}},15379:(b,I,p)=>{var u=p(70809);b.exports=function(y,w,g){for(var _=-1,o=y.criteria,C=w.criteria,O=o.length,D=g.length;++_<O;){var A=u(o[_],C[_]);if(A)return _>=D?A:A*("desc"==g[_]?-1:1)}return y.index-w.index}},53595:b=>{b.exports=function(p,u){var x=-1,y=p.length;for(u||(u=Array(y));++x<y;)u[x]=p[x];return u}},11694:(b,I,p)=>{var u=p(23898),x=p(92007);b.exports=function(w,g,_,o){var C=!_;_||(_={});for(var O=-1,D=g.length;++O<D;){var A=g[O],M=o?o(_[A],w[A],A,_,w):void 0;void 0===M&&(M=w[A]),C?x(_,A,M):u(_,A,M)}return _}},14746:(b,I,p)=>{var u=p(11694),x=p(10296);b.exports=function(w,g){return u(w,x(w),g)}},78857:(b,I,p)=>{var u=p(11694),x=p(29572);b.exports=function(w,g){return u(w,x(w),g)}},93412:(b,I,p)=>{var u=p(27038);b.exports=u["__core-js_shared__"]},30906:(b,I,p)=>{var u=p(84441),x=p(71100);b.exports=function(w){return u(function(g,_){var o=-1,C=_.length,O=C>1?_[C-1]:void 0,D=C>2?_[2]:void 0;for(O=w.length>3&&"function"==typeof O?(C--,O):void 0,D&&x(_[0],_[1],D)&&(O=C<3?void 0:O,C=1),g=Object(g);++o<C;){var A=_[o];A&&w(g,A,o,O)}return g})}},99889:(b,I,p)=>{var u=p(93406);b.exports=function(y,w){return function(g,_){if(null==g)return g;if(!u(g))return y(g,_);for(var o=g.length,C=w?o:-1,O=Object(g);(w?C--:++C<o)&&!1!==_(O[C],C,O););return g}}},8269:b=>{b.exports=function(p){return function(u,x,y){for(var w=-1,g=Object(u),_=y(u),o=_.length;o--;){var C=_[p?o:++w];if(!1===x(g[C],C,g))break}return u}}},44674:(b,I,p)=>{var u=p(5245),x=p(93406),y=p(59108);b.exports=function(g){return function(_,o,C){var O=Object(_);if(!x(_)){var D=u(o,3);_=y(_),o=function(M){return D(O[M],M,O)}}var A=g(_,o,C);return A>-1?O[D?_[A]:A]:void 0}}},28710:(b,I,p)=>{var u=p(60863),x=p(71100),y=p(5152);b.exports=function(g){return function(_,o,C){return C&&"number"!=typeof C&&x(_,o,C)&&(o=C=void 0),_=y(_),void 0===o?(o=_,_=0):o=y(o),C=void 0===C?_<o?1:-1:y(C),u(_,o,C,g)}}},52252:(b,I,p)=>{var u=p(74918),x=p(49122),y=p(57673),g=u&&1/y(new u([,-0]))[1]==1/0?function(_){return new u(_)}:x;b.exports=g},20395:(b,I,p)=>{var u=p(4153),x=function(){try{var y=u(Object,"defineProperty");return y({},"",{}),y}catch(w){}}();b.exports=x},27667:(b,I,p)=>{var u=p(48690),x=p(8141),y=p(13747);b.exports=function(o,C,O,D,A,M){var z=1&O,H=o.length,st=C.length;if(H!=st&&!(z&&st>H))return!1;var et=M.get(o),U=M.get(C);if(et&&U)return et==C&&U==o;var it=-1,J=!0,rt=2&O?new u:void 0;for(M.set(o,C),M.set(C,o);++it<H;){var K=o[it],at=C[it];if(D)var pt=z?D(at,K,it,C,o,M):D(K,at,it,o,C,M);if(void 0!==pt){if(pt)continue;J=!1;break}if(rt){if(!x(C,function(dt,Ct){if(!y(rt,Ct)&&(K===dt||A(K,dt,O,D,M)))return rt.push(Ct)})){J=!1;break}}else if(K!==at&&!A(K,at,O,D,M)){J=!1;break}}return M.delete(o),M.delete(C),J}},64630:(b,I,p)=>{var u=p(57333),x=p(96820),y=p(71166),w=p(27667),g=p(37461),_=p(57673),rt=u?u.prototype:void 0,K=rt?rt.valueOf:void 0;b.exports=function(pt,dt,Ct,bt,wt,St,zt){switch(Ct){case"[object DataView]":if(pt.byteLength!=dt.byteLength||pt.byteOffset!=dt.byteOffset)return!1;pt=pt.buffer,dt=dt.buffer;case"[object ArrayBuffer]":return!(pt.byteLength!=dt.byteLength||!St(new x(pt),new x(dt)));case"[object Boolean]":case"[object Date]":case"[object Number]":return y(+pt,+dt);case"[object Error]":return pt.name==dt.name&&pt.message==dt.message;case"[object RegExp]":case"[object String]":return pt==dt+"";case"[object Map]":var Lt=g;case"[object Set]":if(Lt||(Lt=_),pt.size!=dt.size&&!(1&bt))return!1;var ee=zt.get(pt);if(ee)return ee==dt;bt|=2,zt.set(pt,dt);var ae=w(Lt(pt),Lt(dt),bt,wt,St,zt);return zt.delete(pt),ae;case"[object Symbol]":if(K)return K.call(pt)==K.call(dt)}return!1}},70838:(b,I,p)=>{var u=p(58605),w=Object.prototype.hasOwnProperty;b.exports=function(_,o,C,O,D,A){var M=1&C,z=u(_),H=z.length;if(H!=u(o).length&&!M)return!1;for(var U=H;U--;){var it=z[U];if(!(M?it in o:w.call(o,it)))return!1}var J=A.get(_),rt=A.get(o);if(J&&rt)return J==o&&rt==_;var K=!0;A.set(_,o),A.set(o,_);for(var at=M;++U<H;){var pt=_[it=z[U]],dt=o[it];if(O)var Ct=M?O(dt,pt,it,o,_,A):O(pt,dt,it,_,o,A);if(!(void 0===Ct?pt===dt||D(pt,dt,C,O,A):Ct)){K=!1;break}at||(at="constructor"==it)}if(K&&!at){var bt=_.constructor,wt=o.constructor;bt!=wt&&"constructor"in _&&"constructor"in o&&!("function"==typeof bt&&bt instanceof bt&&"function"==typeof wt&&wt instanceof wt)&&(K=!1)}return A.delete(_),A.delete(o),K}},10058:(b,I,p)=>{var u=p(94694),x=p(15529),y=p(39009);b.exports=function(g){return y(x(g,void 0,u),g+"")}},61138:b=>{var I="object"==typeof global&&global&&global.Object===Object&&global;b.exports=I},58605:(b,I,p)=>{var u=p(19215),x=p(10296),y=p(59108);b.exports=function(g){return u(g,y,x)}},51675:(b,I,p)=>{var u=p(19215),x=p(29572),y=p(42970);b.exports=function(g){return u(g,y,x)}},85556:(b,I,p)=>{var u=p(36586);b.exports=function(y,w){var g=y.__data__;return u(w)?g["string"==typeof w?"string":"hash"]:g.map}},48834:(b,I,p)=>{var u=p(45774),x=p(59108);b.exports=function(w){for(var g=x(w),_=g.length;_--;){var o=g[_],C=w[o];g[_]=[o,C,u(C)]}return g}},4153:(b,I,p)=>{var u=p(43540),x=p(36825);b.exports=function(w,g){var _=x(w,g);return u(_)?_:void 0}},52398:(b,I,p)=>{var x=p(93332)(Object.getPrototypeOf,Object);b.exports=x},21613:(b,I,p)=>{var u=p(57333),x=Object.prototype,y=x.hasOwnProperty,w=x.toString,g=u?u.toStringTag:void 0;b.exports=function(o){var C=y.call(o,g),O=o[g];try{o[g]=void 0;var D=!0}catch(M){}var A=w.call(o);return D&&(C?o[g]=O:delete o[g]),A}},10296:(b,I,p)=>{var u=p(11375),x=p(65336),w=Object.prototype.propertyIsEnumerable,g=Object.getOwnPropertySymbols;b.exports=g?function(o){return null==o?[]:(o=Object(o),u(g(o),function(C){return w.call(o,C)}))}:x},29572:(b,I,p)=>{var u=p(94165),x=p(52398),y=p(10296),w=p(65336);b.exports=Object.getOwnPropertySymbols?function(o){for(var C=[];o;)u(C,y(o)),o=x(o);return C}:w},26663:(b,I,p)=>{var u=p(81235),x=p(39046),y=p(97129),w=p(74918),g=p(54203),_=p(72802),o=p(51217),C="[object Map]",D="[object Promise]",A="[object Set]",M="[object WeakMap]",z="[object DataView]",H=o(u),st=o(x),et=o(y),U=o(w),it=o(g),J=_;(u&&J(new u(new ArrayBuffer(1)))!=z||x&&J(new x)!=C||y&&J(y.resolve())!=D||w&&J(new w)!=A||g&&J(new g)!=M)&&(J=function(rt){var K=_(rt),at="[object Object]"==K?rt.constructor:void 0,pt=at?o(at):"";if(pt)switch(pt){case H:return z;case st:return C;case et:return D;case U:return A;case it:return M}return K}),b.exports=J},36825:b=>{b.exports=function(p,u){return null==p?void 0:p[u]}},82138:(b,I,p)=>{var u=p(64667),x=p(2952),y=p(81690),w=p(20968),g=p(8613),_=p(82773);b.exports=function(C,O,D){for(var A=-1,M=(O=u(O,C)).length,z=!1;++A<M;){var H=_(O[A]);if(!(z=null!=C&&D(C,H)))break;C=C[H]}return z||++A!=M?z:!!(M=null==C?0:C.length)&&g(M)&&w(H,M)&&(y(C)||x(C))}},407:b=>{var _=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");b.exports=function(C){return _.test(C)}},59410:(b,I,p)=>{var u=p(95969);b.exports=function(){this.__data__=u?u(null):{},this.size=0}},21143:b=>{b.exports=function(p){var u=this.has(p)&&delete this.__data__[p];return this.size-=u?1:0,u}},604:(b,I,p)=>{var u=p(95969),w=Object.prototype.hasOwnProperty;b.exports=function(_){var o=this.__data__;if(u){var C=o[_];return"__lodash_hash_undefined__"===C?void 0:C}return w.call(o,_)?o[_]:void 0}},80584:(b,I,p)=>{var u=p(95969),y=Object.prototype.hasOwnProperty;b.exports=function(g){var _=this.__data__;return u?void 0!==_[g]:y.call(_,g)}},7792:(b,I,p)=>{var u=p(95969);b.exports=function(w,g){var _=this.__data__;return this.size+=this.has(w)?0:1,_[w]=u&&void 0===g?"__lodash_hash_undefined__":g,this}},62963:b=>{var p=Object.prototype.hasOwnProperty;b.exports=function(x){var y=x.length,w=new x.constructor(y);return y&&"string"==typeof x[0]&&p.call(x,"index")&&(w.index=x.index,w.input=x.input),w}},32143:(b,I,p)=>{var u=p(88461),x=p(59757),y=p(83615),w=p(42282),g=p(96282);b.exports=function(bt,wt,St){var zt=bt.constructor;switch(wt){case"[object ArrayBuffer]":return u(bt);case"[object Boolean]":case"[object Date]":return new zt(+bt);case"[object DataView]":return x(bt,St);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return g(bt,St);case"[object Map]":case"[object Set]":return new zt;case"[object Number]":case"[object String]":return new zt(bt);case"[object RegExp]":return y(bt);case"[object Symbol]":return w(bt)}}},31563:(b,I,p)=>{var u=p(60920),x=p(52398),y=p(58845);b.exports=function(g){return"function"!=typeof g.constructor||y(g)?{}:u(x(g))}},21006:(b,I,p)=>{var u=p(57333),x=p(2952),y=p(81690),w=u?u.isConcatSpreadable:void 0;b.exports=function(_){return y(_)||x(_)||!!(w&&_&&_[w])}},20968:b=>{var p=/^(?:0|[1-9]\d*)$/;b.exports=function(x,y){var w=typeof x;return!!(y=null==y?9007199254740991:y)&&("number"==w||"symbol"!=w&&p.test(x))&&x>-1&&x%1==0&&x<y}},71100:(b,I,p)=>{var u=p(71166),x=p(93406),y=p(20968),w=p(53867);b.exports=function(_,o,C){if(!w(C))return!1;var O=typeof o;return!!("number"==O?x(C)&&y(o,C.length):"string"==O&&o in C)&&u(C[o],_)}},99743:(b,I,p)=>{var u=p(81690),x=p(7786),y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,w=/^\w*$/;b.exports=function(_,o){if(u(_))return!1;var C=typeof _;return!("number"!=C&&"symbol"!=C&&"boolean"!=C&&null!=_&&!x(_))||w.test(_)||!y.test(_)||null!=o&&_ in Object(o)}},36586:b=>{b.exports=function(p){var u=typeof p;return"string"==u||"number"==u||"symbol"==u||"boolean"==u?"__proto__"!==p:null===p}},38466:(b,I,p)=>{var w,u=p(93412),x=(w=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"";b.exports=function(w){return!!x&&x in w}},58845:b=>{var I=Object.prototype;b.exports=function(u){var x=u&&u.constructor;return u===("function"==typeof x&&x.prototype||I)}},45774:(b,I,p)=>{var u=p(53867);b.exports=function(y){return y==y&&!u(y)}},63391:b=>{b.exports=function(){this.__data__=[],this.size=0}},68971:(b,I,p)=>{var u=p(15758),y=Array.prototype.splice;b.exports=function(g){var _=this.__data__,o=u(_,g);return!(o<0||(o==_.length-1?_.pop():y.call(_,o,1),--this.size,0))}},18858:(b,I,p)=>{var u=p(15758);b.exports=function(y){var w=this.__data__,g=u(w,y);return g<0?void 0:w[g][1]}},13913:(b,I,p)=>{var u=p(15758);b.exports=function(y){return u(this.__data__,y)>-1}},68944:(b,I,p)=>{var u=p(15758);b.exports=function(y,w){var g=this.__data__,_=u(g,y);return _<0?(++this.size,g.push([y,w])):g[_][1]=w,this}},70536:(b,I,p)=>{var u=p(41505),x=p(73545),y=p(39046);b.exports=function(){this.size=0,this.__data__={hash:new u,map:new(y||x),string:new u}}},61502:(b,I,p)=>{var u=p(85556);b.exports=function(y){var w=u(this,y).delete(y);return this.size-=w?1:0,w}},94960:(b,I,p)=>{var u=p(85556);b.exports=function(y){return u(this,y).get(y)}},61539:(b,I,p)=>{var u=p(85556);b.exports=function(y){return u(this,y).has(y)}},34138:(b,I,p)=>{var u=p(85556);b.exports=function(y,w){var g=u(this,y),_=g.size;return g.set(y,w),this.size+=g.size==_?0:1,this}},37461:b=>{b.exports=function(p){var u=-1,x=Array(p.size);return p.forEach(function(y,w){x[++u]=[w,y]}),x}},63587:b=>{b.exports=function(p,u){return function(x){return null!=x&&x[p]===u&&(void 0!==u||p in Object(x))}}},43911:(b,I,p)=>{var u=p(97425);b.exports=function(w){var g=u(w,function(o){return 500===_.size&&_.clear(),o}),_=g.cache;return g}},95969:(b,I,p)=>{var x=p(4153)(Object,"create");b.exports=x},36700:(b,I,p)=>{var x=p(93332)(Object.keys,Object);b.exports=x},25618:b=>{b.exports=function(p){var u=[];if(null!=p)for(var x in Object(p))u.push(x);return u}},70938:(b,I,p)=>{b=p.nmd(b);var u=p(61138),x=I&&!I.nodeType&&I,y=x&&b&&!b.nodeType&&b,g=y&&y.exports===x&&u.process,_=function(){try{return y&&y.require&&y.require("util").types||g&&g.binding&&g.binding("util")}catch(C){}}();b.exports=_},81244:b=>{var p=Object.prototype.toString;b.exports=function(x){return p.call(x)}},93332:b=>{b.exports=function(p,u){return function(x){return p(u(x))}}},15529:(b,I,p)=>{var u=p(81638),x=Math.max;b.exports=function(w,g,_){return g=x(void 0===g?w.length-1:g,0),function(){for(var o=arguments,C=-1,O=x(o.length-g,0),D=Array(O);++C<O;)D[C]=o[g+C];C=-1;for(var A=Array(g+1);++C<g;)A[C]=o[C];return A[g]=_(D),u(w,this,A)}}},27038:(b,I,p)=>{var u=p(61138),x="object"==typeof self&&self&&self.Object===Object&&self,y=u||x||Function("return this")();b.exports=y},45959:b=>{b.exports=function(p,u){if(("constructor"!==u||"function"!=typeof p[u])&&"__proto__"!=u)return p[u]}},30365:b=>{b.exports=function(u){return this.__data__.set(u,"__lodash_hash_undefined__"),this}},58235:b=>{b.exports=function(p){return this.__data__.has(p)}},57673:b=>{b.exports=function(p){var u=-1,x=Array(p.size);return p.forEach(function(y){x[++u]=y}),x}},39009:(b,I,p)=>{var u=p(99372),y=p(44094)(u);b.exports=y},44094:b=>{var u=Date.now;b.exports=function(y){var w=0,g=0;return function(){var _=u(),o=16-(_-g);if(g=_,o>0){if(++w>=800)return arguments[0]}else w=0;return y.apply(void 0,arguments)}}},18034:(b,I,p)=>{var u=p(73545);b.exports=function(){this.__data__=new u,this.size=0}},37238:b=>{b.exports=function(p){var u=this.__data__,x=u.delete(p);return this.size=u.size,x}},75887:b=>{b.exports=function(p){return this.__data__.get(p)}},81450:b=>{b.exports=function(p){return this.__data__.has(p)}},61386:(b,I,p)=>{var u=p(73545),x=p(39046),y=p(93177);b.exports=function(_,o){var C=this.__data__;if(C instanceof u){var O=C.__data__;if(!x||O.length<199)return O.push([_,o]),this.size=++C.size,this;C=this.__data__=new y(O)}return C.set(_,o),this.size=C.size,this}},54299:b=>{b.exports=function(p,u,x){for(var y=x-1,w=p.length;++y<w;)if(p[y]===u)return y;return-1}},70122:(b,I,p)=>{var u=p(38956),x=p(407),y=p(75154);b.exports=function(g){return x(g)?y(g):u(g)}},89775:(b,I,p)=>{var u=p(43911),x=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,y=/\\(\\)?/g,w=u(function(g){var _=[];return 46===g.charCodeAt(0)&&_.push(""),g.replace(x,function(o,C,O,D){_.push(O?D.replace(y,"$1"):C||o)}),_});b.exports=w},82773:(b,I,p)=>{var u=p(7786);b.exports=function(w){if("string"==typeof w||u(w))return w;var g=w+"";return"0"==g&&1/w==-1/0?"-0":g}},51217:b=>{var p=Function.prototype.toString;b.exports=function(x){if(null!=x){try{return p.call(x)}catch(y){}try{return x+""}catch(y){}}return""}},87478:b=>{var I=/\s/;b.exports=function(u){for(var x=u.length;x--&&I.test(u.charAt(x)););return x}},75154:b=>{var I="\\ud800-\\udfff",g="["+I+"]",_="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",O="[^"+I+"]",D="(?:\\ud83c[\\udde6-\\uddff]){2}",A="[\\ud800-\\udbff][\\udc00-\\udfff]",z="(?:"+_+"|"+o+")?",H="[\\ufe0e\\ufe0f]?",et=H+z+"(?:\\u200d(?:"+[O,D,A].join("|")+")"+H+z+")*",U="(?:"+[O+_+"?",_,D,A,g].join("|")+")",it=RegExp(o+"(?="+o+")|"+U+et,"g");b.exports=function(rt){for(var K=it.lastIndex=0;it.test(rt);)++K;return K}},13742:(b,I,p)=>{var u=p(77007);b.exports=function(w){return u(w,4)}},37524:(b,I,p)=>{var u=p(77007);b.exports=function(g){return u(g,5)}},45654:b=>{b.exports=function(p){return function(){return p}}},36726:(b,I,p)=>{var u=p(84441),x=p(71166),y=p(71100),w=p(42970),g=Object.prototype,_=g.hasOwnProperty,o=u(function(C,O){C=Object(C);var D=-1,A=O.length,M=A>2?O[2]:void 0;for(M&&y(O[0],O[1],M)&&(A=1);++D<A;)for(var z=O[D],H=w(z),st=-1,et=H.length;++st<et;){var U=H[st],it=C[U];(void 0===it||x(it,g[U])&&!_.call(C,U))&&(C[U]=z[U])}return C});b.exports=o},33718:(b,I,p)=>{b.exports=p(64733)},71166:b=>{b.exports=function(p,u){return p===u||p!=p&&u!=u}},33834:(b,I,p)=>{var u=p(11375),x=p(78711),y=p(5245),w=p(81690);b.exports=function(_,o){return(w(_)?u:x)(_,y(o,3))}},98990:(b,I,p)=>{var y=p(44674)(p(84857));b.exports=y},84857:(b,I,p)=>{var u=p(12229),x=p(5245),y=p(32781),w=Math.max;b.exports=function(_,o,C){var O=null==_?0:_.length;if(!O)return-1;var D=null==C?0:y(C);return D<0&&(D=w(O+D,0)),u(_,x(o,3),D)}},94694:(b,I,p)=>{var u=p(56369);b.exports=function(y){return null!=y&&y.length?u(y,1):[]}},64733:(b,I,p)=>{var u=p(4500),x=p(59026),y=p(8727),w=p(81690);b.exports=function(_,o){return(w(_)?u:x)(_,y(o))}},88577:(b,I,p)=>{var u=p(75290),x=p(8727),y=p(42970);b.exports=function(g,_){return null==g?g:u(g,x(_),y)}},58102:(b,I,p)=>{var u=p(93436);b.exports=function(y,w,g){var _=null==y?void 0:u(y,w);return void 0===_?g:_}},32335:(b,I,p)=>{var u=p(20731),x=p(82138);b.exports=function(w,g){return null!=w&&x(w,g,u)}},18303:(b,I,p)=>{var u=p(55333),x=p(82138);b.exports=function(w,g){return null!=w&&x(w,g,u)}},80290:b=>{b.exports=function(p){return p}},2952:(b,I,p)=>{var u=p(77090),x=p(27503),y=Object.prototype,w=y.hasOwnProperty,g=y.propertyIsEnumerable,_=u(function(){return arguments}())?u:function(o){return x(o)&&w.call(o,"callee")&&!g.call(o,"callee")};b.exports=_},81690:b=>{b.exports=Array.isArray},93406:(b,I,p)=>{var u=p(55836),x=p(8613);b.exports=function(w){return null!=w&&x(w.length)&&!u(w)}},82027:(b,I,p)=>{var u=p(93406),x=p(27503);b.exports=function(w){return x(w)&&u(w)}},84444:(b,I,p)=>{b=p.nmd(b);var u=p(27038),x=p(61711),y=I&&!I.nodeType&&I,w=y&&b&&!b.nodeType&&b,_=w&&w.exports===y?u.Buffer:void 0;b.exports=(_?_.isBuffer:void 0)||x},12232:(b,I,p)=>{var u=p(92488),x=p(26663),y=p(2952),w=p(81690),g=p(93406),_=p(84444),o=p(58845),C=p(47679),M=Object.prototype.hasOwnProperty;b.exports=function(H){if(null==H)return!0;if(g(H)&&(w(H)||"string"==typeof H||"function"==typeof H.splice||_(H)||C(H)||y(H)))return!H.length;var st=x(H);if("[object Map]"==st||"[object Set]"==st)return!H.size;if(o(H))return!u(H).length;for(var et in H)if(M.call(H,et))return!1;return!0}},55836:(b,I,p)=>{var u=p(72802),x=p(53867);b.exports=function(C){if(!x(C))return!1;var O=u(C);return"[object Function]"==O||"[object GeneratorFunction]"==O||"[object AsyncFunction]"==O||"[object Proxy]"==O}},8613:b=>{b.exports=function(u){return"number"==typeof u&&u>-1&&u%1==0&&u<=9007199254740991}},32e3:(b,I,p)=>{var u=p(63434),x=p(70544),y=p(70938),w=y&&y.isMap,g=w?x(w):u;b.exports=g},53867:b=>{b.exports=function(p){var u=typeof p;return null!=p&&("object"==u||"function"==u)}},27503:b=>{b.exports=function(p){return null!=p&&"object"==typeof p}},82358:(b,I,p)=>{var u=p(72802),x=p(52398),y=p(27503),o=Function.prototype.toString,C=Object.prototype.hasOwnProperty,O=o.call(Object);b.exports=function(A){if(!y(A)||"[object Object]"!=u(A))return!1;var M=x(A);if(null===M)return!0;var z=C.call(M,"constructor")&&M.constructor;return"function"==typeof z&&z instanceof z&&o.call(z)==O}},48855:(b,I,p)=>{var u=p(67495),x=p(70544),y=p(70938),w=y&&y.isSet,g=w?x(w):u;b.exports=g},64871:(b,I,p)=>{var u=p(72802),x=p(81690),y=p(27503);b.exports=function(_){return"string"==typeof _||!x(_)&&y(_)&&"[object String]"==u(_)}},7786:(b,I,p)=>{var u=p(72802),x=p(27503);b.exports=function(g){return"symbol"==typeof g||x(g)&&"[object Symbol]"==u(g)}},47679:(b,I,p)=>{var u=p(99390),x=p(70544),y=p(70938),w=y&&y.isTypedArray,g=w?x(w):u;b.exports=g},29569:b=>{b.exports=function(p){return void 0===p}},59108:(b,I,p)=>{var u=p(71890),x=p(92488),y=p(93406);b.exports=function(g){return y(g)?u(g):x(g)}},42970:(b,I,p)=>{var u=p(71890),x=p(50762),y=p(93406);b.exports=function(g){return y(g)?u(g,!0):x(g)}},27842:b=>{b.exports=function(p){var u=null==p?0:p.length;return u?p[u-1]:void 0}},89718:(b,I,p)=>{var u=p(14992),x=p(5245),y=p(38641),w=p(81690);b.exports=function(_,o){return(w(_)?u:y)(_,x(o,3))}},10182:(b,I,p)=>{var u=p(92007),x=p(18022),y=p(5245);b.exports=function(g,_){var o={};return _=y(_,3),x(g,function(C,O,D){u(o,O,_(C,O,D))}),o}},31334:(b,I,p)=>{var u=p(96681),x=p(78354),y=p(80290);b.exports=function(g){return g&&g.length?u(g,y,x):void 0}},97425:(b,I,p)=>{var u=p(93177);function y(w,g){if("function"!=typeof w||null!=g&&"function"!=typeof g)throw new TypeError("Expected a function");var _=function(){var o=arguments,C=g?g.apply(this,o):o[0],O=_.cache;if(O.has(C))return O.get(C);var D=w.apply(this,o);return _.cache=O.set(C,D)||O,D};return _.cache=new(y.Cache||u),_}y.Cache=u,b.exports=y},3912:(b,I,p)=>{var u=p(9085),y=p(30906)(function(w,g,_){u(w,g,_)});b.exports=y},41518:(b,I,p)=>{var u=p(96681),x=p(71054),y=p(80290);b.exports=function(g){return g&&g.length?u(g,y,x):void 0}},5353:(b,I,p)=>{var u=p(96681),x=p(5245),y=p(71054);b.exports=function(g,_){return g&&g.length?u(g,x(_,2),y):void 0}},49122:b=>{b.exports=function(){}},30765:(b,I,p)=>{var u=p(27038);b.exports=function(){return u.Date.now()}},31133:(b,I,p)=>{var u=p(36737),y=p(10058)(function(w,g){return null==w?{}:u(w,g)});b.exports=y},63354:(b,I,p)=>{var u=p(68840),x=p(59866),y=p(99743),w=p(82773);b.exports=function(_){return y(_)?u(w(_)):x(_)}},21221:(b,I,p)=>{var x=p(28710)();b.exports=x},86101:(b,I,p)=>{var u=p(89731),x=p(59026),y=p(5245),w=p(85105),g=p(81690);b.exports=function(o,C,O){var D=g(o)?u:w,A=arguments.length<3;return D(o,y(C,4),O,A,x)}},84951:(b,I,p)=>{var u=p(92488),x=p(26663),y=p(93406),w=p(64871),g=p(70122);b.exports=function(O){if(null==O)return 0;if(y(O))return w(O)?g(O):O.length;var D=x(O);return"[object Map]"==D||"[object Set]"==D?O.size:u(O).length}},70280:(b,I,p)=>{var u=p(56369),x=p(37977),y=p(84441),w=p(71100),g=y(function(_,o){if(null==_)return[];var C=o.length;return C>1&&w(_,o[0],o[1])?o=[]:C>2&&w(o[0],o[1],o[2])&&(o=[o[0]]),x(_,u(o,1),[])});b.exports=g},65336:b=>{b.exports=function(){return[]}},61711:b=>{b.exports=function(){return!1}},5152:(b,I,p)=>{var u=p(45038),x=1/0;b.exports=function(g){return g?(g=u(g))===x||g===-x?17976931348623157e292*(g<0?-1:1):g==g?g:0:0===g?g:0}},32781:(b,I,p)=>{var u=p(5152);b.exports=function(y){var w=u(y),g=w%1;return w==w?g?w-g:w:0}},45038:(b,I,p)=>{var u=p(13743),x=p(53867),y=p(7786),g=/^[-+]0x[0-9a-f]+$/i,_=/^0b[01]+$/i,o=/^0o[0-7]+$/i,C=parseInt;b.exports=function(D){if("number"==typeof D)return D;if(y(D))return NaN;if(x(D)){var A="function"==typeof D.valueOf?D.valueOf():D;D=x(A)?A+"":A}if("string"!=typeof D)return 0===D?D:+D;D=u(D);var M=_.test(D);return M||o.test(D)?C(D.slice(2),M?2:8):g.test(D)?NaN:+D}},31413:(b,I,p)=>{var u=p(11694),x=p(42970);b.exports=function(w){return u(w,x(w))}},41233:(b,I,p)=>{var u=p(68166);b.exports=function(y){return null==y?"":u(y)}},3593:(b,I,p)=>{var u=p(4500),x=p(60920),y=p(18022),w=p(5245),g=p(52398),_=p(81690),o=p(84444),C=p(55836),O=p(53867),D=p(47679);b.exports=function(M,z,H){var st=_(M),et=st||o(M)||D(M);if(z=w(z,4),null==H){var U=M&&M.constructor;H=et?st?new U:[]:O(M)&&C(U)?x(g(M)):{}}return(et?u:y)(M,function(it,J,rt){return z(H,it,J,rt)}),H}},9728:(b,I,p)=>{var u=p(56369),x=p(84441),y=p(83987),w=p(82027),g=x(function(_){return y(u(_,1,w,!0))});b.exports=g},65927:(b,I,p)=>{var u=p(41233),x=0;b.exports=function(w){var g=++x;return u(w)+g}},23348:(b,I,p)=>{var u=p(60253),x=p(59108);b.exports=function(w){return null==w?[]:u(w,x(w))}},31507:(b,I,p)=>{var u=p(23898),x=p(25687);b.exports=function(w,g){return x(w||[],g||[],u)}},30815:(b,I,p)=>{"use strict";p.r(I),p.d(I,{EditerModule:()=>l2});var u={};p.r(u),p.d(u,{Scene:()=>mh,exoptions:()=>ms,exoptionsData:()=>gh,mockjs:()=>xh});var x={};p.r(x),p.d(x,{Scene:()=>_h,exoptions:()=>xs,exoptionsData:()=>bh,mockjs:()=>Ch});var y={};p.r(y),p.d(y,{Scene:()=>Th,exoptions:()=>ys,exoptionsData:()=>Oh,mockjs:()=>Ah});var w=p(38583),g=p(90665),_=p(73928),o=p(37716);const C=["dialogPopup"],O=["hueSlider"],D=["alphaSlider"];function A(i,n){if(1&i&&o._UZ(0,"div"),2&i){const t=o.oxw();o.Gre("arrow arrow-",t.cpUsePosition,""),o.Udp("top",t.arrowTop,"px")}}function M(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"div",28),o.NdJ("newValue",function(r){return o.CHM(t),o.oxw().onColorChange(r)})("dragStart",function(){return o.CHM(t),o.oxw().onDragStart("saturation-lightness")})("dragEnd",function(){return o.CHM(t),o.oxw().onDragEnd("saturation-lightness")}),o._UZ(1,"div",14),o.qZA()}if(2&i){const t=o.oxw();o.Udp("background-color",t.hueSliderColor),o.Q6J("rgX",1)("rgY",1),o.xp6(1),o.Udp("top",null==t.slider?null:t.slider.v,"px")("left",null==t.slider?null:t.slider.s,"px")}}function z(i,n){1&i&&(o.O4$(),o.TgZ(0,"svg",29),o._UZ(1,"path",30),o._UZ(2,"path",31),o.qZA())}function H(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"button",32),o.NdJ("click",function(r){o.CHM(t);const a=o.oxw();return a.onAddPresetColor(r,a.selectedColor)}),o._uU(1),o.qZA()}if(2&i){const t=o.oxw();o.Tol(t.cpAddColorButtonClass),o.Q6J("disabled",t.cpPresetColors&&t.cpPresetColors.length>=t.cpMaxPresetColorsLength),o.xp6(1),o.hij(" ",t.cpAddColorButtonText," ")}}function st(i,n){1&i&&o._UZ(0,"div",33)}function et(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"input",39),o.NdJ("keyup.enter",function(r){return o.CHM(t),o.oxw(2).onAcceptColor(r)})("newValue",function(r){return o.CHM(t),o.oxw(2).onAlphaInput(r)}),o.qZA()}if(2&i){const t=o.oxw(2);o.Q6J("rg",1)("value",null==t.cmykText?null:t.cmykText.a)}}function U(i,n){1&i&&(o.TgZ(0,"div"),o._uU(1,"A"),o.qZA())}function it(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"div",34),o.TgZ(1,"div",35),o.TgZ(2,"input",36),o.NdJ("keyup.enter",function(r){return o.CHM(t),o.oxw().onAcceptColor(r)})("newValue",function(r){return o.CHM(t),o.oxw().onCyanInput(r)}),o.qZA(),o.TgZ(3,"input",36),o.NdJ("keyup.enter",function(r){return o.CHM(t),o.oxw().onAcceptColor(r)})("newValue",function(r){return o.CHM(t),o.oxw().onMagentaInput(r)}),o.qZA(),o.TgZ(4,"input",36),o.NdJ("keyup.enter",function(r){return o.CHM(t),o.oxw().onAcceptColor(r)})("newValue",function(r){return o.CHM(t),o.oxw().onYellowInput(r)}),o.qZA(),o.TgZ(5,"input",36),o.NdJ("keyup.enter",function(r){return o.CHM(t),o.oxw().onAcceptColor(r)})("newValue",function(r){return o.CHM(t),o.oxw().onBlackInput(r)}),o.qZA(),o.YNc(6,et,1,2,"input",37),o.qZA(),o.TgZ(7,"div",35),o.TgZ(8,"div"),o._uU(9,"C"),o.qZA(),o.TgZ(10,"div"),o._uU(11,"M"),o.qZA(),o.TgZ(12,"div"),o._uU(13,"Y"),o.qZA(),o.TgZ(14,"div"),o._uU(15,"K"),o.qZA(),o.YNc(16,U,2,0,"div",38),o.qZA(),o.qZA()}if(2&i){const t=o.oxw();o.Udp("display",3!==t.format?"none":"block"),o.xp6(2),o.Q6J("rg",100)("value",null==t.cmykText?null:t.cmykText.c),o.xp6(1),o.Q6J("rg",100)("value",null==t.cmykText?null:t.cmykText.m),o.xp6(1),o.Q6J("rg",100)("value",null==t.cmykText?null:t.cmykText.y),o.xp6(1),o.Q6J("rg",100)("value",null==t.cmykText?null:t.cmykText.k),o.xp6(1),o.Q6J("ngIf","disabled"!==t.cpAlphaChannel),o.xp6(10),o.Q6J("ngIf","disabled"!==t.cpAlphaChannel)}}function J(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"input",39),o.NdJ("keyup.enter",function(r){return o.CHM(t),o.oxw(2).onAcceptColor(r)})("newValue",function(r){return o.CHM(t),o.oxw(2).onAlphaInput(r)}),o.qZA()}if(2&i){const t=o.oxw(2);o.Q6J("rg",1)("value",null==t.hslaText?null:t.hslaText.a)}}function rt(i,n){1&i&&(o.TgZ(0,"div"),o._uU(1,"A"),o.qZA())}function K(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"div",40),o.TgZ(1,"div",35),o.TgZ(2,"input",41),o.NdJ("keyup.enter",function(r){return o.CHM(t),o.oxw().onAcceptColor(r)})("newValue",function(r){return o.CHM(t),o.oxw().onHueInput(r)}),o.qZA(),o.TgZ(3,"input",36),o.NdJ("keyup.enter",function(r){return o.CHM(t),o.oxw().onAcceptColor(r)})("newValue",function(r){return o.CHM(t),o.oxw().onSaturationInput(r)}),o.qZA(),o.TgZ(4,"input",36),o.NdJ("keyup.enter",function(r){return o.CHM(t),o.oxw().onAcceptColor(r)})("newValue",function(r){return o.CHM(t),o.oxw().onLightnessInput(r)}),o.qZA(),o.YNc(5,J,1,2,"input",37),o.qZA(),o.TgZ(6,"div",35),o.TgZ(7,"div"),o._uU(8,"H"),o.qZA(),o.TgZ(9,"div"),o._uU(10,"S"),o.qZA(),o.TgZ(11,"div"),o._uU(12,"L"),o.qZA(),o.YNc(13,rt,2,0,"div",38),o.qZA(),o.qZA()}if(2&i){const t=o.oxw();o.Udp("display",2!==t.format?"none":"block"),o.xp6(2),o.Q6J("rg",360)("value",null==t.hslaText?null:t.hslaText.h),o.xp6(1),o.Q6J("rg",100)("value",null==t.hslaText?null:t.hslaText.s),o.xp6(1),o.Q6J("rg",100)("value",null==t.hslaText?null:t.hslaText.l),o.xp6(1),o.Q6J("ngIf","disabled"!==t.cpAlphaChannel),o.xp6(8),o.Q6J("ngIf","disabled"!==t.cpAlphaChannel)}}function at(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"input",39),o.NdJ("keyup.enter",function(r){return o.CHM(t),o.oxw(2).onAcceptColor(r)})("newValue",function(r){return o.CHM(t),o.oxw(2).onAlphaInput(r)}),o.qZA()}if(2&i){const t=o.oxw(2);o.Q6J("rg",1)("value",null==t.rgbaText?null:t.rgbaText.a)}}function pt(i,n){1&i&&(o.TgZ(0,"div"),o._uU(1,"A"),o.qZA())}function dt(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"div",42),o.TgZ(1,"div",35),o.TgZ(2,"input",43),o.NdJ("keyup.enter",function(r){return o.CHM(t),o.oxw().onAcceptColor(r)})("newValue",function(r){return o.CHM(t),o.oxw().onRedInput(r)}),o.qZA(),o.TgZ(3,"input",43),o.NdJ("keyup.enter",function(r){return o.CHM(t),o.oxw().onAcceptColor(r)})("newValue",function(r){return o.CHM(t),o.oxw().onGreenInput(r)}),o.qZA(),o.TgZ(4,"input",43),o.NdJ("keyup.enter",function(r){return o.CHM(t),o.oxw().onAcceptColor(r)})("newValue",function(r){return o.CHM(t),o.oxw().onBlueInput(r)}),o.qZA(),o.YNc(5,at,1,2,"input",37),o.qZA(),o.TgZ(6,"div",35),o.TgZ(7,"div"),o._uU(8,"R"),o.qZA(),o.TgZ(9,"div"),o._uU(10,"G"),o.qZA(),o.TgZ(11,"div"),o._uU(12,"B"),o.qZA(),o.YNc(13,pt,2,0,"div",38),o.qZA(),o.qZA()}if(2&i){const t=o.oxw();o.Udp("display",1!==t.format?"none":"block"),o.xp6(2),o.Q6J("rg",255)("value",null==t.rgbaText?null:t.rgbaText.r),o.xp6(1),o.Q6J("rg",255)("value",null==t.rgbaText?null:t.rgbaText.g),o.xp6(1),o.Q6J("rg",255)("value",null==t.rgbaText?null:t.rgbaText.b),o.xp6(1),o.Q6J("ngIf","disabled"!==t.cpAlphaChannel),o.xp6(8),o.Q6J("ngIf","disabled"!==t.cpAlphaChannel)}}function Ct(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"input",39),o.NdJ("keyup.enter",function(r){return o.CHM(t),o.oxw(2).onAcceptColor(r)})("newValue",function(r){return o.CHM(t),o.oxw(2).onAlphaInput(r)}),o.qZA()}if(2&i){const t=o.oxw(2);o.Q6J("rg",1)("value",t.hexAlpha)}}function bt(i,n){1&i&&(o.TgZ(0,"div"),o._uU(1,"A"),o.qZA())}function wt(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"div",44),o.TgZ(1,"div",35),o.TgZ(2,"input",45),o.NdJ("blur",function(){return o.CHM(t),o.oxw().onHexInput(null)})("keyup.enter",function(r){return o.CHM(t),o.oxw().onAcceptColor(r)})("newValue",function(r){return o.CHM(t),o.oxw().onHexInput(r)}),o.qZA(),o.YNc(3,Ct,1,2,"input",37),o.qZA(),o.TgZ(4,"div",35),o.TgZ(5,"div"),o._uU(6,"Hex"),o.qZA(),o.YNc(7,bt,2,0,"div",38),o.qZA(),o.qZA()}if(2&i){const t=o.oxw();o.Udp("display",0!==t.format?"none":"block"),o.ekj("hex-alpha","forced"===t.cpAlphaChannel),o.xp6(2),o.Q6J("value",t.hexText),o.xp6(1),o.Q6J("ngIf","forced"===t.cpAlphaChannel),o.xp6(4),o.Q6J("ngIf","forced"===t.cpAlphaChannel)}}function St(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"input",39),o.NdJ("keyup.enter",function(r){return o.CHM(t),o.oxw(2).onAcceptColor(r)})("newValue",function(r){return o.CHM(t),o.oxw(2).onAlphaInput(r)}),o.qZA()}if(2&i){const t=o.oxw(2);o.Q6J("rg",1)("value",null==t.hslaText?null:t.hslaText.a)}}function zt(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"div",46),o.TgZ(1,"div",35),o.TgZ(2,"input",36),o.NdJ("keyup.enter",function(r){return o.CHM(t),o.oxw().onAcceptColor(r)})("newValue",function(r){return o.CHM(t),o.oxw().onValueInput(r)}),o.qZA(),o.YNc(3,St,1,2,"input",37),o.qZA(),o.TgZ(4,"div",35),o.TgZ(5,"div"),o._uU(6,"V"),o.qZA(),o.TgZ(7,"div"),o._uU(8,"A"),o.qZA(),o.qZA(),o.qZA()}if(2&i){const t=o.oxw();o.xp6(2),o.Q6J("rg",100)("value",null==t.hslaText?null:t.hslaText.l),o.xp6(1),o.Q6J("ngIf","disabled"!==t.cpAlphaChannel)}}function Lt(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"div",47),o.TgZ(1,"span",48),o.NdJ("click",function(){return o.CHM(t),o.oxw().onFormatToggle(-1)}),o.qZA(),o.TgZ(2,"span",48),o.NdJ("click",function(){return o.CHM(t),o.oxw().onFormatToggle(1)}),o.qZA(),o.qZA()}}function Wt(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"span",55),o.NdJ("click",function(r){o.CHM(t);const a=o.oxw().$implicit;return o.oxw(3).onRemovePresetColor(r,a)}),o.qZA()}if(2&i){const t=o.oxw(4);o.Tol(t.cpRemoveColorButtonClass)}}function ee(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"div",53),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw(3).setColorFromString(a)}),o.YNc(1,Wt,1,3,"span",54),o.qZA()}if(2&i){const t=n.$implicit,e=o.oxw(3);o.Udp("background-color",t),o.xp6(1),o.Q6J("ngIf",e.cpAddColorButton)}}function ae(i,n){if(1&i&&(o.TgZ(0,"div"),o.YNc(1,ee,2,3,"div",52),o.qZA()),2&i){const t=o.oxw(2);o.Tol(t.cpPresetColorsClass),o.xp6(1),o.Q6J("ngForOf",t.cpPresetColors)}}function me(i,n){if(1&i&&(o.TgZ(0,"div"),o._uU(1),o.qZA()),2&i){const t=o.oxw(2);o.Tol(t.cpPresetEmptyMessageClass),o.xp6(1),o.Oqu(t.cpPresetEmptyMessage)}}function _e(i,n){if(1&i&&(o.TgZ(0,"div",49),o._UZ(1,"hr"),o.TgZ(2,"div",50),o._uU(3),o.qZA(),o.YNc(4,ae,2,4,"div",51),o.YNc(5,me,2,4,"div",51),o.qZA()),2&i){const t=o.oxw();o.xp6(3),o.Oqu(t.cpPresetLabel),o.xp6(1),o.Q6J("ngIf",null==t.cpPresetColors?null:t.cpPresetColors.length),o.xp6(1),o.Q6J("ngIf",!(null!=t.cpPresetColors&&t.cpPresetColors.length)&&t.cpAddColorButton)}}function Ze(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"button",58),o.NdJ("click",function(r){return o.CHM(t),o.oxw(2).onCancelColor(r)}),o._uU(1),o.qZA()}if(2&i){const t=o.oxw(2);o.Tol(t.cpCancelButtonClass),o.xp6(1),o.Oqu(t.cpCancelButtonText)}}function Ee(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"button",58),o.NdJ("click",function(r){return o.CHM(t),o.oxw(2).onAcceptColor(r)}),o._uU(1),o.qZA()}if(2&i){const t=o.oxw(2);o.Tol(t.cpOKButtonClass),o.xp6(1),o.Oqu(t.cpOKButtonText)}}function Ge(i,n){if(1&i&&(o.TgZ(0,"div",56),o.YNc(1,Ze,2,4,"button",57),o.YNc(2,Ee,2,4,"button",57),o.qZA()),2&i){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",t.cpCancelButton),o.xp6(1),o.Q6J("ngIf",t.cpOKButton)}}function Zt(i,n){1&i&&o.GkF(0)}function Qt(i,n){if(1&i&&(o.TgZ(0,"div",59),o.YNc(1,Zt,1,0,"ng-container",60),o.qZA()),2&i){const t=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",t.cpExtraTemplate)}}var ut=(()=>{return(i=ut||(ut={}))[i.HEX=0]="HEX",i[i.RGBA=1]="RGBA",i[i.HSLA=2]="HSLA",i[i.CMYK=3]="CMYK",ut;var i})();class gt{constructor(n,t,e,r){this.r=n,this.g=t,this.b=e,this.a=r}}class Mt{constructor(n,t,e,r){this.h=n,this.s=t,this.v=e,this.a=r}}class It{constructor(n,t,e,r){this.h=n,this.s=t,this.l=e,this.a=r}}class Xt{constructor(n,t,e,r,a=1){this.c=n,this.m=t,this.y=e,this.k=r,this.a=a}}let fe=(()=>{class i{constructor(){this.newValue=new o.vpe}inputChange(t){const e=t.target.value;if(void 0===this.rg)this.newValue.emit(e);else{const r=parseFloat(e);this.newValue.emit({v:r,rg:this.rg})}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=o.lG2({type:i,selectors:[["","text",""]],hostBindings:function(t,e){1&t&&o.NdJ("input",function(a){return e.inputChange(a)})},inputs:{rg:"rg",text:"text"},outputs:{newValue:"newValue"}}),i})(),Xe=(()=>{class i{constructor(t){this.elRef=t,this.dragEnd=new o.vpe,this.dragStart=new o.vpe,this.newValue=new o.vpe,this.listenerMove=e=>this.move(e),this.listenerStop=()=>this.stop()}mouseDown(t){this.start(t)}touchStart(t){this.start(t)}move(t){t.preventDefault(),this.setCursor(t)}start(t){this.setCursor(t),t.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}stop(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}getX(t){const e=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==t.pageX?t.pageX:t.touches[0].pageX)-e.left-window.pageXOffset}getY(t){const e=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==t.pageY?t.pageY:t.touches[0].pageY)-e.top-window.pageYOffset}setCursor(t){const e=this.elRef.nativeElement.offsetWidth,r=this.elRef.nativeElement.offsetHeight,a=Math.max(0,Math.min(this.getX(t),e)),s=Math.max(0,Math.min(this.getY(t),r));void 0!==this.rgX&&void 0!==this.rgY?this.newValue.emit({s:a/e,v:1-s/r,rgX:this.rgX,rgY:this.rgY}):void 0===this.rgX&&void 0!==this.rgY?this.newValue.emit({v:s/r,rgY:this.rgY}):void 0!==this.rgX&&void 0===this.rgY&&this.newValue.emit({v:a/e,rgX:this.rgX})}}return i.\u0275fac=function(t){return new(t||i)(o.Y36(o.SBq))},i.\u0275dir=o.lG2({type:i,selectors:[["","slider",""]],hostBindings:function(t,e){1&t&&o.NdJ("mousedown",function(a){return e.mouseDown(a)})("touchstart",function(a){return e.touchStart(a)})},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}}),i})();class Me{constructor(n,t,e,r){this.h=n,this.s=t,this.v=e,this.a=r}}class Oe{constructor(n,t,e,r){this.h=n,this.s=t,this.v=e,this.a=r}}let re=(()=>{class i{constructor(){this.active=null}setActive(t){this.active&&this.active!==t&&"inline"!==this.active.cpDialogDisplay&&this.active.closeDialog(),this.active=t}hsva2hsla(t){const e=t.h,r=t.s,a=t.v,s=t.a;if(0===a)return new It(e,0,0,s);if(0===r&&1===a)return new It(e,1,1,s);{const l=a*(2-r)/2;return new It(e,a*r/(1-Math.abs(2*l-1)),l,s)}}hsla2hsva(t){const e=Math.min(t.h,1),r=Math.min(t.s,1),a=Math.min(t.l,1),s=Math.min(t.a,1);if(0===a)return new Mt(e,0,0,s);{const l=a+r*(1-Math.abs(2*a-1))/2;return new Mt(e,2*(l-a)/l,l,s)}}hsvaToRgba(t){let e,r,a;const s=t.h,l=t.s,c=t.v,d=t.a,f=Math.floor(6*s),h=6*s-f,v=c*(1-l),m=c*(1-h*l),S=c*(1-(1-h)*l);switch(f%6){case 0:e=c,r=S,a=v;break;case 1:e=m,r=c,a=v;break;case 2:e=v,r=c,a=S;break;case 3:e=v,r=m,a=c;break;case 4:e=S,r=v,a=c;break;case 5:e=c,r=v,a=m;break;default:e=0,r=0,a=0}return new gt(e,r,a,d)}cmykToRgb(t){return new gt((1-t.c)*(1-t.k),(1-t.m)*(1-t.k),(1-t.y)*(1-t.k),t.a)}rgbaToCmyk(t){const e=1-Math.max(t.r,t.g,t.b);return 1===e?new Xt(0,0,0,1,t.a):new Xt((1-t.r-e)/(1-e),(1-t.g-e)/(1-e),(1-t.b-e)/(1-e),e,t.a)}rgbaToHsva(t){let e,r;const a=Math.min(t.r,1),s=Math.min(t.g,1),l=Math.min(t.b,1),c=Math.min(t.a,1),d=Math.max(a,s,l),f=Math.min(a,s,l),h=d,v=d-f;if(r=0===d?0:v/d,d===f)e=0;else{switch(d){case a:e=(s-l)/v+(s<l?6:0);break;case s:e=(l-a)/v+2;break;case l:e=(a-s)/v+4;break;default:e=0}e/=6}return new Mt(e,r,h,c)}rgbaToHex(t,e){let r="#"+(1<<24|t.r<<16|t.g<<8|t.b).toString(16).substr(1);return e&&(r+=(256|Math.round(255*t.a)).toString(16).substr(1)),r}normalizeCMYK(t){return new Xt(t.c/100,t.m/100,t.y/100,t.k/100,t.a)}denormalizeCMYK(t){return new Xt(Math.floor(100*t.c),Math.floor(100*t.m),Math.floor(100*t.y),Math.floor(100*t.k),t.a)}denormalizeRGBA(t){return new gt(Math.round(255*t.r),Math.round(255*t.g),Math.round(255*t.b),t.a)}stringToHsva(t="",e=!1){let r=null;t=(t||"").toLowerCase();const a=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(s){return new gt(parseInt(s[2],10)/255,parseInt(s[3],10)/255,parseInt(s[4],10)/255,isNaN(parseFloat(s[5]))?1:parseFloat(s[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(s){return new It(parseInt(s[2],10)/360,parseInt(s[3],10)/100,parseInt(s[4],10)/100,isNaN(parseFloat(s[5]))?1:parseFloat(s[5]))}}];a.push(e?{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(s){return new gt(parseInt(s[1],16)/255,parseInt(s[2],16)/255,parseInt(s[3],16)/255,parseInt(s[4]||"FF",16)/255)}}:{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(s){return new gt(parseInt(s[1],16)/255,parseInt(s[2],16)/255,parseInt(s[3],16)/255,1)}}),a.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(s){return new gt(parseInt(s[1]+s[1],16)/255,parseInt(s[2]+s[2],16)/255,parseInt(s[3]+s[3],16)/255,1)}});for(const s in a)if(a.hasOwnProperty(s)){const l=a[s],c=l.re.exec(t),d=c&&l.parse(c);if(d)return d instanceof gt?r=this.rgbaToHsva(d):d instanceof It&&(r=this.hsla2hsva(d)),r}return r}outputFormat(t,e,r){switch("auto"===e&&(e=t.a<1?"rgba":"hex"),e){case"hsla":const a=this.hsva2hsla(t),s=new It(Math.round(360*a.h),Math.round(100*a.s),Math.round(100*a.l),Math.round(100*a.a)/100);return t.a<1||"always"===r?"hsla("+s.h+","+s.s+"%,"+s.l+"%,"+s.a+")":"hsl("+s.h+","+s.s+"%,"+s.l+"%)";case"rgba":const l=this.denormalizeRGBA(this.hsvaToRgba(t));return t.a<1||"always"===r?"rgba("+l.r+","+l.g+","+l.b+","+Math.round(100*l.a)/100+")":"rgb("+l.r+","+l.g+","+l.b+")";default:const c="always"===r||"forced"===r;return this.rgbaToHex(this.denormalizeRGBA(this.hsvaToRgba(t)),c)}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=o.Yz7({token:i,factory:i.\u0275fac}),i})();const cn="undefined"!=typeof window&&"ontouchstart"in window;let se=(()=>{class i{constructor(t,e,r,a,s,l){this.ngZone=t,this.elRef=e,this.cdRef=r,this.document=a,this.platformId=s,this.service=l,this.isIE10=!1,this.dialogArrowSize=10,this.dialogArrowOffset=15,this.dialogInputFields=[ut.HEX,ut.RGBA,ut.HSLA,ut.CMYK],this.useRootViewContainer=!1,this.eyeDropperSupported=(0,w.NF)(this.platformId)&&"EyeDropper"in this.document.defaultView}handleEsc(t){this.show&&"popup"===this.cpDialogDisplay&&this.onCancelColor(t)}handleEnter(t){this.show&&"popup"===this.cpDialogDisplay&&this.onAcceptColor(t)}ngOnInit(){this.slider=new Me(0,0,0,0),this.sliderDimMax=new Oe(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140),this.format=this.cpCmykEnabled?ut.CMYK:"rgba"===this.cpOutputFormat?ut.RGBA:"hsla"===this.cpOutputFormat?ut.HSLA:ut.HEX,this.listenerMouseDown=r=>{this.onMouseDown(r)},this.listenerResize=()=>{this.onResize()},this.openDialog(this.initialColor,!1)}ngOnDestroy(){this.closeDialog()}ngAfterViewInit(){230===this.cpWidth&&"inline"!==this.cpDialogDisplay||(this.sliderDimMax=new Oe(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140),this.updateColorPicker(!1),this.cdRef.detectChanges())}openDialog(t,e=!0){this.service.setActive(this),this.width||(this.cpWidth=this.directiveElementRef.nativeElement.offsetWidth),this.height||(this.height=320),this.setInitialColor(t),this.setColorFromString(t,e),this.openColorPicker()}closeDialog(){this.closeColorPicker()}setupDialog(t,e,r,a,s,l,c,d,f,h,v,m,S,T,k,E,P,R,B,V,L,Z,q,tt,$,ft,X,ct,yt,xt,Pt,Ot,Gt,Tt,At,Nt,Rt,Yt){this.setInitialColor(r),this.setColorMode(d),this.isIE10=10===function(){let i="";"undefined"!=typeof navigator&&(i=navigator.userAgent.toLowerCase());const n=i.indexOf("msie ");return n>0&&parseInt(i.substring(n+5,i.indexOf(".",n)),10)}(),this.directiveInstance=t,this.directiveElementRef=e,this.cpDisableInput=m,this.cpCmykEnabled=f,this.cpAlphaChannel=h,this.cpOutputFormat=v,this.cpDialogDisplay=l,this.cpIgnoredElements=S,this.cpSaveClickOutside=T,this.cpCloseClickOutside=k,this.useRootViewContainer=E,this.width=this.cpWidth=parseInt(a,10),this.height=this.cpHeight=parseInt(s,10),this.cpPosition=P,this.cpPositionOffset=parseInt(R,10),this.cpOKButton=ft,this.cpOKButtonText=ct,this.cpOKButtonClass=X,this.cpCancelButton=yt,this.cpCancelButtonText=Pt,this.cpCancelButtonClass=xt,this.cpEyeDropper=Nt,this.fallbackColor=c||"#fff",this.setPresetConfig(V,L),this.cpPresetColorsClass=Z,this.cpMaxPresetColorsLength=q,this.cpPresetEmptyMessage=tt,this.cpPresetEmptyMessageClass=$,this.cpAddColorButton=Ot,this.cpAddColorButtonText=Tt,this.cpAddColorButtonClass=Gt,this.cpRemoveColorButtonClass=At,this.cpTriggerElement=Rt,this.cpExtraTemplate=Yt,B||(this.dialogArrowOffset=0),"inline"===l&&(this.dialogArrowSize=0,this.dialogArrowOffset=0),"hex"===v&&"always"!==h&&"forced"!==h&&(this.cpAlphaChannel="disabled")}setColorMode(t){switch(t.toString().toUpperCase()){case"1":case"C":case"COLOR":default:this.cpColorMode=1;break;case"2":case"G":case"GRAYSCALE":this.cpColorMode=2;break;case"3":case"P":case"PRESETS":this.cpColorMode=3}}setInitialColor(t){this.initialColor=t}setPresetConfig(t,e){this.cpPresetLabel=t,this.cpPresetColors=e}setColorFromString(t,e=!0,r=!0){let a;"always"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel?(a=this.service.stringToHsva(t,!0),!a&&!this.hsva&&(a=this.service.stringToHsva(t,!1))):a=this.service.stringToHsva(t,!1),!a&&!this.hsva&&(a=this.service.stringToHsva(this.fallbackColor,!1)),a&&(this.hsva=a,this.sliderH=this.hsva.h,"hex"===this.cpOutputFormat&&"disabled"===this.cpAlphaChannel&&(this.hsva.a=1),this.updateColorPicker(e,r))}onResize(){"fixed"===this.position?this.setDialogPosition():"inline"!==this.cpDialogDisplay&&this.closeColorPicker()}onDragEnd(t){this.directiveInstance.sliderDragEnd({slider:t,color:this.outputColor})}onDragStart(t){this.directiveInstance.sliderDragStart({slider:t,color:this.outputColor})}onMouseDown(t){this.show&&!this.isIE10&&"popup"===this.cpDialogDisplay&&t.target!==this.directiveElementRef.nativeElement&&!this.isDescendant(this.elRef.nativeElement,t.target)&&!this.isDescendant(this.directiveElementRef.nativeElement,t.target)&&0===this.cpIgnoredElements.filter(e=>e===t.target).length&&this.ngZone.run(()=>{this.cpSaveClickOutside?this.directiveInstance.colorSelected(this.outputColor):(this.hsva=null,this.setColorFromString(this.initialColor,!1),this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor),this.directiveInstance.colorCanceled()),this.cpCloseClickOutside&&this.closeColorPicker()})}onAcceptColor(t){t.stopPropagation(),this.outputColor&&this.directiveInstance.colorSelected(this.outputColor),"popup"===this.cpDialogDisplay&&this.closeColorPicker()}onCancelColor(t){this.hsva=null,t.stopPropagation(),this.directiveInstance.colorCanceled(),this.setColorFromString(this.initialColor,!0),"popup"===this.cpDialogDisplay&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor,!0),this.closeColorPicker())}onEyeDropper(){this.eyeDropperSupported&&(new window.EyeDropper).open().then(e=>{this.setColorFromString(e.sRGBHex,!0)})}onFormatToggle(t){const e=this.dialogInputFields.length-(this.cpCmykEnabled?0:1),r=((this.dialogInputFields.indexOf(this.format)+t)%e+e)%e;this.format=this.dialogInputFields[r]}onColorChange(t){this.hsva.s=t.s/t.rgX,this.hsva.v=t.v/t.rgY,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"lightness",value:this.hsva.v,color:this.outputColor}),this.directiveInstance.sliderChanged({slider:"saturation",value:this.hsva.s,color:this.outputColor})}onHueChange(t){this.hsva.h=t.v/t.rgX,this.sliderH=this.hsva.h,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"hue",value:this.hsva.h,color:this.outputColor})}onValueChange(t){this.hsva.v=t.v/t.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"value",value:this.hsva.v,color:this.outputColor})}onAlphaChange(t){this.hsva.a=t.v/t.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"alpha",value:this.hsva.a,color:this.outputColor})}onHexInput(t){if(null===t)this.updateColorPicker();else{t&&"#"!==t[0]&&(t="#"+t);let e=/^#([a-f0-9]{3}|[a-f0-9]{6})$/gi;"always"===this.cpAlphaChannel&&(e=/^#([a-f0-9]{3}|[a-f0-9]{6}|[a-f0-9]{8})$/gi);const r=e.test(t);r&&(t.length<5&&(t="#"+t.substring(1).split("").map(a=>a+a).join("")),"forced"===this.cpAlphaChannel&&(t+=Math.round(255*this.hsva.a).toString(16)),this.setColorFromString(t,!0,!1)),this.directiveInstance.inputChanged({input:"hex",valid:r,value:t,color:this.outputColor})}}onRedInput(t){const e=this.service.hsvaToRgba(this.hsva),r=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;r&&(e.r=t.v/t.rg,this.hsva=this.service.rgbaToHsva(e),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"red",valid:r,value:e.r,color:this.outputColor})}onBlueInput(t){const e=this.service.hsvaToRgba(this.hsva),r=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;r&&(e.b=t.v/t.rg,this.hsva=this.service.rgbaToHsva(e),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"blue",valid:r,value:e.b,color:this.outputColor})}onGreenInput(t){const e=this.service.hsvaToRgba(this.hsva),r=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;r&&(e.g=t.v/t.rg,this.hsva=this.service.rgbaToHsva(e),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"green",valid:r,value:e.g,color:this.outputColor})}onHueInput(t){const e=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;e&&(this.hsva.h=t.v/t.rg,this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"hue",valid:e,value:this.hsva.h,color:this.outputColor})}onValueInput(t){const e=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;e&&(this.hsva.v=t.v/t.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"value",valid:e,value:this.hsva.v,color:this.outputColor})}onAlphaInput(t){const e=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;e&&(this.hsva.a=t.v/t.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"alpha",valid:e,value:this.hsva.a,color:this.outputColor})}onLightnessInput(t){const e=this.service.hsva2hsla(this.hsva),r=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;r&&(e.l=t.v/t.rg,this.hsva=this.service.hsla2hsva(e),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"lightness",valid:r,value:e.l,color:this.outputColor})}onSaturationInput(t){const e=this.service.hsva2hsla(this.hsva),r=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;r&&(e.s=t.v/t.rg,this.hsva=this.service.hsla2hsva(e),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"saturation",valid:r,value:e.s,color:this.outputColor})}onCyanInput(t){!isNaN(t.v)&&t.v>=0&&t.v<=t.rg&&(this.cmyk.c=t.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"cyan",valid:!0,value:this.cmyk.c,color:this.outputColor})}onMagentaInput(t){!isNaN(t.v)&&t.v>=0&&t.v<=t.rg&&(this.cmyk.m=t.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"magenta",valid:!0,value:this.cmyk.m,color:this.outputColor})}onYellowInput(t){!isNaN(t.v)&&t.v>=0&&t.v<=t.rg&&(this.cmyk.y=t.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"yellow",valid:!0,value:this.cmyk.y,color:this.outputColor})}onBlackInput(t){!isNaN(t.v)&&t.v>=0&&t.v<=t.rg&&(this.cmyk.k=t.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"black",valid:!0,value:this.cmyk.k,color:this.outputColor})}onAddPresetColor(t,e){t.stopPropagation(),this.cpPresetColors.filter(r=>r===e).length||(this.cpPresetColors=this.cpPresetColors.concat(e),this.directiveInstance.presetColorsChanged(this.cpPresetColors))}onRemovePresetColor(t,e){t.stopPropagation(),this.cpPresetColors=this.cpPresetColors.filter(r=>r!==e),this.directiveInstance.presetColorsChanged(this.cpPresetColors)}openColorPicker(){this.show||(this.show=!0,this.hidden=!0,setTimeout(()=>{this.hidden=!1,this.setDialogPosition(),this.cdRef.detectChanges()},0),this.directiveInstance.stateChanged(!0),this.isIE10||this.ngZone.runOutsideAngular(()=>{cn?document.addEventListener("touchstart",this.listenerMouseDown):document.addEventListener("mousedown",this.listenerMouseDown)}),window.addEventListener("resize",this.listenerResize))}closeColorPicker(){this.show&&(this.show=!1,this.directiveInstance.stateChanged(!1),this.isIE10||(cn?document.removeEventListener("touchstart",this.listenerMouseDown):document.removeEventListener("mousedown",this.listenerMouseDown)),window.removeEventListener("resize",this.listenerResize),this.cdRef.destroyed||this.cdRef.detectChanges())}updateColorPicker(t=!0,e=!0,r=!1){if(this.sliderDimMax){let a,s,l;2===this.cpColorMode&&(this.hsva.s=0);const c=this.outputColor;if(s=this.service.hsva2hsla(this.hsva),this.cpCmykEnabled?(r?(l=this.service.cmykToRgb(this.service.normalizeCMYK(this.cmyk)),this.hsva=this.service.rgbaToHsva(l)):(l=this.service.hsvaToRgba(this.hsva),this.cmyk=this.service.denormalizeCMYK(this.service.rgbaToCmyk(l))),l=this.service.denormalizeRGBA(l),this.sliderH=this.hsva.h):l=this.service.denormalizeRGBA(this.service.hsvaToRgba(this.hsva)),a=this.service.denormalizeRGBA(this.service.hsvaToRgba(new Mt(this.sliderH||this.hsva.h,1,1,1))),e&&(this.hslaText=new It(Math.round(360*s.h),Math.round(100*s.s),Math.round(100*s.l),Math.round(100*s.a)/100),this.rgbaText=new gt(l.r,l.g,l.b,Math.round(100*l.a)/100),this.cpCmykEnabled&&(this.cmykText=new Xt(this.cmyk.c,this.cmyk.m,this.cmyk.y,this.cmyk.k,Math.round(100*this.cmyk.a)/100)),this.hexText=this.service.rgbaToHex(l,"always"===this.cpAlphaChannel),this.hexAlpha=this.rgbaText.a),"auto"===this.cpOutputFormat&&this.format!==ut.RGBA&&this.format!==ut.CMYK&&this.format!==ut.HSLA&&this.hsva.a<1&&(this.format=this.hsva.a<1?ut.RGBA:ut.HEX),this.hueSliderColor="rgb("+a.r+","+a.g+","+a.b+")",this.alphaSliderColor="rgb("+l.r+","+l.g+","+l.b+")",this.outputColor=this.service.outputFormat(this.hsva,this.cpOutputFormat,this.cpAlphaChannel),this.selectedColor=this.service.outputFormat(this.hsva,"rgba",null),this.format!==ut.CMYK)this.cmykColor="";else if("always"===this.cpAlphaChannel||"enabled"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel){const d=Math.round(100*this.cmyk.a)/100;this.cmykColor=`cmyka(${this.cmyk.c},${this.cmyk.m},${this.cmyk.y},${this.cmyk.k},${d})`}else this.cmykColor=`cmyk(${this.cmyk.c},${this.cmyk.m},${this.cmyk.y},${this.cmyk.k})`;this.slider=new Me((this.sliderH||this.hsva.h)*this.sliderDimMax.h-8,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-8),t&&c!==this.outputColor&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.outputColor))}}setDialogPosition(){if("inline"===this.cpDialogDisplay)this.position="relative";else{let r,t="static",e="",a=null,s=null,l=this.directiveElementRef.nativeElement.parentNode;const c=this.dialogElement.nativeElement.offsetHeight;for(;null!==l&&"HTML"!==l.tagName;){if(r=window.getComputedStyle(l),t=r.getPropertyValue("position"),e=r.getPropertyValue("transform"),"static"!==t&&null===a&&(a=l),e&&"none"!==e&&null===s&&(s=l),"fixed"===t){a=s;break}l=l.parentNode}const d=this.createDialogBox(this.directiveElementRef.nativeElement,"fixed"!==t);if(this.useRootViewContainer||"fixed"===t&&(!a||a instanceof HTMLUnknownElement))this.top=d.top,this.left=d.left;else{null===a&&(a=l);const h=this.createDialogBox(a,"fixed"!==t);this.top=d.top-h.top,this.left=d.left-h.left}"fixed"===t&&(this.position="fixed");let f=this.cpPosition;"auto"===this.cpPosition&&(f=function(i,n){let t="right",e="bottom";const{height:r,width:a}=i,{top:s,left:l}=n,c=s+n.height,d=l+n.width,f=s-r<0,h=c+r>(window.innerHeight||document.documentElement.clientHeight),v=l-a<0,m=d+a>(window.innerWidth||document.documentElement.clientWidth);return h&&(e="top"),f&&(e="bottom"),v&&(t="right"),m&&(t="left"),f&&h&&v&&m?["left","right","top","bottom"].reduce((k,E)=>i[k]>i[E]?k:E):v&&m?f?"bottom":h||s>c?"top":"bottom":f&&h?v?"right":m||l>d?"left":"right":`${e}-${t}`}(this.dialogElement.nativeElement.getBoundingClientRect(),this.cpTriggerElement.nativeElement.getBoundingClientRect())),"top"===f?(this.arrowTop=c-1,this.top-=c+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*d.width-this.dialogArrowOffset):"bottom"===f?(this.top+=d.height+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*d.width-this.dialogArrowOffset):"top-left"===f||"left-top"===f?(this.top-=c-d.height+d.height*this.cpPositionOffset/100,this.left-=this.cpWidth+this.dialogArrowSize-2-this.dialogArrowOffset):"top-right"===f||"right-top"===f?(this.top-=c-d.height+d.height*this.cpPositionOffset/100,this.left+=d.width+this.dialogArrowSize-2-this.dialogArrowOffset):"left"===f||"bottom-left"===f||"left-bottom"===f?(this.top+=d.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left-=this.cpWidth+this.dialogArrowSize-2):(this.top+=d.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left+=d.width+this.dialogArrowSize-2),this.cpUsePosition=f}}isDescendant(t,e){let r=e.parentNode;for(;null!==r;){if(r===t)return!0;r=r.parentNode}return!1}createDialogBox(t,e){const{top:r,left:a}=t.getBoundingClientRect();return{top:r+(e?window.pageYOffset:0),left:a+(e?window.pageXOffset:0),width:t.offsetWidth,height:t.offsetHeight}}}return i.\u0275fac=function(t){return new(t||i)(o.Y36(o.R0b),o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(w.K0),o.Y36(o.Lbi),o.Y36(re))},i.\u0275cmp=o.Xpm({type:i,selectors:[["color-picker"]],viewQuery:function(t,e){if(1&t&&(o.Gf(C,7),o.Gf(O,7),o.Gf(D,7)),2&t){let r;o.iGM(r=o.CRH())&&(e.dialogElement=r.first),o.iGM(r=o.CRH())&&(e.hueSlider=r.first),o.iGM(r=o.CRH())&&(e.alphaSlider=r.first)}},hostBindings:function(t,e){1&t&&o.NdJ("keyup.esc",function(a){return e.handleEsc(a)},!1,o.evT)("keyup.enter",function(a){return e.handleEnter(a)},!1,o.evT)},decls:30,vars:51,consts:[[1,"color-picker",3,"click"],["dialogPopup",""],[3,"class","top",4,"ngIf"],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue","dragStart","dragEnd",4,"ngIf"],[1,"hue-alpha","box"],[1,"left"],[1,"selected-color-background"],[1,"selected-color",3,"click"],["class","eyedropper-icon","xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#000000",4,"ngIf"],["type","button",3,"class","disabled","click",4,"ngIf"],[1,"right"],["style","height: 16px;",4,"ngIf"],[1,"hue",3,"slider","rgX","newValue","dragStart","dragEnd"],["hueSlider",""],[1,"cursor"],[1,"value",3,"slider","rgX","newValue","dragStart","dragEnd"],["valueSlider",""],[1,"alpha",3,"slider","rgX","newValue","dragStart","dragEnd"],["alphaSlider",""],["class","cmyk-text",3,"display",4,"ngIf"],["class","hsla-text",3,"display",4,"ngIf"],["class","rgba-text",3,"display",4,"ngIf"],["class","hex-text",3,"hex-alpha","display",4,"ngIf"],["class","value-text",4,"ngIf"],["class","type-policy",4,"ngIf"],["class","preset-area",4,"ngIf"],["class","button-area",4,"ngIf"],["class","extra-template",4,"ngIf"],[1,"saturation-lightness",3,"slider","rgX","rgY","newValue","dragStart","dragEnd"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#000000",1,"eyedropper-icon"],["d","M0 0h24v24H0V0z","fill","none"],["d","M17.66 5.41l.92.92-2.69 2.69-.92-.92 2.69-2.69M17.67 3c-.26 0-.51.1-.71.29l-3.12 3.12-1.93-1.91-1.41 1.41 1.42 1.42L3 16.25V21h4.75l8.92-8.92 1.42 1.42 1.41-1.41-1.92-1.92 3.12-3.12c.4-.4.4-1.03.01-1.42l-2.34-2.34c-.2-.19-.45-.29-.7-.29zM6.92 19L5 17.08l8.06-8.06 1.92 1.92L6.92 19z"],["type","button",3,"disabled","click"],[2,"height","16px"],[1,"cmyk-text"],[1,"box"],["type","number","pattern","[0-9]*","min","0","max","100",3,"text","rg","value","keyup.enter","newValue"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue",4,"ngIf"],[4,"ngIf"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue"],[1,"hsla-text"],["type","number","pattern","[0-9]*","min","0","max","360",3,"text","rg","value","keyup.enter","newValue"],[1,"rgba-text"],["type","number","pattern","[0-9]*","min","0","max","255",3,"text","rg","value","keyup.enter","newValue"],[1,"hex-text"],[3,"text","value","blur","keyup.enter","newValue"],[1,"value-text"],[1,"type-policy"],[1,"type-policy-arrow",3,"click"],[1,"preset-area"],[1,"preset-label"],[3,"class",4,"ngIf"],["class","preset-color",3,"backgroundColor","click",4,"ngFor","ngForOf"],[1,"preset-color",3,"click"],[3,"class","click",4,"ngIf"],[3,"click"],[1,"button-area"],["type","button",3,"class","click",4,"ngIf"],["type","button",3,"click"],[1,"extra-template"],[4,"ngTemplateOutlet"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0,1),o.NdJ("click",function(a){return a.stopPropagation()}),o.YNc(2,A,1,5,"div",2),o.YNc(3,M,2,8,"div",3),o.TgZ(4,"div",4),o.TgZ(5,"div",5),o._UZ(6,"div",6),o.TgZ(7,"div",7),o.NdJ("click",function(){return e.eyeDropperSupported&&e.cpEyeDropper&&e.onEyeDropper()}),o.YNc(8,z,3,0,"svg",8),o.qZA(),o.YNc(9,H,2,5,"button",9),o.qZA(),o.TgZ(10,"div",10),o.YNc(11,st,1,0,"div",11),o.TgZ(12,"div",12,13),o.NdJ("newValue",function(a){return e.onHueChange(a)})("dragStart",function(){return e.onDragStart("hue")})("dragEnd",function(){return e.onDragEnd("hue")}),o._UZ(14,"div",14),o.qZA(),o.TgZ(15,"div",15,16),o.NdJ("newValue",function(a){return e.onValueChange(a)})("dragStart",function(){return e.onDragStart("value")})("dragEnd",function(){return e.onDragEnd("value")}),o._UZ(17,"div",14),o.qZA(),o.TgZ(18,"div",17,18),o.NdJ("newValue",function(a){return e.onAlphaChange(a)})("dragStart",function(){return e.onDragStart("alpha")})("dragEnd",function(){return e.onDragEnd("alpha")}),o._UZ(20,"div",14),o.qZA(),o.qZA(),o.qZA(),o.YNc(21,it,17,12,"div",19),o.YNc(22,K,14,10,"div",20),o.YNc(23,dt,14,10,"div",21),o.YNc(24,wt,8,7,"div",22),o.YNc(25,zt,9,3,"div",23),o.YNc(26,Lt,3,0,"div",24),o.YNc(27,_e,6,3,"div",25),o.YNc(28,Ge,3,2,"div",26),o.YNc(29,Qt,2,1,"div",27),o.qZA()),2&t&&(o.Udp("display",e.show?"block":"none")("visibility",e.hidden?"hidden":"visible")("top",e.top,"px")("left",e.left,"px")("position",e.position)("height",e.cpHeight,"px")("width",e.cpWidth,"px"),o.ekj("open",e.show),o.xp6(2),o.Q6J("ngIf","popup"===e.cpDialogDisplay),o.xp6(1),o.Q6J("ngIf",1===(e.cpColorMode||1)),o.xp6(4),o.Udp("background-color",e.selectedColor)("cursor",e.eyeDropperSupported&&e.cpEyeDropper?"pointer":null),o.xp6(1),o.Q6J("ngIf",e.eyeDropperSupported&&e.cpEyeDropper),o.xp6(1),o.Q6J("ngIf",e.cpAddColorButton),o.xp6(2),o.Q6J("ngIf","disabled"===e.cpAlphaChannel),o.xp6(1),o.Udp("display",1===(e.cpColorMode||1)?"block":"none"),o.Q6J("rgX",1),o.xp6(2),o.Udp("left",null==e.slider?null:e.slider.h,"px"),o.xp6(1),o.Udp("display",2===(e.cpColorMode||1)?"block":"none"),o.Q6J("rgX",1),o.xp6(2),o.Udp("right",null==e.slider?null:e.slider.v,"px"),o.xp6(1),o.Udp("display","disabled"===e.cpAlphaChannel?"none":"block")("background-color",e.alphaSliderColor),o.Q6J("rgX",1),o.xp6(2),o.Udp("left",null==e.slider?null:e.slider.a,"px"),o.xp6(1),o.Q6J("ngIf",!e.cpDisableInput&&1===(e.cpColorMode||1)),o.xp6(1),o.Q6J("ngIf",!e.cpDisableInput&&1===(e.cpColorMode||1)),o.xp6(1),o.Q6J("ngIf",!e.cpDisableInput&&1===(e.cpColorMode||1)),o.xp6(1),o.Q6J("ngIf",!e.cpDisableInput&&1===(e.cpColorMode||1)),o.xp6(1),o.Q6J("ngIf",!e.cpDisableInput&&2===(e.cpColorMode||1)),o.xp6(1),o.Q6J("ngIf",!e.cpDisableInput&&1===(e.cpColorMode||1)),o.xp6(1),o.Q6J("ngIf",(null==e.cpPresetColors?null:e.cpPresetColors.length)||e.cpAddColorButton),o.xp6(1),o.Q6J("ngIf",e.cpOKButton||e.cpCancelButton),o.xp6(1),o.Q6J("ngIf",e.cpExtraTemplate))},directives:[w.O5,Xe,fe,w.sg,w.tP],styles:['.color-picker{position:absolute;z-index:1000;width:230px;height:auto;border:#777 solid 1px;cursor:default;-webkit-user-select:none;user-select:none;background-color:#fff}.color-picker *{box-sizing:border-box;margin:0;font-size:11px}.color-picker input{width:0;height:26px;min-width:0;font-size:13px;text-align:center;color:#000}.color-picker input:invalid,.color-picker input:-moz-ui-invalid,.color-picker input:-moz-submit-invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none}.color-picker .arrow{position:absolute;z-index:999999;width:0;height:0;border-style:solid}.color-picker .arrow.arrow-top{left:8px;border-width:10px 5px;border-color:#777 rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0)}.color-picker .arrow.arrow-bottom{top:-20px;left:8px;border-width:10px 5px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) #777 rgba(0,0,0,0)}.color-picker .arrow.arrow-top-left,.color-picker .arrow.arrow-left-top{right:-21px;bottom:8px;border-width:5px 10px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0) #777}.color-picker .arrow.arrow-top-right,.color-picker .arrow.arrow-right-top{bottom:8px;left:-20px;border-width:5px 10px;border-color:rgba(0,0,0,0) #777 rgba(0,0,0,0) rgba(0,0,0,0)}.color-picker .arrow.arrow-left,.color-picker .arrow.arrow-left-bottom,.color-picker .arrow.arrow-bottom-left{top:8px;right:-21px;border-width:5px 10px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0) #777}.color-picker .arrow.arrow-right,.color-picker .arrow.arrow-right-bottom,.color-picker .arrow.arrow-bottom-right{top:8px;left:-20px;border-width:5px 10px;border-color:rgba(0,0,0,0) #777 rgba(0,0,0,0) rgba(0,0,0,0)}.color-picker .cursor{position:relative;width:16px;height:16px;border:#222 solid 2px;border-radius:50%;cursor:default}.color-picker .box{display:flex;padding:4px 8px}.color-picker .left{position:relative;padding:16px 8px}.color-picker .right{flex:1 1 auto;padding:12px 8px}.color-picker .button-area{padding:0 16px 16px;text-align:right}.color-picker .button-area button{margin-left:8px}.color-picker .preset-area{padding:4px 15px}.color-picker .preset-area .preset-label{overflow:hidden;width:100%;padding:4px;font-size:11px;white-space:nowrap;text-align:left;text-overflow:ellipsis;color:#555}.color-picker .preset-area .preset-color{position:relative;display:inline-block;width:18px;height:18px;margin:4px 6px 8px;border:#a9a9a9 solid 1px;border-radius:25%;cursor:pointer}.color-picker .preset-area .preset-empty-message{min-height:18px;margin-top:4px;margin-bottom:8px;font-style:italic;text-align:center}.color-picker .hex-text{width:100%;padding:4px 8px;font-size:11px}.color-picker .hex-text .box{padding:0 24px 8px 8px}.color-picker .hex-text .box div{float:left;flex:1 1 auto;text-align:center;color:#555;clear:left}.color-picker .hex-text .box input{flex:1 1 auto;padding:1px;border:#a9a9a9 solid 1px}.color-picker .hex-alpha .box div:first-child,.color-picker .hex-alpha .box input:first-child{flex-grow:3;margin-right:8px}.color-picker .cmyk-text,.color-picker .hsla-text,.color-picker .rgba-text,.color-picker .value-text{width:100%;padding:4px 8px;font-size:11px}.color-picker .cmyk-text .box,.color-picker .hsla-text .box,.color-picker .rgba-text .box{padding:0 24px 8px 8px}.color-picker .value-text .box{padding:0 8px 8px}.color-picker .cmyk-text .box div,.color-picker .hsla-text .box div,.color-picker .rgba-text .box div,.color-picker .value-text .box div{flex:1 1 auto;margin-right:8px;text-align:center;color:#555}.color-picker .cmyk-text .box div:last-child,.color-picker .hsla-text .box div:last-child,.color-picker .rgba-text .box div:last-child,.color-picker .value-text .box div:last-child{margin-right:0}.color-picker .cmyk-text .box input,.color-picker .hsla-text .box input,.color-picker .rgba-text .box input,.color-picker .value-text .box input{float:left;flex:1;padding:1px;margin:0 8px 0 0;border:#a9a9a9 solid 1px}.color-picker .cmyk-text .box input:last-child,.color-picker .hsla-text .box input:last-child,.color-picker .rgba-text .box input:last-child,.color-picker .value-text .box input:last-child{margin-right:0}.color-picker .hue-alpha{align-items:center;margin-bottom:3px}.color-picker .hue{direction:ltr;width:100%;height:16px;margin-bottom:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwkUFWbCCAAAAFxJREFUaN7t0kEKg0AQAME2x83/n2qu5qCgD1iDhCoYdpnbQC9bbY1qVO/jvc6k3ad91s7/7F1/csgPrujuQ17BDYSFsBAWwgJhISyEBcJCWAgLhIWwEBYIi2f7Ar/1TCgFH2X9AAAAAElFTkSuQmCC)}.color-picker .value{direction:rtl;width:100%;height:16px;margin-bottom:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAACTklEQVR42u3SYUcrABhA4U2SkmRJMmWSJklKJiWZZpKUJJskKUmaTFImKZOUzMySpGRmliRNJilJSpKSJEtmSpIpmWmSdO736/6D+x7OP3gUCoWCv1cqlSQlJZGcnExKSgqpqamkpaWRnp5ORkYGmZmZqFQqsrKyyM7OJicnh9zcXNRqNXl5eeTn56PRaCgoKKCwsJCioiK0Wi3FxcWUlJRQWlpKWVkZ5eXlVFRUUFlZiU6no6qqiurqampqaqitraWurg69Xk99fT0GgwGj0UhDQwONjY00NTXR3NxMS0sLra2ttLW10d7ejslkwmw209HRQWdnJ11dXXR3d9PT00Nvby99fX309/czMDDA4OAgFouFoaEhrFYrw8PDjIyMMDo6ytjYGDabjfHxcSYmJpicnGRqagq73c709DQzMzPMzs4yNzfH/Pw8DocDp9OJy+XC7XazsLDA4uIiS0tLLC8vs7KywurqKmtra3g8HrxeLz6fD7/fz/r6OhsbG2xubrK1tcX29jaBQICdnR2CwSC7u7vs7e2xv7/PwcEBh4eHHB0dcXx8zMnJCaenp5ydnXF+fs7FxQWXl5dcXV1xfX3Nzc0Nt7e33N3dEQqFuL+/5+HhgXA4TCQS4fHxkaenJ56fn3l5eeH19ZVoNMrb2xvv7+98fHwQi8WIx+N8fn6SSCT4+vri+/ubn58ffn9/+VcKgSWwBJbAElgCS2AJLIElsASWwBJYAktgCSyBJbAElsASWAJLYAksgSWwBJbAElgCS2AJLIElsP4/WH8AmJ5Z6jHS4h8AAAAASUVORK5CYII=)}.color-picker .alpha{direction:ltr;width:100%;height:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwYQlZMa3gAAAWVJREFUaN7tmEGO6jAQRCsOArHgBpyAJYGjcGocxAm4A2IHpmoWE0eBH+ezmFlNvU06shJ3W6VEelWMUQAIIF9f6qZpimsA1LYtS2uF51/u27YVAFZVRUkEoGHdPV/sIcbIEIIkUdI/9Xa7neyv61+SWFUVAVCSct00TWn2fv6u3+Ecfd3tXzy/0+nEUu+SPjo/kqzrmiQpScN6v98XewfA8/lMkiLJ2WxGSUopcT6fM6U0NX9/frfbjev1WtfrlZfLhYfDQQHG/AIOlnGwjINlHCxjHCzjYJm/TJWdCwquJXseFFzGwDNNeiKMOJTO8xQdDQaeB29+K9efeLaBo9J7vdvtJj1RjFFjfiv7qv95tjx/7leSQgh93e1ffMeIp6O+YQjho/N791t1XVOSSI7N//K+4/GoxWLBx+PB5/Op5XLJ+/3OlJJWqxU3m83ovv5iGf8KjYNlHCxjHCzjYBkHy5gf5gusvQU7U37jTAAAAABJRU5ErkJggg==)}.color-picker .type-policy{position:absolute;top:218px;right:12px;width:16px;height:24px;background-size:8px 16px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAgCAYAAAAffCjxAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACewAAAnsB01CO3AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIASURBVEiJ7ZY9axRRFIafsxMStrLQJpAgpBFhi+C9w1YSo00I6RZ/g9vZpBf/QOr4GyRgkSKNSrAadsZqQGwCkuAWyRZJsySwvhZ7N/vhzrgbLH3Ld8597jlzz50zJokyxXH8DqDVar0qi6v8BbItqSGpEcfxdlmsFWXkvX8AfAVWg3UKPEnT9GKujMzsAFgZsVaCN1VTQd77XUnrgE1kv+6935268WRpzrnHZvYRWC7YvC3pRZZl3wozqtVqiyH9IgjAspkd1Gq1xUJQtVrdB9ZKIAOthdg/Qc65LUk7wNIMoCVJO865rYFhkqjX6/d7vV4GPJwBMqofURS5JEk6FYBer/eeYb/Mo9WwFnPOvQbeAvfuAAK4BN4sAJtAG/gJIElmNuiJyba3EGNmZiPeZuEVmVell/Y/6N+CzDn3AXhEOOo7Hv/3BeAz8IzQkMPnJbuPx1wC+yYJ7/0nYIP5S/0FHKdp+rwCEEXRS/rf5Hl1Gtb2M0iSpCOpCZzPATmX1EySpHMLAsiy7MjMDoHrGSDXZnaYZdnRwBh7J91utwmczAA6CbG3GgPleX4jqUH/a1CktqRGnuc3hSCAMB32gKspkCtgb3KCQMmkjeP4WNJThrNNZval1WptTIsv7JtQ4tmIdRa8qSoEpWl6YWZNoAN0zKxZNPehpLSBZv2t+Q0CJ9lLnARQLAAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center}.color-picker .type-policy .type-policy-arrow{display:block;width:100%;height:50%}.color-picker .selected-color{position:absolute;top:16px;left:8px;width:40px;height:40px;border:1px solid #a9a9a9;border-radius:50%}.color-picker .selected-color-background{width:40px;height:40px;border-radius:50%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAh0lEQVRYR+2W0QlAMQgD60zdfwOdqa8TmI/wQMr5K0I5bZLIzLOa2nt37VVVbd+dDx5obgCC3KBLwJ2ff4PnVidkf+ucIhw80HQaCLo3DMH3CRK3iFsmAWVl6hPNDwt8EvNE5q+YuEXcMgkonVM6SdyCoEvAnZ8v1Hjx817MilmxSUB5rdLJDycZgUAZUch/AAAAAElFTkSuQmCC)}.color-picker .saturation-lightness{direction:ltr;width:100%;height:130px;border:none;cursor:pointer;touch-action:manipulation;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOYAAACCCAYAAABSD7T3AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwksPWR6lgAAIABJREFUeNrtnVuT47gRrAHN+P//Or/61Y5wONZ7mZ1u3XAeLMjJZGZVgdKsfc5xR3S0RIIUW+CHzCpc2McYo7XGv3ex7UiZd57rjyzzv+v+33X/R/+3r/f7vR386Y+TvKNcf/wdhTLPcv9qU2wZd74uth0t1821jkIZLPcsI/6nWa4XvutquU0Z85mnx80S/ZzgpnLnOtHNt7/ofx1TKXcSNzN/7qbMQ3ju7rNQmMYYd/4s2j9aa+P+gGaMcZrb1M/tdrvf7/d2v99P9/t93O/3cbvdxu12G9frdVwul3E+n8c///nP+2+//Xb66aefxl//+tfx5z//2YK5Al2rgvf4UsbpdGrB52bAvArXpuzjmiqAVSGz5eDmGYXzhbAZmCrnmzddpUU+8Y1dAOYeXCtDUwVwV7YCGH6uAmyMcZ9l5vkUaBPGMUZ7/J5w/792/fvv9Xq93263dr/fTxPECeME8nK5jM/Pz/HTTz/dv337dvrll1/GP/7xj/G3v/1t/OUvfwkVswongjdOp9PzH3U3D3zmWGnZVXn4jCqs7wC2BKP4/8tAzkZsoWx6XrqeHZymvp4ABCBJhTQwKfDT8gzrZCIqi5AhiACjBfEB2rP8/X63MM7f6/V6v9/v7Xa7bYC83W7jcrlsVHIq5ffv30+//fbb+OWXX8ZPP/00/v73v4+ff/75JSvbeu+bL2WMMaFbAlpBNM85QX+ct6qoSqkPAwuQlBVKqGNFSUOAA3Bmu7gC5hNOd15nSwvAOUW7C4giUCV8Sgn5L9hNFIqTsp0GxI0ysioyjAjkY/tGJVEpz+fz+OWXX+7fv38//f777+Pbt2/j119/HT///PP49ddfx8fHRwrmTjV779EXu2px2xhjwtdJZQcAWQIPLPISsMJaSwiD8gzIKrwSyATE5j5nAbR5c1dBUwBlsEWW0h6LqiYsqFPAQxCyRZ3wOSARxmlXMX5k64pQfvv27f75+dk+Pj5OHx8f4/v37+Pbt2/jt99+G9++fRsfHx/jcrmUFLO31gYDWblxRIs/TqfT7ousxJsAxXA2Gc7TA9XdgfdoHbFsj76X2+1WArgI1ageGwA3qupqoHsmcbI6Fu93quggFa9d7LeDtgKfAFHBJ+NEByIkcJ5KervdTmhhGcgJJSZ5vn//fj+fz+18Pp8+Pz/H5+fnmGD+/vvv4/v37+Pj42N8fn6O2+1Ws7JjjP6wraMI5E4RZ8x2vV5TSwkquotV7/d7Tz6HFWsD/qNcdw0CQ3q/321c686TwDVIdbuy73zNldhSHb8I2klZznm+InBS4U6n0302aBFsLhHDAKJVJVglfI9jhvu53W53sLANYNxAiDA6MCeUHx8f9+v12i6XS7tcLqcZW57P5yeY8/fz83Ocz+fnsSmYUyknWEG85WBst9stzSLyMdfr9Qi08iY15UZ0LlDGLhR3o5zK2j7OPUTD0E+nU3tk7Xb/16NFbhloAMuY1zjLUOO3BKeIDe+Z8s3/J4gFo4TM5jPmuRg28foUKKVSwo16TgA5npywcWLHgYl/Pz8/73/605/ab7/91m63W7tcLie0sZj4mao5gTyfz88E0f1+j8EcYzwTPEG2cqjyfHNF0M8fuqEiaOVnRzZZQNh5fwQyHg/HDGfJo89Q1zb/quu5XC6773I2XKfTqd/v9+d3wuqWva/YTdUdEV3fhIv/Viyps6YE3x3r43K5bJQS66zaxVGFsvd+//j4aF+/fm3fv39vt9utff36tf3+++/tdrudvn37ZuNLBaaCMgUzC+rZRiFowxUuJI8YMqcCp9Opq5vagaYU6lGJA1XQqejchw6Cj0Gw5nYBrGw01A2O206n04BGouNNyTfp/FwElhUey6nXrIKw7QQWddxuN2ldL5fL839gSPF8ahu/JvBO48CPSuqMf8Vp9/P53L58+dLu93s7n8/tfr8/39/v9/b5+TkhPJ3P56mQ436/j+/fv+/iSgbzer0+AZx/5+88bv6OMda6S5z6kd21fYC9dxv7cIJJ2d9AOS30fPMzyHiTM8B4DF6XUlYHp4KQW3W+1t77MNB1vGHxWq7Xa7vf78+y5/N5A+H1et29xuP5dbYtyaRu4AksbPq6936fjRzXRxBbPr/b+b18+fKljTHaBBBfn8/n0/1+H1++fBnn8zm0sB8fH5u4cr5GuBhMVk0EEn9RsctgVhM+ixlJtMA23R8B6yysAstBOgFXIKKCMIgToMqNEu2fYMH7ztc732dQKkCj1ytAZtY0Kx8pIr8GGJ+AT3V+2Hirhl++fBmXy2Wz73w+b17P8p+fn8/tUwGVleVkTyUb68DkfayWY4zxNRihU4EpLJPZVrK+u7J4/mgfKqeLW9X2REWlItL1diynbDDb3+jXgYjQqn0rrxWc+NkILP7F7xIbMvx7vV53x40xnlbWJF12ZSag/N0pW6t+ZzmOMzHjajKwDfond78zYTdfq18up97zr2q8v3IioBprRtBl0EZ9og5WBRGOdOHjIjXF7UotFbgOWnXzIJyzYvjG5IYgsmMOxHkz8OsMSrVNWeq5T8DaOcbEv1Od5rbs9aO7YvMet63EkF++fMExq+MRl4/L5bLZN/+ez+fnZ6KazuMqXSQVO5spJXflHAIzes/xJseckRJiDMog9d6VfRrqXMr6KpVV27jRwJacGovOAM1zMdQMnwK1AubK63kdCChvI1C7g0z9nf/D+Xze2Vj8H7Gx4P9duQlsYCrqyN8XqG3Hm/10Oj3jw/n+crlstuM+jPmmxT2dTuPz83Pzt2pn1XsEHX/bnPaVqVmh0xwOt0o6XLLAHePUU203wHfcrspCwmV3TryB5s0Mseeg97x/BwzCjBlbB+pRAPla0BVQuT6V6QHdBlj3d0KG147b+DqxQeUymDO43W4dQar+TIjwmAd0z8/h65vf0/yLv3Pb5XLpru/ydDo9s7ET0I+Pj6dKK9VUEIeKWQWPAOrJ8LKd4vE+t91Y3e7UFlWatg2VwJnb+HPmtvm/sfK59/OaWF3x/eP1UPHvA5DDYDpYXfb0drv1V2DkBkxtw/tEWVVlXWdC9pFYs5/jfh9dS/16vW7s6lTG+TfqsxSJHxkXXq/Xdr1eu4LsfD6P3vsT3N77DkL+zPm5jSdKL4zR3AxQd6rHkLkYlSowsrq7znzu6wSwdsMJOXmA5fBcjxtgMGBYHlr5zokhtsMCTgXLQOW4XC6dEyEMprL8mAQzXRgduix2yZzorxkYsDn3hB1VeMLGsXsVtgl2pW8S3svk0vw7R4hNaHvv4cACl5HFzwIH0Kc6zu4XjDPR/jpAVxWzO1Xk2DDb3vTcxeGU1iWZHkmIDWziWKvirCJ4Dravs6IJ/GG6cTqWdXDy+fArQDVVkLqkVjAoZIITdmmIqXwqa95N3+MGYoZQdRVNO53Y1xRkhO16vY7eu507Ca9lJnbGpxOemQhSw/AQsmmp5zU9BiU8G6wvX76M6/U6Pj4+do0Bz4CpgiknTUeDqwlKBmg3u4OVjrZ1A+rAcgaejWq6eJCvCYFDONSwOgHX4EQRw8lxbzDOdEK6gZ3Hk1b+8g2o1JFtKXyv/fEdTXuWjWXdAZiBp6ADeDrCFiim7B6ZFneeI7Gvm/PMkUDX67W7xI8b0D7/v8dA9qfN5oaCf74WZjH0mf1cmfY1Y0JUFmVrTWu8uzkNcLtEj7u5FXBTkfC6GOA5q8YMxO8KVvF6sAVGdcrUbsKODcQKkLMOMdmlxum642YrPm26AlhZW1YB1R+rrGswE8TaYAWeUMxdf+WjwSvZ2Ef3ytOyfn5+PpVPAaqOn43MtNBqvmjjxbjM4lZjZY4gqNMI5ktaW/sYKNwS+9lFQzGihmMCKPa7+Z0V6Eb0GRmobtpX8JljWu5FMLN5ja6hG9kwQgZqf5+1NH5UxzkFReCdWhJ8XdlGUkxO7HRlYRm4mVO43W7ter12TPJEw/rmEN3L5SKHIWZg9mz+pUoKOYq5bJTJdX2gme1UcxMZQFaEQIlHct32M+Y1BzGkGuzfiyAN9z+ugplZ1symCrDCYYkGxDTpI9RzBy0rHyeDUC1nWaeUaD9n4xkNyYMBDZtzZ3B++fJlY21XFDOcARJlabOyiS3uCpLI9jrZjCDkaVvcCCjwognKShWdzXZWlZMvVTgD8LpqlCLrqgbcB+qYwrgKYpT0ccCqbKyCValkEabn/FynogCrPKfqf51xJ7sGB2ZXcZmxoSOztjx300DZi7a0/2AIR0UlBag9SuDw6KcAzlaB7vHZvWpjK90dyrq6bKyDUZQbR0B05biLQkHIcSUmgIK+SwuqgHCnoio2RQU1yj+BnBy9pphVKLGyC7ZzFK1pxWK+E8IhVCWLN/uLtnUU4ayoYLoaANz8FdtaSvY4pV0BEW2ls61czqllBKpTyKgMAhrZ1cdc1RROtPmvWNkdcKZ7ZKxaWjiPLJMpp7OZKxA+rqG/oJLjxf0pnJlqLoDZo3gyU0mKGys2taKecj/d1C+rJSplBqlTyAqgR+D8KjKlmRL2gtUcAdCtsL+ijCNT1oqqqkH2OHEbG5sDFnUg5Aa+yLou2VU1ptj1S2ZQqv1ORZN9IWzRfgaRBxKoBE8UWyqlJFtrIc0AxNjSjed99CTY/XDfSzCz5M0IZoVEsWnPFNTsl8ooVC1TzbGgqFZNDSgVwKK+1sGDMKqxZCWGVMDysiEr1jVSQJUYwj5iHOlThdHt44SQg9CN+nl8D90NMIgAdgr46JqRiR9I8vRdFvbr17m/yxUMKjNLMiVUADwu2CWGhhi+F55TWM9M9cogzms1dnM4uOF/LAEYWdcqnM7yFmyq3IfwmOROd7Y1iFWtOjoY8To41mTV5IysgFFuRzsbWFGbNIIJCDv1dOo4lZG7jWBwRFtVTKuWyeCByJKOan8oZ3ep9XddNl0tDuaywLz9cXPYeDAA0SpkBO9sbVcTOVWldPv4uyzEkzxHtjvonHoSkFEWNoo1d8DhcQputd2ppNon4BzoAiJ1hBFQg0dVtdbGHHDQWushmNEQukLM2QO1G2Y8bgTXqFhcBJj7EjPgcPts8US8qPpPB/dXznOh5Z438tzH5ec6QgrOKrRRfKmysBmUDB+PhYabMlVPER+GCSITTzr7am2tArH3bgcEzPJm+cr5jJ4NnHNFDVrFXcI5Le9k5Jnw+bedbV+FfRzZIHaOOaOsLY0/7UGs58DjrGwKMIMFIGzOEW1/jGsdAtCN6hEAI4hBe9YXeRROBSVPAVPAqvIM5bx5hVKWAMP6zBRy3iescridVdFBinBxXDnG2GRY2XbCvp1lhvGtO9Bxu5h908XQu42lnSArMFdizMim8uwRCxPGnnOS8lwpnbOiDqTAjsrRN/PcoAScCbaACqVM40ylnjjTBs+bwWlAG23/UKbdkiwKWIQPGzWaczpoSlxPEj822cNWkpS7FyzsDrqpfgpG3jahw2vgbaSQAxuLWZYt7JzyNe8JoZpNAcvDFOdw0wqYT9AK1rZz/DdbSlLPp0ryIxgQJlK9AZlEq7IOXpohg9PIhrCng88JsOxiV4ZWAYfg4sikx/8ky2Z9l862uqwrfscIH8+ugTmVGyiddeVYUgEMn4GZzg14EwIsh9sx2cKKiWXReuOE5gzGOQgdlRKVVdlevqb279Xq0Qnsts2VDaBO0coezsruWtHApu6sKG4IBhN0aGU2kLrMKGRTN3HmbCDwKV14zvkMEDG4QfZVspVlaNU2mhc5TEZ3N1h/zqTheuLpW05ZWTGVjb3dbnNmxKZBnN8JqidaVLKAOyARNLS+MB54Z2+VaqoMLKroVBlngefnTPAcoHNWCSvlfA8CI0HEmBNBnBlXyMrzU7A7WVm94PPqQ2gmqKx+WDGsnvilmcSOBJqOK1nYyAIzuAyesq3UdSK3KfWcYKD95HmfYOU3qser2CtYEUA+FpfqdNvgPBZUBhDrGONRVlQsh8rLcaUCykHG0OOUwTlLBrsh5soEMGezi1E4HRVt1icp5wZEFXdibCkG8Y8vX75sbO4E0iom9z+hjSiOfy3DhpXItpVhE+UGQdvoWjtChmrGHf4YAzKgBNnGtuJxFCeGdhUAfQLLK8kBYAP6gvFJZajMG3Xkycy8KuC0q4Eyymwtwdxdv2M0mIBtK0LKnf640j00Auq4gUkdWGlhs22qJc6dZCsL19oxnlTJG4SYVRIGpD8TPFBuM6OElbS1pldid4mGAyN6ZIupbC5bXJN9fdpbThSxLUaI8IG1XIYBxW3Tjs6KQosKcxfxcQmdnwRGM10GnFcCy2XYunLMyAkdgk4mePiczsLygthcBut6goOqS7YVFXADLjaosB6s6ofcZWAZSIRYqSUkizYwttYab3vUOQ9w2HRxIIg8WwRVeE68xi4UtL3zRphxplzwuZrcqYCq1I3jPI5dnJIygEohMbPqVJSzrwzxBJTs5zN+ReUSgxikPQVF3JVBeNQxbHENrEMNvEdFZVV9lH9+ORGEsNZQpyTNc4C3AG7XF4ngzq+DrO2zbuaaOXgdaFcdkEotoSFBVX2qJ0C8OWZeG4KGlpghA0XfTOPCqV2qqwQ26QWfF2PMLhI2w1lVAa2aPsYd0za25MQRwgcZN6uQDCi+ZxiD4XEM2kZxOT41FnZnaRlcpZouzlRqqdbQVWopQoSB58RV50lBNrHi/AwXS5LrwDVlpY3Fc3ByiYGc52Trist6kOXdwInAQtJpp5QchyaquYOV7Su+fxVMaV3dc0RE2S6mUY0gLt2pMcYqrKIQ9w2l1gpQUMtQYcmmbt5DTNxdhnUCjQqtbK9SUSzvrC0mmhhE1e2FS2+oxypy/ZASutkmtjx3vcBC24PX65nbqkBCRhfjS9kIYPnee8cMagVOhI/3T1fAmdtAWZsCswTJCkQVNa0qWKSKPOpHAUhD9DrbVcyoYkwqhvh17vYAayXLQyKGYdxlUDFp494rBXRjYgO17DDYetNIUj/ezp6S0lnlpEwsWmJMkOwsKXeZKEAjIHn0EQJISaRBcO6UMINz7p/bEjjnw4ft+xmDvksxX4G2rIris7qaeKwAFMP2Oi7n4criuZwtpSUwpfLxSnORSrIqusc5ZFaXysqRWjiZ2DyAWEIL35tVSoQElFACjOeGGSE7AHEQgdo/LSvCOgGBvkxsmDbvlS3Fp5vhaB2TAGqRKrKKMrhLVpaGzEVjZ0OQxDhaCTA+QyRR1d15aQzrJntL3RibsipjG6jlgL4yqbS0sNYg1e84vhbBVrElK64CUcWYXDfKxhpIuxiVJZUxsbMy/uRBKTNRQ4kQ3LdRYLS0rJjRPlTPqY6gdJsEDc+aQXAn+HgsNUCbRuF0Oj0zwnA7bWDkbhO5Ens00qeQhS1laBMl5M/cAaxsLF8rKyql+Tf7ELLEGu/ixiimdCvo0TjfpjKwaggen4eh5v7LokLKbLuyvHhcZG8dhGrEDx7Hg93ZppJF7qBqO3iVveXEDQNInzeoe8Yq6ePaZBZ2JviM3W2UAGotekRCAGq4EkF1X3DOnR11yRsBL1tRa0PVcZiNFXZ2c34FskvomInQQ6lzpJoZbJxk43NwKJFBquJSsrByHydxKOnTxQASBmS3j+JMnsHSla3Ec6K9VWoJVn9zfjwOM7hqYAAqJQwE2a3nA48J2QGegRkpZNivSY+ys3EkKd4oJIwsvIHl3cWgLt5k4NH6OmtLWdpurOkwEMupYc7eMtDRhOcI2ui5JhVIzXzLyto/GAPuZoyo8wkoduVgJglCt7OhGbgID4Mq4si+63zUS1FuFFXFlqyaj2emHlLMcBqYu0FMuR28BbB7lOxRMSiCQXFhCKuwkhZ+pYDiGSgbsKKV8MiSRsuHSIWM9rklRiIlZZuqXjsQK8ooYJMgq3JKWVkhHbhsVxFUzthOWPkYijcbx54IKsSdT+uLr3crGKyoYgFiGR9iBk4kfloUX+JIlQRQqabmpgnhqtpQpb6RVQ1WH5DnrS4hEoGZqaerQ2dhFbz8XePxShmDbo70eISjoorO2vK8SJXI4SUmEU4zWKDzUDtWTYw7xXlbSTEj4FRg7zKnKoGRALv0Gs9Tgc1BpCywGZRQAtqVz2xrBcAMzEpfZwFSa2G5W0QBFjSMapWAEFa3HcGN7CxDzECyIkJ97qwrqWNTWVo876PPsjPkj2wvgroM5lLZKMETKVql/CvnWVFiFa/SzJUQwkoZsr67Y6vlSRV3/2tmNTOY3vnaxYwMuoPKqdzR1w7IqHymlPxaAThfU7Ko2ZXYj4AYJHL+kNdKwRQYESTRa5fsUZ/rVC1TMTyWVyYoqNtuzaHsMyv2tvoarxdfqwYgU1axFo/cnql1FGsqK+uAROV8BX4GU8WcZTATi2q7Qcyi0O0V+GhWBMNRUkn8H1SsWVE5By3Gi0ECqUeJoBfAtDa4amkdXG37AGP5Ggeb84p7UazpoKRzdFzeQ8HkoHGxprKy/Hpm5t12p47J6xTYDEz7uINEXSuxYXvFskYAc+ySxH9sf5ftKzU6IbwVBcUGg5e5FMCEXSErZR0wGayV19woM9guPjTqJdVTqR4uE4nJnLldWVkECCZLd2VLF+xtamex7IpiriSDUpvrpn9lrwGMCHyppMH+ps6LILsuFGUj1XEOXiqbqSHPUKnClpWV68kqtURVNDY4TNaocykoYeTU5ngGEQa/S1DnnE4AeXMcKjHPAmFVjCBENaeyLVNHfr3px8xUstJ94hIpfH4HKE/eDaArK6lSyVVFbdt1gxTIVk3pppVlFXi4pEhVBTObquohU85MLXn1iahvUkHJjSCMc01tLFveVVBx0DodM6jftCu7DOtIzYxrc0qp1JGP2ayYFz2Gb6HvMrO8cnGtV6Gjm3uImSfD2GpWK6uowbZGMxFKQCo1pOMtcMXFpRst+hXGoAomF3sSTBGgTglbBKWwsQ3tZqaYSp0Z1CimRDWFcCJUPYJ00BI5FkKYNoifuQxmN88SWVXWLMaUqqqgC0BmQJR6sk3u9NCf6jYLXxAfqsYEgVLAhRY2AtgtflZNFmFyhxdrLkAdWlk4D88M2ixHyepIdhMHrG/iR1ZGtq0MGpbDbRPYOXeSY1M6Ny4ZstvGSktK+XbFPATj2D371saPEsAMXhXrsZ0km/XStkhhMyBfsa6uXFZe2VCe+YMr1+GKgwrQyNYq1VRrB+EizAow6NsdNKcyVEkYeM73ys6q4kAHp6BiFklTkIrVC5oYV7uzwOGCz4UJ0Stq2lWMJy4wtb+RetL6tZFicnJmBw5UjCvXXMZVJX2MQkbf+XN5EWd78Vz8/JEsMZTBiKNzsm1inLRUQ74H4NidaqI68j5sAFgxcRveC7ieLJXfQYxjZZ2CsiWFewZXJmBIlZ1tdtrX4hSuateKso/RZOtOKW2nmq1oTzeK6dRWAWu2NRVb4hq0SXm1GvtugHrbr5IXqmSktg5CuDE2MSlPwsY5kNE2Wp3AqiZbWVLAxiBF+2iBZbuNj6MB6rsMLC7FyasaYDyo7KkoPyEtw3pEMXfPvxAJi2jAQQgjrz0rLIZSWZlIoNhwd5xK4AR9mYNjWAaLrnuImJeBVN9zBORObVvbr+mTTfFSEJLSRnHo7hEJoIi8MFqjxmvgmF5URZz4zLFgZZ8Ctu2X7ggVccKm9gVxIsOHqxXgNMKnFWZYnf1dBnOhayXq17QwFlWW09eNKyVJFmXqaONGA5aCegMbJ3UUkGY1ic3nKWgjq8qfVYGQG1gRt6rs62a6HiqqUOqdesK5NmX4nGofJoiE1d0dF9lVVkvT1/kEEaaCoYOwFpcVcoLM+7669PxC9rWqktH0sWUYld0VCpuBZ/stVRcGgy9WX2+U1Qthi9SzAqSxzZsy+OiFzBYnySGV6Gku44rD8BCOZBV3BvD5+AKRHNwMEsB6EzHnJpkTAeiUlEGkcECeB6GDZTp5YEJTlvdrknxYjTllMkfNtXwDjM7uVjK5JXUUn43rrqpK2jytaxHW0M5G8DC8rtHMYs7KSgduVQMGTYFqFvVS6rkD3sDJ46afdYFwoq11AOKCBLhvwoUgc8IGANycR6knZrdJPdsuxnyjfd3FovTlRMdEdtOl5CMV5EHsXQBis7TOwvIDZaGj2Vnpbh7cpK63VwYEMLwqbjzyl699sawFFkF1yqjUU31HfC6sW1ZFVFuXVXVgz9keEaw0ys1lWfm+azQAQSWA+hKYVfsZjPncAcUB9oIayy/UZXRNckDGji77GsWbvBo6tPrWPqOyVkBUq+INeqpzNdYs/u0ifh5qmpqIW+33JVSUcwY70KL4U9lYdU6ljtSls7lmfi9g3YzeQfVkaGFaV3ODCnaD2N8wsEDFklE3RzM3ZghdYkWHsszq70FIecnKkVkt8ezMzRq9bkGuKojRLBVSod3Y1yPqKgYW7JRQTPVyy5xIYLjOgxgT52RKJUY1dOrIiRd4futQx/A5AcSmEjz0vFWrkLzvbWAu9HOWbGgxFk1VNTpnBKk6TgwisI/HcxYXP1uAWO72ULFlBTq+aSu2VTUs6hrxM2CF+hEor1VIA9ZmFUaab1lSSgZsVs4sxzHlVLoJHr9H4DhONTkI1XC0/wiY2NoWAG5RlnHFnq6oLccpQddMuJ/O17JVA5OHLi0BqCztq7Y1++ucCd98qLI8MIHBV/cKjxQTme3hFBS3MyCqnDsuym2o80HjvFFTtrURmNaGJsmVahImjTsUXKtQZTAVs7Mvv8/+fzUrZAXcLJ6M4koe6XP0b6SmWWNDzyUpQ8bl+LtWx4tuqZ36cRYV3yuVxPNwvIiqiQCSmu7srgTzR6nkyhpCarXwFy1vGd5iP2cY06lFr5Njhhg1Y6+NB28ftbK83s8rf7kLJbKwDFPbLg25a0AdZJEiqr5phixKMDlRUtcssq1hriLqGoH+zeNgVm9OemjsETV8JdF0NHnkIFxWY1OB4Yrp7rtWJ7NgAAAPXklEQVQ3oNs5nplyVf8u2FoLu1JrHveaZWQjqAkshtFa2gzsSG3Zpkbvg3HafF9slPPlldjFlK80Gysm8Mr4MPhneNWENPGjAIpmilTPATdTRTXlCBYHYAQuPwA36xIpWtGN4q3Y2MhiGsUpuSSnlEJRD8PorC7CFYVw+F51qThgabxsTxWzCGY0ZSsb3lfqAy0OPNjNy8xiQQKsHYFQ2HBZVvVbBuq3m1oWKajqaonsM6uZUr6CjXWNZ0l5E3h3jURma6kP3MJIiy1Lm+kahQq41N2iZja5sjtlLYNZHZrH6qUGm4vMbDp6Rw2CFmvuyFkrBcCyMtFqBaECmsHoK9BZ2LA/lJcRqSaDqnaWbrZdGaz3DLgIvBln4woGztbyJGqslwxkhhHrTjTYFXCtOoKS8uLdofVdAbOylGU6nlYpXWZts4nXBq6WxJitMNokHUJnbnJplQm+aGpY2a5GMV2QD1hRubBPFKdumf5OHkLHz0F9luE5kjBjRa0nFE5CUGqHw32MmjZ6xkgINVnSnZ1VZStK2qKlRaLlQgK7uTq7JFXJwM+3SOEKyhZNI+tJ0I5qMYy9k2qJD7dVWdqKXa0CKNR0Ccjg+B2IYu2fcBZJZkMFgM11r0X92wilghFGgzVnexlqB7xL9mS29SiYUVY2nXOZjNBRsyDsQPRWW5hrZ4XcdC4HVWRbjgJr4sFofK5SzjQ7rhI1UebdPdEbj6sqIvTZQZ5va08rABsAW0UxeWytAk7A2KJ9ZpxzCioB24XFtYAeXYxr6anSqhLgppEqWbGwLunTgrV+IjWlL29ljaAl4EQMGsErp4apeZiquwRXLXAqOCeru32mmydc6oWTSWpFAGdzeTB8RTHVMEtlM90CbbQCYhPjq3egYr1FGdYIQjiuDGZ5zZ/AzobKGOyLxti6c4Rwtv2anyWlLICnlLhxJRXt6A5ebDBWFNONbxWZ2d02mnu4S9YECpeppV1zSWRBWxHYzVIv1CXSouwqqX3jBBBDZdYQbpTQW4ZQlS8r5kH4suSRmg2++3JN10x1PaAmEkmtYlEdeGpJEM6kOuCqCR22oSujj5IV2HdT0zj5prLKTjXFAPjdQlyq7xIBxAQP5yMczG4VxAKw0n6ilZ2QBce2pLulkuxxqnoIzFfgqyqjil9S1VNwBrFmeyeops8yOjZUybZdfS8CuaTIJumzs5tODaNtLpFDQ/PcJGweLhmeL1nB0KqiUDScsiUVD89Di3HtrKtSULw3RLiygZD+7sF8JTObgYsrGvDNUFRGl1iy0Ll1YkUc2aJYMog920I8qW6YDCg1Mqk0JHJFKXkbgbRreI+qpYNOZHrVcDUba7pjsphSJNtK6upgRNAVoOS0mugBeN4bIZgHhuPZ/s1ENaX6KsVr+YNrh1Nb7ipR0PE5zbNRegCbrHRUw6Yf07dLBJl1f8KB9as2V1nNqAsl62LBBhehwalerkHmB1JFIEZKSEusdl5JQj1nJlHXSCF342gJ9CYGrXelknJIXqVP8sD+qtplCR3XH2qfKq0ygMp+KnVkKxNlZ8m2YkIlVMiCnXUwl7qznBKSvQz3m3Pt6oQbXO5b5FixCh/fHxUQW/AEcK6zCNqKQnL9sywqmKuwvqSYzT/aPVNNpVyhvRW21aqciCsjdWvBwILUvh5VyCzbWoC1pJjJ680CWsl+udKB6T5RwG1mlohnlpbg47iz5U9ha0FGtmRLFYBtO99y97Ap0z+ZDTAog6kSLZsMHg/IFkkgp6CpvU2U0cYVSdnmkjwBdOmXbxTWNWzuIbipMioVxEckZEoahSOiy2M3K0jcC1LhVDwaqG0ZvkcWqCnrG4GIxykrqlbWdw6LQyBaZR8HmLRIhQWsHswD42ZXVLNkf9l+FlW0HVQ2lwFsC/Z1FdzlQR0KaPfo+Fdfu+/dwVRICu1CGR7AEIiAhc+AZUF0kOBaPxmUqg4i64vQnU4nFDYJ9Nz+1fVXveH9qmr+kPILx8oKcRV/BFbxbE0JMT0kSD4w6L/lNY8ocsqagVdU3A3MjxhxcGuqzsPH4irpaow1q6OyrVjvp9Npc59E91LldboYVzJWdimWfAW2SNEKcDaX2FmBLLA/uKxlmhh613Is1URQApbKfttwxL02q6Onx5pQxSbPojAg+v5hAnN6LHVRDXIsvKtRjiS0qJUyZTAXVbAK82ElFJWaQdVoqUC1Unt7BVaTQudM6SuqexjQJN4+0icaxv/utbKv83ETbT8H8gjcOKxOJmbUa6OOVXht3dFY6rHv9XoNzFLceEA1o8+pKm0LAHPHZ2rYKjFq0hfZFixsqHJgD3eD5n+U0kb1mFjXkn2lvMSSOsNE/CdIAKF0Sytq6urOHUN5gwg4GZosgbmggM5ucra2qrS2Ig1cbiBBcxYzgzUDNLCvL8GbZXNp6ORy3LmS+Kk83zRIAK6A1ioKa2I9NapIuiUFdfC9766PFZUtqUr6KbWk+zZU1a/ZrIXEztrjTOfz7hwKziCeXIaraHtbZIMz+2pGgazCmw4qWAFvEdhodYp0Xq0pV7G1YWYWbO4qhGq42+Z8BYtrLWvluNPpZAeaFFS1vubPgbgxsqcpnAaszBovKaFoDQ8BGtjfUOl4NAG2nmQV04feJgumvX2fsrQEWZghL0JnVdYkn3DOZIeRN86RqPWCmsvGVqEMRnwxQAxwS8EMYo3IzmY2+BCcLp4MKiuyuhImamlbZFcNoNl7tp+RHd18ZjQIRKyXdFRhN98/hyKqwXWNo7O1wiaXoHN108REZZWEq6grnIfjzeg8jdRf1XEL4kkXa5bBjKxoKaljBjeHlVxQ4GaycpW4lDOAKtnTxHAtOfzOtZwHAM7sqVXkV6yu6kap1nHkXKqWF/4XHqjenNKqBjpR3l1ch3Ejg1+EsgdQhsdG0B4FM9sWAVWpuAyiwTPleZxt9VyZVS2qXfReWqTAilpr9ApoWTjxymit7NwV4JTriZyOA9B0k7HFfULourmKYHVnRQvqGL5HMHdqFcR2qWpmcK6eTwx2dipWrviDilr+fKWq3OWRWdHKwA4eu8wjchbeRzFilqjjZN3ufCpfkJ0/scVpnYk6L0PI77lxdWCZ87WiWm7B/AGquQSnujGKsB8CJmiJq8q1pKIVWyqOiTK66r18BN8r74/AE71fdC3yPS2MxdOpnE1tlVxD9JmVOoggN+r4PjAXVFPa3Eg5jVJGFVUGNolH20GVrUB7BOySWq6WqYQdWR92pcFMYMwckbSgCKCqD67DiiWu1g8MQC9ByfcFqW1L+jL714qNCuznoSxt0da2gtWN1G8F0BK0NN0nuimelUF9dIdAfjO44UT3CjQLoUeLHJFTO3gmpRuIIOvwBQCbqNeo3qtZ9iF6xVK13GRlo4zqimq+CGdTiR1uRY8oqgE02hZBa79kZXPMquxRHKla2saZWN4mRqZUj0vLCKhkjKnqOQHNuSZVJoKvAqS1wpEquvWDC1B2ypwrCPsRMEPVTODMLJMDv6qeKXwi2JYV5Sq4qKyvgGsHCLiuj2jR59V8gMqSJ2FJZRXEHVRHj3sFPrct6OpqlW1GpatQdt0GvwfM6n63InsGVFhJGaBqgqqIV6IsXllZgySPq4R3bnt3wi5cv+cN2yqQLW1T95KYVsWWtKk4cB9W53WQQflQYR6Wl4HaJZjvVE0D5yvq+RKgZCs5qdBEP5sD94cAvQLlSgNaSMAtHx88BuNQ41zdFsX30zKbcs0MLD/ihkpQzl0wiTqKLTfbKmCmyYICnK0IbaieC4CG9iSyLQ7cIMGQwau6TKoq60Apl3WN40LZpca1CKKK9VQyyIEn8w0F8F6CL2h8o3ixGwC7s7EWzCOqmcApYxYD4jsAzVS0sl2t98pA7vrKophCVSonbYpgH6mvSn24pTBV4sdtV3BtMq5k82y+IADvUJ0uAlkCVTxIaPm+UNu/qkV4F1TzHXCGrXIAqItBKypqK99VtAOVs64O4ObX7pHLVCpYHcRmwvLR7TvYAKBBN58LGVzDuFz+hQbWgncQyCZAk+VbsPSouf93261iZgmfCpwRbAvqmSqriU2PwhjaoOyYqtIegVXViTsmyta6bGySpY3gyRrpIyAeaWDDxtpsXwKyalMDKNP7YBXMqEskUsi2uC8FNAPxAKTVfT1o6VzM0E0jF+1rWcUuHvdyg7vgoFplX8HpvHpMCOMRUPHzZkInsqlFKNX/EIO52E0SxSzOwob2VmRLW5D1XIU0rbgM1AzWgyC7fe8G7xUAK/taEBat7luqtyP7EmsaJQOj5F+mrnZfCuYCfBUAWwShyd6pMY/vAHG1UqOYpbI/gy5T0CMKm+UO3gFuC85dgfDVeguPDfITrIBLsLrcgdh3CFgFZjaKJ4Iv3F8ANEqvuxR1tVKOgLoCa1jxboBAkj6v7j/icFbA7f4rfRnQDLRViG13i0vqBQrYVqBbADZT0ZpiHoSzvQpopKIFS3sE1HfBWlHXd0H7LnArqvougMtljHBgZnh3Eoz/BKjLML4Z2Aq0+hEJr9jaVUBbvNzCIUiroC7AWmmFw4o5AK3MtB5VypZMSFgs05JyGVwlwBqsEGAAa2ZU1CjUexXGsE4rKriilBvFzOKKo3AuAroE6QFQU3u8YpNXwS5k+1TZt5UrwouN4KiUEw+k3ZWDp1RXHNRqXb21Ts39945yZSg3VnZFNQ9CF3XeZyr5DgBXKiwCMa2MxeTDYXgP1Fsf9QNKZc0k81RJk3r6EQ3rCmBVyLL75EjZ1pIVDHoFtiOAHoB0BdTVylqBsKKKS+AeBXJVLY+CXASuGvO/Auq7GuEjDfGKg1oKa1z/dmmi9I9SUGNhl0AtfulHAawoYrnSkmNXAVuGEhrEVXvUF+A5Ct2PqNOjDetyna4CmeUolmeXLN4Aq7C5Sj10Q7yjgl+t6CNxSRHmI5X+CpwreYB3Qfdqna4q21KdBuc4GoZsn49ZOOiVinwHqK9WzjvgeweEh2AU5+vtxZ9Cd9Wqkh49V18E5oj6vVyn0RStAyGIO5edXRKd5B0VGVXq2yr3xYp+5Ut+C4QJ4P1N339pQMjRejj4vb/Dcr6rQc3O/0rjmtZpeYCBiCHfCemRbNhbK/pNUPc3wfKy5f2D7OlL3/uPhve/oU4T0F8f+VNM2vyoiv0jK+KHQfdHq+0bncz4oz73/+Y6LbKw1o/5B7eOf1Rl/0du9B9tn/9bvrf/j+v0h6ttn2tp/r/4819y4/zv5391uvzzfwDifz6phT1MPgAAAABJRU5ErkJggg==)}.color-picker .cp-add-color-button-class{position:absolute;display:inline;padding:0;margin:3px -3px;border:0;cursor:pointer;background:transparent}.color-picker .cp-add-color-button-class:hover{text-decoration:underline}.color-picker .cp-add-color-button-class:disabled{cursor:not-allowed;color:#999}.color-picker .cp-add-color-button-class:disabled:hover{text-decoration:none}.color-picker .cp-remove-color-button-class{position:absolute;top:-5px;right:-5px;display:block;width:10px;height:10px;border-radius:50%;cursor:pointer;text-align:center;background:#fff;box-shadow:1px 1px 5px #333}.color-picker .cp-remove-color-button-class:before{content:"x";position:relative;bottom:3.5px;display:inline-block;font-size:10px}.color-picker .eyedropper-icon{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);fill:#fff;mix-blend-mode:exclusion}\n'],encapsulation:2}),i})(),Tn=(()=>{class i{constructor(t,e,r,a,s,l){this.injector=t,this.cfr=e,this.appRef=r,this.vcRef=a,this.elRef=s,this._service=l,this.dialogCreated=!1,this.ignoreChanges=!1,this.viewAttachedToAppRef=!1,this.cpWidth="230px",this.cpHeight="auto",this.cpToggle=!1,this.cpDisabled=!1,this.cpIgnoredElements=[],this.cpFallbackColor="",this.cpColorMode="color",this.cpCmykEnabled=!1,this.cpOutputFormat="auto",this.cpAlphaChannel="enabled",this.cpDisableInput=!1,this.cpDialogDisplay="popup",this.cpSaveClickOutside=!0,this.cpCloseClickOutside=!0,this.cpUseRootViewContainer=!1,this.cpPosition="auto",this.cpPositionOffset="0%",this.cpPositionRelativeToArrow=!1,this.cpOKButton=!1,this.cpOKButtonText="OK",this.cpOKButtonClass="cp-ok-button-class",this.cpCancelButton=!1,this.cpCancelButtonText="Cancel",this.cpCancelButtonClass="cp-cancel-button-class",this.cpEyeDropper=!1,this.cpPresetLabel="Preset colors",this.cpPresetColorsClass="cp-preset-colors-class",this.cpMaxPresetColorsLength=6,this.cpPresetEmptyMessage="No colors added",this.cpPresetEmptyMessageClass="preset-empty-message",this.cpAddColorButton=!1,this.cpAddColorButtonText="Add color",this.cpAddColorButtonClass="cp-add-color-button-class",this.cpRemoveColorButtonClass="cp-remove-color-button-class",this.cpInputChange=new o.vpe(!0),this.cpToggleChange=new o.vpe(!0),this.cpSliderChange=new o.vpe(!0),this.cpSliderDragEnd=new o.vpe(!0),this.cpSliderDragStart=new o.vpe(!0),this.colorPickerOpen=new o.vpe(!0),this.colorPickerClose=new o.vpe(!0),this.colorPickerCancel=new o.vpe(!0),this.colorPickerSelect=new o.vpe(!0),this.colorPickerChange=new o.vpe(!1),this.cpCmykColorChange=new o.vpe(!0),this.cpPresetColorsChange=new o.vpe(!0)}handleClick(){this.inputFocus()}handleFocus(){this.inputFocus()}handleInput(t){this.inputChange(t)}ngOnDestroy(){null!=this.cmpRef&&(this.viewAttachedToAppRef&&this.appRef.detachView(this.cmpRef.hostView),this.cmpRef.destroy(),this.cmpRef=null,this.dialog=null)}ngOnChanges(t){t.cpToggle&&!this.cpDisabled&&(t.cpToggle.currentValue?this.openDialog():t.cpToggle.currentValue||this.closeDialog()),t.colorPicker&&(this.dialog&&!this.ignoreChanges&&("inline"===this.cpDialogDisplay&&this.dialog.setInitialColor(t.colorPicker.currentValue),this.dialog.setColorFromString(t.colorPicker.currentValue,!1),this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay&&this.cmpRef.changeDetectorRef.detectChanges()),this.ignoreChanges=!1),(t.cpPresetLabel||t.cpPresetColors)&&this.dialog&&this.dialog.setPresetConfig(this.cpPresetLabel,this.cpPresetColors)}openDialog(){if(this.dialogCreated)this.dialog&&this.dialog.openDialog(this.colorPicker);else{let t=this.vcRef;if(this.dialogCreated=!0,this.viewAttachedToAppRef=!1,this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay){const a=this.injector.get(this.appRef.componentTypes[0],o.zs3.NULL);a!==o.zs3.NULL?t=a.vcRef||a.viewContainerRef||this.vcRef:this.viewAttachedToAppRef=!0}const e=this.cfr.resolveComponentFactory(se);if(this.viewAttachedToAppRef)this.cmpRef=e.create(this.injector),this.appRef.attachView(this.cmpRef.hostView),document.body.appendChild(this.cmpRef.hostView.rootNodes[0]);else{const r=o.zs3.create({providers:[],parent:t.injector});this.cmpRef=t.createComponent(e,0,r,[])}this.cmpRef.instance.setupDialog(this,this.elRef,this.colorPicker,this.cpWidth,this.cpHeight,this.cpDialogDisplay,this.cpFallbackColor,this.cpColorMode,this.cpCmykEnabled,this.cpAlphaChannel,this.cpOutputFormat,this.cpDisableInput,this.cpIgnoredElements,this.cpSaveClickOutside,this.cpCloseClickOutside,this.cpUseRootViewContainer,this.cpPosition,this.cpPositionOffset,this.cpPositionRelativeToArrow,this.cpPresetLabel,this.cpPresetColors,this.cpPresetColorsClass,this.cpMaxPresetColorsLength,this.cpPresetEmptyMessage,this.cpPresetEmptyMessageClass,this.cpOKButton,this.cpOKButtonClass,this.cpOKButtonText,this.cpCancelButton,this.cpCancelButtonClass,this.cpCancelButtonText,this.cpAddColorButton,this.cpAddColorButtonClass,this.cpAddColorButtonText,this.cpRemoveColorButtonClass,this.cpEyeDropper,this.elRef,this.cpExtraTemplate),this.dialog=this.cmpRef.instance,this.vcRef!==t&&this.cmpRef.changeDetectorRef.detectChanges()}}closeDialog(){this.dialog&&"popup"===this.cpDialogDisplay&&this.dialog.closeDialog()}cmykChanged(t){this.cpCmykColorChange.emit(t)}stateChanged(t){this.cpToggleChange.emit(t),t?this.colorPickerOpen.emit(this.colorPicker):this.colorPickerClose.emit(this.colorPicker)}colorChanged(t,e=!0){this.ignoreChanges=e,this.colorPickerChange.emit(t)}colorSelected(t){this.colorPickerSelect.emit(t)}colorCanceled(){this.colorPickerCancel.emit()}inputFocus(){const t=this.elRef.nativeElement,e=this.cpIgnoredElements.filter(r=>r===t);!this.cpDisabled&&!e.length&&("undefined"!=typeof document&&t===document.activeElement?this.openDialog():this.dialog&&this.dialog.show?this.closeDialog():this.openDialog())}inputChange(t){this.dialog?this.dialog.setColorFromString(t.target.value,!0):(this.colorPicker=t.target.value,this.colorPickerChange.emit(this.colorPicker))}inputChanged(t){this.cpInputChange.emit(t)}sliderChanged(t){this.cpSliderChange.emit(t)}sliderDragEnd(t){this.cpSliderDragEnd.emit(t)}sliderDragStart(t){this.cpSliderDragStart.emit(t)}presetColorsChanged(t){this.cpPresetColorsChange.emit(t)}}return i.\u0275fac=function(t){return new(t||i)(o.Y36(o.zs3),o.Y36(o._Vd),o.Y36(o.z2F),o.Y36(o.s_b),o.Y36(o.SBq),o.Y36(re))},i.\u0275dir=o.lG2({type:i,selectors:[["","colorPicker",""]],hostBindings:function(t,e){1&t&&o.NdJ("click",function(){return e.handleClick()})("focus",function(){return e.handleFocus()})("input",function(a){return e.handleInput(a)})},inputs:{colorPicker:"colorPicker",cpWidth:"cpWidth",cpHeight:"cpHeight",cpToggle:"cpToggle",cpDisabled:"cpDisabled",cpIgnoredElements:"cpIgnoredElements",cpFallbackColor:"cpFallbackColor",cpColorMode:"cpColorMode",cpCmykEnabled:"cpCmykEnabled",cpOutputFormat:"cpOutputFormat",cpAlphaChannel:"cpAlphaChannel",cpDisableInput:"cpDisableInput",cpDialogDisplay:"cpDialogDisplay",cpSaveClickOutside:"cpSaveClickOutside",cpCloseClickOutside:"cpCloseClickOutside",cpUseRootViewContainer:"cpUseRootViewContainer",cpPosition:"cpPosition",cpPositionOffset:"cpPositionOffset",cpPositionRelativeToArrow:"cpPositionRelativeToArrow",cpOKButton:"cpOKButton",cpOKButtonText:"cpOKButtonText",cpOKButtonClass:"cpOKButtonClass",cpCancelButton:"cpCancelButton",cpCancelButtonText:"cpCancelButtonText",cpCancelButtonClass:"cpCancelButtonClass",cpEyeDropper:"cpEyeDropper",cpPresetLabel:"cpPresetLabel",cpPresetColors:"cpPresetColors",cpPresetColorsClass:"cpPresetColorsClass",cpMaxPresetColorsLength:"cpMaxPresetColorsLength",cpPresetEmptyMessage:"cpPresetEmptyMessage",cpPresetEmptyMessageClass:"cpPresetEmptyMessageClass",cpAddColorButton:"cpAddColorButton",cpAddColorButtonText:"cpAddColorButtonText",cpAddColorButtonClass:"cpAddColorButtonClass",cpRemoveColorButtonClass:"cpRemoveColorButtonClass",cpExtraTemplate:"cpExtraTemplate"},outputs:{cpInputChange:"cpInputChange",cpToggleChange:"cpToggleChange",cpSliderChange:"cpSliderChange",cpSliderDragEnd:"cpSliderDragEnd",cpSliderDragStart:"cpSliderDragStart",colorPickerOpen:"colorPickerOpen",colorPickerClose:"colorPickerClose",colorPickerCancel:"colorPickerCancel",colorPickerSelect:"colorPickerSelect",colorPickerChange:"colorPickerChange",cpCmykColorChange:"cpCmykColorChange",cpPresetColorsChange:"cpPresetColorsChange"},exportAs:["ngxColorPicker"],features:[o.TTD]}),i})(),Qr=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({providers:[re],imports:[[w.ez]]}),i})();var Je=p(29838),en=p(35241);const ce=[];for(let i=0;i<256;i++)ce[i]=(i<16?"0":"")+i.toString(16);let nn=(i=21)=>{let n="",t=crypto.getRandomValues(new Uint8Array(i));for(;i--;){let e=63&t[i];n+=e<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e<63?"_":"-"}return n.toLocaleLowerCase()};var wn=p(91841);let oi=(()=>{class i{constructor(t){this.http=t,this.localScenes={scene:[]},this.apiStatus=!0,this.apiRoot=window.webworker.apiRoot,this.apiStatus="ok"==localStorage.getItem("scenesAPI")}saveCover(t){return this.http.post(this.apiRoot+"/saveimg",t)}deleteSceneImg(t){return this.http.post(this.apiRoot+"/deleteimg",{id:t})}addScene(){let t={id:nn(8),name:"new scene",components:JSON.stringify([]),options:JSON.stringify({width:1920,height:1080,backgroundColor:"#fff"})};return this.http.post(this.apiRoot+"/scene/addscene",t)}changeScene(t){return this.http.post(this.apiRoot+"/scene/changescene",t)}removeScene(t){return this.http.post(this.apiRoot+"/scene/removescene",{id:t})}getSceneList(){return this.http.get(this.apiRoot+"/scene/scenelist")}getScene(t){return this.http.post(this.apiRoot+"/scene/scene",{id:t})}}return i.\u0275fac=function(t){return new(t||i)(o.LFG(wn.eN))},i.\u0275prov=o.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var bn=p(25917),Di=p(88002);let ai=(()=>{class i{constructor(t){this.http=t,this.localScenes={scene:[]},this.apiStatus=!0,this.getLocalScenes(),this.apiRoot=window.webworker.apiRoot,this.apiStatus="ok"==localStorage.getItem("scenesAPI")}getLocalScenes(){const t=localStorage.getItem("localScenes");this.localScenes=t?JSON.parse(t):this.localScenes}getScenes(){return(0,bn.of)(this.localScenes)}getScene(t){let e=t.substring(0,4),r=t.substring(4);return"ass_"===e?this.loadJsonScene(r):(0,bn.of)(this.localScenes.scene).pipe((0,Di.U)(a=>a.find(s=>s.id===t)))}saveScene(t,e){this.localScenes.scene.map(r=>{r.id===t&&(r=e)}),this.saveScenes()}createNewScene(t){this.localScenes.scene.length<10?this.localScenes.scene.unshift({id:nn(10),name:t,components:[],options:{width:1920,height:1080,bgColor:"#000000",bgImage:""}}):window.alert("Stop , A'zu, Ten is enough !")}deleteScene(t){this.localScenes.scene=this.localScenes.scene.filter(e=>e.id!==t)}saveScenes(){localStorage.setItem("localScenes",JSON.stringify(this.localScenes))}loadJsonScenesList(){return this.http.get("./assets/scene-data/scenes-list.json")}getJsonScenesListFromAssets(){return this.loadJsonScenesList().pipe((0,Di.U)(t=>(t.scene||[]).map(r=>{let a=r.url,s=a.substring(a.lastIndexOf("/")+1,a.lastIndexOf("."));return r.id="ass_"+s,r})))}loadJsonScene(t){return this.http.get(`./assets/scene-data/${t}.json`)}}return i.\u0275fac=function(t){return new(t||i)(o.LFG(wn.eN))},i.\u0275prov=o.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var qr=p(83385),sr=p(14453),pn=p(29374),dn=p(84514);const rd=["container"],ls=function(i){return{background:i,"background-size":"100% 100%"}},cs=function(i){return["/editer/edit",i]},ps=function(i){return["/editer/preview",i]};function od(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"div",9),o.TgZ(2,"span"),o._uU(3),o.qZA(),o.TgZ(4,"span"),o.TgZ(5,"a",10),o._uU(6,"Edit"),o.qZA(),o.qZA(),o.TgZ(7,"span"),o.TgZ(8,"a",11),o._uU(9,"Preview"),o.qZA(),o.qZA(),o.TgZ(10,"span"),o.TgZ(11,"a",12),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw(2).deleteScene(a.id)}),o._uU(12,"Delete"),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&i){const t=n.$implicit,e=o.oxw(2);o.xp6(1),o.Q6J("ngStyle",o.VKq(4,ls,"url("+e.apiRoot+"/screenshot/"+t.id+".jpeg) no-repeat center center")),o.xp6(2),o.Oqu(t.sid),o.xp6(2),o.Q6J("routerLink",o.VKq(6,cs,t.id)),o.xp6(3),o.Q6J("routerLink",o.VKq(8,ps,t.id))}}function ad(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"div",5),o.TgZ(1,"div"),o.TgZ(2,"div",6),o.TgZ(3,"button",7),o.NdJ("click",function(){return o.CHM(t),o.oxw().createNewScene()}),o._uU(4," + "),o.qZA(),o.qZA(),o.qZA(),o.YNc(5,od,13,10,"div",8),o.qZA()}if(2&i){const t=o.oxw();o.xp6(5),o.Q6J("ngForOf",t.sceneArray)}}function sd(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"div",6),o.TgZ(2,"span"),o._uU(3),o.qZA(),o.TgZ(4,"span"),o.TgZ(5,"a",10),o._uU(6,"\u7f16\u8f91"),o.qZA(),o.qZA(),o.TgZ(7,"span"),o.TgZ(8,"a",11),o._uU(9,"\u6295\u5c4f"),o.qZA(),o.qZA(),o.TgZ(10,"span"),o.TgZ(11,"a",12),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw().deleteLocasScene(a.id)}),o._uU(12,"\u5220\u9664"),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&i){const t=n.$implicit;o.xp6(3),o.Oqu(t.sid),o.xp6(2),o.Q6J("routerLink",o.VKq(3,cs,t.id)),o.xp6(3),o.Q6J("routerLink",o.VKq(5,ps,t.id))}}function ld(i,n){if(1&i&&(o.TgZ(0,"div"),o.TgZ(1,"div",13),o.TgZ(2,"span"),o.TgZ(3,"a",10),o._uU(4,"\u6295\u5c4f"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(5,"span"),o._uU(6),o.qZA(),o.qZA()),2&i){const t=n.$implicit,e=o.oxw();o.xp6(1),o.Q6J("ngStyle",o.VKq(3,ls,"url("+e.apiRoot+"/screenshot/"+t.id+".jpeg) no-repeat center center")),o.xp6(2),o.MGl("routerLink","/editer/preview/",t.id,""),o.xp6(3),o.Oqu(t.name)}}let ds=(()=>{class i{constructor(t,e){this.apiService=t,this.editService=e,this.apistatus="err",this.sceneArray=[],this.assetsjsonArray=[],this.localArray=[],this.apiRoot=window.webworker.apiRoot,this.urlRoot=window.webworker.urlRoot}ngOnInit(){"ok"===localStorage.getItem("scenesAPI")&&(this.apistatus="ok"),this.getLocalSceneList(),this.getSceneList(),this.editService.getJsonScenesListFromAssets().subscribe(t=>{this.assetsjsonArray=t}),window.onresize=()=>{var t;null===(t=this.scene)||void 0===t||t.resize()}}ngAfterViewInit(){this.scene=new en.u(this.container.nativeElement,{})}deleteSceneImg(t){console.log("1 :>> ",1),this.apiService.deleteSceneImg(t).subscribe(e=>{})}getSceneList(){"ok"==localStorage.getItem("scenesAPI")&&this.apiService.getSceneList().subscribe(t=>{console.log("res :>> ",t),200===(null==t?void 0:t.code)&&(this.sceneArray=t.data)})}createNewScene(){this.apiService.addScene().subscribe(t=>{200===(null==t?void 0:t.code)&&this.getSceneList()})}deleteScene(t){this.apiService.removeScene(t).subscribe(e=>{200===(null==e?void 0:e.code)&&(this.deleteSceneImg(t),this.getSceneList())})}createNewLocalScene(){this.editService.createNewScene("\u5927\u5c4f"),setTimeout(()=>{this.saveLocalScenes(),this.getLocalSceneList()},10)}saveLocalScenes(){this.editService.saveScenes()}getLocalSceneList(){this.editService.getScenes().subscribe(t=>{this.localArray=JSON.parse(JSON.stringify(t.scene||[]));let e=this.localArray.length;for(let r=0;r<e;r++)this.localArray[r].sid=e-r})}deleteLocasScene(t){this.editService.deleteScene(t),this.getLocalSceneList(),this.saveLocalScenes()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}}return i.\u0275fac=function(t){return new(t||i)(o.Y36(oi),o.Y36(ai))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-list"]],viewQuery:function(t,e){if(1&t&&o.Gf(rd,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},decls:13,vars:3,consts:[[1,"container"],["container",""],[1,"gutter-example"],["nzText",""],["class","pre-list",4,"ngIf"],[1,"pre-list"],[1,"grid-config-s"],["nz-button","","nzType","primary",3,"click"],[4,"ngFor","ngForOf"],[1,"grid-config-s",3,"ngStyle"],[3,"routerLink"],["target","_blank",3,"routerLink"],[3,"click"],[1,"grid-config",3,"ngStyle"]],template:function(t,e){1&t&&(o._UZ(0,"div",0,1),o.TgZ(2,"div",2),o._UZ(3,"nz-divider",3),o.YNc(4,ad,6,1,"div",4),o._UZ(5,"nz-divider",3),o.TgZ(6,"div",5),o.TgZ(7,"div"),o.TgZ(8,"div",6),o.TgZ(9,"button",7),o.NdJ("click",function(){return e.createNewLocalScene()}),o._uU(10," + "),o.qZA(),o.qZA(),o.qZA(),o.YNc(11,sd,13,7,"div",8),o.YNc(12,ld,7,5,"div",8),o.qZA(),o.qZA()),2&t&&(o.xp6(4),o.Q6J("ngIf","ok"===e.apistatus),o.xp6(7),o.Q6J("ngForOf",e.localArray),o.xp6(1),o.Q6J("ngForOf",e.assetsjsonArray))},directives:[qr.g,w.O5,sr.ix,pn.dQ,dn.w,w.sg,w.PC,Je.yS],styles:[".container[_ngcontent-%COMP%]{position:fixed;width:100%;height:100vh}.gutter-example[_ngcontent-%COMP%]{position:absolute;padding:15px;text-align:center}.grid-config[_ngcontent-%COMP%]{height:112.5px;width:200px;margin:10px;font-size:14px;line-height:150px;background:#ffffff90;border-radius:4px;border:1px solid #1f62af}.grid-config[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-right:10px}.grid-config-s[_ngcontent-%COMP%]{height:112.5px;width:200px;margin:10px;font-size:14px;line-height:50px;background:#ffffff90;border-radius:4px;border:1px solid #1f62af}.grid-config-s[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-right:10px}.pre-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:start}"]}),i})();var pe=p(83752),lr=p(24237);const cd=["container"];function Wn(i){return(new Date).getTime()+1e3*i*60}function Vn(){return 10+90*Math.random()|0}let pd=(()=>{class i{constructor(){this.options={grid:{bottom:"40",top:"30"},tooltip:{trigger:"axis"},textStyle:{color:"#999"},xAxis:{type:"time",splitLine:{show:!1}},yAxis:{splitLine:{show:!1}},series:[{type:"line",color:"#2371f1",symbol:"none",smooth:!0,name:"",data:[[Wn(1),Vn()],[Wn(2),Vn()],[Wn(3),Vn()],[Wn(4),Vn()],[Wn(5),Vn()],[Wn(6),Vn()],[Wn(7),Vn()]]}]},this.optionsData={}}ngOnInit(){this.mockjs=()=>({}),this.comData=this.mockjs()}ngAfterViewInit(){var t,e;this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=lr.S1(null===(t=this.container)||void 0===t?void 0:t.nativeElement),null===(e=this.scene)||void 0===e||e.setOption(this.options)}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.setOption(t)}onchangeDemoData(t){t&&(this.comData=t)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-linechart"]],viewQuery:function(t,e){if(1&t&&o.Gf(cd,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();const dd=["container"],us_exoptions={grid:{top:30,bottom:40},tooltip:{trigger:"axis"},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value",splitLine:{show:!1}},series:[{data:[120,200,150,80,70,110,130],type:"bar",color:"#2371f1",barWidth:"auto"}]},us_exoptionsData={};let ud=(()=>{class i{constructor(){this.options=us_exoptions,this.optionsData=us_exoptionsData}ngOnInit(){this.mockjs=()=>({}),this.comData=this.mockjs()}ngAfterViewInit(){var t,e;this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=lr.S1(null===(t=this.container)||void 0===t?void 0:t.nativeElement),null===(e=this.scene)||void 0===e||e.setOption(this.options)}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.setOption(t)}onchangeDemoData(t){t&&(this.comData=t)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-basicbar"]],viewQuery:function(t,e){if(1&t&&o.Gf(dd,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();const hd=["container"];let fd=(()=>{class i{constructor(){this.options={polar:{radius:["10%","80%"]},angleAxis:{max:4,startAngle:90},radiusAxis:{type:"category",data:["a","b","c","d"]},tooltip:{},series:{color:"#2371f1",type:"bar",barWidth:15,data:[2,1.2,2.4,3.6],coordinateSystem:"polar",label:{show:!0,position:"middle",formatter:"{b}: {c}"}}},this.optionsData={}}ngOnInit(){this.mockjs=()=>({}),this.comData=this.mockjs()}ngAfterViewInit(){var t,e;this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=lr.S1(null===(t=this.container)||void 0===t?void 0:t.nativeElement),null===(e=this.scene)||void 0===e||e.setOption(this.options)}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.setOption(t)}onchangeDemoData(t){t&&(this.comData=t)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-polarbar"]],viewQuery:function(t,e){if(1&t&&o.Gf(hd,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();const vd=["container"];let gd=(()=>{class i{constructor(){this.options={color:["#2371f1","#d55717","#788EBB"],tooltip:{trigger:"item"},legend:{top:"5%",left:"center",textStyle:{color:"#999"}},series:[{name:"\u4e3b\u673a\u72b6\u6001",type:"pie",radius:["0%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:40,fontWeight:"bold"}},labelLine:{show:!1},data:[{value:50+50*Math.random()|0,name:"\u6b63\u5e38"},{value:10+30*Math.random()|0,name:"\u8b66\u544a"},{value:10+30*Math.random()|0,name:"\u79bb\u7ebf"}]}]},this.optionsData={}}ngOnInit(){this.mockjs=()=>({}),this.comData=this.mockjs()}ngAfterViewInit(){var t,e;this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=lr.S1(null===(t=this.container)||void 0===t?void 0:t.nativeElement),null===(e=this.scene)||void 0===e||e.setOption(this.options)}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.setOption(t)}onchangeDemoData(t){t&&(this.comData=t)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-basicpie"]],viewQuery:function(t,e){if(1&t&&o.Gf(vd,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var $r=p(63466);const md=["container"];let xd=(()=>{class i{constructor(){this.options=$r.xc,this.optionsData={},this.mockjs=$r.yk,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new $r.y5(this.container.nativeElement,this.options)},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-effect1"]],viewQuery:function(t,e){if(1&t&&o.Gf(md,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var to=p(41335);const yd=["container"];let wd=(()=>{class i{constructor(){this.options=to.xc,this.optionsData={},this.mockjs=to.yk,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new to.FQ(this.container.nativeElement,this.options)},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-effect2"]],viewQuery:function(t,e){if(1&t&&o.Gf(yd,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var eo=p(46394);const bd=["container"];let _d=(()=>{class i{constructor(){this.options=eo.xc,this.optionsData={},this.mockjs=eo.yk,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new eo.Xp(this.container.nativeElement,this.options)},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-effect3"]],viewQuery:function(t,e){if(1&t&&o.Gf(bd,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var no=p(69154);const Cd=["container"];let Sd=(()=>{class i{constructor(){this.options=no.xc,this.optionsData={},this.mockjs=no.yk,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new no.k_(this.container.nativeElement,this.options)},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-effect4"]],viewQuery:function(t,e){if(1&t&&o.Gf(Cd,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var io=p(28430);const Dd=["container"];let Od=(()=>{class i{constructor(){this.options=io.xc,this.optionsData={},this.mockjs=io.yk,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new io.rQ(this.container.nativeElement,this.options)},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-effect5"]],viewQuery:function(t,e){if(1&t&&o.Gf(Dd,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var ro=p(84081);const Td=["container"];let Ad=(()=>{class i{constructor(){this.options=ro.xc,this.optionsData={},this.mockjs=ro.yk,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new ro.eF(this.container.nativeElement,this.options)},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-effect6"]],viewQuery:function(t,e){if(1&t&&o.Gf(Td,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var Ed=p(65082),N=p(97758),_n=p(76887),Md=p(30084);class Pd extends Ed.Z{constructor(n,t){super(n,t),this.Allgroup=new N.ZAu,this.camera.position.set(0,0,80),this.camera.lookAt(0,0,0),this.camera.updateProjectionMatrix(),this.scene.add(this.Allgroup),this.init()}init(){new _n.z(this.camera,this.renderer.domElement),this.scene.add(new N.Mig(10066329));const n=new N.Ox3(16777215,.8);this.scene.add(n),n.position.set(1,1,1),this.addSphere()}addSphere(){let n=new N.cJO(4,20),t=new N.xoR({color:39321}),e=new N.Kj0(n,t);this.scene.add(e);let r=new Md.L;console.log(n);let a=new N.Pa4;const s=n.vertices.length;let l=1,c=[];for(let d=0;d<s;d++)c.push(n.vertices[d].clone());setInterval(()=>{l+=.03;for(let d=0;d<s;d++){a.copy(c[d]);let f=2+.5*r.noise3d(.2*a.x,.2*a.y,.2*a.z+l);a.multiplyScalar(f),n.vertices[d].copy(a)}n.verticesNeedUpdate=!0},100)}}var Ne=p(79843);const si=class extends Ne.K{constructor(n,t){super(n,t),this.lastHeight=300,this.lastWidth=300,this.render=()=>{this.request=requestAnimationFrame(this.render),this.renderer.render(this.scene,this.camera),this.reSize(),this.renderOthers()},this.scene=new N.xsS,this.camera=new N.cPb(45,this.divWidth/this.divHeight,.01,1e4),this.camera.position.set(0,20,0),this.camera.lookAt(0,0,0),this.renderer=new N.CP7({alpha:!0,antialias:!0,preserveDrawingBuffer:"true"===localStorage.getItem("drawingBuffer")}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(0,0),this.renderer.setSize(this.divWidth,this.divHeight),this.domdiv.appendChild(this.renderer.domElement),this.render()}renderOthers(){}reSize(){this.divHeight=this.domdiv.offsetHeight,this.divWidth=this.domdiv.offsetWidth,(this.divHeight!==this.lastHeight||this.divWidth!==this.lastWidth)&&(this.camera.aspect=this.divWidth/this.divHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.divWidth,this.divHeight),this.lastHeight=this.divHeight,this.lastWidth=this.divWidth)}},hs="\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nfloat mod289(float x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat permute(float x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat taylorInvSqrt(float r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 grad4(float j, vec4 ip)\n  {\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;\n\n  return p;\n  }\n\n// (sqrt(5) - 1)/4 = F4, used once below\n#define F4 0.309016994374947451\n\nfloat snoise4(vec4 v)\n  {\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n                        0.276393202250021,  // 2 * G4\n                        0.414589803375032,  // 3 * G4\n                       -0.447213595499958); // -1 + 4 * G4\n\n// First corner\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n// Other corners\n\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n//  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\n  vec4 x1 = x0 - i1 + C.xxxx;\n  vec4 x2 = x0 - i2 + C.yyyy;\n  vec4 x3 = x0 - i3 + C.zzzz;\n  vec4 x4 = x0 + C.wwww;\n\n// Permutations\n  i = mod289(i);\n  float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute( permute( permute( permute (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n\n// Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0 = grad4(j0,   ip);\n  vec4 p1 = grad4(j1.x, ip);\n  vec4 p2 = grad4(j1.y, ip);\n  vec4 p3 = grad4(j1.z, ip);\n  vec4 p4 = grad4(j1.w, ip);\n\n// Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt(dot(p4,p4));\n\n// Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n  }\n";class zd extends si{constructor(n,t){super(n,t),this.Allgroup=new N.ZAu,this.camera.position.set(0,3,8),this.camera.lookAt(0,0,0),this.camera.updateProjectionMatrix(),this.scene.add(this.Allgroup),this.init()}init(){new _n.z(this.camera,this.renderer.domElement),this.scene.add(new N.Mig(10066329));const n=new N.Ox3(16777215,.8);this.scene.add(n),n.position.set(1,1,1),this.addSphere()}addSphere(){const n=new N.Kgo(1,32);n.rotateX(-.5*Math.PI);const t=new N.jyz({vertexShader:hs+"\n#define PI 3.1415926535897932384626433832795\n\nfloat TAU = PI * 2.0;\n\nuniform float u_time;\nuniform float u_width;\nuniform float u_bump_frequency;\nuniform float u_bump_scale;\n\nvarying vec3 v_pos;\nvarying vec3 v_orig_pos;\n// varying vec3 v_view_pos;\nvarying float v_bumps;\n\nconst float bump_iterations = 7.0;\n\nvoid main() {\n\n  \n  vec4 model_position = modelMatrix * vec4(position, 1.0);\n\n  vec3 pos = position;\n\n  pos.xz *= u_width - (0.05 + smoothstep(0.0, -0.3, position.y) * -0.3) * u_width * 0.3;\n  \n  pos.xz *= 1.0 - sin((pos.y + u_time * 0.2 * TAU) * 2.0) * 0.2;\n  pos.y *= 1.0 - sin((pos.y + (u_time + 0.3) * 0.2 * TAU) * 2.0) * .6;\n  \n  float bumps = 0.0;\n\n  for (float i = 1.0; i < bump_iterations; i += 1.0) {\n    float bump_scalar = (pos.y * 0.5 - 1.0) * u_bump_frequency * pow(i, 1.4);\n    float bump_noise = snoise4(vec4(\n      pos.x * bump_scalar,\n      pos.y * bump_scalar + u_time * 0.1,\n      pos.z * bump_scalar,\n      u_time * 0.1 * pow(i, 1.0)\n    ));\n    bump_noise = abs(bump_noise);\n    bumps += bump_noise * u_bump_scale / i * sin(((pos.y + u_time * 0.2 * TAU) - PI * .5) * 2.0);\n  }\n  pos *= 1.0 + bumps;\n\n\n  pos.xz *= 1.0 - smoothstep(0.2, 0.1, position.y) * 0.35;\n\n  model_position.xyz = pos;\n\n  vec4 view_position = viewMatrix * model_position;\n  vec4 projected_position = projectionMatrix * view_position;\n\n  gl_Position = projected_position;\n\n  v_pos = vec3(model_position.xyz);\n//   v_view_pos = vec3(view_position.xyz);\n  v_bumps = bumps;\n  v_orig_pos = position;\n}\n",fragmentShader:hs+"\nuniform float u_time;\n\nvarying vec3 v_pos;\n// varying vec3 v_view_pos;\nvarying vec3 v_orig_pos;\nvarying float v_bumps;\n\nvoid main() {\n\n  vec3 color_dark = vec3(0, 0, 0);\n  vec3 color_light = vec3(240, 230, 243);\n\n  vec3 color = mix(color_dark, color_light, v_bumps * 0.002);\n\n  color = mix(color, color_light, (1.5 + v_pos.y * 0.5) * 0.0008);\n\n  float noise = snoise4(vec4(\n    v_pos.x + v_orig_pos.y * 32.0,\n    v_orig_pos.y * v_pos.y * 0.1,\n    v_pos.z + v_orig_pos.y * 32.0,\n    u_time\n  ));\n  noise = noise * 0.25 * smoothstep(0.1, 0.2, v_orig_pos.y);\n  color -= noise;\n  color.r *= 1.0 + distance(v_pos.xyz, vec3(0.0,v_orig_pos.y,0.0)) * 0.5;\n  color.b += noise * v_pos.y;\n\n  color.r *= 1.3;\n  color.g *= v_pos.y + 0.5;\n  color.b *= v_pos.y + 0.5;\n  color.b += (1.0 - color.r) * 0.4;\n\n  color *= .9;\n\n  gl_FragColor = vec4(color, 1.0);\n}\n",uniforms:{u_time:{value:0},u_width:{value:1.3},u_bump_frequency:{value:.3},u_bump_scale:{value:.4}}}),e=new N.Kj0(n,t);e.position.y=.15,this.scene.add(e),setInterval(()=>{e.material.uniforms.u_time.value+=.1},100)}}const fs="\n\t\nvec3 permute2(vec3 x) { return mod(((x*34.0)+1.0)*x, 289.0); }\n\nfloat snoise2(vec2 v){\n  const vec4 C = vec4(0.211324865405187, 0.366025403784439,\n           -0.577350269189626, 0.024390243902439);\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n  vec2 i1;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n  i = mod(i, 289.0);\n  vec3 p = permute2( permute2( i.y + vec3(0.0, i1.y, 1.0 ))\n  + i.x + vec3(0.0, i1.x, 1.0 ));\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy),\n    dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\t\n\t//\tSimplex 3D Noise \n//\tby Ian McEwan, Ashima Arts\n//\nvec4 permute3(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n\nfloat snoise3(vec3 v){ \n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //  x0 = x0 - 0. + 0.0 * C \n  vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n  vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n  vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\n// Permutations\n  i = mod(i, 289.0 ); \n  vec4 p = permute3( permute3( permute3( \n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients\n// ( N*N points uniformly over a square, mapped onto an octahedron.)\n  float n_ = 1.0/7.0; // N=7\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n                                dot(p2,x2), dot(p3,x3) ) );\n}\n\t\n\t//\tSimplex 4D Noise \n//\tby Ian McEwan, Ashima Arts\n//\nvec4 permute4(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nfloat permute4(float x){return floor(mod(((x*34.0)+1.0)*x, 289.0));}\nvec4 taylorInvSqrt4(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\nfloat taylorInvSqrt4(float r){return 1.79284291400159 - 0.85373472095314 * r;}\n\nvec4 grad4(float j, vec4 ip){\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www; \n\n  return p;\n}\n\nfloat snoise4(vec4 v){\n  const vec2  C = vec2( 0.138196601125010504,  // (5 - sqrt(5))/20  G4\n                        0.309016994374947451); // (sqrt(5) - 1)/4   F4\n// First corner\n  vec4 i  = floor(v + dot(v, C.yyyy) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n// Other corners\n\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n//  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C \n  vec4 x1 = x0 - i1 + 1.0 * C.xxxx;\n  vec4 x2 = x0 - i2 + 2.0 * C.xxxx;\n  vec4 x3 = x0 - i3 + 3.0 * C.xxxx;\n  vec4 x4 = x0 - 1.0 + 4.0 * C.xxxx;\n\n// Permutations\n  i = mod(i, 289.0); \n  float j0 = permute4( permute4( permute4( permute4(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute4( permute4( permute4( permute4 (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n// Gradients\n// ( 7*7*6 points uniformly over a cube, mapped onto a 4-octahedron.)\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0 = grad4(j0,   ip);\n  vec4 p1 = grad4(j1.x, ip);\n  vec4 p2 = grad4(j1.y, ip);\n  vec4 p3 = grad4(j1.z, ip);\n  vec4 p4 = grad4(j1.w, ip);\n\n// Normalise gradients\n  vec4 norm = taylorInvSqrt4(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt4(dot(p4,p4));\n\n// Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n}\n";class Bd extends si{constructor(n,t){super(n,t),this.Allgroup=new N.ZAu,this.camera.position.set(0,3,8),this.camera.lookAt(0,0,0),this.camera.updateProjectionMatrix(),this.scene.add(this.Allgroup),this.init()}init(){new _n.z(this.camera,this.renderer.domElement),this.scene.add(new N.Mig(10066329));const n=new N.Ox3(16777215,.8);this.scene.add(n),n.position.set(1,1,1),this.addSphere()}addSphere(){const n=new N.Kgo(1,64),t=new N.jyz({vertexShader:fs+"\n#define PI 3.1415926535897932384626433832795\n\nconst float TAU = PI * 2.0;\n\nuniform float u_time;\n\nvarying vec3 v_mod_pos;\nvarying vec3 v_orig_pos;\nvarying float v_tail_bumps;\nvarying float v_head_swirl;\nvarying float v_head_bumps;\n\nfloat get_area(float begin, float end, float value) {\n  return step(begin, value) - step(end, value);\n}\n\nfloat get_normalized_range(float begin, float end, float value) {\n  float range = end - begin;\n  return value / range;\n}\n\nvoid main() {\n\n  vec4 model_position = modelMatrix * vec4(position, 1.0);\n\n  // the original position of the vertices\n  vec3 orig_pos = model_position.xyz;\n  // the modified position of the vertices\n  vec3 mod_pos = model_position.xyz;\n\n  // scale down bottom part\n  mod_pos.xz *= 1.0 - smoothstep(0.05, -0.4, orig_pos.y) * 0.2;\n  // pinch tail\n  mod_pos.xz *= 1.0 - smoothstep(0.05, -1.0, orig_pos.y);\n  // stretch tail\n  mod_pos.y *= 1.0 + smoothstep(0.0, -1.0, orig_pos.y) * 2.0;\n\n  // curl tail in beneath head\n  float area_curled_under_head = smoothstep(0.1, 0.0, orig_pos.y) - smoothstep(-0.1, 0.0, orig_pos.y);\n  float area_curled_under_head_position = clamp(get_normalized_range(0.1, -0.1, orig_pos.y), 0.0, 1.0);\n  mod_pos.y += sin(area_curled_under_head_position * PI * 0.5) * area_curled_under_head * 0.5;\n\n  float swim_speed = u_time * 2.0 + sin(u_time * 2.0 + PI) * 0.5 + snoise2(vec2(u_time * 0.02, 0.0));\n\n  // entire swimming motion\n  mod_pos.y += sin(swim_speed + mod_pos.y + PI * 0.4) * 0.15;\n\n  // wiggly head swimming motion\n  mod_pos.x += sin(swim_speed * 0.5 + mod_pos.y * 3.5) * 0.15 * clamp(orig_pos.y - 0.3, 0.0, 1.0) * smoothstep(-0.6,-0.4, orig_pos.y);\n  mod_pos.z += cos(swim_speed * 0.5 + mod_pos.y * 3.7) * 0.15 * clamp(orig_pos.y - 0.3, 0.0, 1.0) * smoothstep(-0.6,-0.4, orig_pos.y);\n\n  // head swimming motion\n  float swimming_head_area = 1.0 - smoothstep(-0.2, -0.4, orig_pos.y);\n  mod_pos.x *= 1.0 + sin(swim_speed + orig_pos.y) * (swimming_head_area * 0.15 + (0.1 * orig_pos.y));\n  mod_pos.z *= 1.0 + sin(swim_speed + orig_pos.y) * (swimming_head_area * 0.15 + (0.1 * orig_pos.y));\n  mod_pos.y *= 1.0 + sin(swim_speed + orig_pos.y + PI * 0.75) * swimming_head_area * 0.1;\n\n  // head swirl\n  float head_swirl_angle = atan(orig_pos.x, orig_pos.z);\n  float head_swirl = head_swirl_angle;\n  head_swirl += PI;\n  head_swirl /= TAU;\n  head_swirl = 0.5 + sin(head_swirl * TAU * 8.0) * 0.5;\n  head_swirl *= smoothstep(1.0, 0.75, orig_pos.y) - smoothstep(0.4, 0.0, orig_pos.y);\n  mod_pos *= 1.0 + 0.05 * head_swirl;\n  v_head_swirl = head_swirl;\n\n  // head bumps\n  vec4 head_bumps_vector = vec4(orig_pos.xz * 8.0 * (2.0 - orig_pos.y), orig_pos.y * 4.0 + mod_pos.y * 0.25, swim_speed * 0.1);\n  float head_bumps_noise = snoise4(head_bumps_vector);\n  float head_bumps = abs(head_bumps_noise) * smoothstep(0.1, 0.125, orig_pos.y);\n  v_head_bumps = head_bumps;\n  mod_pos *= 1.0 + head_bumps * 0.025;\n\n  // tail swimming motion\n  float swimming_tail_area = smoothstep(-0.3, -1.0, orig_pos.y);\n  mod_pos.y *= 1.0 + sin(swim_speed + orig_pos.y + PI) * swimming_tail_area * 0.1;\n\n  float spin_amount = 0.5 + sin(swim_speed + orig_pos.y - PI) * 0.5;\n\n  // spin tail\n  mod_pos.x += sin(exp(orig_pos.y * 0.25) * PI * 24.0 + u_time * 4.0) * smoothstep(0.0, -1.0, orig_pos.y) * 0.3 * spin_amount;\n  mod_pos.z += cos(exp(orig_pos.y * 0.25) * PI * 16.0 + u_time * 4.0) * smoothstep(0.0, -1.0, orig_pos.y) * 0.3 * spin_amount;\n\n  float tail_noise_amount = smoothstep(0.0, -0.5, orig_pos.y);\n\n  // make the spin more unpredictable and WaVy\n  vec4 spin_noise_vector = vec4(mod_pos.xz + spin_amount, mod_pos.y + spin_amount + u_time * 0.5, u_time * 0.05);\n  float spin_noise = snoise4(spin_noise_vector) * tail_noise_amount * mod_pos.y;\n  mod_pos.xz *= 1.0 + spin_noise;\n\n  // add some bumps to the tail\n  vec4 tail_bump_vector = vec4(orig_pos.xz * 8.0, orig_pos.y * 2.0, u_time * 0.2);\n  float tail_bump_noise = snoise4(tail_bump_vector);\n  float tail_bumps = abs(tail_bump_noise * tail_noise_amount);\n  mod_pos.x += sin(tail_bumps * PI) * 0.02;\n  mod_pos.z += cos(tail_bumps * PI) * 0.02;\n\n  // entire swimming motion\n  mod_pos.y += sin(swim_speed + mod_pos.y + PI * 0.4) * 0.25;\n\n  vec4 view_position = viewMatrix * vec4(mod_pos, 1.0);\n  vec4 projected_position = projectionMatrix * view_position;\n\n  gl_Position = projected_position;\n\n  v_mod_pos = mod_pos;\n  v_orig_pos = orig_pos;\n  v_tail_bumps = tail_bumps;\n\n}\n",fragmentShader:fs+"\nuniform float u_time;\n\nvarying vec3 v_mod_pos;\nvarying vec3 v_orig_pos;\nvarying float v_tail_bumps;\nvarying float v_head_swirl;\nvarying float v_head_bumps;\n\n#define PI 3.1415926535897932384626433832795\n\nconst float TAU = PI * 2.0;\n\nconst vec3 center = vec3(0.0, 0.0, 0.0);\n\nfloat get_area(float begin, float end, float value) {\n  return step(begin, value) - step(end, value);\n}\n \nfloat get_normalized_range(float begin, float end, float value) {\n  float range = end - begin;\n  return value / range;\n}\n\nvoid main() {\n\n  vec3 color = vec3(0.0, 0.0, 0.0);\n  float alpha = 1.0;\n\n  // head gradient\n  float head_area = smoothstep(0.2, 0.25, v_orig_pos.y);\n  float head_area_position = get_normalized_range(0.2, 1.0, v_orig_pos.y);\n  float clamped_head_area_position = clamp(head_area_position, 0.0, 1.0);\n  color += clamped_head_area_position;\n\n  // threads\n  // float threads_area = (\n  //   smoothstep(0.1, 0.05, v_orig_pos.y) - \n  //   smoothstep(-0.05, -0.1, v_orig_pos.y)\n  // );\n  // float threads_area_position = get_normalized_range(-0.1, 0.1, v_orig_pos.y);\n  // float clamped_threads_area_position = clamp(threads_area_position, 0.0, 1.0);\n  // color += threads_area;\n  \n  color *= v_head_swirl * 0.75;\n  color += v_head_bumps * 0.25;\n\n  // threads\n  float threads_area = smoothstep(0.15, 0.1, v_orig_pos.y) - smoothstep(0.0, -0.1, v_orig_pos.y);\n  vec3 threads_vector = vec3(\n    v_orig_pos.x * 16.0,\n    v_orig_pos.z * 16.0,\n    v_orig_pos.y\n  );\n  float threads_noise = (1.0 - abs(snoise3(threads_vector))) * threads_area * smoothstep(-0.1, 0.15, v_orig_pos.y);\n  color += threads_noise * 0.5;\n\n  color.b += threads_noise;\n  color.g += threads_noise * sin(v_mod_pos.y) * threads_area;\n  color.b += (smoothstep(0.75, 0.1, v_orig_pos.y) - smoothstep(0.1, 0.0, v_orig_pos.y)) * 0.25;\n\n  // tail bump gradients\n  float tail_bumps_area = smoothstep(0.0, -0.2, v_orig_pos.y);\n  color += v_tail_bumps * 1.25 * smoothstep(-1.5, -0.5, v_mod_pos.y) * tail_bumps_area;\n\n\n  // color.r += 0.2 + sin(v_orig_pos.y + u_time * 0.2) * 0.2;\n\n  float lighten_on_top = smoothstep(-0.5, 1.5, max(0.0, v_mod_pos.y) * max(0.0, v_orig_pos.y));\n  color.r += lighten_on_top * 0.8;\n  color.g += lighten_on_top * 0.2;\n  color.b += lighten_on_top * 0.4;\n\n  color.r *= 1.0 + sin(smoothstep(0.5, 1.0, v_mod_pos.y) * PI) * 0.75;\n  color.g *= 1.0 + sin(smoothstep(0.5, 1.0, v_mod_pos.y) * PI) * 0.25;\n\n  color.b *= 1.0 + v_head_bumps * 2.0;\n  color.g *= 1.0 + v_head_bumps * (1.65 + max(0.0, v_orig_pos.y));\n\n  color.b += smoothstep(0.7, 0.0, distance(v_mod_pos.xz, v_orig_pos.xz)) * (v_tail_bumps + 2.0) * tail_bumps_area;\n  color.g += smoothstep(0.5, 0.0, distance(v_mod_pos.xz, v_orig_pos.xz)) * (v_tail_bumps + 1.0) * tail_bumps_area;\n  color.r += smoothstep(0.5, 0.0, distance(v_mod_pos.xz, v_orig_pos.xz)) * (v_tail_bumps * 4.0) * tail_bumps_area;\n\n  color.rgb += v_mod_pos.y * 0.1 * tail_bumps_area;\n\n  color.r += v_tail_bumps * 0.25;\n  color.b += v_tail_bumps * 0.55;\n  color.g += v_tail_bumps * 0.35;\n  // color.b *= 1.0 + tail_bumps_area * abs(min(v_mod_pos.y, 0.0));\n  // color.r -= tail_bumps_area * v_mod_pos.y * 0.5;\n  // color.g *= 1.0 + tail_bumps_area * distance(v_mod_pos.xz, vec2(0.0,0.0));\n\n  alpha = clamp(exp(color.b - 0.2), 0.0, 1.0);\n  // alpha *= 1.0 - smoothstep(-0.3, -0.8, v_orig_pos.y) + tail_bumps_area * v_tail_bumps * 2.0;\n\n  gl_FragColor = vec4(color, alpha);\n}\n",uniforms:{u_time:{value:0}}}),e=new N.Kj0(n,t);e.position.y=.15,this.scene.add(e),setInterval(()=>{e.material.uniforms.u_time.value+=.1},100)}}const vs="\n\t\nvec3 permute2(vec3 x) { return mod(((x*34.0)+1.0)*x, 289.0); }\n\nfloat snoise2(vec2 v){\n  const vec4 C = vec4(0.211324865405187, 0.366025403784439,\n           -0.577350269189626, 0.024390243902439);\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n  vec2 i1;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n  i = mod(i, 289.0);\n  vec3 p = permute2( permute2( i.y + vec3(0.0, i1.y, 1.0 ))\n  + i.x + vec3(0.0, i1.x, 1.0 ));\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy),\n    dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\t\n\t//\tSimplex 3D Noise \n//\tby Ian McEwan, Ashima Arts\n//\nvec4 permute3(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n\nfloat snoise3(vec3 v){ \n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //  x0 = x0 - 0. + 0.0 * C \n  vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n  vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n  vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\n// Permutations\n  i = mod(i, 289.0 ); \n  vec4 p = permute3( permute3( permute3( \n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients\n// ( N*N points uniformly over a square, mapped onto an octahedron.)\n  float n_ = 1.0/7.0; // N=7\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n                                dot(p2,x2), dot(p3,x3) ) );\n}\n\t\n\t//\tSimplex 4D Noise \n//\tby Ian McEwan, Ashima Arts\n//\nvec4 permute4(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nfloat permute4(float x){return floor(mod(((x*34.0)+1.0)*x, 289.0));}\nvec4 taylorInvSqrt4(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\nfloat taylorInvSqrt4(float r){return 1.79284291400159 - 0.85373472095314 * r;}\n\nvec4 grad4(float j, vec4 ip){\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www; \n\n  return p;\n}\n\nfloat snoise4(vec4 v){\n  const vec2  C = vec2( 0.138196601125010504,  // (5 - sqrt(5))/20  G4\n                        0.309016994374947451); // (sqrt(5) - 1)/4   F4\n// First corner\n  vec4 i  = floor(v + dot(v, C.yyyy) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n// Other corners\n\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n//  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C \n  vec4 x1 = x0 - i1 + 1.0 * C.xxxx;\n  vec4 x2 = x0 - i2 + 2.0 * C.xxxx;\n  vec4 x3 = x0 - i3 + 3.0 * C.xxxx;\n  vec4 x4 = x0 - 1.0 + 4.0 * C.xxxx;\n\n// Permutations\n  i = mod(i, 289.0); \n  float j0 = permute4( permute4( permute4( permute4(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute4( permute4( permute4( permute4 (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n// Gradients\n// ( 7*7*6 points uniformly over a cube, mapped onto a 4-octahedron.)\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0 = grad4(j0,   ip);\n  vec4 p1 = grad4(j1.x, ip);\n  vec4 p2 = grad4(j1.y, ip);\n  vec4 p3 = grad4(j1.z, ip);\n  vec4 p4 = grad4(j1.w, ip);\n\n// Normalise gradients\n  vec4 norm = taylorInvSqrt4(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt4(dot(p4,p4));\n\n// Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n}\n";class Hd extends si{constructor(n,t){super(n,t),this.Allgroup=new N.ZAu,this.camera.position.set(0,3,8),this.camera.lookAt(0,0,0),this.camera.updateProjectionMatrix(),this.scene.add(this.Allgroup),this.init()}init(){this.scene.add(new N.y8_(2)),new _n.z(this.camera,this.renderer.domElement),this.scene.add(new N.Mig(10066329));const n=new N.Ox3(16777215,.8);this.scene.add(n),n.position.set(1,1,1),this.addSphere()}addSphere(){const n=new N.Kgo(1,64),t=new N.jyz({vertexShader:vs+"\n#define PI 3.1415926535897932384626433832795\n\nconst float TAU = PI * 2.0;\n\nuniform float u_time;\nvarying vec3 v_pos;\nvarying vec3 v_mod_pos;\nvarying vec3 v_orig_pos;\nvarying float v_tail_bumps;\nvarying float v_head_swirl;\nvarying float v_head_bumps;\nvarying vec2 v_uv;\n\nfloat get_area(float begin, float end, float value) {\n  return step(begin, value) - step(end, value);\n}\n\nfloat get_normalized_range(float begin, float end, float value) {\n  float range = end - begin;\n  return value / range;\n}\n\nvoid main() {\n  v_uv = uv;\n  vec4 model_position = modelMatrix * vec4(position, 1.0);\n  v_pos = position;\n  // the original position of the vertices\n  vec3 orig_pos = model_position.xyz;\n  // the modified position of the vertices\n  vec3 mod_pos = model_position.xyz;\n\n  // scale down bottom part\n  mod_pos.xz *= 1.0 - smoothstep(0.05, -0.4, orig_pos.y) * 0.2;\n  // pinch tail\n  mod_pos.xz *= 1.0 - smoothstep(0.05, -1.0, orig_pos.y);\n  // stretch tail\n  mod_pos.y *= 1.0 + smoothstep(0.0, -1.0, orig_pos.y) * 2.0;\n\n  // curl tail in beneath head\n  float area_curled_under_head = smoothstep(0.1, 0.0, orig_pos.y) - smoothstep(-0.1, 0.0, orig_pos.y);\n  float area_curled_under_head_position = clamp(get_normalized_range(0.1, -0.1, orig_pos.y), 0.0, 1.0);\n  mod_pos.y += sin(area_curled_under_head_position * PI * 0.5) * area_curled_under_head * 0.5;\n\n  float swim_speed = u_time * 2.0 + sin(u_time * 2.0 + PI) * 0.5 + snoise2(vec2(u_time * 0.02, 0.0));\n\n  // entire swimming motion\n  mod_pos.y += sin(swim_speed + mod_pos.y + PI * 0.4) * 0.15;\n\n  // wiggly head swimming motion\n  mod_pos.x += sin(swim_speed * 0.5 + mod_pos.y * 3.5) * 0.15 * clamp(orig_pos.y - 0.3, 0.0, 1.0) * smoothstep(-0.6,-0.4, orig_pos.y);\n  mod_pos.z += cos(swim_speed * 0.5 + mod_pos.y * 3.7) * 0.15 * clamp(orig_pos.y - 0.3, 0.0, 1.0) * smoothstep(-0.6,-0.4, orig_pos.y);\n\n  // head swimming motion\n  float swimming_head_area = 1.0 - smoothstep(-0.2, -0.4, orig_pos.y);\n  mod_pos.x *= 1.0 + sin(swim_speed + orig_pos.y) * (swimming_head_area * 0.15 + (0.1 * orig_pos.y));\n  mod_pos.z *= 1.0 + sin(swim_speed + orig_pos.y) * (swimming_head_area * 0.15 + (0.1 * orig_pos.y));\n  mod_pos.y *= 1.0 + sin(swim_speed + orig_pos.y + PI * 0.75) * swimming_head_area * 0.1;\n\n  // head swirl\n  float head_swirl_angle = atan(orig_pos.x, orig_pos.z);\n  float head_swirl = head_swirl_angle;\n  head_swirl += PI;\n  head_swirl /= TAU;\n  head_swirl = 0.5 + sin(head_swirl * TAU * 8.0) * 0.5;\n  head_swirl *= smoothstep(1.0, 0.75, orig_pos.y) - smoothstep(0.4, 0.0, orig_pos.y);\n  mod_pos *= 1.0 + 0.05 * head_swirl;\n  v_head_swirl = head_swirl;\n\n  // head bumps\n  vec4 head_bumps_vector = vec4(orig_pos.xz * 8.0 * (2.0 - orig_pos.y), orig_pos.y * 4.0 + mod_pos.y * 0.25, swim_speed * 0.1);\n  float head_bumps_noise = snoise4(head_bumps_vector);\n  float head_bumps = abs(head_bumps_noise) * smoothstep(0.1, 0.125, orig_pos.y);\n  v_head_bumps = head_bumps;\n  mod_pos *= 1.0 + head_bumps * 0.025;\n\n  // tail swimming motion\n  float swimming_tail_area = smoothstep(-0.3, -1.0, orig_pos.y);\n  mod_pos.y *= 1.0 + sin(swim_speed + orig_pos.y + PI) * swimming_tail_area * 0.1;\n\n  float spin_amount = 0.5 + sin(swim_speed + orig_pos.y - PI) * 0.5;\n\n  // spin tail\n  mod_pos.x += sin(exp(orig_pos.y * 0.25) * PI * 24.0 + u_time * 4.0) * smoothstep(0.0, -1.0, orig_pos.y) * 0.3 * spin_amount;\n  mod_pos.z += cos(exp(orig_pos.y * 0.25) * PI * 16.0 + u_time * 4.0) * smoothstep(0.0, -1.0, orig_pos.y) * 0.3 * spin_amount;\n\n  float tail_noise_amount = smoothstep(0.0, -0.5, orig_pos.y);\n\n  // make the spin more unpredictable and WaVy\n  vec4 spin_noise_vector = vec4(mod_pos.xz + spin_amount, mod_pos.y + spin_amount + u_time * 0.5, u_time * 0.05);\n  float spin_noise = snoise4(spin_noise_vector) * tail_noise_amount * mod_pos.y;\n  mod_pos.xz *= 1.0 + spin_noise;\n\n  // add some bumps to the tail\n  vec4 tail_bump_vector = vec4(orig_pos.xz * 8.0, orig_pos.y * 2.0, u_time * 0.2);\n  float tail_bump_noise = snoise4(tail_bump_vector);\n  float tail_bumps = abs(tail_bump_noise * tail_noise_amount);\n  mod_pos.x += sin(tail_bumps * PI) * 0.02;\n  mod_pos.z += cos(tail_bumps * PI) * 0.02;\n\n  // entire swimming motion\n  mod_pos.y += sin(swim_speed + mod_pos.y + PI * 0.4) * 0.25;\n\n  vec4 view_position = viewMatrix * vec4(mod_pos, 1.0);\n  vec4 projected_position = projectionMatrix * view_position;\n\n  //gl_Position = projected_position;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  v_mod_pos = mod_pos;\n  v_orig_pos = orig_pos;\n  v_tail_bumps = tail_bumps;\n\n}\n",fragmentShader:vs+"\nconst float pi = 3.14159265358979323;\nconst float th = pi * 3. / 8.;\nconst float sc = 1. / cos(th);\nvarying vec2 v_uv;\nuniform float uTime;\nvec2 intersectSphere(vec3 ro, vec3 rd, vec3 org, float rad)\n{\n    ro -= org;\n    float a = dot(rd, rd);\n    float b = 2. * dot(rd, ro);\n    float c = dot(ro, ro) - rad * rad;\n    float desc = b * b - 4. * a * c;\n    if (desc < 0.)\n        return vec2(1, 0);\n\tdesc = sqrt(desc);\n    return vec2(-b - desc, -b + desc) / (2. * a);\n}\n\nmat3 rotX(float a)\n{\n    return mat3(1., 0., 0., 0., cos(a), sin(a), 0., -sin(a), cos(a));\n}\n\nmat3 rotY(float a)\n{\n    return mat3(cos(a), 0., sin(a), 0., 1., 0., -sin(a), 0., cos(a));\n}\n\nmat3 rotZ(float a)\n{\n    return mat3(cos(a), sin(a), 0., -sin(a), cos(a), 0., 0., 0., 1.);\n}\n\nvec3 env(vec3 d)\n{\n    return vec3(.4);\n}\n\nvoid main()\n{\n    // vec2 uv = fragCoord / iResolution.xy * 2. - 1.;\n    vec2 uv = v_uv;\n    //uv.x *= iResolution.x / iResolution.y;\n\n    vec3 ro = vec3(0, 0, 4.5), rd = normalize(vec3(uv, -4));\n\n\n    vec2 t = intersectSphere(ro, rd, vec3(0), 1.);\n\n    if(t.x > t.y)\n    {\n        gl_FragColor.rgb = env(rd);\n    }\n    else\n    {\n        vec3 rp = ro + rd * t.x;\n        vec3 rn = normalize(rp);\n\n        vec3 c = vec3(0);\n        float wsum = 0.;\n\n        //rp = rotY(uTime / 8.) * rp;\n        for(int i = 0; i < 35; ++i)\n        {\n            //vec3 d = normalize(textureLod(iChannel0, rp * .2, 0.).rgb - .5);\n            vec3 d = normalize(vec3(snoise3(rp)));\n            d = rotZ(uTime * .1) * d;\n            vec3 n = normalize(rp);\n            d -= n * dot(n, d);\n            rp += d * .011;\n            float w = 1.;\n            vec3 s;\n            s =normalize(vec3(snoise3(rp)));\n            // s = vec3(textureLod(iChannel0, rp * 1., 0.).a) * vec3(.3, 1., .7);\n            // s += vec3(textureLod(iChannel0, rp.zyx * 2.5, 0.).a) * vec3(1., .3, .7);\n            c += s * w;\n            wsum += w;\n\n            rp = rotY(-.004) * rp;\n        }\n\n        rp = ro + rd * t.x;\n        rp = rotY(uTime / 10.) * rp;\n        for(int i = 0; i < 35; ++i)\n        {\n            //vec3 d = normalize(textureLod(iChannel0, rp * .1, 0.).bgr - .5);\n            vec3 d = vec3(0.5);\n            d = rotZ(uTime * -.05) * d;\n            vec3 n = normalize(rp);\n            d -= n * dot(n, d);\n            rp += d * .011;\n            float w = .4;\n            vec3 s;\n            s = vec3(0.0);\n           // s = vec3(pow(textureLod(iChannel0, rp * 3., 0.).a, 2.)) * vec3(.3, 1., .7).bgr;\n            c += s * w;\n            wsum += w;\n        }\n\n        rp = ro + rd * t.x;\n        rp = rotY(uTime / 12.) * rp;\n        for(int i = 0; i < 35; ++i)\n        {\n            //vec3 d = normalize(textureLod(iChannel0, rp * .1, 0.).brg - .5);\n            vec3 d = vec3(0.5);\n            d = rotY(uTime * -1.) * d;\n            vec3 n = normalize(rp);\n            d -= n * dot(n, d);\n            rp += d * .01;\n            float w = .2;\n            vec3 s;\n            s = vec3(0.0);\n            //s = vec3(pow(textureLod(iChannel0, rp * .5, 0.).a, 2.)) * vec3(0, 0, 1.);\n            c += s * w;\n            wsum += w;\n        }\n\n        c /= wsum;\n\n        vec3 ld = normalize(vec3(1, 10.5, .8));\n\n        c -= dot(c, vec3(1. / 3.)) * .7;\n        c *= 4.5;\n\n        c *= .5 + .5 * dot(rn, ld);\n\n        vec3 refl = normalize(reflect(rd, rn));\n        vec3 spec = vec3(pow(max(0., dot(refl, ld)), 8.)) * 0.1 + env(refl);\n        spec += .5 * (1. - smoothstep(.25, .35, abs(refl.z))) *\n            (1. - smoothstep(.8, .92, abs(refl.x))) * step(0., refl.y);\n        //spec += textureLod(iChannel1, refl, 4.).rgb * .2;\n        c = mix(c, spec, .1 + pow(max(0., 1. - dot(rn, -rd)), 3.) * .8);\n\n        // gl_FragColor.rgb = c;\n    }\n\n    gl_FragColor.rgb *= 1.3;\n\n    gl_FragColor = vec4( pow(clamp(gl_FragColor.rgb, 0., 1.), vec3(1. / 2.2)), 1.);\n}\n\n",uniforms:{u_time:{value:0}},transparent:!0}),e=new N.Kj0(n,t);e.position.y=.15,this.scene.add(e),setInterval(()=>{e.material.uniforms.u_time.value+=.1},100)}}const Zd=["container1"],Wd=["container2"],Vd=["container3"],jd=["container4"];let Ud=(()=>{class i{constructor(){}ngOnInit(){}ngAfterViewInit(){this.container1&&new Pd(this.container1.nativeElement,{}),this.container2&&new zd(this.container2.nativeElement,{}),this.container3&&new Bd(this.container3.nativeElement,{}),this.container4&&new Hd(this.container4.nativeElement,{})}onResize(t){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-sphere"]],viewQuery:function(t,e){if(1&t&&(o.Gf(Zd,7),o.Gf(Wd,7),o.Gf(Vd,5),o.Gf(jd,5)),2&t){let r;o.iGM(r=o.CRH())&&(e.container1=r.first),o.iGM(r=o.CRH())&&(e.container2=r.first),o.iGM(r=o.CRH())&&(e.container3=r.first),o.iGM(r=o.CRH())&&(e.container4=r.first)}},decls:8,vars:0,consts:[[1,"main"],["container1",""],["container2",""],["container3",""],["container4",""]],template:function(t,e){1&t&&(o._UZ(0,"div",0,1),o._UZ(2,"div",0,2),o._UZ(4,"div",0,3),o._UZ(6,"div",0,4))},styles:[".main[_ngcontent-%COMP%]{width:24.5%;height:100%;float:left}"]}),i})();var Oi=function(){function i(G){N.aNw.call(this,G),this.dracoLoader=null,this.ddsLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(F){return new s(F)}),this.register(function(F){return new c(F)}),this.register(function(F){return new d(F)}),this.register(function(F){return new l(F)}),this.register(function(F){return new r(F)}),this.register(function(F){return new f(F)})}function n(){var G={};return{get:function(F){return G[F]},add:function(F,Y){G[F]=Y},remove:function(F){delete G[F]},removeAll:function(){G={}}}}i.prototype=Object.assign(Object.create(N.aNw.prototype),{constructor:i,load:function(G,F,Y,W){var Q,j=this;Q=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:N.Zp0.extractUrlBase(G),this.manager.itemStart(G);var lt=function(vt){W?W(vt):console.error(vt),j.manager.itemError(G),j.manager.itemEnd(G)},nt=new N.hH6(this.manager);nt.setPath(this.path),nt.setResponseType("arraybuffer"),nt.setRequestHeader(this.requestHeader),nt.setWithCredentials(this.withCredentials),nt.load(G,function(vt){try{j.parse(vt,Q,function(_t){F(_t),j.manager.itemEnd(G)},lt)}catch(_t){lt(_t)}},Y,lt)},setDRACOLoader:function(G){return this.dracoLoader=G,this},setDDSLoader:function(G){return this.ddsLoader=G,this},setKTX2Loader:function(G){return this.ktx2Loader=G,this},setMeshoptDecoder:function(G){return this.meshoptDecoder=G,this},register:function(G){return-1===this.pluginCallbacks.indexOf(G)&&this.pluginCallbacks.push(G),this},unregister:function(G){return-1!==this.pluginCallbacks.indexOf(G)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(G),1),this},parse:function(G,F,Y,W){var j,Q={},lt={};if("string"==typeof G)j=G;else if(N.Zp0.decodeText(new Uint8Array(G,0,4))===h){try{Q[t.KHR_BINARY_GLTF]=new S(G)}catch(Ft){return void(W&&W(Ft))}j=Q[t.KHR_BINARY_GLTF].content}else j=N.Zp0.decodeText(new Uint8Array(G));var vt=JSON.parse(j);if(void 0===vt.asset||vt.asset.version[0]<2)W&&W(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var _t=new Rt(vt,{path:F||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});_t.fileLoader.setRequestHeader(this.requestHeader);for(var Dt=0;Dt<this.pluginCallbacks.length;Dt++){var Et=this.pluginCallbacks[Dt](_t);lt[Et.name]=Et,Q[Et.name]=!0}if(vt.extensionsUsed)for(Dt=0;Dt<vt.extensionsUsed.length;++Dt){var kt=vt.extensionsUsed[Dt],Bt=vt.extensionsRequired||[];switch(kt){case t.KHR_MATERIALS_UNLIT:Q[kt]=new a;break;case t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:Q[kt]=new P;break;case t.KHR_DRACO_MESH_COMPRESSION:Q[kt]=new T(vt,this.dracoLoader);break;case t.MSFT_TEXTURE_DDS:Q[kt]=new e(this.ddsLoader);break;case t.KHR_TEXTURE_TRANSFORM:Q[kt]=new k;break;case t.KHR_MESH_QUANTIZATION:Q[kt]=new R;break;default:Bt.indexOf(kt)>=0&&void 0===lt[kt]&&console.warn('THREE.GLTFLoader: Unknown extension "'+kt+'".')}}_t.setExtensions(Q),_t.setPlugins(lt),_t.parse(Y,W)}}});var t={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function e(G){if(!G)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=t.MSFT_TEXTURE_DDS,this.ddsLoader=G}function r(G){this.parser=G,this.name=t.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}function a(){this.name=t.KHR_MATERIALS_UNLIT}function s(G){this.parser=G,this.name=t.KHR_MATERIALS_CLEARCOAT}function l(G){this.parser=G,this.name=t.KHR_MATERIALS_TRANSMISSION}function c(G){this.parser=G,this.name=t.KHR_TEXTURE_BASISU}function d(G){this.parser=G,this.name=t.EXT_TEXTURE_WEBP,this.isSupported=null}function f(G){this.name=t.EXT_MESHOPT_COMPRESSION,this.parser=G}r.prototype._markDefs=function(){for(var G=this.parser,F=this.parser.json.nodes||[],Y=0,W=F.length;Y<W;Y++){var j=F[Y];j.extensions&&j.extensions[this.name]&&void 0!==j.extensions[this.name].light&&G._addNodeRef(this.cache,j.extensions[this.name].light)}},r.prototype._loadLight=function(G){var F=this.parser,Y="light:"+G,W=F.cache.get(Y);if(W)return W;var vt,j=F.json,nt=((j.extensions&&j.extensions[this.name]||{}).lights||[])[G],_t=new N.Ilk(16777215);void 0!==nt.color&&_t.fromArray(nt.color);var Dt=void 0!==nt.range?nt.range:0;switch(nt.type){case"directional":(vt=new N.Ox3(_t)).target.position.set(0,0,-1),vt.add(vt.target);break;case"point":(vt=new N.cek(_t)).distance=Dt;break;case"spot":(vt=new N.PMe(_t)).distance=Dt,nt.spot=nt.spot||{},nt.spot.innerConeAngle=void 0!==nt.spot.innerConeAngle?nt.spot.innerConeAngle:0,nt.spot.outerConeAngle=void 0!==nt.spot.outerConeAngle?nt.spot.outerConeAngle:Math.PI/4,vt.angle=nt.spot.outerConeAngle,vt.penumbra=1-nt.spot.innerConeAngle/nt.spot.outerConeAngle,vt.target.position.set(0,0,-1),vt.add(vt.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+nt.type)}return vt.position.set(0,0,0),vt.decay=2,void 0!==nt.intensity&&(vt.intensity=nt.intensity),vt.name=F.createUniqueName(nt.name||"light_"+G),W=Promise.resolve(vt),F.cache.add(Y,W),W},r.prototype.createNodeAttachment=function(G){var F=this,Y=this.parser,j=Y.json.nodes[G],lt=(j.extensions&&j.extensions[this.name]||{}).light;return void 0===lt?null:this._loadLight(lt).then(function(nt){return Y._getNodeRef(F.cache,lt,nt)})},a.prototype.getMaterialType=function(){return N.vBJ},a.prototype.extendParams=function(G,F,Y){var W=[];G.color=new N.Ilk(1,1,1),G.opacity=1;var j=F.pbrMetallicRoughness;if(j){if(Array.isArray(j.baseColorFactor)){var Q=j.baseColorFactor;G.color.fromArray(Q),G.opacity=Q[3]}void 0!==j.baseColorTexture&&W.push(Y.assignTexture(G,"map",j.baseColorTexture))}return Promise.all(W)},s.prototype.getMaterialType=function(G){var Y=this.parser.json.materials[G];return Y.extensions&&Y.extensions[this.name]?N.EJi:null},s.prototype.extendMaterialParams=function(G,F){var Y=this.parser,W=Y.json.materials[G];if(!W.extensions||!W.extensions[this.name])return Promise.resolve();var j=[],Q=W.extensions[this.name];if(void 0!==Q.clearcoatFactor&&(F.clearcoat=Q.clearcoatFactor),void 0!==Q.clearcoatTexture&&j.push(Y.assignTexture(F,"clearcoatMap",Q.clearcoatTexture)),void 0!==Q.clearcoatRoughnessFactor&&(F.clearcoatRoughness=Q.clearcoatRoughnessFactor),void 0!==Q.clearcoatRoughnessTexture&&j.push(Y.assignTexture(F,"clearcoatRoughnessMap",Q.clearcoatRoughnessTexture)),void 0!==Q.clearcoatNormalTexture&&(j.push(Y.assignTexture(F,"clearcoatNormalMap",Q.clearcoatNormalTexture)),void 0!==Q.clearcoatNormalTexture.scale)){var lt=Q.clearcoatNormalTexture.scale;F.clearcoatNormalScale=new N.FM8(lt,lt)}return Promise.all(j)},l.prototype.getMaterialType=function(G){var Y=this.parser.json.materials[G];return Y.extensions&&Y.extensions[this.name]?N.EJi:null},l.prototype.extendMaterialParams=function(G,F){var Y=this.parser,W=Y.json.materials[G];if(!W.extensions||!W.extensions[this.name])return Promise.resolve();var j=[],Q=W.extensions[this.name];return void 0!==Q.transmissionFactor&&(F.transmission=Q.transmissionFactor),void 0!==Q.transmissionTexture&&j.push(Y.assignTexture(F,"transmissionMap",Q.transmissionTexture)),Promise.all(j)},c.prototype.loadTexture=function(G){var F=this.parser,Y=F.json,W=Y.textures[G];if(!W.extensions||!W.extensions[this.name])return null;var Q=Y.images[W.extensions[this.name].source],lt=F.options.ktx2Loader;if(!lt){if(Y.extensionsRequired&&Y.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return F.loadTextureImage(G,Q,lt)},d.prototype.loadTexture=function(G){var F=this.name,Y=this.parser,W=Y.json,j=W.textures[G];if(!j.extensions||!j.extensions[F])return null;var lt=W.images[j.extensions[F].source],nt=lt.uri?Y.options.manager.getHandler(lt.uri):Y.textureLoader;return this.detectSupport().then(function(vt){if(vt)return Y.loadTextureImage(G,lt,nt);if(W.extensionsRequired&&W.extensionsRequired.indexOf(F)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return Y.loadTexture(G)})},d.prototype.detectSupport=function(){return this.isSupported||(this.isSupported=new Promise(function(G){var F=new Image;F.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",F.onload=F.onerror=function(){G(1===F.height)}})),this.isSupported},f.prototype.loadBufferView=function(G){var F=this.parser.json,Y=F.bufferViews[G];if(Y.extensions&&Y.extensions[this.name]){var W=Y.extensions[this.name],j=this.parser.getDependency("buffer",W.buffer),Q=this.parser.options.meshoptDecoder;if(!Q||!Q.supported){if(F.extensionsRequired&&F.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([j,Q.ready]).then(function(lt){var nt=W.byteOffset||0,vt=W.byteLength||0,_t=W.count,Dt=W.byteStride,Et=new ArrayBuffer(_t*Dt),kt=new Uint8Array(lt[0],nt,vt);return Q.decodeGltfBuffer(new Uint8Array(Et),_t,Dt,kt,W.mode,W.filter),Et})}return null};var h="glTF";function S(G){this.name=t.KHR_BINARY_GLTF,this.content=null,this.body=null;var F=new DataView(G,0,12);if(this.header={magic:N.Zp0.decodeText(new Uint8Array(G.slice(0,4))),version:F.getUint32(4,!0),length:F.getUint32(8,!0)},this.header.magic!==h)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var Y=new DataView(G,12),W=0;W<Y.byteLength;){var j=Y.getUint32(W,!0),Q=Y.getUint32(W+=4,!0);if(W+=4,1313821514===Q){var lt=new Uint8Array(G,12+W,j);this.content=N.Zp0.decodeText(lt)}else if(5130562===Q){var nt=12+W;this.body=G.slice(nt,nt+j)}W+=j}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function T(G,F){if(!F)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=t.KHR_DRACO_MESH_COMPRESSION,this.json=G,this.dracoLoader=F,this.dracoLoader.preload()}function k(){this.name=t.KHR_TEXTURE_TRANSFORM}function E(G){N.Wid.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var F=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),Y=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),W=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),j=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),Q=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),lt={specular:{value:(new N.Ilk).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=lt,this.onBeforeCompile=function(nt){for(var vt in lt)nt.uniforms[vt]=lt[vt];nt.fragmentShader=nt.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",F).replace("#include <metalnessmap_pars_fragment>",Y).replace("#include <roughnessmap_fragment>",W).replace("#include <metalnessmap_fragment>",j).replace("#include <lights_physical_fragment>",Q)},Object.defineProperties(this,{specular:{get:function(){return lt.specular.value},set:function(nt){lt.specular.value=nt}},specularMap:{get:function(){return lt.specularMap.value},set:function(nt){lt.specularMap.value=nt,nt?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return lt.glossiness.value},set:function(nt){lt.glossiness.value=nt}},glossinessMap:{get:function(){return lt.glossinessMap.value},set:function(nt){lt.glossinessMap.value=nt,nt?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(G)}function P(){return{name:t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return E},extendParams:function(G,F,Y){var W=F.extensions[this.name];G.color=new N.Ilk(1,1,1),G.opacity=1;var j=[];if(Array.isArray(W.diffuseFactor)){var Q=W.diffuseFactor;G.color.fromArray(Q),G.opacity=Q[3]}if(void 0!==W.diffuseTexture&&j.push(Y.assignTexture(G,"map",W.diffuseTexture)),G.emissive=new N.Ilk(0,0,0),G.glossiness=void 0!==W.glossinessFactor?W.glossinessFactor:1,G.specular=new N.Ilk(1,1,1),Array.isArray(W.specularFactor)&&G.specular.fromArray(W.specularFactor),void 0!==W.specularGlossinessTexture){var lt=W.specularGlossinessTexture;j.push(Y.assignTexture(G,"glossinessMap",lt)),j.push(Y.assignTexture(G,"specularMap",lt))}return Promise.all(j)},createMaterial:function(G){var F=new E(G);return F.fog=!0,F.color=G.color,F.map=void 0===G.map?null:G.map,F.lightMap=null,F.lightMapIntensity=1,F.aoMap=void 0===G.aoMap?null:G.aoMap,F.aoMapIntensity=1,F.emissive=G.emissive,F.emissiveIntensity=1,F.emissiveMap=void 0===G.emissiveMap?null:G.emissiveMap,F.bumpMap=void 0===G.bumpMap?null:G.bumpMap,F.bumpScale=1,F.normalMap=void 0===G.normalMap?null:G.normalMap,F.normalMapType=N.IOt,G.normalScale&&(F.normalScale=G.normalScale),F.displacementMap=null,F.displacementScale=1,F.displacementBias=0,F.specularMap=void 0===G.specularMap?null:G.specularMap,F.specular=G.specular,F.glossinessMap=void 0===G.glossinessMap?null:G.glossinessMap,F.glossiness=G.glossiness,F.alphaMap=null,F.envMap=void 0===G.envMap?null:G.envMap,F.envMapIntensity=1,F.refractionRatio=.98,F}}}function R(){this.name=t.KHR_MESH_QUANTIZATION}function B(G,F,Y,W){N._C8.call(this,G,F,Y,W)}T.prototype.decodePrimitive=function(G,F){var Y=this.json,W=this.dracoLoader,j=G.extensions[this.name].bufferView,Q=G.extensions[this.name].attributes,lt={},nt={},vt={};for(var _t in Q){var Dt=$[_t]||_t.toLowerCase();lt[Dt]=Q[_t]}for(_t in G.attributes)if(Dt=$[_t]||_t.toLowerCase(),void 0!==Q[_t]){var Et=Y.accessors[G.attributes[_t]];vt[Dt]=L[Et.componentType],nt[Dt]=!0===Et.normalized}return F.getDependency("bufferView",j).then(function(Bt){return new Promise(function(Ft){W.decodeDracoFile(Bt,function(ne){for(var ve in ne.attributes){var $t=nt[ve];void 0!==$t&&(ne.attributes[ve].normalized=$t)}Ft(ne)},lt,vt)})})},k.prototype.extendTexture=function(G,F){return G=G.clone(),void 0!==F.offset&&G.offset.fromArray(F.offset),void 0!==F.rotation&&(G.rotation=F.rotation),void 0!==F.scale&&G.repeat.fromArray(F.scale),void 0!==F.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),G.needsUpdate=!0,G},(E.prototype=Object.create(N.Wid.prototype)).constructor=E,E.prototype.copy=function(G){return N.Wid.prototype.copy.call(this,G),this.specularMap=G.specularMap,this.specular.copy(G.specular),this.glossinessMap=G.glossinessMap,this.glossiness=G.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},(B.prototype=Object.create(N._C8.prototype)).constructor=B,B.prototype.beforeStart_=B.prototype.copySampleValue_=function(G){for(var F=this.resultBuffer,Y=this.sampleValues,W=this.valueSize,j=G*W*3+W,Q=0;Q!==W;Q++)F[Q]=Y[j+Q];return F},B.prototype.afterEnd_=B.prototype.copySampleValue_,B.prototype.interpolate_=function(G,F,Y,W){for(var j=this.resultBuffer,Q=this.sampleValues,lt=this.valueSize,nt=2*lt,vt=3*lt,_t=W-F,Dt=(Y-F)/_t,Et=Dt*Dt,kt=Et*Dt,Bt=G*vt,Ft=Bt-vt,ne=-2*kt+3*Et,ve=kt-Et,Kt=1-ne,$t=ve-Et+Dt,ge=0;ge!==lt;ge++)j[ge]=Kt*Q[Ft+ge+lt]+$t*(Q[Ft+ge+nt]*_t)+ne*Q[Bt+ge+lt]+ve*(Q[Bt+ge]*_t);return j};var L={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Z={9728:N.TyD,9729:N.wem,9984:N.YLQ,9985:N.qyh,9986:N.aH4,9987:N.D1R},q={33071:N.uWy,33648:N.OoA,10497:N.rpg},tt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},$={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ft={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},X={CUBICSPLINE:void 0,LINEAR:N.NMF,STEP:N.Syv};function yt(G,F){return"string"!=typeof G||""===G?"":(/^https?:\/\//i.test(F)&&/^\//.test(G)&&(F=F.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(G)||/^data:.*,.*$/i.test(G)||/^blob:.*$/i.test(G)?G:F+G)}function xt(G){return void 0===G.DefaultMaterial&&(G.DefaultMaterial=new N.Wid({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:N.Wl3})),G.DefaultMaterial}function Pt(G,F,Y){for(var W in Y.extensions)void 0===G[W]&&(F.userData.gltfExtensions=F.userData.gltfExtensions||{},F.userData.gltfExtensions[W]=Y.extensions[W])}function Ot(G,F){void 0!==F.extras&&("object"==typeof F.extras?Object.assign(G.userData,F.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+F.extras))}function Tt(G,F){if(G.updateMorphTargets(),void 0!==F.weights)for(var Y=0,W=F.weights.length;Y<W;Y++)G.morphTargetInfluences[Y]=F.weights[Y];if(F.extras&&Array.isArray(F.extras.targetNames)){var j=F.extras.targetNames;if(G.morphTargetInfluences.length===j.length)for(G.morphTargetDictionary={},Y=0,W=j.length;Y<W;Y++)G.morphTargetDictionary[j[Y]]=Y;else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function At(G){var F=G.extensions&&G.extensions[t.KHR_DRACO_MESH_COMPRESSION];return F?"draco:"+F.bufferView+":"+F.indices+":"+Nt(F.attributes):G.indices+":"+Nt(G.attributes)+":"+G.mode}function Nt(G){for(var F="",Y=Object.keys(G).sort(),W=0,j=Y.length;W<j;W++)F+=Y[W]+":"+G[Y[W]]+";";return F}function Rt(G,F){this.json=G||{},this.extensions={},this.plugins={},this.options=F||{},this.cache=new n,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.nodeNamesUsed={},this.textureLoader="undefined"!=typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?new N.QRU(this.options.manager):new N.dpR(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new N.hH6(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function Vt(G,F,Y){var W=F.attributes,j=[];function Q(_t,Dt){return Y.getDependency("accessor",_t).then(function(Et){G.setAttribute(Dt,Et)})}for(var lt in W){var nt=$[lt]||lt.toLowerCase();nt in G.attributes||j.push(Q(W[lt],nt))}if(void 0!==F.indices&&!G.index){var vt=Y.getDependency("accessor",F.indices).then(function(_t){G.setIndex(_t)});j.push(vt)}return Ot(G,F),function(G,F,Y){var W=F.attributes,j=new N.ZzF;if(void 0!==W.POSITION){var nt=(Q=Y.json.accessors[W.POSITION]).max;if(void 0!==(lt=Q.min)&&void 0!==nt){j.set(new N.Pa4(lt[0],lt[1],lt[2]),new N.Pa4(nt[0],nt[1],nt[2]));var vt=F.targets;if(void 0!==vt){for(var _t=new N.Pa4,Dt=new N.Pa4,Et=0,kt=vt.length;Et<kt;Et++){var Q,lt,Bt=vt[Et];void 0!==Bt.POSITION&&(nt=(Q=Y.json.accessors[Bt.POSITION]).max,void 0!==(lt=Q.min)&&void 0!==nt?(Dt.setX(Math.max(Math.abs(lt[0]),Math.abs(nt[0]))),Dt.setY(Math.max(Math.abs(lt[1]),Math.abs(nt[1]))),Dt.setZ(Math.max(Math.abs(lt[2]),Math.abs(nt[2]))),_t.max(Dt)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION."))}j.expandByVector(_t)}G.boundingBox=j;var Ft=new N.aLr;j.getCenter(Ft.center),Ft.radius=j.min.distanceTo(j.max)/2,G.boundingSphere=Ft}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(G,F,Y),Promise.all(j).then(function(){return void 0!==F.targets?function(G,F,Y){for(var W=!1,j=!1,Q=0,lt=F.length;Q<lt&&(void 0!==(nt=F[Q]).POSITION&&(W=!0),void 0!==nt.NORMAL&&(j=!0),!W||!j);Q++);if(!W&&!j)return Promise.resolve(G);var vt=[],_t=[];for(Q=0,lt=F.length;Q<lt;Q++){var nt=F[Q];if(W){var Dt=void 0!==nt.POSITION?Y.getDependency("accessor",nt.POSITION):G.attributes.position;vt.push(Dt)}j&&(Dt=void 0!==nt.NORMAL?Y.getDependency("accessor",nt.NORMAL):G.attributes.normal,_t.push(Dt))}return Promise.all([Promise.all(vt),Promise.all(_t)]).then(function(Et){var Bt=Et[1];return W&&(G.morphAttributes.position=Et[0]),j&&(G.morphAttributes.normal=Bt),G.morphTargetsRelative=!0,G})}(G,F.targets,Y):G})}function Ut(G,F){var Y=G.getIndex();if(null===Y){var W=[],j=G.getAttribute("position");if(void 0===j)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),G;for(var Q=0;Q<j.count;Q++)W.push(Q);G.setIndex(W),Y=G.getIndex()}var lt=Y.count-2,nt=[];if(F===N.z$h)for(Q=1;Q<=lt;Q++)nt.push(Y.getX(0)),nt.push(Y.getX(Q)),nt.push(Y.getX(Q+1));else for(Q=0;Q<lt;Q++)Q%2==0?(nt.push(Y.getX(Q)),nt.push(Y.getX(Q+1)),nt.push(Y.getX(Q+2))):(nt.push(Y.getX(Q+2)),nt.push(Y.getX(Q+1)),nt.push(Y.getX(Q)));nt.length/3!==lt&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var vt=G.clone();return vt.setIndex(nt),vt}return Rt.prototype.setExtensions=function(G){this.extensions=G},Rt.prototype.setPlugins=function(G){this.plugins=G},Rt.prototype.parse=function(G,F){var Y=this,W=this.json,j=this.extensions;this.cache.removeAll(),this._invokeAll(function(Q){return Q._markDefs&&Q._markDefs()}),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(Q){var lt={scene:Q[0][W.scene||0],scenes:Q[0],animations:Q[1],cameras:Q[2],asset:W.asset,parser:Y,userData:{}};Pt(j,lt,W),Ot(lt,W),G(lt)}).catch(F)},Rt.prototype._markDefs=function(){for(var G=this.json.nodes||[],F=this.json.skins||[],Y=this.json.meshes||[],W=0,j=F.length;W<j;W++)for(var Q=F[W].joints,lt=0,nt=Q.length;lt<nt;lt++)G[Q[lt]].isBone=!0;for(var vt=0,_t=G.length;vt<_t;vt++){var Dt=G[vt];void 0!==Dt.mesh&&(this._addNodeRef(this.meshCache,Dt.mesh),void 0!==Dt.skin&&(Y[Dt.mesh].isSkinnedMesh=!0)),void 0!==Dt.camera&&this._addNodeRef(this.cameraCache,Dt.camera)}},Rt.prototype._addNodeRef=function(G,F){void 0!==F&&(void 0===G.refs[F]&&(G.refs[F]=G.uses[F]=0),G.refs[F]++)},Rt.prototype._getNodeRef=function(G,F,Y){if(G.refs[F]<=1)return Y;var W=Y.clone();return W.name+="_instance_"+G.uses[F]++,W},Rt.prototype._invokeOne=function(G){var F=Object.values(this.plugins);F.push(this);for(var Y=0;Y<F.length;Y++){var W=G(F[Y]);if(W)return W}},Rt.prototype._invokeAll=function(G){var F=Object.values(this.plugins);F.unshift(this);for(var Y=[],W=0;W<F.length;W++){var j=G(F[W]);j&&Y.push(j)}return Y},Rt.prototype.getDependency=function(G,F){var Y=G+":"+F,W=this.cache.get(Y);if(!W){switch(G){case"scene":W=this.loadScene(F);break;case"node":W=this.loadNode(F);break;case"mesh":W=this._invokeOne(function(j){return j.loadMesh&&j.loadMesh(F)});break;case"accessor":W=this.loadAccessor(F);break;case"bufferView":W=this._invokeOne(function(j){return j.loadBufferView&&j.loadBufferView(F)});break;case"buffer":W=this.loadBuffer(F);break;case"material":W=this._invokeOne(function(j){return j.loadMaterial&&j.loadMaterial(F)});break;case"texture":W=this._invokeOne(function(j){return j.loadTexture&&j.loadTexture(F)});break;case"skin":W=this.loadSkin(F);break;case"animation":W=this.loadAnimation(F);break;case"camera":W=this.loadCamera(F);break;default:throw new Error("Unknown type: "+G)}this.cache.add(Y,W)}return W},Rt.prototype.getDependencies=function(G){var F=this.cache.get(G);if(!F){var Y=this;F=Promise.all((this.json[G+("mesh"===G?"es":"s")]||[]).map(function(j,Q){return Y.getDependency(G,Q)})),this.cache.add(G,F)}return F},Rt.prototype.loadBuffer=function(G){var F=this.json.buffers[G],Y=this.fileLoader;if(F.type&&"arraybuffer"!==F.type)throw new Error("THREE.GLTFLoader: "+F.type+" buffer type is not supported.");if(void 0===F.uri&&0===G)return Promise.resolve(this.extensions[t.KHR_BINARY_GLTF].body);var W=this.options;return new Promise(function(j,Q){Y.load(yt(F.uri,W.path),j,void 0,function(){Q(new Error('THREE.GLTFLoader: Failed to load buffer "'+F.uri+'".'))})})},Rt.prototype.loadBufferView=function(G){var F=this.json.bufferViews[G];return this.getDependency("buffer",F.buffer).then(function(Y){var j=F.byteOffset||0;return Y.slice(j,j+(F.byteLength||0))})},Rt.prototype.loadAccessor=function(G){var F=this,Y=this.json,W=this.json.accessors[G];if(void 0===W.bufferView&&void 0===W.sparse)return Promise.resolve(null);var j=[];return j.push(void 0!==W.bufferView?this.getDependency("bufferView",W.bufferView):null),void 0!==W.sparse&&(j.push(this.getDependency("bufferView",W.sparse.indices.bufferView)),j.push(this.getDependency("bufferView",W.sparse.values.bufferView))),Promise.all(j).then(function(Q){var Ft,ne,lt=Q[0],nt=tt[W.type],vt=L[W.componentType],_t=vt.BYTES_PER_ELEMENT,Et=W.byteOffset||0,kt=void 0!==W.bufferView?Y.bufferViews[W.bufferView].byteStride:void 0,Bt=!0===W.normalized;if(kt&&kt!==_t*nt){var ve=Math.floor(Et/kt),Kt="InterleavedBuffer:"+W.bufferView+":"+W.componentType+":"+ve+":"+W.count,$t=F.cache.get(Kt);$t||(Ft=new vt(lt,ve*kt,W.count*kt/_t),$t=new N.vpT(Ft,kt/_t),F.cache.add(Kt,$t)),ne=new N.kB5($t,nt,Et%kt/_t,Bt)}else Ft=null===lt?new vt(W.count*nt):new vt(lt,Et,W.count*nt),ne=new N.TlE(Ft,nt,Bt);if(void 0!==W.sparse){var Hn=W.sparse.values.byteOffset||0,Ie=new(0,L[W.sparse.indices.componentType])(Q[1],W.sparse.indices.byteOffset||0,W.sparse.count*tt.SCALAR),xn=new vt(Q[2],Hn,W.sparse.count*nt);null!==lt&&(ne=new N.TlE(ne.array.slice(),ne.itemSize,ne.normalized));for(var Re=0,_i=Ie.length;Re<_i;Re++){var yn=Ie[Re];if(ne.setX(yn,xn[Re*nt]),nt>=2&&ne.setY(yn,xn[Re*nt+1]),nt>=3&&ne.setZ(yn,xn[Re*nt+2]),nt>=4&&ne.setW(yn,xn[Re*nt+3]),nt>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return ne})},Rt.prototype.loadTexture=function(G){var lt,nt,Y=this.json,j=Y.textures[G],Q=j.extensions||{};return(lt=Q[t.MSFT_TEXTURE_DDS]?Y.images[Q[t.MSFT_TEXTURE_DDS].source]:Y.images[j.source]).uri&&(nt=this.options.manager.getHandler(lt.uri)),nt||(nt=Q[t.MSFT_TEXTURE_DDS]?this.extensions[t.MSFT_TEXTURE_DDS].ddsLoader:this.textureLoader),this.loadTextureImage(G,lt,nt)},Rt.prototype.loadTextureImage=function(G,F,Y){var W=this,j=this.json,Q=this.options,lt=j.textures[G],nt=self.URL||self.webkitURL,vt=F.uri,_t=!1,Dt=!0;return"image/jpeg"===F.mimeType&&(Dt=!1),void 0!==F.bufferView&&(vt=W.getDependency("bufferView",F.bufferView).then(function(Et){if("image/png"===F.mimeType){var kt=new DataView(Et,25,1).getUint8(0,!1);Dt=6===kt||4===kt||3===kt}_t=!0;var Bt=new Blob([Et],{type:F.mimeType});return vt=nt.createObjectURL(Bt)})),Promise.resolve(vt).then(function(Et){return new Promise(function(kt,Bt){var Ft=kt;!0===Y.isImageBitmapLoader&&(Ft=function(ne){kt(new N.ROQ(ne))}),Y.load(yt(Et,Q.path),Ft,void 0,Bt)})}).then(function(Et){!0===_t&&nt.revokeObjectURL(vt),Et.flipY=!1,lt.name&&(Et.name=lt.name),Dt||(Et.format=N.UCm);var Bt=(j.samplers||{})[lt.sampler]||{};return Et.magFilter=Z[Bt.magFilter]||N.wem,Et.minFilter=Z[Bt.minFilter]||N.D1R,Et.wrapS=q[Bt.wrapS]||N.rpg,Et.wrapT=q[Bt.wrapT]||N.rpg,W.associations.set(Et,{type:"textures",index:G}),Et})},Rt.prototype.assignTexture=function(G,F,Y){var W=this;return this.getDependency("texture",Y.index).then(function(j){if(void 0!==Y.texCoord&&0!=Y.texCoord&&!("aoMap"===F&&1==Y.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+Y.texCoord+" for texture "+F+" not yet supported."),W.extensions[t.KHR_TEXTURE_TRANSFORM]){var Q=void 0!==Y.extensions?Y.extensions[t.KHR_TEXTURE_TRANSFORM]:void 0;if(Q){var lt=W.associations.get(j);j=W.extensions[t.KHR_TEXTURE_TRANSFORM].extendTexture(j,Q),W.associations.set(j,lt)}}G[F]=j})},Rt.prototype.assignFinalMaterial=function(G){var F=G.geometry,Y=G.material,W=void 0!==F.attributes.tangent,j=void 0!==F.attributes.color,Q=void 0===F.attributes.normal,lt=!0===G.isSkinnedMesh,nt=Object.keys(F.morphAttributes).length>0,vt=nt&&void 0!==F.morphAttributes.normal;if(G.isPoints){var Dt=this.cache.get(_t="PointsMaterial:"+Y.uuid);Dt||(Dt=new N.UY4,N.F5T.prototype.copy.call(Dt,Y),Dt.color.copy(Y.color),Dt.map=Y.map,Dt.sizeAttenuation=!1,this.cache.add(_t,Dt)),Y=Dt}else if(G.isLine){var Et=this.cache.get(_t="LineBasicMaterial:"+Y.uuid);Et||(Et=new N.nls,N.F5T.prototype.copy.call(Et,Y),Et.color.copy(Y.color),this.cache.add(_t,Et)),Y=Et}if(W||j||Q||lt||nt){var _t="ClonedMaterial:"+Y.uuid+":";Y.isGLTFSpecularGlossinessMaterial&&(_t+="specular-glossiness:"),lt&&(_t+="skinning:"),W&&(_t+="vertex-tangents:"),j&&(_t+="vertex-colors:"),Q&&(_t+="flat-shading:"),nt&&(_t+="morph-targets:"),vt&&(_t+="morph-normals:");var kt=this.cache.get(_t);kt||(kt=Y.clone(),lt&&(kt.skinning=!0),W&&(kt.vertexTangents=!0),j&&(kt.vertexColors=!0),Q&&(kt.flatShading=!0),nt&&(kt.morphTargets=!0),vt&&(kt.morphNormals=!0),this.cache.add(_t,kt),this.associations.set(kt,this.associations.get(Y))),Y=kt}Y.aoMap&&void 0===F.attributes.uv2&&void 0!==F.attributes.uv&&F.setAttribute("uv2",F.attributes.uv),Y.normalScale&&!W&&(Y.normalScale.y=-Y.normalScale.y),Y.clearcoatNormalScale&&!W&&(Y.clearcoatNormalScale.y=-Y.clearcoatNormalScale.y),G.material=Y},Rt.prototype.getMaterialType=function(){return N.Wid},Rt.prototype.loadMaterial=function(G){var Q,F=this,W=this.extensions,j=this.json.materials[G],lt={},nt=j.extensions||{},vt=[];if(nt[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var _t=W[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];Q=_t.getMaterialType(),vt.push(_t.extendParams(lt,j,F))}else if(nt[t.KHR_MATERIALS_UNLIT]){var Dt=W[t.KHR_MATERIALS_UNLIT];Q=Dt.getMaterialType(),vt.push(Dt.extendParams(lt,j,F))}else{var Et=j.pbrMetallicRoughness||{};if(lt.color=new N.Ilk(1,1,1),lt.opacity=1,Array.isArray(Et.baseColorFactor)){var kt=Et.baseColorFactor;lt.color.fromArray(kt),lt.opacity=kt[3]}void 0!==Et.baseColorTexture&&vt.push(F.assignTexture(lt,"map",Et.baseColorTexture)),lt.metalness=void 0!==Et.metallicFactor?Et.metallicFactor:1,lt.roughness=void 0!==Et.roughnessFactor?Et.roughnessFactor:1,void 0!==Et.metallicRoughnessTexture&&(vt.push(F.assignTexture(lt,"metalnessMap",Et.metallicRoughnessTexture)),vt.push(F.assignTexture(lt,"roughnessMap",Et.metallicRoughnessTexture))),Q=this._invokeOne(function(Ft){return Ft.getMaterialType&&Ft.getMaterialType(G)}),vt.push(Promise.all(this._invokeAll(function(Ft){return Ft.extendMaterialParams&&Ft.extendMaterialParams(G,lt)})))}!0===j.doubleSided&&(lt.side=N.ehD);var Bt=j.alphaMode||"OPAQUE";return"BLEND"===Bt?(lt.transparent=!0,lt.depthWrite=!1):(lt.transparent=!1,"MASK"===Bt&&(lt.alphaTest=void 0!==j.alphaCutoff?j.alphaCutoff:.5)),void 0!==j.normalTexture&&Q!==N.vBJ&&(vt.push(F.assignTexture(lt,"normalMap",j.normalTexture)),lt.normalScale=new N.FM8(1,1),void 0!==j.normalTexture.scale&&lt.normalScale.set(j.normalTexture.scale,j.normalTexture.scale)),void 0!==j.occlusionTexture&&Q!==N.vBJ&&(vt.push(F.assignTexture(lt,"aoMap",j.occlusionTexture)),void 0!==j.occlusionTexture.strength&&(lt.aoMapIntensity=j.occlusionTexture.strength)),void 0!==j.emissiveFactor&&Q!==N.vBJ&&(lt.emissive=(new N.Ilk).fromArray(j.emissiveFactor)),void 0!==j.emissiveTexture&&Q!==N.vBJ&&vt.push(F.assignTexture(lt,"emissiveMap",j.emissiveTexture)),Promise.all(vt).then(function(){var Ft;return Ft=Q===E?W[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(lt):new Q(lt),j.name&&(Ft.name=j.name),Ft.map&&(Ft.map.encoding=N.knz),Ft.emissiveMap&&(Ft.emissiveMap.encoding=N.knz),Ot(Ft,j),F.associations.set(Ft,{type:"materials",index:G}),j.extensions&&Pt(W,Ft,j),Ft})},Rt.prototype.createUniqueName=function(G){for(var F=N.iUV.sanitizeNodeName(G||""),Y=F,W=1;this.nodeNamesUsed[Y];++W)Y=F+"_"+W;return this.nodeNamesUsed[Y]=!0,Y},Rt.prototype.loadGeometries=function(G){var F=this,Y=this.extensions,W=this.primitiveCache;function j(kt){return Y[t.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(kt,F).then(function(Bt){return Vt(Bt,kt,F)})}for(var Q=[],lt=0,nt=G.length;lt<nt;lt++){var Et,vt=G[lt],_t=At(vt),Dt=W[_t];Dt?Q.push(Dt.promise):(Et=vt.extensions&&vt.extensions[t.KHR_DRACO_MESH_COMPRESSION]?j(vt):Vt(new N.u9r,vt,F),W[_t]={primitive:vt,promise:Et},Q.push(Et))}return Promise.all(Q)},Rt.prototype.loadMesh=function(G){for(var F=this,W=this.extensions,j=this.json.meshes[G],Q=j.primitives,lt=[],nt=0,vt=Q.length;nt<vt;nt++){var _t=void 0===Q[nt].material?xt(this.cache):this.getDependency("material",Q[nt].material);lt.push(_t)}return lt.push(F.loadGeometries(Q)),Promise.all(lt).then(function(Dt){for(var Et=Dt.slice(0,Dt.length-1),kt=Dt[Dt.length-1],Bt=[],Ft=0,ne=kt.length;Ft<ne;Ft++){var $t,ve=kt[Ft],Kt=Q[Ft],ge=Et[Ft];if(4===Kt.mode||5===Kt.mode||6===Kt.mode||void 0===Kt.mode)!0===($t=!0===j.isSkinnedMesh?new N.TUv(ve,ge):new N.Kj0(ve,ge)).isSkinnedMesh&&!$t.geometry.attributes.skinWeight.normalized&&$t.normalizeSkinWeights(),5===Kt.mode?$t.geometry=Ut($t.geometry,N.UlW):6===Kt.mode&&($t.geometry=Ut($t.geometry,N.z$h));else if(1===Kt.mode)$t=new N.ejS(ve,ge);else if(3===Kt.mode)$t=new N.x12(ve,ge);else if(2===Kt.mode)$t=new N.blk(ve,ge);else{if(0!==Kt.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+Kt.mode);$t=new N.woe(ve,ge)}Object.keys($t.geometry.morphAttributes).length>0&&Tt($t,j),$t.name=F.createUniqueName(j.name||"mesh_"+G),Ot($t,j),Kt.extensions&&Pt(W,$t,Kt),F.assignFinalMaterial($t),Bt.push($t)}if(1===Bt.length)return Bt[0];var He=new N.ZAu;for(Ft=0,ne=Bt.length;Ft<ne;Ft++)He.add(Bt[Ft]);return He})},Rt.prototype.loadCamera=function(G){var F,Y=this.json.cameras[G],W=Y[Y.type];if(W)return"perspective"===Y.type?F=new N.cPb(N.M8C.radToDeg(W.yfov),W.aspectRatio||1,W.znear||1,W.zfar||2e6):"orthographic"===Y.type&&(F=new N.iKG(-W.xmag,W.xmag,W.ymag,-W.ymag,W.znear,W.zfar)),Y.name&&(F.name=this.createUniqueName(Y.name)),Ot(F,Y),Promise.resolve(F);console.warn("THREE.GLTFLoader: Missing camera parameters.")},Rt.prototype.loadSkin=function(G){var F=this.json.skins[G],Y={joints:F.joints};return void 0===F.inverseBindMatrices?Promise.resolve(Y):this.getDependency("accessor",F.inverseBindMatrices).then(function(W){return Y.inverseBindMatrices=W,Y})},Rt.prototype.loadAnimation=function(G){for(var Y=this.json.animations[G],W=[],j=[],Q=[],lt=[],nt=[],vt=0,_t=Y.channels.length;vt<_t;vt++){var Dt=Y.channels[vt],Et=Y.samplers[Dt.sampler],kt=Dt.target,Ft=void 0!==Y.parameters?Y.parameters[Et.input]:Et.input,ne=void 0!==Y.parameters?Y.parameters[Et.output]:Et.output;W.push(this.getDependency("node",void 0!==kt.node?kt.node:kt.id)),j.push(this.getDependency("accessor",Ft)),Q.push(this.getDependency("accessor",ne)),lt.push(Et),nt.push(kt)}return Promise.all([Promise.all(W),Promise.all(j),Promise.all(Q),Promise.all(lt),Promise.all(nt)]).then(function(ve){for(var Kt=ve[0],$t=ve[1],ge=ve[2],He=ve[3],Ln=ve[4],Hn=[],Ie=0,xn=Kt.length;Ie<xn;Ie++){var Re=Kt[Ie],_i=$t[Ie],yn=ge[Ie],ir=He[Ie],rr=Ln[Ie];if(void 0!==Re){var Ci;switch(Re.updateMatrix(),Re.matrixAutoUpdate=!0,ft[rr.path]){case ft.weights:Ci=N.dUE;break;case ft.rotation:Ci=N.iLg;break;default:Ci=N.yC1}var or=Re.name?Re.name:Re.uuid,ue=void 0!==ir.interpolation?X[ir.interpolation]:N.NMF,De=[];ft[rr.path]===ft.weights?Re.traverse(function(ar){!0===ar.isMesh&&ar.morphTargetInfluences&&De.push(ar.name?ar.name:ar.uuid)}):De.push(or);var $e=yn.array;if(yn.normalized){var Zn;if($e.constructor===Int8Array)Zn=1/127;else if($e.constructor===Uint8Array)Zn=1/255;else if($e.constructor==Int16Array)Zn=1/32767;else{if($e.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");Zn=1/65535}for(var Kr=new Float32Array($e.length),tn=0,as=$e.length;tn<as;tn++)Kr[tn]=$e[tn]*Zn;$e=Kr}for(tn=0,as=De.length;tn<as;tn++){var ss=new Ci(De[tn]+"."+ft[rr.path],_i.array,$e,ue);"CUBICSPLINE"===ir.interpolation&&(ss.createInterpolant=function(p2){return new B(this.times,this.values,this.getValueSize()/3,p2)},ss.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),Hn.push(ss)}}}return new N.m7l(Y.name?Y.name:"animation_"+G,void 0,Hn)})},Rt.prototype.loadNode=function(G){var lt,Y=this.extensions,W=this,j=this.json.nodes[G],Q=j.name?W.createUniqueName(j.name):"";return(lt=[],void 0!==j.mesh&&lt.push(W.getDependency("mesh",j.mesh).then(function(nt){var vt=W._getNodeRef(W.meshCache,j.mesh,nt);return void 0!==j.weights&&vt.traverse(function(_t){if(_t.isMesh)for(var Dt=0,Et=j.weights.length;Dt<Et;Dt++)_t.morphTargetInfluences[Dt]=j.weights[Dt]}),vt})),void 0!==j.camera&&lt.push(W.getDependency("camera",j.camera).then(function(nt){return W._getNodeRef(W.cameraCache,j.camera,nt)})),W._invokeAll(function(nt){return nt.createNodeAttachment&&nt.createNodeAttachment(G)}).forEach(function(nt){lt.push(nt)}),Promise.all(lt)).then(function(lt){var nt;if((nt=!0===j.isBone?new N.N$j:lt.length>1?new N.ZAu:1===lt.length?lt[0]:new N.Tme)!==lt[0])for(var vt=0,_t=lt.length;vt<_t;vt++)nt.add(lt[vt]);if(j.name&&(nt.userData.name=j.name,nt.name=Q),Ot(nt,j),j.extensions&&Pt(Y,nt,j),void 0!==j.matrix){var Dt=new N.yGw;Dt.fromArray(j.matrix),nt.applyMatrix4(Dt)}else void 0!==j.translation&&nt.position.fromArray(j.translation),void 0!==j.rotation&&nt.quaternion.fromArray(j.rotation),void 0!==j.scale&&nt.scale.fromArray(j.scale);return W.associations.set(nt,{type:"nodes",index:G}),nt})},Rt.prototype.loadScene=function(){function G(F,Y,W,j){var Q=W.nodes[F];return j.getDependency("node",F).then(function(lt){return void 0===Q.skin?lt:j.getDependency("skin",Q.skin).then(function(vt){for(var _t=[],Dt=0,Et=(nt=vt).joints.length;Dt<Et;Dt++)_t.push(j.getDependency("node",nt.joints[Dt]));return Promise.all(_t)}).then(function(vt){return lt.traverse(function(_t){if(_t.isMesh){for(var Dt=[],Et=[],kt=0,Bt=vt.length;kt<Bt;kt++){var Ft=vt[kt];if(Ft){Dt.push(Ft);var ne=new N.yGw;void 0!==nt.inverseBindMatrices&&ne.fromArray(nt.inverseBindMatrices.array,16*kt),Et.push(ne)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',nt.joints[kt])}_t.bind(new N.OdW(Dt,Et),_t.matrixWorld)}}),lt});var nt}).then(function(lt){Y.add(lt);var nt=[];if(Q.children)for(var vt=Q.children,_t=0,Dt=vt.length;_t<Dt;_t++)nt.push(G(vt[_t],lt,W,j));return Promise.all(nt)})}return function(Y){var W=this.json,j=this.extensions,Q=this.json.scenes[Y],nt=new N.ZAu;Q.name&&(nt.name=this.createUniqueName(Q.name)),Ot(nt,Q),Q.extensions&&Pt(j,nt,Q);for(var vt=Q.nodes||[],_t=[],Dt=0,Et=vt.length;Dt<Et;Dt++)_t.push(G(vt[Dt],nt,W,this));return Promise.all(_t).then(function(){return nt})}}(),i}();class Kd extends si{constructor(n,t){super(n,t),this.Allgroup=new N.ZAu,this.camera.position.set(.3,3,5),this.camera.lookAt(0,0,0),this.camera.updateProjectionMatrix(),this.scene.add(this.Allgroup),this.init(),this.renderer.setClearColor(1751256,1),this.renderer.alpha=!1}init(){new _n.z(this.camera,this.renderer.domElement).maxPolarAngle=.5*Math.PI,this.scene.add(new N.Mig(10066329));const t=new N.Ox3(16777215,.8);this.scene.add(t),t.position.set(1,1,1),this.addSphere(),this.loadgltf(),this.loadgltf2()}addSphere(){const n=new N.DvJ(2,2,1,64,64);n.rotateX(-.5*Math.PI);const t=new N.jyz({vertexShader:"\n\t//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise3(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\n\n#define PI 3.1415926535897932384626433832795\n\nfloat TAU = PI * 2.0;\n\nuniform float u_time;\nuniform float u_big_waves_elevation;\nuniform vec2 u_big_waves_frequency;\nuniform float u_big_waves_speed;\n\nvarying float v_elevation;\nvarying vec3 v_pos;\n\nconst float noise_iterations = 10.0;\n\nvoid main() {\n\n  vec4 model_position = modelMatrix * vec4(position, 1.0);\n\n  // -1 >> 1\n  float elevation_sin = \n    sin(model_position.x * u_big_waves_frequency.x + u_time * u_big_waves_speed) * \n    sin(model_position.z * u_big_waves_frequency.y + u_time * 0.8 * u_big_waves_speed);\n\n  float elevation_small_sin = \n    sin(model_position.x * u_big_waves_frequency.x * 3.0 + u_time * u_big_waves_speed) * \n    sin(model_position.z * u_big_waves_frequency.y * 3.0 + u_time * 0.8 * u_big_waves_speed);\n  // 0 >> 1\n  float elevation_normal = elevation_sin * 0.5 + 0.5;\n  // custom range set from uniform\n  float elevation = elevation_sin * u_big_waves_elevation + elevation_small_sin * (1.0 - elevation_normal) * u_big_waves_elevation * 0.4;\n\n  float noise_elevation = 0.035;\n  float noise_speed = u_time * 0.05 + elevation_normal * 0.05;\n  float noise_resolution = 2.0 + elevation_normal;\n  float x_offset = sin(elevation_normal) * .15 * cos(model_position.x * PI);\n\n  float noisy_waves_elevation = 0.0;\n  \n  for (float i = 1.0; i < noise_iterations; i += 2.0) {\n    vec3 noise_vector = vec3(\n      model_position.x * noise_resolution * i + abs(elevation_normal) * 0.75,\n      model_position.z * noise_resolution* i,\n      u_time * .1 + noise_speed * pow(i, 1.75) + elevation_sin * .5\n    );\n    float noise = snoise3(noise_vector);\n    noise = (noise * noise_elevation) / i;\n    x_offset += sin(noise * PI) / i * .4 * cos(model_position.x * PI);\n    noise = -abs(noise) * (0.2 + elevation_normal);\n    noisy_waves_elevation += noise;\n  }\n\n  elevation += noisy_waves_elevation;\n  model_position.x -= x_offset;\n  model_position.y += elevation;\n  model_position.y -= sin(x_offset * 1.5) * .05;\n\n  vec4 view_position = viewMatrix * model_position;\n  vec4 projected_position = projectionMatrix * view_position;\n\n  gl_Position = projected_position;\n\n  v_elevation = elevation;\n  v_pos = vec3(model_position.xyz);\n}\n",fragmentShader:"\n\nuniform float u_time;\n\nuniform vec3 u_low_color;\nuniform vec3 u_high_color;\nuniform float u_color_offset;\nuniform float u_color_multiplier;\n\nvarying float v_elevation;\nvarying vec3 v_pos;\n\nvoid main() {\n\n  float mix_strength = v_elevation * u_color_multiplier + u_color_offset;\n\n  vec3 color = mix(u_low_color, u_high_color, mix_strength*(v_pos.y + 0.5));\n\n  gl_FragColor = vec4(color, v_pos.y + 0.5);\n}\n",uniforms:{u_time:{value:0},u_big_waves_elevation:{value:.07},u_big_waves_frequency:{value:new N.FM8(8,2.5)},u_big_waves_speed:{value:.75},u_low_color:{value:new N.Ilk("#001B38")},u_high_color:{value:new N.Ilk("#0F7799")},u_color_offset:{value:1.45},u_color_multiplier:{value:20}},transparent:!0}),e=new N.Kj0(n,t);this.scene.add(e),setInterval(()=>{e.material.uniforms.u_time.value+=.1},100)}loadgltf(){(new Oi).load("./assets/models/fengji_shang.gltf",t=>{const e=t.scene;var r=(new N.ZzF).setFromObject(e),a=new N.fQA(e);t.scene.position.set(-a.geometry.boundingSphere.center.x,(r.max.y-r.min.y)/2-a.geometry.boundingSphere.center.y,-a.geometry.boundingSphere.center.z);const f=new N.ZAu;f.add(t.scene),f.scale.set(.06,.06,.06),f.position.set(0,.35,0),this.scene.add(f)})}loadgltf2(){(new Oi).load("./assets/models/ship/scene.gltf",t=>{const e=t.scene;var r=(new N.ZzF).setFromObject(e),a=new N.fQA(e);t.scene.position.set(1100-a.geometry.boundingSphere.center.x,(r.max.y-r.min.y)/2-a.geometry.boundingSphere.center.y,500-a.geometry.boundingSphere.center.z);const f=new N.ZAu;f.add(t.scene),f.scale.set(6e-4,6e-4,6e-4),f.position.set(0,.42,0),this.scene.add(f);let h=0;setInterval(()=>{h+=.01,f.rotation.y=-h},40)})}}const Qd=["container"];let qd=(()=>{class i{constructor(){}ngOnInit(){}ngAfterViewInit(){new Kd(this.container1.nativeElement,{})}onResize(t){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-plane"]],viewQuery:function(t,e){if(1&t&&o.Gf(Qd,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container1=r.first)}},decls:2,vars:0,consts:[[1,"main"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},styles:[".main[_ngcontent-%COMP%]{width:100%;height:100%}"]}),i})();const gs="\n  attribute vec3 position;\n  attribute vec3 normal;\n  attribute vec2 uv;\n\n  uniform mat4 modelViewMatrix;\n  uniform mat4 projectionMatrix;\n  \n  uniform mat3 uvTransform;\n  varying vec2 vUv;\n  void main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    // gl_Position = vec4(position, 1.0);\n    vUv = vec2(position.x, position.y);\n  }\n  ".trim();class eu extends si{constructor(n,t){super(n,t),this.Allgroup=new N.ZAu,this.camera.position.set(0,0,3),this.camera.lookAt(0,0,0),this.camera.updateProjectionMatrix(),this.scene.add(this.Allgroup),this.init()}init(){this.scene.add(new N.Mig(10066329));const n=new N.Ox3(16777215,.8);this.scene.add(n),n.position.set(1,1,1),this.addRing(),this.addRing2()}addRing(){const n=new N._12(4,4,1),t=new N.FIo({vertexShader:gs,fragmentShader:"\n  precision mediump float;\n\n  #define PI 3.14159265\n\n  uniform float uTime;\n  const vec3 color1 = vec3(0.611765, 0.262745, 0.996078);\n  const vec3 color2 = vec3(0.298039, 0.760784, 0.913725);\n  const vec3 color3 = vec3(0.062745, 0.078431, 0.600000);\n  const float innerRadius = 0.5;\n  const float noiseScale = 0.5;\n\n  varying vec2 vUv;\n\n  vec3 hash33(vec3 p3){\n\t  p3 = fract(p3 * vec3(.1031,.11369,.13787));\n    p3 += dot(p3, p3.yxz+19.19);\n    return -1.0 + 2.0 * fract(vec3(p3.x+p3.y, p3.x+p3.z, p3.y+p3.z)*p3.zyx);\n  }\n\n  float snoise3(vec3 p)\n  {\n    const float K1 = 0.333333333;\n    const float K2 = 0.166666667;\n    \n    vec3 i = floor(p + (p.x + p.y + p.z) * K1);\n    vec3 d0 = p - (i - (i.x + i.y + i.z) * K2);\n    \n    vec3 e = step(vec3(0.0), d0 - d0.yzx);\n\t  vec3 i1 = e * (1.0 - e.zxy);\n\t  vec3 i2 = 1.0 - e.zxy * (1.0 - e);\n    \n    vec3 d1 = d0 - (i1 - K2);\n    vec3 d2 = d0 - (i2 - K1);\n    vec3 d3 = d0 - 0.5;\n    \n    vec4 h = max(0.6 - vec4(dot(d0, d0), dot(d1, d1), dot(d2, d2), dot(d3, d3)), 0.0);\n    vec4 n = h * h * h * h * vec4(dot(d0, hash33(i)), dot(d1, hash33(i + i1)), dot(d2, hash33(i + i2)), dot(d3, hash33(i + 1.0)));\n    \n    return dot(vec4(31.316), n);\n  }\n\n  vec4 extractAlpha(vec3 colorIn)\n  {\n    vec4 colorOut;\n    float maxValue = min(max(max(colorIn.r, colorIn.g), colorIn.b), 1.0);\n    if (maxValue > 1e-5)\n    {\n        colorOut.rgb = colorIn.rgb * (1.0 / maxValue);\n        colorOut.a = maxValue;\n    }\n    else\n    {\n        colorOut = vec4(0.0);\n    }\n    return colorOut;\n  } \n\n  float light1(float intensity, float attenuation, float dist)\n  {\n    return intensity / (1.0 + dist * attenuation);\n  }\n\n  float light2(float intensity, float attenuation, float dist)\n  {\n    return intensity / (1.0 + dist * dist * attenuation);\n  }\n\n  void draw( out vec4 _FragColor, in vec2 vUv )\n  {\n    vec2 uv = vUv;\n    float ang = atan(uv.y, uv.x);\n    float len = length(uv);\n    float v0, v1, v2, v3, cl;\n    float r0, d0, n0;\n    float r, d;\n    \n    // ring\n    n0 = snoise3( vec3(uv * noiseScale, uTime * 0.5) ) * 0.5 + 0.5;\n    r0 = mix(mix(innerRadius, 1.0, 0.4), mix(innerRadius, 1.0, 0.6), n0);\n    d0 = distance(uv, r0 / len * uv);\n    v0 = light1(1.0, 10.0, d0);\n    v0 *= smoothstep(r0 * 1.05, r0, len);\n    cl = cos(ang + uTime * 2.0) * 0.5 + 0.5;\n    \n    // high light\n    float a = uTime * -1.0;\n    vec2 pos = vec2(cos(a), sin(a)) * r0;\n    d = distance(uv, pos);\n    v1 = light2(1.5, 5.0, d);\n    v1 *= light1(1.0, 50.0 , d0);\n    \n    // back decay\n    v2 = smoothstep(1.0, mix(innerRadius, 1.0, n0 * 0.5), len);\n    \n    // hole\n    v3 = smoothstep(innerRadius, mix(innerRadius, 1.0, 0.5), len);\n    \n    // color\n    vec3 c = mix(color1, color2, cl);\n    vec3 col = mix(color1, color2, cl);\n    col = mix(color3, col, v0);\n    col = (col + v1) * v2 * v3;\n    col.rgb = clamp(col.rgb, 0.0, 1.0);\n    \n    //gl_FragColor = extractAlpha(col);\n    _FragColor = extractAlpha(col);\n  }\n\n  void main() {\n    vec4 col;\n    draw(col, vUv);\n\n    vec3 bg = vec3(0.0);\n\n    // float r = step(length(vUv),1.0) - step(length(vUv),0.95);\n    // gl_FragColor = vec4(mix(bg, col.rgb, col.a)+vec3(r),1.0);\n    gl_FragColor = vec4(mix(bg, col.rgb, col.a),col.a);\n  }\n  ",transparent:!0,uniforms:{uTime:{value:0}},depthTest:!0}),e=new N.Kj0(n,t);this.scene.add(e),setInterval(()=>{e.material.uniforms.uTime.value+=.1},100)}addRing2(){const n=new N._12(4,4,1),t=new N.FIo({vertexShader:gs,fragmentShader:"\nprecision mediump float;\nconst float falloffPower = 0.3;\nfloat halfWidth = pow(0.3, falloffPower);\nconst float radius = 0.8;\nconst vec2 noiseSampleDirection = vec2(1.0, 0.319);\nconst vec3 color1 = vec3(0.611765, 0.262745, 0.996078);\nconst vec3 color2 = vec3(0.298039, 0.760784, 0.913725);\nconst vec3 color3 = vec3(0.062745, 0.078431, 0.600000);\n#define RING_COUNT 1\nvarying vec2 vUv;\nuniform float uTime;\nfloat waves(vec2 coord, vec2 coordMul1, vec2 coordMul2, vec2 phases, vec2 timeMuls) {\n    return 1.5 * (sin(dot(coord, coordMul1) + timeMuls.x * uTime + phases.x) + cos(dot(coord, coordMul2) + timeMuls.y * uTime + phases.y));\n}\n\nfloat ringMultiplier(vec2 coord, float distortAmount, float phase, float baseXOffset) {\n    vec2 sampleLocation1 = noiseSampleDirection * phase;\n    vec2 sampleLocation2 = vec2(1.0, 0.8) - noiseSampleDirection * phase;\n    // vec3 noise1 = texture(vec3(1.0)), sampleLocation1).rgb;\n    // vec3 noise2 = texture(vec3(1.0)), sampleLocation2).rgb;\n    vec3 noise1 = vec3(sin(uTime * 2.1 + sampleLocation1.x) * 0.5 + 0.5, sin(uTime * 0.1 + sampleLocation1.y) * 0.5 + 0.5, 0.0);\n    vec3 noise2 = vec3(sin(uTime * 0.1 + sampleLocation2.x) * 0.5 + 0.5, sin(uTime * 0.1 + sampleLocation2.y) * 0.3 + 10.5, 0.0);\n    \n    float distortX = baseXOffset + 0.6 * waves(coord, vec2(1.9 + 0.4 * noise1.r, 1.9 + 0.4 * noise1.g) * 3.3, vec2(5.7 + 1.4 * noise1.b, 5.7 + 1.4 * noise2.r) * 2.8, vec2(noise1.r - noise2.r, noise1.g + noise2.b) * 5.0, vec2(1.1));\n    float distortY = 0.5 + 0.7 * waves(coord, vec2(-1.7 - 0.9 * noise2.g, 1.7 + 0.9 * noise2.b) * 3.1, vec2(5.9 + 0.8 * noise1.g, -5.9 - 0.8 * noise1.b) * 3.7, vec2(noise1.g + noise2.g, noise1.b - noise2.r) * 5.0, vec2(-0.9));\n    float amount = 0.2 + 0.3 * (abs(distortX) + abs(distortY));\n    vec2 distortedCoord = coord + normalize(vec2(distortX, distortY)) * amount * distortAmount * 0.2;\n    return smoothstep(-halfWidth,halfWidth, pow(abs(length(distortedCoord) - radius), falloffPower));\n    // float op = pow(abs(length(distortedCoord) - radius), falloffPower);\n    // return 1.0-op;\n}\n\n\nvoid main( )\n{\n\t// vec2 uv = vec2(0.5) - fragCoord.xy / iResolution.xy;\n  //   uv.x *= iResolution.x / iResolution.y;\n    vec3 accumulatedColor = vec3(1.0);\n    float opacity = 1.0;\n    float baseXOffset = 0.5 * (0.6 * cos(uTime * 0.3 + 1.1) + 0.4 * cos(uTime * 1.2));\n    for (int i = 0; i < RING_COUNT; i++) {\n        float ringsFraction = float(i) / float(RING_COUNT);\n        float amount = ringMultiplier(vUv, 0.1 + pow(ringsFraction, 3.0) * 0.7, pow(1.0 - ringsFraction,0.3) * 0.09 + uTime * 0.0001, baseXOffset);\n        accumulatedColor *= mix(mix(color1, color3, pow(ringsFraction, 3.0)), vec3(1.0), pow(amount, 2.0));\n    }\n    opacity = ringMultiplier(vUv, 0.1 + pow(0.0, 3.0) * 0.7, pow(1.0 - 0.0,0.3) * 0.09 + uTime * 0.0001, baseXOffset);\n    gl_FragColor = vec4(accumulatedColor, pow(1.0-opacity,1.0));\n}\n",transparent:!0,uniforms:{uTime:{value:0}},depthTest:!0}),e=new N.Kj0(n,t);this.scene.add(e),e.position.z=.01,setInterval(()=>{e.material.uniforms.uTime.value+=.1},100)}}const nu=["container"];let iu=(()=>{class i{constructor(){}ngOnInit(){}ngAfterViewInit(){new eu(this.container1.nativeElement,{})}onResize(t){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-ring"]],viewQuery:function(t,e){if(1&t&&o.Gf(nu,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container1=r.first)}},decls:2,vars:0,consts:[[1,"main"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},styles:[".main[_ngcontent-%COMP%]{width:100%;height:100%}"]}),i})();var oo=function(i){N.yxD.call(this,i),this.type=N.ywz};oo.prototype=Object.assign(Object.create(N.yxD.prototype),{constructor:oo,parse:function(i){var s=function(X,ct){switch(X){case 1:console.error("THREE.RGBELoader Read Error: "+(ct||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(ct||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(ct||""));break;default:console.error("THREE.RGBELoader: Error: "+(ct||""))}return-1},h=function(X,ct,yt){ct=ct||1024;for(var xt=X.pos,Pt=-1,Ot=0,Gt="",At=String.fromCharCode.apply(null,new Uint16Array(X.subarray(xt,xt+128)));0>(Pt=At.indexOf("\n"))&&Ot<ct&&xt<X.byteLength;)Gt+=At,Ot+=At.length,xt+=128,At+=String.fromCharCode.apply(null,new Uint16Array(X.subarray(xt,xt+128)));return-1<Pt&&(!1!==yt&&(X.pos+=Ot+Pt+1),Gt+At.slice(0,Pt))},T=function(X,ct,yt,xt){var Ot=Math.pow(2,X[ct+3]-128)/255;yt[xt+0]=N.A5E.toHalfFloat(X[ct+0]*Ot),yt[xt+1]=N.A5E.toHalfFloat(X[ct+1]*Ot),yt[xt+2]=N.A5E.toHalfFloat(X[ct+2]*Ot)},k=new Uint8Array(i);k.pos=0;var X,ct,yt,xt,Ot,E=function(X){var ct,yt,Pt=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Ot=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,Gt=/^\s*FORMAT=(\S+)\s*$/,Tt=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,At={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(X.pos>=X.byteLength||!(ct=h(X)))return s(1,"no header found");if(!(yt=ct.match(/^#\?(\S+)/)))return s(3,"bad initial token");for(At.valid|=1,At.programtype=yt[1],At.string+=ct+"\n";!1!==(ct=h(X));)if(At.string+=ct+"\n","#"!==ct.charAt(0)){if((yt=ct.match(Pt))&&(At.gamma=parseFloat(yt[1],10)),(yt=ct.match(Ot))&&(At.exposure=parseFloat(yt[1],10)),(yt=ct.match(Gt))&&(At.valid|=2,At.format=yt[1]),(yt=ct.match(Tt))&&(At.valid|=4,At.height=parseInt(yt[1],10),At.width=parseInt(yt[2],10)),2&At.valid&&4&At.valid)break}else At.comments+=ct+"\n";return 2&At.valid?4&At.valid?At:s(3,"missing image size specifier"):s(3,"missing format specifier")}(k);if(-1!==E){var P=E.width,R=E.height,B=function(X,ct,yt){var xt,Pt,Ot,Gt,Tt,At,Nt,Rt,Yt,Vt,Ut,G,W,F=ct,Y=yt;if(F<8||F>32767||2!==X[0]||2!==X[1]||128&X[2])return new Uint8Array(X);if(F!==(X[2]<<8|X[3]))return s(3,"wrong scanline width");if(!(xt=new Uint8Array(4*ct*yt)).length)return s(4,"unable to allocate buffer space");for(Pt=0,Ot=0,Rt=4*F,W=new Uint8Array(4),At=new Uint8Array(Rt);Y>0&&Ot<X.byteLength;){if(Ot+4>X.byteLength)return s(1);if(W[0]=X[Ot++],W[1]=X[Ot++],W[2]=X[Ot++],W[3]=X[Ot++],2!=W[0]||2!=W[1]||(W[2]<<8|W[3])!=F)return s(3,"bad rgbe scanline format");for(Nt=0;Nt<Rt&&Ot<X.byteLength;){if((G=(Gt=X[Ot++])>128)&&(Gt-=128),0===Gt||Nt+Gt>Rt)return s(3,"bad scanline data");if(G)for(Tt=X[Ot++],Yt=0;Yt<Gt;Yt++)At[Nt++]=Tt;else At.set(X.subarray(Ot,Ot+Gt),Nt),Nt+=Gt,Ot+=Gt}for(Vt=F,Yt=0;Yt<Vt;Yt++)xt[Pt]=At[Yt+(Ut=0)],xt[Pt+1]=At[Yt+(Ut+=F)],xt[Pt+2]=At[Yt+(Ut+=F)],xt[Pt+3]=At[Yt+(Ut+=F)],Pt+=4;Y--}return xt}(k.subarray(k.pos),P,R);if(-1!==B){switch(this.type){case N.ywz:var V=B,L=N.aoB,Z=N.ywz;break;case N.VzW:for(var q=B.length/4*3,tt=new Float32Array(q),$=0;$<q;$++)X=B,ct=4*$,yt=tt,xt=3*$,void 0,Ot=Math.pow(2,X[ct+3]-128)/255,yt[xt+0]=X[ct+0]*Ot,yt[xt+1]=X[ct+1]*Ot,yt[xt+2]=X[ct+2]*Ot;V=tt,L=N.UCm,Z=N.VzW;break;case N.cLu:q=B.length/4*3;var ft=new Uint16Array(q);for($=0;$<q;$++)T(B,4*$,ft,3*$);V=ft,L=N.UCm,Z=N.cLu;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:P,height:R,data:V,header:E.string,gamma:E.gamma,exposure:E.exposure,format:L,type:Z}}}return null},setDataType:function(i){return this.type=i,this},load:function(i,n,t,e){return N.yxD.prototype.load.call(this,i,function(a,s){switch(a.type){case N.ywz:a.encoding=N.KC9,a.minFilter=N.TyD,a.magFilter=N.TyD,a.generateMipmaps=!1,a.flipY=!0;break;case N.VzW:case N.cLu:a.encoding=N.rnI,a.minFilter=N.wem,a.magFilter=N.wem,a.generateMipmaps=!1,a.flipY=!0}n&&n(a,s)},t,e)}});var ru=p(16813),ou=p(81322),au=p(54249),su=p(60764),lu=p(85638);class cu extends si{constructor(n,t){super(n,t),this.Allgroup=new N.ZAu,this.camera.position.set(-5,12,22),this.camera.lookAt(0,0,0),this.camera.updateProjectionMatrix(),this.scene.add(this.Allgroup),this.init();const e=new ou.C(this.scene,this.camera),r=new au.m(new N.FM8(this.domdiv.offsetWidth,this.domdiv.offsetHeight),1.5,.4,.85);r.threshold=0,r.strength=1,r.radius=0,this.composer=new ru.x(this.renderer),this.composer.addPass(e),this.composer.addPass(r);const a=new lu.T(su.C);a.renderToScreen=!0,this.composer.addPass(a)}renderOthers(){this.composer&&this.composer.render()}init(){new _n.z(this.camera,this.renderer.domElement).maxPolarAngle=.5*Math.PI,this.renderer.toneMapping=N.LY2,this.renderer.toneMappingExposure=1,this.renderer.outputEncoding=N.knz,this.loadgltf()}loadgltf(){(new Oi).load("./assets/models/car/scene.glb",t=>{(new oo).load("./assets/hdrimg/royal_esplanade.hdr",v=>{v.mapping=N.dSO,this.scene.environment=v});const e=t.scene;var r=(new N.ZzF).setFromObject(e),a=new N.fQA(e);t.scene.position.set(-a.geometry.boundingSphere.center.x,(r.max.y-r.min.y)/2-a.geometry.boundingSphere.center.y,-a.geometry.boundingSphere.center.z);const f=new N.ZAu;f.add(t.scene),t.scene.traverse(v=>{}),this.scene.add(f),setInterval(()=>{f.rotation.y+=.005,f.position.y=1*Math.sin(30*f.rotation.y)},100);let h=this.addsprite(0,0,10);f.add(h[1]),this.runtime(h[0],10)})}addsprite(n,t,e){let r=new N.u9r,a=[],s=[],l=[],d=(new N.dpR).load("./assets/img/particle2.png"),f=0;for(let T=0;T<5e3;T++){f=Math.random()*Math.PI*2;let k=Math.random()*(T/5e3)*(T/2500),E=Math.sin(f)*k,P=Math.cos(f)*k;a.push(E,0,P);let B=Math.random()*Math.PI*2,V=.2*Math.random()+.01,L=Math.sin(B)*V,Z=.01,tt=(Math.cos(B),9+5*Math.random());s.push(0,L+Z,0),l.push(tt,2*Math.random(),0)}r.setAttribute("position",new N.a$l(a,3)),r.setAttribute("vxyz",new N.a$l(s,3)),r.setAttribute("vspeed",new N.a$l(l,3)),Math.abs(n*t);let v=[];for(let T=0;T<5e3;T++)v.push(1,1,e/260);r.setAttribute("color",new N.a$l(v,3));let m=new N.UY4({size:.2,vertexColors:!0,map:d,blending:N.WMw,depthTest:!1,transparent:!0,opacity:.8}),S=new N.woe(r,m);return S.rotateX(Math.PI),S.position.set(n,10,t),[r,S]}runtime(n,t){const e=n.attributes.position.array,r=n.attributes.vxyz.array,a=n.attributes.vspeed.array,s=n.attributes.color.array;let l=10,c=0,d=0,f=0,h=0,v=0;setInterval(()=>{l+=100,l>=e.length&&(l=e.length);for(let m=0;m<l;m+=3)c=a[m+1]+=.1,e[m]=e[m]>=0?e[m]-Math.abs(r[m]*c):e[m]+Math.abs(r[m]*c),e[m+1]=r[m+1]*c+.5*c*c*a[m],e[m+2]=e[m+2]>=0?e[m+2]-Math.abs(r[m+2]*c):e[m+2]+Math.abs(r[m+2]*c),e[m+1]>10&&(d=Math.random()*Math.PI*2,f=Math.random()*(m/7500)*(m/7500),h=Math.sin(d)*f,v=Math.cos(d)*f,e[m]=h,e[m+1]=0,e[m+2]=v,a[m]=9+9*Math.random(),a[m+1]=0);n.attributes.position.needsUpdate=!0;for(let m=0;m<l;m+=3)s[m+1]=1-(e[m+1]+.5)/10;n.attributes.color.needsUpdate=!0},10)}}const pu=["container"];let du=(()=>{class i{constructor(){}ngOnInit(){}ngAfterViewInit(){new cu(this.container1.nativeElement,{})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-plane"]],viewQuery:function(t,e){if(1&t&&o.Gf(pu,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container1=r.first)}},decls:2,vars:0,consts:[[1,"main"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},styles:[".main[_ngcontent-%COMP%]{width:100%;height:100%}"]}),i})();const hu=class extends Ne.H{constructor(n,t){super(),this.divWidth=300,this.divHeight=300,this.sk=80,this.uniforms=[],this.defOption={viewAngle:9,defcolor:"#0b2c87",lightcolor:"#ffffff",speed:.2,series:[{rtop:7,rbot:7,dh:2,tag:!0},{rtop:10,rbot:10,dh:1.5,tag:!0}],camera:{x:0,y:30,z:80,target:5}},this.render=()=>{this.request=requestAnimationFrame(this.render),this.renderer.render(this.scene,this.camera),this.nowOption.speed>0&&this.uniforms.forEach((e,r)=>{e.boxH.value+=.2,e.boxH.value>30&&(e.boxH.value=-30)})},this.domdiv=n,this.divWidth=n.offsetWidth,this.divHeight=n.offsetHeight,this.setOption(this.defOption,t),this.scene=new N.xsS,this.sk=this.divWidth<=this.divHeight?this.divWidth/this.nowOption.viewAngle:this.divHeight/this.nowOption.viewAngle,this.camera=new N.iKG(-this.divWidth/this.sk,this.divWidth/this.sk,this.divHeight/this.sk,-this.divHeight/this.sk,-2001,2e3),this.camera.position.set(this.nowOption.camera.x,this.nowOption.camera.y,this.nowOption.camera.z),this.camera.lookAt(0,this.nowOption.camera.target,0),this.renderer=new N.CP7({alpha:!0,antialias:!0,preserveDrawingBuffer:"true"===localStorage.getItem("drawingBuffer")}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(0,0),this.renderer.setSize(this.divWidth,this.divHeight),this.pgroup=new N.ZAu,this.scene.add(this.pgroup),this.init(),this.nowOption.series.forEach((e,r)=>{this.drawrunCylinder(e.rtop,e.rbot,e.dh,e.tag,r)})}init(){this.domdiv.appendChild(this.renderer.domElement),this.render(),this.control=new _n.z(this.camera,this.renderer.domElement),this.control.target.set(0,this.nowOption.camera.target,0),this.control.update()}emptyGroup(n){const t=n.children.length;for(let e=0;e<t;e++){const r=n.children[0];r.traverse(a=>{a.isMesh&&(a.material.dispose(),a.geometry.dispose()),r.remove(a)}),r.isMesh&&(r.material.dispose(),r.geometry.dispose()),n.remove(r)}}drawrunCylinder(n,t,e,r,a){const l={u_color:{value:new N.Ilk(this.nowOption.lightcolor.substr(0,7))},u_color2:{value:new N.Ilk(this.nowOption.defcolor.substr(0,7))},boxH:{value:-20},tag:{value:r},opacity:{value:1}},d=new N.jyz({uniforms:l,vertexShader:"\n                varying vec2 vUv;\n                varying float v_pz;\n                void main(){\n                    vUv = uv;\n                    v_pz = (modelMatrix * vec4(position, 1.0)).y;\n                    gl_Position\t= projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n                }\n                ",fragmentShader:"\n                uniform float  boxH;\n                uniform bool  tag;\n                uniform float  opacity;\n                varying vec2 vUv;\n                varying float v_pz;\n                uniform vec3 u_color;\n                uniform vec3 u_color2;\n                float plot (vec2 st, float pct){\n                    return  smoothstep( pct-2.0, pct, v_pz) - smoothstep( pct, pct+0.25, v_pz);\n                    }\n                void main(){\n                    float f1 = plot(vUv,boxH);\n                    if(tag){\n                        vec4 b1 = mix(vec4(u_color,1.0-vUv.y),vec4(u_color2,f1*(1.0-vUv.y)),0.2);\n                        gl_FragColor = mix(vec4(u_color2.x,u_color2.y,u_color2.z,1.0-vUv.y),b1,f1);\n                    }else{\n                        vec4 b1 = mix(vec4(u_color,vUv.y*opacity),vec4(u_color2,opacity*f1*vUv.y),0.2);\n                        gl_FragColor = mix(vec4(u_color2,vUv.y*opacity),b1,f1);\n                    }\n            }",side:N.ehD,transparent:!0,depthWrite:!0,depthTest:!1}),f=new N.m_w(n,t,e,64,1,!0),h=new N.Kj0(f,d);h.position.set(0,e/2,0),h.renderOrder=a,this.pgroup.add(h),this.uniforms.push(l)}updateData(n){}dispose(){cancelAnimationFrame(this.request)}resize(){this.divHeight=this.domdiv.offsetHeight,this.divWidth=this.domdiv.offsetWidth,this.sk=this.divWidth<=this.divHeight?this.divWidth/this.nowOption.viewAngle:this.divHeight/this.nowOption.viewAngle,this.camera.aspect=this.divWidth/this.divHeight,this.camera.left=this.divWidth/-this.sk,this.camera.right=this.divWidth/this.sk,this.camera.top=this.divHeight/this.sk,this.camera.bottom=this.divHeight/-this.sk,this.camera.updateProjectionMatrix(),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.divWidth,this.divHeight)}updateOptions(n){this.setOption(this.defOption,n),this.camera.position.set(this.nowOption.camera.x,this.nowOption.camera.y,this.nowOption.camera.z),this.camera.lookAt(0,this.nowOption.camera.target,0),this.control.target.set(0,this.nowOption.camera.target,0),this.control.update(),this.resize(),this.emptyGroup(this.pgroup),this.nowOption.series.forEach((t,e)=>{this.drawrunCylinder(t.rtop,t.rbot,t.dh,t.tag,e)})}},fu=["container"];let vu=(()=>{class i{constructor(){this.config={},this.widgetPos={},this.defaultOpt={},this.options={defcolor:"#0b2c87",lightcolor:"#ffffff",speed:.2,viewAngle:9,series:[{rtop:7,rbot:7,dh:2,tag:!0},{rtop:10,rbot:10,dh:1.5,tag:!0}],camera:{x:0,y:30,z:80,target:5}},this.optionsData={viewAngle:{name:"\u89c6\u89d2",type:"number"},defcolor:{name:"\u9ed8\u8ba4\u989c\u8272",type:"fill"},camera:{name:"\u76f8\u673a\u4f4d\u7f6e",type:"group",children:{x:{name:"x",type:"number"},y:{name:"y",type:"number"},z:{name:"z",type:"number"},target:{name:"target",type:"number"}}}}}ngOnInit(){}ngAfterViewInit(){this.scene=new hu(this.container.nativeElement,this.config)}onchangeOption(t){this.scene&&this.scene.updateOptions(t)}ngOnChanges(t){var e;null===(e=this.scene)||void 0===e||e.resize()}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){this.scene&&this.scene.dispose()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-ring2"]],viewQuery:function(t,e){if(1&t&&o.Gf(fu,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{config:"config",widgetPos:"widgetPos"},features:[o.TTD],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var ao=p(91088);const gu=["container"];let mu=(()=>{class i{constructor(){this.options=ao.xc,this.optionsData={},this.mockjs=ao.yk,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new ao.Z7(this.container.nativeElement,this.options),this.scene.updateData(JSON.parse(JSON.stringify(this.comData)))},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-circle-point-bar"]],viewQuery:function(t,e){if(1&t&&o.Gf(gu,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var so=p(12348);const xu=["container"];let yu=(()=>{class i{constructor(){this.options=so.exoptions,this.optionsData={},this.mockjs=so.mockjs,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new so.BufferGeometry(this.container.nativeElement,this.options),this.scene.updateData(JSON.parse(JSON.stringify(this.comData)))},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-three-geometry"]],viewQuery:function(t,e){if(1&t&&o.Gf(xu,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var lo=p(20769);const wu=["container"];let bu=(()=>{class i{constructor(){this.options=lo.xc,this.optionsData={},this.mockjs=lo.yk,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new lo.QR(this.container.nativeElement,this.options),this.scene.updateData(JSON.parse(JSON.stringify(this.comData)))},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-three3d-tree"]],viewQuery:function(t,e){if(1&t&&o.Gf(wu,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var _u=p(67106);const Cu=["container"];let Su=(()=>{class i{constructor(){this.options={},this.optionsData={},this.mockjs=()=>({value:100*Math.random()|0}),this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new _u.Z(this.container.nativeElement,this.options)},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-art1"]],viewQuery:function(t,e){if(1&t&&o.Gf(Cu,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var Du=p(86323);const Ou=["container"];let Tu=(()=>{class i{constructor(){this.options={},this.optionsData={},this.mockjs=()=>({value:100*Math.random()|0}),this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new Du.Y(this.container.nativeElement,this.options)},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-art2"]],viewQuery:function(t,e){if(1&t&&o.Gf(Ou,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var Au=p(60719);const Eu=["container"];let Mu=(()=>{class i{constructor(){this.options={},this.optionsData={},this.mockjs=()=>({value:100*Math.random()|0}),this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new Au.l(this.container.nativeElement,this.options)},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-art3"]],viewQuery:function(t,e){if(1&t&&o.Gf(Eu,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var cr=p(37574),Pu=p(58515);class ku extends Pu.L{constructor(n,t){super(n,t),this.p5draw(n)}p5draw(n){this.scene=new cr(e=>{let r=0,a=0,s=0,l=!1,c=0,d=!1,f=255;const h=20;let v=()=>e.color(e.random(0,255),e.random(0,255),e.random(0,255));const m=[v(),v(),v(),v(),v(),v(),v()];e.setup=()=>{e.createCanvas(n.offsetWidth,n.offsetHeight),e.frameRate(60),e.noStroke(),e.background(28),r=e.width/24,a=e.height-60,s=r},e.draw=()=>{if(l=e.random()>.75&&0==l,e.random()<.2&&l?f=e.color(e.random(m)):l&&(f=255),e.fill(d?"#FFC93C":f),s==r?e.rect(r+c*h-h*(d?1:0),a,h,h,30):l?s+=10:e.rect(s-h+c*h-h*(d?1:0),a,40,h,30),s+=h,e.random()<.15&&s>=100+c*h||s>=e.width-60){d&&(d=!1),e.translate(0,-80/3);const S=e.get(0,0,e.width,e.height);e.image(S,0,0,e.width,e.height),s=r,e.random()<.3?(d=!0,c++,s=r):(e.random()<.4||c>=6)&&c>0&&c--}},e.resize=()=>{}},n)}}const Iu=["container"];let Ru=(()=>{class i{constructor(){this.options={},this.optionsData={},this.mockjs=()=>({value:100*Math.random()|0}),this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new ku(this.container.nativeElement,this.options)},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-art4"]],viewQuery:function(t,e){if(1&t&&o.Gf(Iu,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var zu=p(50363);const Gu=["container"];let Nu=(()=>{class i{constructor(){this.options={},this.optionsData={},this.mockjs=()=>({value:100*Math.random()|0}),this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new zu.E(this.container.nativeElement,this.options)},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-art5"]],viewQuery:function(t,e){if(1&t&&o.Gf(Gu,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();const Bu=["container"];let Fu=(()=>{class i{constructor(){this.options={},this.optionsData={},this.mockjs=()=>({value:100*Math.random()|0}),this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new en.u(this.container.nativeElement,this.options)},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-art6"]],viewQuery:function(t,e){if(1&t&&o.Gf(Bu,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var Lu=p(18197);const Hu=["container"];let Zu=(()=>{class i{constructor(){this.options={},this.optionsData={},this.mockjs=()=>({value:100*Math.random()|0}),this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new Lu.$(this.container.nativeElement,this.options)},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-art7"]],viewQuery:function(t,e){if(1&t&&o.Gf(Hu,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();const Wu=["container"];let Vu=(()=>{class i{constructor(){}ngOnInit(){}ngAfterViewInit(){let t=this.container.nativeElement;setTimeout(()=>{this.p5draw(t)},100)}p5draw(t){this.scene=new cr(r=>{let a=0,s=0,c=r.createVector(r.random(2,5),r.random(2,5));r.setup=()=>{r.frameRate(30),r.createCanvas(t.offsetWidth,t.offsetHeight),a=r.random(8,r.width-8),s=r.random(8,r.height-8)},r.draw=()=>{r.fill(a/2,s/2,255),a+=c.x,s+=c.y,(a>r.width-8||a<8)&&(c.x*=-1),(s>r.height-8||s<8)&&(c.y*=-1),r.ellipse(a,s,16,16)},r.resize=()=>{r.resizeCanvas(t.offsetWidth,t.offsetHeight),a=r.random(8,r.width-8),s=r.random(8,r.height-8)}},t)}ngOnDestroy(){this.scene&&this.scene.remove()}ngOnChanges(t){var e;null===(e=this.scene)||void 0===e||e.resize()}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-p5test"]],viewQuery:function(t,e){if(1&t&&o.Gf(Wu,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},features:[o.TTD],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();const ju=["container"];let Uu=(()=>{class i{constructor(){}ngOnInit(){}ngAfterViewInit(){let t=this.container.nativeElement;setTimeout(()=>{this.p5draw(t)},100)}p5draw(t){let r=new cr(a=>{let s;const c=[],d=Math.sqrt(3);a.setup=()=>{a.createCanvas(t.offsetWidth,t.offsetHeight,a.WEBGL),a.setAttributes("antialias",!0),a.createCamera({distance:260}),document.oncontextmenu=function(){return!1},a.strokeWeight(2),a.background(0,0),s=new f(0,0,0,1),c.push(s),s.addChildren(6)},a.draw=()=>{a.background(0,0),a.rotateY(.004*a.frameCount),a.frameCount%180==60&&a.frameCount<1200&&s.stimulate(),s.draw()},a.resize=()=>{a.resizeCanvas(t.offsetWidth,t.offsetHeight)};class f{constructor(v,m,S,T){this.pos=new cr.Vector(v,m,S),this.depth=T,this.born=a.frameCount,this.lastStimulation=-1/0,this.children=[]}addChildren(v){for(let m=0;m<v;m++){if(0===a.frameCount&&Math.random()>1/this.depth)continue;const S=a.random([[1,0,0],[.5,d/2,0],[-.5,d/2,0],[-1,0,0],[-.5,-d/2,0],[.5,-d/2,0],[0,0,1],[0,0,-1]]),T=this.pos.x+50*S[0],k=this.pos.y+50*S[1],E=this.pos.z+50*S[2];if(c.some(R=>Math.pow(R.pos.x-T,2)+Math.pow(R.pos.y-k,2)+Math.pow(R.pos.z-E,2)<1))continue;const P=new f(T,k,E,this.depth+1);this.children.push(P),c.push(P),0===a.frameCount&&P.addChildren(2)}}stimulate(){this.lastStimulation=a.frameCount,Math.random()<.5&&a.frameRate()>24&&this.addChildren(1)}draw(){a.push();const v=a.frameCount-this.born;a.stroke(0,v<50?200*v/50:200,0);const m=a.frameCount-this.lastStimulation;if(10===m)for(const S of this.children)S.stimulate();for(const S of this.children)a.push(),a.stroke(0,100,0),a.line(this.pos.x,this.pos.y,this.pos.z,S.pos.x,S.pos.y,S.pos.z),a.pop(),m<10&&(a.push(),a.strokeWeight(1),a.fill(50,255,0),a.translate(this.pos.x+(S.pos.x-this.pos.x)*m/10,this.pos.y+(S.pos.y-this.pos.y)*m/10,this.pos.z+(S.pos.z-this.pos.z)*m/10),a.box(1.5),a.pop()),S.draw();a.fill(m<30?255*Math.pow(1.1,-m):0),a.translate(this.pos.x,this.pos.y,this.pos.z),a.strokeWeight(1),a.box(15),a.pop()}}},t);this.myp5=r}ngOnDestroy(){this.myp5&&this.myp5.remove()}ngOnChanges(t){this.myp5&&this.myp5.resize()}onResize(t){this.myp5&&this.myp5.resize()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-p5bar"]],viewQuery:function(t,e){if(1&t&&o.Gf(ju,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},features:[o.TTD],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var co=p(23937);const Yu=["container"];let Xu=(()=>{class i{constructor(){this.options=co.xc,this.optionsData={},this.mockjs=co.yk,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new co.mg(this.container.nativeElement,this.options,function(){},this),this.scene.updateData(JSON.parse(JSON.stringify(this.comData)))},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-polygon"]],viewQuery:function(t,e){if(1&t&&o.Gf(Yu,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var An=p(42980),Ju=p(3155);const Ku=["container"];let Qu=(()=>{class i extends An.H{constructor(){super(),this.coreclass=Ju}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-alarmfaultlist"]],viewQuery:function(t,e){if(1&t&&o.Gf(Ku,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{coreclass:"coreclass"},features:[o.qOj],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var ot=p(79287);const qu={},En=[986,848],un=.6,po=[{name:"\u84dd\u4e0b\u4e00\u5854",time:155,leftpalce:778,heightplace:784,value:15,\u4eba\u6570\u52a3\u52bf\u56e2:31,\u4eba\u6570\u5747\u52bf\u56e2:35,\u4eba\u6570\u4f18\u52bf\u56e2:33,\u63cf\u8ff0:"\u591a\u4e8e\u524d\u671f\u5bf9\u62fc\u662f\u6709\u4e2d\u91ce\u652f\u63f4\u65f6\u53d1\u751f\u56e2\u6218"},{name:"\u7ea2\u4e0b\u4e00\u5854",time:160,leftpalce:940,heightplace:628,value:15,\u4eba\u6570\u52a3\u52bf\u56e2:32,\u4eba\u6570\u5747\u52bf\u56e2:31,\u4eba\u6570\u4f18\u52bf\u56e2:37,\u63cf\u8ff0:"\u591a\u4e8e\u524d\u671f\u5bf9\u62fc\u662f\u6709\u4e2d\u91ce\u652f\u63f4\u65f6\u53d1\u751f\u56e2\u6218"},{name:"\u4e0b\u6cb3\u9053",time:210,leftpalce:822,heightplace:661,value:4,\u4eba\u6570\u52a3\u52bf\u56e2:25,\u4eba\u6570\u5747\u52bf\u56e2:50,\u4eba\u6570\u4f18\u52bf\u56e2:25,\u63cf\u8ff0:"\u524d\u671f\u4e0b\u8def\u56e2\u6218\u53ef\u80fd\u62c9\u626f\u5230\u6cb3\u9053"},{name:"\u5c0f\u9f99",time:420,leftpalce:713,heightplace:595,value:27,\u4eba\u6570\u52a3\u52bf\u56e2:14,\u4eba\u6570\u5747\u52bf\u56e2:82,\u4eba\u6570\u4f18\u52bf\u56e2:14,\u63cf\u8ff0:"\u62a2\u5360\u524d\u671f\u9f99\u56e2\u8d44\u6e90"},{name:"\u5ce1\u8c37\u5148\u950b",time:440,leftpalce:352,heightplace:276,value:1,\u4eba\u6570\u52a3\u52bf\u56e2:13,\u4eba\u6570\u5747\u52bf\u56e2:74,\u4eba\u6570\u4f18\u52bf\u56e2:13,\u63cf\u8ff0:"\u524d\u671f\u62a2\u5360\u5ce1\u8c37\u5148\u950b\u6709\u5229\u4e8e\u4e2d\u4e0a\u6eda\u96ea\u7403\uff0c\u4f46\u662f\u4e0b\u8def\u79bb\u5f97\u592a\u8fdc\u4e86"},{name:"\u7ea2\u65b9\u84ddBUFF\u533a",time:340,leftpalce:805,heightplace:467,value:9,\u4eba\u6570\u52a3\u52bf\u56e2:0,\u4eba\u6570\u5747\u52bf\u56e2:28,\u4eba\u6570\u4f18\u52bf\u56e2:72,\u63cf\u8ff0:"\u84dd\u8272\u65b9\u524d\u671f\u4f1a\u7ecf\u5e38\u5165\u4fb5\u7ea2\u65b9\u84dd\u533a"},{name:"\u84dd\u65b9\u7ea2BUFF\u533a",time:340,leftpalce:562,heightplace:632,value:4,\u4eba\u6570\u52a3\u52bf\u56e2:0,\u4eba\u6570\u5747\u52bf\u56e2:0,\u4eba\u6570\u4f18\u52bf\u56e2:4,\u63cf\u8ff0:"\u867d\u7136\u7ea2\u65b9\u84dd\u533a\u7ecf\u5e38\u88ab\u5165\u4fb5\uff0c\u4f46\u662f\u540c\u65f6\u95f4\u84dd\u65b9\u7ea2\u533a\u5374\u4e0d\u5e38\u88ab\u5165\u4fb5"},{name:"\u4e2d\u8def",time:660,leftpalce:543,heightplace:423,value:27,\u4eba\u6570\u52a3\u52bf\u56e2:13,\u4eba\u6570\u5747\u52bf\u56e2:69,\u4eba\u6570\u4f18\u52bf\u56e2:18,\u63cf\u8ff0:"\u5728\u62ff\u5148\u950b\u4e4b\u540e\uff0c\u4e00\u822c\u4f1a\u7206\u53d1\u4e2d\u8def\u5148\u950b\u56e2\u6218"},{name:"\u7ea2\u4e2d\u4e8c\u5854",time:1080,leftpalce:681,heightplace:302,value:14,\u4eba\u6570\u52a3\u52bf\u56e2:14,\u4eba\u6570\u5747\u52bf\u56e2:70,\u4eba\u6570\u4f18\u52bf\u56e2:16,\u63cf\u8ff0:"\u63a8\u8fdb\u4e8c\u5854"},{name:"\u84dd\u4e2d\u4e8c\u5854",time:1080,leftpalce:385,heightplace:535,value:13,\u4eba\u6570\u52a3\u52bf\u56e2:14,\u4eba\u6570\u5747\u52bf\u56e2:70,\u4eba\u6570\u4f18\u52bf\u56e2:16,\u63cf\u8ff0:"\u63a8\u8fdb\u4e8c\u5854"},{name:"\u7ea2\u65b9\u4e0a\u4e00\u5854",time:1380,leftpalce:277,heightplace:95,value:2,\u4eba\u6570\u52a3\u52bf\u56e2:50,\u4eba\u6570\u5747\u52bf\u56e2:0,\u4eba\u6570\u4f18\u52bf\u56e2:50,\u63cf\u8ff0:"\u4e0a\u8def\u88ab\u6293\u5355"},{name:"\u84dd\u8272\u4e0a\u4e8c\u5854",time:1480,leftpalce:132,heightplace:402,value:1,\u4eba\u6570\u52a3\u52bf\u56e2:0,\u4eba\u6570\u5747\u52bf\u56e2:0,\u4eba\u6570\u4f18\u52bf\u56e2:100,\u63cf\u8ff0:"\u5728\u84dd\u8272\u4e8c\u5854\u6293\u5355"},{name:"\u7ea2\u4e2d\u4e8c\u5854",time:1080,leftpalce:681,heightplace:302,value:9,\u4eba\u6570\u52a3\u52bf\u56e2:32,\u4eba\u6570\u5747\u52bf\u56e2:31,\u4eba\u6570\u4f18\u52bf\u56e2:37,\u63cf\u8ff0:"\u63a8\u8fdb\u4e8c\u5854"},{name:"\u84dd\u65b9\u9ad8\u5730",time:1700,leftpalce:220,heightplace:688,value:14,\u4eba\u6570\u52a3\u52bf\u56e2:4,\u4eba\u6570\u5747\u52bf\u56e2:91,\u4eba\u6570\u4f18\u52bf\u56e2:5,\u63cf\u8ff0:"\u6253\u4e0a\u84dd\u65b9\u9ad8\u5730"},{name:"\u7ea2\u65b9\u9ad8\u5730",time:1700,leftpalce:856,heightplace:163,value:16,\u4eba\u6570\u52a3\u52bf\u56e2:4,\u4eba\u6570\u5747\u52bf\u56e2:91,\u4eba\u6570\u4f18\u52bf\u56e2:5,\u63cf\u8ff0:"\u6253\u4e0a\u7ea2\u65b9\u9ad8\u5730"},{name:"\u5927\u9f99",time:1560,leftpalce:340,heightplace:268,value:19,\u4eba\u6570\u52a3\u52bf\u56e2:13,\u4eba\u6570\u5747\u52bf\u56e2:67,\u4eba\u6570\u4f18\u52bf\u56e2:20,\u63cf\u8ff0:"\u5728\u540e\u671f\u62ff\u53d6\u5927\u9f99\u5e2e\u52a9\u63a8\u4e0a\u9ad8\u5730"}],$u=[{mytime:2.5,rate:1},{mytime:5,rate:1.03},{mytime:7.5,rate:1.06},{mytime:10,rate:1.07},{mytime:12.5,rate:1.08},{mytime:15,rate:1.15},{mytime:17.5,rate:1.07},{mytime:20,rate:1.06},{mytime:22.5,rate:1.03},{mytime:25,rate:1},{mytime:27.5,rate:.98},{mytime:30,rate:.94}];class th{constructor(n){this.divWidth=10,this.divHeight=10,this.domdiv=n,this.divWidth=n.offsetWidth,this.divHeight=n.offsetHeight,this.svg=ot.select(n).append("svg").attr("width",this.divWidth).attr("height",this.divHeight).style("position","absolute"),this.gGroup=this.svg.append("g").attr("class","gGroup").attr("transform","translate(30,30)");let t=1/0,e=-1/0;po.forEach(a=>{a.value>e&&(e=a.value),a.value<t&&(t=a.value)});let r=ot.scaleLinear().domain([t,e]).range([5,25]);po.forEach(a=>{a.r=r(a.value)}),this.pieG=this.gGroup.append("g").attr("class","pie"),this.addPlace(po),this.addPie(null),this.addDragBar(),this.drawLine([]),this.resize()}addPie(n){if(!n)return;const t=[];t.push({name:"\u4eba\u6570\u52a3\u52bf\u56e2",value:n.\u4eba\u6570\u52a3\u52bf\u56e2}),t.push({name:"\u4eba\u6570\u5747\u52bf\u56e2",value:n.\u4eba\u6570\u5747\u52bf\u56e2}),t.push({name:"\u4eba\u6570\u4f18\u52bf\u56e2",value:n.\u4eba\u6570\u4f18\u52bf\u56e2});const r=ot.pie().value(d=>d.value).sort(null),a=ot.arc().innerRadius(0).outerRadius(100),s=ot.scaleOrdinal(ot.schemeCategory10);let l=un*En[0],c=un*En[1]/2;this.pieG.attr("transform",`translate(${l+120},${c}) scale(0)`).transition().duration(500).attr("transform",`translate(${l+120},${c}) scale(1)`),this.pieG.selectAll("path").data(r(t)).join("path").attr("d",a).attr("fill",d=>s(d.data.name)).attr("stroke","white").style("stroke-width","2px").style("opacity",.8),this.pieG.selectAll("text").filter(".pieText").data(r(t)).join("text").attr("class","pieText").attr("dx",120).attr("dy",(d,f)=>30*f-30).attr("fill","white").attr("font-size",16).attr("text-anchor","start").attr("fill",d=>s(d.data.name)).text(d=>d.data.name+":"+d.data.value),this.pieG.selectAll("text").filter(".infoText").data([n.\u63cf\u8ff0]).join("text").attr("class","infoText").attr("dx",-90).attr("dy",130).attr("fill","red").attr("font-size",16).attr("text-anchor","start").text(d=>d)}addPlace(n){this.placeG=this.gGroup.append("g").attr("class","points"),this.placeG.append("image").attr("xlink:href","/assets/images/canyon-map.png").attr("x",0).attr("y",0).attr("width",En[0]*un).attr("height",En[1]*un),this.placeG.selectAll("circle").data(n).join("circle").attr("cx",t=>t.leftpalce*un).attr("cy",t=>t.heightplace*un).attr("r",t=>t.r).attr("fill","red").attr("opacity",0).on("mouseover",function(){ot.select(this).attr("fill","green")}).on("mouseout",function(){ot.select(this).attr("fill","red")}).on("click",t=>{console.log(t),this.addPie(t)})}addDragBar(){let n=un*En[1],t=un*En[0]*1.6;const e=this.gGroup.append("g").attr("class","dragBar"),a=(e.append("rect").attr("x",0).attr("y",n+20).attr("width",t).attr("height",20).attr("fill","#ccc"),e.append("circle").attr("cx",0).attr("cy",n+30).attr("r",10).attr("fill","red").on("mouseover",function(){ot.select(this).style("cursor","pointer")}).on("mouseout",function(){ot.select(this).style("cursor","default")}).call(ot.drag().on("drag",()=>{let s=ot.event.x;s<0&&(s=0),s>t&&(s=t),a.attr("cx",s),this.changePlace(s/t)})))}changePlace(n){this.placeG.selectAll("circle").each(function(t){t.time>1800*n?ot.select(this).attr("fill","red").attr("opacity",0):ot.select(this).attr("fill","red").attr("opacity",.5)})}updateData(n){void 0!==n&&(this.u_data=n)}dispose(){this.svg.remove()}resize(){this.divHeight=this.domdiv.offsetHeight,this.divWidth=this.domdiv.offsetWidth,this.svg.attr("width",this.divWidth).attr("height",this.divHeight),this.updateData(this.u_data)}updateOptions(n){this.resize()}drawLine(n){let t=un*En[1]+160,e=un*En[0]*1.6,r=+ot.max(n=$u,S=>S.mytime),a=+ot.min(n,S=>S.mytime),l=.8/+ot.min(n,S=>S.rate),c=ot.scaleLinear().domain([a,r]).range([0,e]).nice(),d=ot.scaleLinear().domain([l,1.2]).range([t,t-100]).nice(),f=ot.line().x(S=>c(S.mytime)).y(S=>d(S.rate)).curve(ot.curveMonotoneX),h=this.gGroup.append("g").attr("class","line");h.append("path").attr("d",f(n)).attr("fill","none").attr("stroke","red").attr("stroke-width",2);let v=ot.axisBottom(c).ticks(10),m=ot.axisLeft(d).ticks(4);h.append("g").attr("transform","translate(0, "+t+")").call(v),h.append("g").attr("transform","translate(0, 0)").call(m),h.append("text").attr("x",10).attr("y",t-90).attr("fill","red").attr("font-size",14).text("\u4e0e\u5bf9\u4f4d\u4f24\u5bb3\u6bd4\u7387"),h.append("text").attr("x",e).attr("y",t+35).attr("fill","red").attr("font-size",14).text("\u65f6\u95f4").attr("text-anchor","end"),h.append("line").attr("x1",0).attr("y1",d(1)).attr("x2",e).attr("y2",d(1)).attr("stroke","#aaaaaa").attr("stroke-width",1).attr("stroke-dasharray","5,5")}}function eh(){return{}}const nh=["container"];let ih=(()=>{class i{constructor(){this.options=qu,this.optionsData={},this.mockjs=eh,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new th(this.container.nativeElement),this.scene.updateData(JSON.parse(JSON.stringify(this.comData)))},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-summoners-canyon"]],viewQuery:function(t,e){if(1&t&&o.Gf(nh,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var uo=p(4681);const rh=["container"];let oh=(()=>{class i{constructor(){this.options=uo.xc,this.optionsData={},this.mockjs=uo.yk,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new uo.k4(this.container.nativeElement,this.options),this.scene.updateData(JSON.parse(JSON.stringify(this.comData)))},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-barstackrect"]],viewQuery:function(t,e){if(1&t&&o.Gf(rh,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var ho=p(88694);const ah=["container"];let sh=(()=>{class i{constructor(){this.options=ho.xc,this.optionsData={},this.mockjs=ho.yk,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new ho.aR(this.container.nativeElement,this.options),this.scene.updateData(JSON.parse(JSON.stringify(this.comData)))},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-barstripe"]],viewQuery:function(t,e){if(1&t&&o.Gf(ah,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var fo=p(72758);const lh=["container"];let ch=(()=>{class i{constructor(){this.options=fo.xc,this.optionsData={},this.mockjs=fo.yk,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new fo.yT(this.container.nativeElement,this.options),this.scene.updateData(JSON.parse(JSON.stringify(this.comData)))},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-barstripelist"]],viewQuery:function(t,e){if(1&t&&o.Gf(lh,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var vo=p(31356);const ph=["container"];let dh=(()=>{class i{constructor(){this.options=vo.exoptions,this.optionsData={},this.mockjs=vo.mockjs,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new vo.D3alarmlist(this.container.nativeElement,this.options,function(){},this),this.scene.updateData(JSON.parse(JSON.stringify(this.comData)))},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-d3-alarm-list"]],viewQuery:function(t,e){if(1&t&&o.Gf(ph,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var go=p(94649);const uh=["container"];let hh=(()=>{class i{constructor(){this.options=go.exoptions,this.optionsData={},this.mockjs=go.mockjs,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new go.Mulpies(this.container.nativeElement,this.options,function(){},this),this.scene.updateData(JSON.parse(JSON.stringify(this.comData)))},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-hostlist"]],viewQuery:function(t,e){if(1&t&&o.Gf(uh,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var mo=p(70343);const fh=["container"];let vh=(()=>{class i{constructor(){this.options=mo.xc,this.optionsData={},this.mockjs=mo.yk,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new mo.Vy(this.container.nativeElement,this.options),this.scene.updateData(JSON.parse(JSON.stringify(this.comData)))},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-gauge-stripe-list"]],viewQuery:function(t,e){if(1&t&&o.Gf(fh,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();const ms={margin:20,height:.8,rxy:.5,textTop:0,textOpacity:0,defcolor:"#29E5D0",type3d:!0,linear:{start:.1,end:1}},gh={fontSize:{name:"\u5b57\u4f53\u5927\u5c0f",type:"number"},margin:{name:"\u56fe\u8868\u8fb9\u8ddd",type:"number"},height:{name:"\u9ad8\u5ea6\u5360\u6bd4",type:"number"},rxy:{name:"\u5706\u89d2\u5360\u6bd4",type:"number"},textTop:{name:"\u6587\u5b57\u4e0a\u8fb9\u8ddd",type:"number"},textOpacity:{name:"\u6587\u5b57\u900f\u660e\u5ea6",type:"number"},defcolor:{name:"\u9ed8\u8ba4\u989c\u8272",type:"fill"},type3d:{name:"\u662f\u54263d",type:"switch"}};class mh extends Ne.H{constructor(n,t){super(),this.divWidth=10,this.divHeight=10,this.defOption=ms,this.render=()=>{this.resize()},this.domdiv=n,this.divWidth=n.offsetWidth,this.divHeight=n.offsetHeight,this.setOption(this.defOption,t),this.svg=ot.select(n).append("svg").attr("width",this.divWidth).attr("height",this.divHeight).style("position","absolute"),this.barG=this.svg.append("g").attr("class","barG").attr("width",this.divWidth).attr("height",this.divHeight).attr("transform","translate("+this.nowOption.margin+","+this.nowOption.margin+")"),this.cordefs=this.svg.append("defs"),this.render()}updateData(n){if(void 0===n)return;this.u_data=n;let t=n.data||[];0!==t.length&&(t=JSON.parse(JSON.stringify(t)),this.setdata(t),this.drawBar(t))}setdata(n){this.nowOption.height<=0&&(this.nowOption.height=.01),this.nowOption.height>1&&(this.nowOption.height=1),this.nowOption.margin<=0&&(this.nowOption.margin=0);let t=0;const e=[];n.forEach(l=>{t+=l.value});let r=this.divWidth-2*this.nowOption.margin,a=(this.divHeight-2*this.nowOption.margin)*this.nowOption.height;r<=10&&(r=10),a<=10&&(a=10);let s=0;n.forEach((l,c)=>{l.width=r*l.value/t,l.height=a,l.start=s,l.sunper=this.nowOption.rxy<=0?0:100*s/(r+l.width),s+=l.width,l.cid=c,e.push([l.color||this.nowOption.defcolor,l.sunper])}),this.setcolrs(e)}drawBar(n){let t=this.nowOption.rxy;t<=0?t=0:t>=1&&(t=1);const e=JSON.parse(JSON.stringify(n));e.sort((r,a)=>-r.cid+a.cid),this.barG.selectAll("rect").filter(".rect").data(e).join("rect").attr("class","rect").attr("y",0).attr("height",r=>r.height).attr("fill",r=>"url(#linearA"+r.cid+this.__id+")").attr("rx",r=>r.height*(this.nowOption.type3d?0:t)).attr("ry",r=>r.height*(this.nowOption.type3d?0:t)).transition().ease(ot.easePolyIn).duration(500).attr("x",r=>0==t?r.start:0).attr("width",r=>r.width+(0==t?0:r.start)),this.barG.selectAll("text").filter(".text").data(e).join("text").attr("class","text").attr("y",r=>r.height).attr("dy",this.nowOption.textTop+"px").text(r=>null!=r.value?r.value:"").style("fill",r=>r.color||this.nowOption.defcolor).style("opacity",this.nowOption.textOpacity).style("font-size","2em").style("text-anchor","end").style("dominant-baseline","text-before-edge").transition().ease(ot.easePolyIn).duration(500).attr("x",r=>r.start+r.width),this.nowOption.type3d?(this.barG.selectAll("ellipse").filter(".ellipse0").data([n[0]]).join("ellipse").attr("class","ellipse0").attr("cy",r=>r.height/2).attr("rx",r=>r.height/5).attr("ry",r=>r.height/2).attr("fill",r=>"url(#linearB"+this.__id+")").attr("cx",0),this.barG.selectAll("ellipse").filter(".ellipse").data(n).join("ellipse").attr("class","ellipse").attr("cy",r=>r.height/2).attr("rx",r=>r.height/5).attr("ry",r=>r.height/2).attr("fill",r=>ot.color(r.color||this.nowOption.defcolor).brighter(.5)).transition().ease(ot.easePolyIn).duration(500).attr("cx",r=>r.start+r.width)):this.barG.selectAll("ellipse").remove()}setcolrs(n){this.cordefs.selectAll("linearGradient").remove();for(let e=0;e<n.length;e++){const r=this.cordefs.append("linearGradient").attr("id",`linearA${e}${this.__id}`).attr("x1","0%").attr("x2","100%").attr("y1","0%").attr("y2","0%");r.append("stop").attr("stop-opacity",0).attr("offset","0%").attr("stop-color",`${n[e][0]}`),r.append("stop").attr("stop-opacity",0).attr("offset",n[e][1]/2+"%").attr("stop-color",`${n[e][0]}`),r.append("stop").attr("stop-opacity",this.nowOption.linear.start).attr("offset",`${n[e][1]}%`).attr("stop-color",`${n[e][0]}`),r.append("stop").attr("stop-opacity",this.nowOption.linear.end).attr("offset","100%").attr("stop-color",`${n[e][0]}`)}const t=this.cordefs.append("linearGradient").attr("id",`linearB${this.__id}`).attr("x1","0%").attr("x2","100%").attr("y1","0%").attr("y2","0%");t.append("stop").attr("stop-opacity",this.nowOption.linear.start).attr("offset","0%").attr("stop-color",`${n[0][0]}`),t.append("stop").attr("stop-opacity",this.nowOption.linear.start).attr("offset","50%").attr("stop-color",`${n[0][0]}`),t.append("stop").attr("stop-opacity",0).attr("offset","50%").attr("stop-color",`${n[0][0]}`),t.append("stop").attr("stop-opacity",0).attr("offset","100%").attr("stop-color",`${n[0][0]}`)}dispose(){this.svg.remove()}resize(){this.divHeight=this.domdiv.offsetHeight,this.divWidth=this.domdiv.offsetWidth,!(this.divWidth<10)&&(this.divHeight<10||(console.log("object :>> ",this.divHeight),this.svg.attr("width",this.divWidth).attr("height",this.divHeight),this.barG.attr("width",this.divWidth).attr("height",this.divHeight).attr("transform","translate("+this.nowOption.margin+","+this.nowOption.margin+")"),this.updateData(this.u_data)))}updateOptions(n){this.setOption(this.defOption,n),this.resize()}}function xh(){return{data:[{value:20+80*Math.random()|0,color:"#d55717"},{value:20+80*Math.random()|0,color:"#2371f1"},{value:20+80*Math.random()|0,color:"#788EBB"}]}}const yh=["container"];let wh=(()=>{class i extends An.H{constructor(){super(),this.coreclass=u}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-bar-stack"]],viewQuery:function(t,e){if(1&t&&o.Gf(yh,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{coreclass:"coreclass"},features:[o.qOj],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();const xs={defcolor:"#de5521",pieset:[{r:10,d:5,h:10},{r:20,d:5,h:20},{r:30,d:5,h:30},{r:40,d:5,h:40}],legend:[{name:"\u4f20\u8f93\u5931\u8d25",color:"#de5521"},{name:"\u5f85\u4f20\u8f93",color:"#0074f0"},{name:"\u5df2\u7ecf\u4f20\u8f93",color:"#778db8"}]},bh={};class _h extends Ne.H{constructor(n,t){super(),this.divWidth=10,this.divHeight=10,this.defOption=xs,this.render=()=>{this.resize()},this.domdiv=n,this.divWidth=n.offsetWidth,this.divHeight=n.offsetHeight,this.setOption(this.defOption,t),n.style.fontSize=this.nowOption.fontSize+"px",this.svg=ot.select(n).append("svg").attr("width",this.divWidth).attr("height",this.divHeight).style("position","absolute"),this.centerG=this.svg.append("g").attr("class","centerG").attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.pie=ot.pie().value(function(e){return e.length}),this.pie.startAngle(1.5*Math.PI).endAngle(.5*Math.PI).sortValues(null),this.render()}updateData(n){void 0!==n&&(n=JSON.parse(JSON.stringify(n)),this.u_data=n,this.drawChart(n))}drawChart(n){const t=this.setdata(n);this.centerG.selectAll("g").remove(),t[0].forEach((e,r)=>{this.drawArc1(e,t[1][r])}),this.centerG.selectAll("text").filter(".text").data(t[1]).join("text").attr("class","text").attr("x",e=>-(e.pr+e.pd/2)).attr("y","-0.5em").attr("fill","#fff").text(e=>e.name).attr("text-anchor","end").attr("dominant-baseline","middle").attr("writing-mode","tb").attr("font-size","1em")}setdata(n){const t=[],e=[],r=this.domdiv.offsetWidth;for(let a=0;a<n.length;a++){const s=JSON.parse(JSON.stringify(n[a].data)),l=this.nowOption.pieset[a]||{},c=void 0===l.h?.2*r:.01*l.h*r,d=void 0===l.r?.2*r:.01*l.r*r,h=[[],[]],v={};v.pd=void 0===l.d?.05*r:.01*l.d*r,v.pr=d,v.name=n[a].name;let m=ot.sum(s,E=>E.value);0===m&&(m=1);const S=d*Math.PI+c;s.forEach((E,P)=>{var R;E.length=E.value/m*S,E.id=P,E.color=(null===(R=this.nowOption.legend[P])||void 0===R?void 0:R.color)||this.nowOption.defcolor});let T=0,k=!0;s.forEach((E,P)=>{if(T+=E.length,T<d*Math.PI)h[0].push(E);else if(k){const R=d*Math.PI-T+E.length,B=JSON.parse(JSON.stringify(E));B.length=R;const V=JSON.parse(JSON.stringify(E));V.length=E.length-R,h[0].push(B),h[1].push(V),k=!1}else h[1].push(E)}),t.push(h),e.push(v)}return[t,e]}drawArc1(n,t){const e=t.pr,r=t.pd,a=this.centerG.append("g").attr("class","pieG");a.selectAll("path").data(this.pie(n[0])).join("path").attr("d",ot.arc().innerRadius(e).outerRadius(e+r)).attr("fill",l=>l.data.color).attr("stroke",l=>l.data.color).attr("stroke-width","1");let s=0;n[1].map(l=>{l.start=s,s+=l.length}),a.selectAll("rect").data(n[1]).join("rect").attr("x",e).attr("y",l=>-l.start-l.length).attr("width",r).attr("height",l=>l.length).attr("fill",l=>l.color).attr("stroke",l=>l.color).attr("stroke-width","1px")}dispose(){this.svg.remove()}resize(){this.divHeight=this.domdiv.offsetHeight,this.divWidth=this.domdiv.offsetWidth,!(this.divWidth<10)&&(this.divHeight<10||(this.svg.attr("width",this.divWidth).attr("height",this.divHeight),this.centerG.attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.updateData(this.u_data)))}updateOptions(n){this.setOption(this.defOption,n),this.domdiv.style.fontSize=this.nowOption.fontSize+"px",this.resize()}}function Ch(){return[{name:"PV",data:[{value:10},{value:10},{value:10}]},{name:"CV",data:[{value:10},{value:10},{value:10}]},{name:"CT",data:[{value:40},{value:10},{value:10}]},{name:"DR",data:[{value:40},{value:10},{value:10}]}]}const Sh=["container"];let Dh=(()=>{class i extends An.H{constructor(){super(),this.coreclass=x}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-bar-stack-bend"]],viewQuery:function(t,e){if(1&t&&o.Gf(Sh,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{coreclass:"coreclass"},features:[o.qOj],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var Pe=p(38327);const ys={color:"#2AC670",color2:"#FFFFFF",fongSize:16,cr:30,cd:4,centerd:15},Oh={};class Th{constructor(n,t){this.__id=(new Date).getTime(),this.divWidth=600,this.divHeight=320,this.tweenGroup=new Pe.ZA,this.request=0,this.lastHeight=300,this.lastWidth=300,this.defOption=ys,this.lastAng=0,this.firstLoad=!0,this.loadovertag=!1,this.render=()=>{this.request=requestAnimationFrame(this.render),this.tweenGroup&&this.tweenGroup.update(),this.resize()},this.domdiv=n,this.divWidth=n.offsetWidth,this.divHeight=n.offsetHeight,this.setOption(t),this.svg=ot.select(n).append("svg").attr("width",this.divWidth).attr("height",this.divHeight).style("font-size",this.nowOption.fongSize+"px"),this.garc=this.svg.append("g").attr("transform","translate("+(this.divWidth/2-this.nowOption.cr-this.nowOption.centerd)+","+this.divHeight/2+")"),this.gnamval=this.svg.append("g").attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.gbarc=this.svg.append("g").attr("transform","translate("+(this.divWidth/2-this.nowOption.cr-this.nowOption.centerd)+","+this.divHeight/2+")"),this.gper=this.svg.append("g").attr("transform","translate("+(this.divWidth/2-this.nowOption.cr-this.nowOption.centerd)+","+this.divHeight/2+")"),this.render()}drawPer(n){this.Ppercent=this.gper.append("text"),this.Ppercent.text(n+"%").attr("fill",this.nowOption.color2).attr("font-size","1em").attr("text-anchor","middle").attr("dominant-baseline","central").style("opacity",0).transition().ease(ot.easePolyIn).duration(500).style("opacity",1)}changePer(n){this.tweennumber(this.Ppercent,n,"%",this.nowOption.color2)}tweennumber(n,t,e,r){n.attr("fill",r).transition().ease(ot.easePolyIn).duration(1e3).tween("text",function(){if(isNaN(+t)||""==t){const a=ot.select(this);return function(){a.text(t+e)}}{const a=ot.select(this),s=t.toString().split(".");let l=1;s[1]&&(l=Math.pow(10,s[1].length));let c=a.attr("lastValue");isNaN(+c)&&(c=0);const d=ot.interpolateNumber(c,t||0);return function(f){a.text((Math.round(d(f)*l)/l).toLocaleString()+e)}}}).on("end",function(){ot.select(this).attr("lastValue",t)})}drawBarc(n,t){const e=ot.arc().startAngle(0).endAngle(n*Math.PI/180).innerRadius(this.nowOption.cr-this.nowOption.cd).outerRadius(this.nowOption.cr);this.gbarc.selectAll("path").remove(),t?this.gbarc.append("path").attr("d",e).attr("fill",this.nowOption.color).attr("opacity",0).transition().ease(ot.easePolyIn).duration(500).style("opacity",.2):this.gbarc.append("path").attr("d",e).attr("fill",this.nowOption.color).style("opacity",.2)}drawArc(n,t){const e={s:n};new Pe.kX(e,this.tweenGroup).to({s:t},750).easing(Pe.oY.Quartic.Out).onUpdate(()=>{const a=ot.arc().startAngle(0).endAngle(e.s*Math.PI/180).innerRadius(this.nowOption.cr-this.nowOption.cd).outerRadius(this.nowOption.cr);this.garc.select("path").remove(),this.garc.append("path").attr("d",a).attr("fill",this.nowOption.color)}).start(),this.lastAng=t}drawNamVal(n,t){this.Pname=this.gnamval.append("text"),this.Pname.text(n).attr("y",-5).attr("fill",this.nowOption.color2).attr("font-size","1em").attr("text-anchor","start").style("opacity",0).transition().ease(ot.easePolyIn).duration(500).style("opacity",1),this.PValue=this.gnamval.append("text"),this.PValue.text(t.toLocaleString()).attr("y",5).attr("fill",this.nowOption.color).attr("font-size","1.5em").attr("text-anchor","start").attr("dominant-baseline","hanging").style("opacity",0).transition().ease(ot.easePolyIn).duration(500).style("opacity",1)}changeNamVal(n,t){this.Pname.text(n).attr("fill",this.nowOption.color2),this.tweennumber(this.PValue,t,"",this.nowOption.color)}updateData(n){this.u_data=n;const{name:t,value:e}=n;let{percent:r}=n;void 0!==t&&void 0!==e&&(null!=r&&(r>100&&(r=100),r<0&&(r=0)),!0===this.firstLoad?(this.firstLoad=!1,this.drawBarc(360,!0),this.drawNamVal(t,e),null!=r?(this.drawPer(r),this.drawArc(this.lastAng,3.6*r)):this.drawArc(this.lastAng,360),setTimeout(()=>{this.loadovertag=!0},500)):!1===this.firstLoad&&!0===this.loadovertag&&(this.changeNamVal(t,e),null!=r&&(this.changePer(r),this.drawArc(this.lastAng,3.6*r))))}setOption(n){void 0===n&&(n={}),this.nowOption=this.deepCopy(this.defOption,n)}deepCopy(n,t){const e=Object.assign({},n);for(const r in t)"object"!=typeof n[r]||null===n[r]||Array.isArray(n[r])?void 0!==t[r]&&(e[r]=t[r]):e[r]=this.deepCopy(n[r],t[r]);return e}dispose(){cancelAnimationFrame(this.request),this.svg.remove()}setColors(){var n;this.gbarc.select("path").attr("fill",this.nowOption.color),this.garc.select("path").attr("fill",this.nowOption.color),null===(n=this.PValue)||void 0===n||n.attr("fill",this.nowOption.color)}resize(){this.divHeight=this.domdiv.offsetHeight,this.divWidth=this.domdiv.offsetWidth,this.svg.attr("width",this.divWidth).attr("height",this.divHeight),this.resettransform()}resettransform(){this.garc.attr("transform","translate("+(this.divWidth/2-this.nowOption.cr-this.nowOption.centerd)+","+this.divHeight/2+")"),this.gnamval.attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.gbarc.attr("transform","translate("+(this.divWidth/2-this.nowOption.cr-this.nowOption.centerd)+","+this.divHeight/2+")"),this.gper.attr("transform","translate("+(this.divWidth/2-this.nowOption.cr-this.nowOption.centerd)+","+this.divHeight/2+")")}updateOptions(n){this.setOption(n),this.svg.style("font-size",this.nowOption.fongSize+"px"),this.setColors(),this.resize(),this.drawBarc(360),this.updateData(this.u_data)}}function Ah(){return{name:"\u5df2\u5b8c\u6210",percent:20+80*Math.random()|0,value:100+1e3*Math.random()|0}}const Eh=["container"];let Mh=(()=>{class i extends An.H{constructor(){super(),this.coreclass=y}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-pie-proportion"]],viewQuery:function(t,e){if(1&t&&o.Gf(Eh,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{coreclass:"coreclass"},features:[o.qOj],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var mt=p(25130),ze=(p(29853),p(86851));const ws={fontSize:16};class Ph extends Ne.H{constructor(n,t){super(),this.defOption=ws,this.domdiv=n,this.setOption(this.defOption,t);const e=document.createElement("canvas");n.appendChild(e),this.canvas=e,e.width=n.offsetWidth,e.height=n.offsetHeight,this.init(),this.render(),new mt.AxesViewer(this.scene,1),this.addGltf()}init(){this.engine=new mt.Engine(this.canvas,!0,{preserveDrawingBuffer:"true"===localStorage.getItem("drawingBuffer"),stencil:!0}),this.scene=new mt.Scene(this.engine),this.scene.clearColor=new mt.Color4(0,0,0,0),this.scene.createDefaultCameraOrLight(!0,!0,!0),this.scene.createDefaultEnvironment(),new mt.GlowLayer("glow",this.scene,{mainTextureSamples:40})}addGltf(){mt.SceneLoader.LoadAssetContainer("./assets/model/","boxtest.glb",this.scene,function(n){n.meshes[0].scaling=new mt.Vector3(.01,.01,.01),n.meshes.forEach(function(t,e){if(e>=0){const r=t.clone("clone"+e);console.log("clone :>> ",e,t.name,r.name),r.position.y+=5+e+3}}),n.addAllToScene(),console.log("container :>> ",n)})}render(){this.engine.runRenderLoop(()=>{this.scene.render()})}dispose(){var n;null===(n=this.engine)||void 0===n||n.dispose()}resize(){var n;this.canvas.width=this.domdiv.offsetWidth,this.canvas.height=this.domdiv.offsetHeight,null===(n=this.engine)||void 0===n||n.resize()}}function kh(){return ze.mock({"series|4":[{"name|+1":"@name",value:"@integer(10,100)"}]})}const Ih=["container"];let bs=(()=>{class i{constructor(){this.options=ws,this.optionsData={},this.mockjs=kh,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new Ph(this.container.nativeElement,this.options)},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-babylonbox"]],viewQuery:function(t,e){if(1&t&&o.Gf(Ih,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var xo=p(76141);const Rh=["container"];let _s=(()=>{class i{constructor(){this.options=xo.xc,this.optionsData={},this.mockjs=xo.yk,this.comData=this.mockjs()}ngOnInit(){console.log("this.comData :>> ",this.comData)}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new xo.Jz(this.container.nativeElement,this.options)},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-babylondemo"]],viewQuery:function(t,e){if(1&t&&o.Gf(Rh,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var yo=p(35805);const zh=["container"];let Cs=(()=>{class i{constructor(){this.options=yo.xc,this.optionsData={},this.mockjs=yo.yk,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new yo.LL(this.container.nativeElement,this.options)},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-babylongltf"]],viewQuery:function(t,e){if(1&t&&o.Gf(zh,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();const Ss={scale:1,tipsTime:5,camera:{x:2.6,y:1.5,z:-1.7,tx:0,ty:.2,tz:0}};class Gh extends Ne.H{constructor(n,t,e,r){super(),this.defOption=Ss,this.loadend=!1,this.itemBox=[],this.boxPos=[],this.nowPos=new mt.Vector3(0,0,0),this.callback=e,this.scope=r,this.domdiv=n,this.setOption(this.defOption,t);const a=document.createElement("canvas");n.appendChild(a),this.canvas=a,a.width=n.offsetWidth,a.height=n.offsetHeight,this.engine=new mt.Engine(a,!0,{preserveDrawingBuffer:"true"===localStorage.getItem("drawingBuffer"),stencil:!0}),this.scene=new mt.Scene(this.engine),this.scene.clearColor=new mt.Color4(0,0,0,0),this.init(),this.render(),this.addGltf()}init(){const n=new mt.GlowLayer("glow",this.scene,{mainTextureSamples:40});n.intensity=.3;let t=0;setInterval(()=>{n.intensity=.3*(.5+Math.sin(t)),t+=.2},50);const e=new mt.ArcRotateCamera("Camera",3*Math.PI/2,Math.PI/3,2,mt.Vector3.Zero(),this.scene);e.setPosition(new mt.Vector3(2.64,1.886,-1.879)),e.attachControl(this.canvas,!0),e.wheelPrecision=300,e.lowerRadiusLimit=1,e.upperRadiusLimit=5,e.minZ=.1,this.activeCamera=e,this.changeCamera(),e.onViewMatrixChangedObservable.add(()=>{this.changePosition()}),this.changeCamera(),new mt.HemisphericLight("sun",new mt.Vector3(3,.5,.1),this.scene).intensity=1,new mt.DirectionalLight("dlight",new mt.Vector3(-.5,-.8,1),this.scene)}changePosition(){const n=this.nowPos;if(this.scene.activeCamera){if(!n)return;const t=mt.Vector3.Project(n,mt.Matrix.Identity(),this.scene.getTransformMatrix(),this.scene.activeCamera.viewport.toGlobal(this.engine.getRenderWidth(),this.engine.getRenderHeight()));this.callback.call(this.scope,{alarmBox:{top:t.y,left:t.x}})}}autoRunHostTips(){if(this.nowOption.tipsTime<=0||null==this._data)return;this.set1&&clearInterval(this.set1);let n=0;const t=()=>{var e,r;const a=Math.floor(Math.random()*(null===(e=this.boxPos)||void 0===e?void 0:e.length));this.nowPos=this.boxPos[a],this.changePosition(),this.callback.call(this.scope,{i:n}),n++,n>=(null===(r=this.boxPos)||void 0===r?void 0:r.length)&&(n=0)};t(),this.set1=setInterval(()=>{t()},1e3*this.nowOption.tipsTime)}addGltf(){mt.SceneLoader.LoadAssetContainer("./assets/model/","hostspace.glb",this.scene,n=>{n.addAllToScene(),n.meshes[0].scaling=new mt.Vector3(-.03,.03,.03),n.materials.forEach(r=>{r.alphaMode=mt.Engine.ALPHA_COMBINE});let t=null,e=null;n.materials.forEach(r=>{"\u6750\u8d28.4"===r.name&&(t=r.clone("ymat"),this.yellowMat=t),"\u6750\u8d28.2"===r.name&&(e=r.clone("mat"),this.baseMat=e)}),n.transformNodes.forEach(r=>{"\u5899\u4f53\u5730\u9762"===r.name&&r.getChildMeshes().forEach(a=>{a.renderingGroupId=2}),"\u5730\u677f"===r.name&&r.getChildMeshes().forEach(a=>{a.renderingGroupId=0}),"\u5899\u9762\u88c5\u9970"===r.name&&r.getChildMeshes().forEach(a=>{a.renderingGroupId=3}),"\u673a\u7bb1"===r.name&&r.getChildMeshes().forEach(a=>{a.renderingGroupId=3}),"3\u6392\u7ec4\u5408\u673a\u7bb1"===r.name&&r.getChildMeshes().forEach(a=>{a.name.includes("rect")?a.renderingGroupId=4:(a.renderingGroupId=5,a.material=e,this.itemBox.push(a))})}),this.loadend=!0,this.lightBox(),this.autoRunHostTips()})}updateData(n){void 0!==n&&(n=JSON.parse(JSON.stringify(n)),this._data=n,this.lightBox(),this.loadend&&this.autoRunHostTips())}lightBox(){var n;!(null===(n=this._data)||void 0===n?void 0:n.hostData)||(this.boxPos=[],this.itemBox.forEach((t,e)=>{if(e<this._data.hostData.length){t.material=this.yellowMat;const r=t.getAbsolutePosition();r.y+=.25,this.boxPos.push(r)}else t.material=this.baseMat}))}render(){this.engine.runRenderLoop(()=>{this.scene.render()})}dispose(){var n;null===(n=this.engine)||void 0===n||n.dispose(),this.set1&&clearInterval(this.set1)}resize(){var n;this.canvas.width=this.domdiv.offsetWidth,this.canvas.height=this.domdiv.offsetHeight,null===(n=this.engine)||void 0===n||n.resize()}updateOptions(n){this.setOption(this.defOption,n),this.changeCamera()}changeCamera(){const{x:n,y:t,z:e,tx:r,ty:a,tz:s}=this.nowOption.camera;this.activeCamera&&(this.activeCamera.setPosition(new mt.Vector3(n,t,e)),this.activeCamera.target=new mt.Vector3(r,a,s))}}function Ds(){return ze.mock({"hostData|8":[{boxdata:{"id|+1":1,name:"\u544a\u8b66\u4fe1\u606f",title:"EITEUHOOG@integer(10,100)-\u4f20\u611f\u5668",status:"\u6301\u7eed\u4e2d",time:"\u5df2\u6301\u7eed@integer(1,24)\u5c0f\u65f6",list:[{host:"\u8b66\u62a5\u4e3b\u673a/IP",content:"\u544a\u8b66\u5185\u5bb9"},{host:"@ip",content:"\u54cd\u5e94\u65f6\u95f4(@integer(100,1000)ms) \u8d85\u8fc7\u9608\u503c"}],start:"\u5f00\u59cb\u65f6\u95f4: @datetime"}}]})}const Nh=["container"];function Bh(i,n){if(1&i&&(o.TgZ(0,"th"),o._uU(1),o.qZA()),2&i){const t=o.oxw().$implicit;o.xp6(1),o.Oqu(null==t?null:t.host)}}function Fh(i,n){if(1&i&&(o.TgZ(0,"th"),o._uU(1),o.qZA()),2&i){const t=o.oxw().$implicit;o.xp6(1),o.Oqu(null==t?null:t.content)}}function Lh(i,n){if(1&i&&(o.TgZ(0,"td"),o._uU(1),o.qZA()),2&i){const t=o.oxw().$implicit;o.xp6(1),o.Oqu(null==t?null:t.host)}}function Hh(i,n){if(1&i&&(o.TgZ(0,"td"),o._uU(1),o.qZA()),2&i){const t=o.oxw().$implicit;o.xp6(1),o.Oqu(null==t?null:t.content)}}function Zh(i,n){if(1&i&&(o.TgZ(0,"tr"),o.YNc(1,Bh,2,1,"th",13),o.YNc(2,Fh,2,1,"th",13),o.YNc(3,Lh,2,1,"td",13),o.YNc(4,Hh,2,1,"td",13),o.qZA()),2&i){const t=n.index;o.xp6(1),o.Q6J("ngIf",0==t),o.xp6(1),o.Q6J("ngIf",0==t),o.xp6(1),o.Q6J("ngIf",0!=t),o.xp6(1),o.Q6J("ngIf",0!=t)}}const Wh=function(i,n,t){return{top:i,left:n,opacity:t}},Vh=function(){return[]};let Os=(()=>{class i{constructor(){this.options=Ss,this.optionsData={},this.mockjs=Ds,this.comData=this.mockjs(),this.alarmBox={top:280,left:200,opacity:0},this.alarmTips={},this.hostData=[]}ngOnInit(){}ngAfterViewInit(){let t=function(e){var r;e.alarmBox&&"number"==typeof e.alarmBox.top&&(this.alarmBox.top=e.alarmBox.top,this.alarmBox.left=e.alarmBox.left,this.alarmBox.top+=33),null!=e.i&&(this.alarmTips=null===(r=this.hostData[e.i])||void 0===r?void 0:r.boxdata,this.alarmBox.opacity=1)};setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new Gh(this.container.nativeElement,this.options,t,this);let e=Ds();console.log("data :>> ",e),this.hostData=e.hostData,this.scene.updateData(e)},300)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-babylonhost"]],viewQuery:function(t,e){if(1&t&&o.Gf(Nh,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:21,vars:14,consts:[[2,"width","100%","height","100%","position","absolute"],["container",""],[1,"alarm-box"],[2,"padding","10px 15px","background","url(./assets/computer-room/back-y.png)","background-size","100% 100%"],[1,"alarm-t0"],[1,"alarm-t1"],[1,"alarm-t2"],[1,"alarm-table"],[4,"ngFor","ngForOf"],[1,"alarm-t3"],[1,"alarm-svg",2,"background","url(./assets/computer-room/alarm.png)","background-size","100% 100%"],[1,"alarm-line"],[1,"alarm-line","alarm-rot"],[4,"ngIf"]],template:function(t,e){1&t&&(o._UZ(0,"div",0,1),o.TgZ(2,"div"),o.TgZ(3,"div",2),o.TgZ(4,"div",3),o.TgZ(5,"div",4),o._uU(6),o.qZA(),o.TgZ(7,"div",5),o._uU(8),o.qZA(),o.TgZ(9,"div",6),o.TgZ(10,"span"),o._uU(11),o.qZA(),o.TgZ(12,"span"),o._uU(13),o.qZA(),o.qZA(),o.TgZ(14,"table",7),o.YNc(15,Zh,5,4,"tr",8),o.qZA(),o.TgZ(16,"div",9),o._uU(17),o.qZA(),o._UZ(18,"div",10),o.qZA(),o._UZ(19,"div",11),o._UZ(20,"div",12),o.qZA(),o.qZA()),2&t&&(o.xp6(3),o.Akn(o.kEZ(9,Wh,e.alarmBox.top+"px",e.alarmBox.left+"px",e.alarmBox.opacity||0)),o.xp6(3),o.AsE("",null==e.alarmTips?null:e.alarmTips.name,"",null==e.alarmTips?null:e.alarmTips.id,""),o.xp6(2),o.Oqu(null==e.alarmTips?null:e.alarmTips.title),o.xp6(3),o.Oqu(null==e.alarmTips?null:e.alarmTips.status),o.xp6(2),o.Oqu(null==e.alarmTips?null:e.alarmTips.time),o.xp6(2),o.Q6J("ngForOf",(null==e.alarmTips?null:e.alarmTips.list)||o.DdM(13,Vh)),o.xp6(2),o.hij(" ",null==e.alarmTips?null:e.alarmTips.start," "))},directives:[w.sg,w.O5],styles:[".alarm-box[_ngcontent-%COMP%]{position:absolute;color:#fff;width:330px;min-height:202px;height:min-content;pointer-events:none;-webkit-user-select:none;user-select:none;transform:translate(-160px,-100%)}.alarm-box[_ngcontent-%COMP%]   .alarm-t0[_ngcontent-%COMP%]{font-size:16px;color:#ff9038}.alarm-box[_ngcontent-%COMP%]   .alarm-t1[_ngcontent-%COMP%]{font-size:20px;max-width:235px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer}.alarm-box[_ngcontent-%COMP%]   .alarm-t2[_ngcontent-%COMP%]{font-size:12px;padding-top:10px;color:#ff9038}.alarm-box[_ngcontent-%COMP%]   .alarm-t2[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{color:#fff;background-color:#afafaf59;padding:2px 10px;margin-right:10px}.alarm-box[_ngcontent-%COMP%]   .alarm-table[_ngcontent-%COMP%]{font-size:12px;width:100%;padding-top:10px;border-collapse:unset}.alarm-box[_ngcontent-%COMP%]   .alarm-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#afafaf59;font-weight:normal}.alarm-box[_ngcontent-%COMP%]   .alarm-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{height:20px}.alarm-box[_ngcontent-%COMP%]   .alarm-t3[_ngcontent-%COMP%]{font-size:12px;padding-top:5px}.alarm-box[_ngcontent-%COMP%]   .alarm-svg[_ngcontent-%COMP%]{width:90px;height:90px;position:absolute;right:20px;top:20px}.alarm-line[_ngcontent-%COMP%]{width:1px;height:80px;background-color:#ff9038;margin:-1px 0 1px 80px}.alarm-rot[_ngcontent-%COMP%]{transform:rotate(315deg);transform-origin:top;height:113px}"]}),i})();var wo=p(48709);const jh=["container"];let Ts=(()=>{class i{constructor(){this.options=wo.xc,this.optionsData={},this.mockjs=wo.yk,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new wo.IW(this.container.nativeElement,this.options)},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-babylontrail"]],viewQuery:function(t,e){if(1&t&&o.Gf(jh,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var bo=p(89923);const Uh=["container"];let As=(()=>{class i{constructor(){this.options=bo.xc,this.optionsData={},this.mockjs=bo.yk,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new bo.vg(this.container.nativeElement,this.options)},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){var e;null===(e=this.scene)||void 0===e||e.updateOptions(t)}onchangeDemoData(t){var e;t&&(this.comData=t,null===(e=this.scene)||void 0===e||e.updateData(t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-computerroomvis"]],viewQuery:function(t,e){if(1&t&&o.Gf(Uh,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();const Jh=["container"],Kh=function(i,n,t,e,r,a){return{width:i,height:n,left:t,top:e,right:r,bottom:a,position:"absolute"}};let Es=(()=>{class i{constructor(){this.config={width:"100%",height:"100%",left:"10px",top:"10px",right:"unset",bottom:"unset"},this.widgetPos={},this.defauldOpt={savePos:[],treelenged:{},myNodes:[{id:1,userId:"GLDD-HA-HJ-SR8804-IRF(10.32.65.2)",name:"\u8282\u70b91",value:22,href:"https://www.baidu.com/"},{id:2,userId:"GLDD-HA-HJ-SR8804-IRF(10.32.65.4)",name:"\u8282\u70b92",value:34,href:"https://www.baidu.com/"},{id:3,userId:"GLDD-HA-HJ-SR8804-IRF(10.32.65.6)",name:"\u8282\u70b93",value:55}]}}ngOnInit(){}ngOnChanges(t){var e;null===(e=this.scene)||void 0===e||e.resize()}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngAfterViewInit(){this.scene=new class{constructor(n,t,e,r){this.__id=(new Date).getTime(),this.divWidth=300,this.divHeight=300,this.u_data={},this.defOption={fontSize:16,lineColor:"#00D8FF",lineWidth:3,heightDy:0,defaultColor:"#005bea",myNodes:[],myLinks:[]},this.firstLoad=!0,this.mainRadius=100,this.lenedconfig={},this.isEdittag=!1,this.drawLinttag=!0,this.tempdata={nodes:[],links:[]},this.addNodetag=!1,this.addLinetag=!1,this.urlarr=["assets/tree/p1.png","assets/tree/p2.png","assets/tree/p3.png","assets/tree/p4.png","assets/tree/p5.png","assets/tree/p6.png","assets/tree/p7.png","assets/tree/p8.png","assets/tree/p9.png","assets/tree/p10.png","assets/tree/p11.png"],this.domdiv=n,this.divWidth=n.offsetWidth,this.divHeight=n.offsetHeight,this.setOption(t),this.lenedconfig=t.treelenged,this.callback=e,this.scope=r,n.style.fontSize=this.nowOption.fontSize+"px";let a=this;this.svg=ot.select(n).append("svg").attr("width",this.divWidth).attr("height",this.divHeight).style("position","absolute").on("mousedown",function(){let l=ot.mouse(this);if(1==a.isOnNode||(a.clickd=null,a.moveline.attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0)),a.addLinebutton.style("background-color","#fff"),1==a.addNodetag){let c=a.findNewNodeId();a.nowOption.myNodes.push({id:c,name:"\u8282\u70b9"+c,x:l[0],y:l[1],myNode:!0}),a.addNodetag=!1,a.addNodebutton&&a.addNodebutton.style("background-color","#fff"),a.nowOption.savePos[c]={x:l[0]/a.domdiv.offsetWidth,y:l[1]/a.domdiv.offsetHeight},a.updateSelfData()}}).on("mousemove",function(){if(1==a.addLinetag){let l=ot.mouse(this);a.clickd&&a.moveline.attr("opacity",1).attr("x2",l[0]).attr("y2",l[1]),a.mouseIsonNodes(l[0],l[1])}else a.moveline.attr("opacity",0)}),this.svgDiv=ot.select(n).append("div").attr("width",this.divWidth).attr("height",this.divHeight).style("position","absolute"),this.moveline=this.svg.append("line").attr("stroke","#ffffff").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0);let s=document.createElement("div");s.style.fontSize="14px",s.style.color="#fff",this.svguserDiv=this.domdiv.appendChild(s),this.svguserDiv.style.display="none",this.svgDivLast=ot.select(n).append("div").attr("width",this.divWidth).attr("height",this.divHeight).style("position","absolute"),this.linksG=this.svg.append("g").attr("class","linksG"),this.nodesG=this.svg.append("g").attr("class","nodesG"),this.drawButton()}findNewNodeId(){let n=0,t=[];this.tempdata.nodes.map(e=>{t.push(e.id)});for(let e=0;e<t.length;e++)n<=t[e]&&(n=t[e]+1);return n}mouseIsonNodes(n,t){this.rs=[],this.tempdata.nodes.map((e,r)=>{let a=Math.sqrt(Math.pow(n-e.x,2)+Math.pow(t-e.y,2));a<10?(this.rs.push(a),ot.select(this.myusernodes[r]).attr("fill","#ff0000")):ot.select(this.myusernodes[r]).attr("fill","#005bea")}),this.isOnNode=this.rs.length>0}thisnodered(n){this.tempdata.nodes.map((t,e)=>{this.isEdittag&&(n==t.id?ot.select(this.myusernodes[e]).style("fill","#ff0000"):ot.select(this.myusernodes[e]).style("fill","#005bea"))})}drawallNodeLinks(){let n="\u6240\u6709\u8282\u70b9ID\uff1a";this.tempdata.nodes.map(e=>{n+=e.id+" "}),this.mynodelist=ot.select(this.svguserDiv).append("span").style("position","absolute").style("top","5px").style("left","10px").style("font-size","12px").text(n);let t="\u6240\u6709\u8fde\u63a5\u7ebf\uff1a";this.tempdata.links.map(e=>{t+=e.source+"-"+e.target+" "}),this.mylinkslist=ot.select(this.svguserDiv).append("span").style("position","absolute").style("top","25px").style("left","10px").style("font-size","12px").text(t)}changeNodelings(){let n="\u6240\u6709\u8282\u70b9ID\uff1a";this.tempdata.nodes.map(e=>{n+=e.id+" "}),this.mynodelist.text(n);let t="\u6240\u6709\u8fde\u63a5\u7ebf\uff1a";this.tempdata.links.map(e=>{t+=e.source+"-"+e.target+" "}),this.mylinkslist.text(t)}drawButton(){const n=this;let t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.top="60px",this.svguserDiv.appendChild(t),this.addNodebutton=ot.select(t).append("button").style("position","absolute").style("top","0px").style("width","80px").text("\u6dfb\u52a0\u8282\u70b9").style("color","#000").on("click",function(){n.addNodetag=!0,ot.select(this).style("background-color","#ff0000")}),this.addLinebutton=ot.select(t).append("button").style("position","absolute").style("top","0px").style("left","85px").style("width","80px").text("\u6dfb\u52a0\u8fde\u7ebf").style("color","#000").on("click",function(){n.addLinetag=!0,ot.select(this).style("background-color","#ff0000")});let e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.top="160px",this.svguserDiv.appendChild(e)}addoneline(n,t){if(null==n||null==n)return void window.alert("\u8bf7\u586b\u5199\u6b63\u786e\u7684source id");if(null==t||null==t)return void window.alert("\u8bf7\u586b\u5199\u6b63\u786e\u7684target id");let e=[];this.tempdata.nodes.map(r=>{e.push(r.id)}),-1!=e.indexOf(n)?-1!=e.indexOf(t)?(this.nowOption.myLinks.push({source:n,target:t,myLink:!0}),this.updateSelfData()):window.alert(`\u8282\u70b9ID:${t}\u4e0d\u5b58\u5728`):window.alert(`\u8282\u70b9ID:${n}\u4e0d\u5b58\u5728`)}delateNonodelinks(n){let t=[];if(void 0===n.nodes)return;n.nodes.map(r=>{t.push(r.id)});let e=[];n.links.map((r,a)=>{-1==t.indexOf(r.source)||-1==t.indexOf(r.target)||e.push(r)}),n.links=e}updateData(n){console.log("data :>> ",n,this.nowOption.myLinks,this.nowOption.myNodes),Array.isArray(n.links)||(n.links=[]),Array.isArray(n.nodes)||(n.nodes=[]),this.u_data=JSON.parse(JSON.stringify(n)),this.updateSelfData()}updateSelfData(){this.tempdata={nodes:[],links:[]},console.log("this.nowOption.myNodes :>> ",this.nowOption.myNodes,this.u_data.nodes),Array.isArray(this.u_data.links)||(this.u_data.links=[]),Array.isArray(this.u_data.nodes)||(this.u_data.nodes=[]),this.u_data.nodes.map(n=>{let t=!1;this.nowOption.myNodes.map(e=>{n.id==e.id&&(e.isrepet=!0,t=!0,this.tempdata.nodes.push({id:n.id,name:n.name||"",value:null==n.value?0:n.value}))}),!1===t&&this.tempdata.nodes.push(n)}),this.nowOption.myNodes.map(n=>{n.isrepet||this.tempdata.nodes.push(n)}),this.nowOption.myLinks.map(n=>{this.tempdata.links.push(n)}),this.u_data.links.map(n=>{this.tempdata.links.push(n)}),this.u_data.nodesInfo&&this.tempdata.nodes.map(n=>{this.u_data.nodesInfo.map(t=>{n.userId==t.userId&&(t.name&&(n.name=t.name),t.value&&(n.value=t.value))})}),this.delateNonodelinks(this.tempdata),this.setdata(this.tempdata),this.delateNonodelinks(this.tempdata),this.drawNodes(this.tempdata),this.drawLinks(this.tempdata),this.drawDivTopNodes(this.tempdata),console.log("this.tempdata :>> ",this.tempdata)}setdata(n){let t=this.divHeight/2,e=this.divWidth/2;n.nodes.length>1&&(e=(this.divWidth-200)/(n.nodes.length-1)),n.nodes.forEach((r,a)=>{r.y=t+this.nowOption.heightDy,r.x=100+a*e,null!=this.nowOption.savePos[r.id]&&(r.x=this.domdiv.offsetWidth*this.nowOption.savePos[r.id].x,r.y=this.domdiv.offsetHeight*this.nowOption.savePos[r.id].y),null==r.value&&(r.value=0),this.findColor(r),this.nowOption.savePos[r.id]={x:r.x/this.domdiv.offsetWidth,y:r.y/this.domdiv.offsetHeight}}),this.callback.call(this.scope,this.nowOption.savePos,!0)}findColor(n){let t="ID:"+n.id;if(n.color=this.nowOption.defaultColor,n.imgurl="assets/tree/p1.png",null!=this.lenedconfig[t]){if(1==this.lenedconfig[t].sortType)this.lenedconfig[t].sortValue.map(e=>{e.label==n.value&&(n.color=e.color)});else if(2==this.lenedconfig[t].sortType){let e=this.setGrades(this.lenedconfig[t].numLegend);for(let r=0;r<e.length;r++)n.value>=e[r].min&&n.value<=e[r].max&&(n.color=e[r].col)}n.imgurl=this.lenedconfig[t].imgurl,n.href=this.lenedconfig[t].nodehref,n.userId=void 0===this.lenedconfig[t].userId?"":this.lenedconfig[t].userId}}setGrades(n){if(!n)return;const t=[];for(const e in n){const r=n[e];t.push({min:r.gte?r.gte:0,max:r.lt?r.lt:1/0,col:r.color||this.nowOption.defaultColor})}return t}drawNodes(n){let t=n.nodes,e=this,a=this.nodesG.selectAll("g").data(t).join("g").attr("transform",(s,l)=>`translate(${s.x},${s.y}) scale(1)`).call(ot.drag().on("start",function(d){}).on("drag",function(d){d.x=ot.event.x,d.y=ot.event.y,ot.select(this).attr("transform",`translate(${ot.event.x},${ot.event.y}) scale(1)`),e.drawLinks(n),e.drawDivTopNodes(n),e.nowOption.savePos[d.id]={x:d.x/e.domdiv.offsetWidth,y:d.y/e.domdiv.offsetHeight}}).on("end",function(d){e.callback.call(e.scope,e.nowOption.savePos,!1)}));this.myusernodes=[],a.selectAll("circle").filter(".circle").data(s=>[s]).join("circle").attr("class","circle").attr("cx",0).attr("r","3em").each(function(){e.myusernodes.push(this)}).attr("stroke",s=>s.color).attr("stroke-opacity",.5).attr("stroke-width",2).style("fill",s=>s.color).style("fill-opacity",0).style("cursor","pointer").on("click",function(s){e.moveline.attr("x1",s.x).attr("y1",s.y).attr("x2",s.x).attr("y2",s.y),e.thisnodered(s.id),e.clickd&&e.clickd.id!=s.id?(1==e.addLinetag&&(e.addoneline(e.clickd.id,s.id),e.addLinebutton.style("background-color","#fff"),e.addLinetag=!1),e.moveline.attr("x1",e.clickd.x).attr("y1",e.clickd.y).attr("x2",s.x).attr("y2",s.y),e.clickd=null):e.clickd=s})}getHeight(n){const t=window.getComputedStyle(n),e=n.offsetHeight,r=parseFloat(t.borderTopWidth);return e-parseFloat(t.borderBottomWidth)-r-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)}drawDivTopNodes(n){let t=[];n.nodes.map(a=>{t.push(a)});let e=this,r=this.svgDiv.selectAll("div").data(t).join("div").style("position","absolute").style("transform",(a,s)=>`translate(${a.x}px,${a.y}px) scale(1)`).style("color","#fff").style("pointer-events",a=>e.isEdittag?"none":"auto");r.selectAll("span").filter(".title-card").data(a=>[a]).join("span").attr("class","title-card").style("transform","translate(-50%,0%)").style("position","absolute").style("top","3em").style("width","max-content").style("padding","10px 10px 5px").style("font-size","1em").style("text-align","center").style("letter-spacing","2px").style("color",a=>"#fff").text(function(a){return e.isEdittag?`${a.id}:${a.name}`:a.name}).on("click",a=>{null==a.href||""==a.href||this.openwindow(a.href)}),r.selectAll("span").filter(".title-userid").data(a=>[a]).join("span").attr("class","title-userid").style("transform","translate(-50%,0%)").style("position","absolute").style("top","4.5em").style("width","max-content").style("padding","10px 10px 5px").style("font-size","1em").style("text-align","center").style("letter-spacing","2px").style("color","#fff").style("pointer-events","none").html(a=>e.isEdittag?`${null==a.userId?"":a.userId}`:""),r.selectAll("img").filter(".titleimg").data(a=>[a]).join("img").attr("class","titleimg").style("transform","translate(-50%,-50%)").style("position","absolute").style("width","6em").style("max-width","none").attr("src",a=>this.getUploadImg(a.imgurl)).style("pointer-events","none")}openwindow(n){window.open(n,"newwindow","top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no")}getUploadImg(n){if(!n)return"assets/tree/p1.png";if(/^assets.*/.test(n))return n;{let t=window.__sid,e=window.__senseid;if(t){(-1==n.indexOf("http://")||n.indexOf("https://"))&&(n=location.protocol+"//"+location.host+n);let r=n.split("?key="),a={method:"POST"};return a.url=r[0],a.param={key:decodeURIComponent(r[1])},`/sense-api/share/url/getFileData?json=${encodeURIComponent(JSON.stringify(a))}&id=${e}`}return n+"&Authorization="+`Bearer ${this.getToken()}`}}getToken(){if(this.TOKEN)return this.TOKEN;let n=localStorage.getItem("_token")||"";return n&&(n=JSON.parse(n).token),this.TOKEN=n,n}drawLinks(n){this.linsAddxy(n);let t=n.links;this.linksG.selectAll("line").filter(".line1").data(t).join("line").attr("class","line1").attr("stroke",this.nowOption.lineColor).attr("stroke-width",this.nowOption.lineWidth).attr("x1",e=>e.sxy.x).attr("y1",e=>e.sxy.y).attr("x2",e=>e.txy.x).attr("y2",e=>e.txy.y).attr("opacity",e=>this.isEdittag?e.myLink?1:.5:1)}linsAddxy(n){for(let t=0;t<n.links.length;t++)for(let e=0;e<n.nodes.length;e++)n.links[t].source==n.nodes[e].id&&(n.links[t].sxy={x:n.nodes[e].x,y:n.nodes[e].y}),n.links[t].target==n.nodes[e].id&&(n.links[t].txy={x:n.nodes[e].x,y:n.nodes[e].y})}setOption(n){void 0===n&&(n={}),this.nowOption=this.deepCopy(this.defOption,n)}deepCopy(n,t){let e=Object.assign({},n);for(let r in t)"object"!=typeof n[r]||null===n[r]||Array.isArray(n[r])?void 0!==t[r]&&(e[r]=t[r]):e[r]=this.deepCopy(n[r],t[r]);return e}dispose(){this.svg.remove()}resize(){this.divHeight=this.domdiv.offsetHeight,this.divWidth=this.domdiv.offsetWidth,this.svg.attr("width",this.divWidth).attr("height",this.divHeight),this.updateSelfData()}setfontSize(n){this.nowOption.fontSize=n,this.domdiv.style.fontSize=this.nowOption.fontSize+"px",this.updateSelfData()}setlineWidth(n){+n<1&&(n=1),this.nowOption.lineWidth=n,this.updateSelfData()}clearPos(){this.nowOption.savePos={},this.updateSelfData()}setlineColor(n){this.nowOption.lineColor=n,this.updateSelfData()}clearmyNode(){this.nowOption.myNodes=[],this.nowOption.myLinks=[],this.updateSelfData()}setLenged(n,t){this.lenedconfig=n,this.nowOption.defaultColor=t,this.updateSelfData()}seteditTag(n){this.isEdittag=n,this.u_data.nodes&&this.updateSelfData(),this.svguserDiv.style.display=!0===n?"block":"none"}}(this.container.nativeElement,this.defauldOpt,function(s,l){this.config.savePos=s},this),this.scene.updateData({nodes:[],nodesInfo:[{id:1,userId:"BJTY-HU7865-SQL(10.132.65.2)",name:"\u8282\u70b91",value:92},{id:2,userId:"BJTY-HU7865-SQL(10.132.65.4)",name:"\u8282\u70b92",value:44},{id:3,userId:"BJTY-HU7865-SQL(10.132.65.6)",name:"\u8282\u70b93",value:55}],links:[{source:1,target:2},{source:2,target:3}]})}ngOnDestroy(){this.scene&&this.scene.dispose()}changStyle(){this.editTag=!this.editTag,this.scene.seteditTag(this.editTag)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-usertree"]],viewQuery:function(t,e){if(1&t&&o.Gf(Jh,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{config:"config",widgetPos:"widgetPos"},features:[o.TTD],decls:5,vars:10,consts:[["container",""],[2,"margin","10px","position","absolute","z-index","99"],["nz-button","",3,"click"]],template:function(t,e){1&t&&(o._UZ(0,"div",null,0),o.TgZ(2,"div",1),o.TgZ(3,"button",2),o.NdJ("click",function(){return e.changStyle()}),o._uU(4),o.qZA(),o.qZA()),2&t&&(o.Akn(o.HTZ(3,Kh,e.config.width,e.config.height,e.config.left,e.config.top,e.config.right,e.config.bottom)),o.xp6(4),o.hij(" ",e.editTag?"\u7f16\u8f91\u6a21\u5f0f":"\u9884\u89c8\u6a21\u5f0f"," "))},styles:["@keyframes treedash{to{stroke-dashoffset:-100}}"]}),i})();class ef{constructor(n,t,e,r){this.opentag="close",this.mainRadius=100,this.title="",this.defOption={rbackground:"#5476aa90",leftPer:60},this.icons=["app","application","browser","csharp","database","db2","go","group","java","memcached","mongodb","mq","mysql","net","netcore","network","nodejs","nosql","oracle","python","redis","ruby","server","system","web","webservice"],this.svg=ot.select(n).append("svg").style("position","absolute"),this.setOption(t);const a=ot.select(n).append("div").attr("calss","divleft").style("width","100%").style("height","100%").style("position","absolute").style("background-color",this.nowOption.lbackground);this.divleft=a;const s=ot.select(n).append("div").attr("calss","divright").style("width",100-this.nowOption.leftPer+"%").style("height","100%").style("position","absolute").style("right","0px").style("background-color",this.nowOption.rbackground).attr("opentag","close").style("display","none");this.divright=s,ot.select(n).append("div").attr("calss","divbutton").style("position","absolute").style("right","1em").style("top","1em").style("width","1em").style("height","1em").style("cursor","pointer").style("background-image","url(./assets/tree/shouqi.svg)").style("background-size","100% 100%").style("background-repeat","no-repeat").on("click",()=>{"open"==s.attr("opentag")?this.closeright():this.openright()}),this.titleDiv=s.append("div").attr("class","divright-title").text(this.title).style("position","absolute").style("float","left").style("margin-left","1em").style("margin-top","1em"),this.addHexagon(),this.addIcon(),this.init()}closeright(){this.divleft.style("width","100%"),this.divright.style("display","none"),this.divright.attr("opentag","close"),this.opentag!=this.divright.attr("opentag")&&this.resize(),this.opentag="close"}openright(){this.divleft.style("width",`${this.nowOption.leftPer}%`),this.divright.style("width",100-this.nowOption.leftPer+"%"),this.divright.style("display","block"),this.divright.attr("opentag","open"),this.opentag!=this.divright.attr("opentag")&&this.resize(),this.opentag="open"}setOption(n){void 0===n&&(n={}),this.nowOption=this.deepCopy(this.defOption,n)}deepCopy(n,t){const e=Object.assign({},n);for(const r in t)"object"!=typeof n[r]||null===n[r]||Array.isArray(n[r])?void 0!==t[r]&&(e[r]=t[r]):e[r]=this.deepCopy(n[r],t[r]);return e}init(){this.treeleft=new class{constructor(n,t,e,r){this.__id=(new Date).getTime(),this.ldivWidth=300,this.ldivHeight=300,this.u_data={},this.defOption={fontSize:12,lineWidth:1,savePos:{},treelenged:{},defaultColor:"#005bea",margintop:60,marginleft:100,boxsize:16,flowline:!0,levellIcon:[]},this.mainRadius=100,this.firstLoad=!0,this.treeDirection="up",this.topDiv=n,this.setOption(t),this.divleft=n,this.ldivWidth=n.node().offsetWidth,this.ldivHeight=n.node().offsetHeight,this.callback=e,this.scope=r,this.svg=n.append("svg").attr("width",this.ldivWidth).attr("height",this.ldivHeight).style("position","absolute"),this.svgDiv=n.append("div").attr("width",this.ldivWidth).attr("height",this.ldivHeight).style("position","absolute"),this.backrcetG=this.svg.append("g").attr("class","backrcetG"),this.linksG=this.svg.append("g").attr("class","linksG"),this.nodesG=this.svg.append("g").attr("class","nodesG"),this.defscolor=this.svg.append("defs"),this.defspath=this.svg.append("defs"),this.levelicondefs=this.svg.append("defs")}colorsTofilter(n){this.defscolor.selectAll("filter").remove(),n.push(this.nowOption.defaultColor);for(let t=0;t<n.length;t++){const e=this.defscolor.append("filter").attr("id",this.__id+"-"+n[t]),r=this.colortorgb(n[t]);e.append("feColorMatrix").attr("type","matrix").attr("values",`\n                ${r.r} 0 0 0 0\n                0 ${r.g} 0 0 0\n                0 0 ${r.b} 0 0\n                0 0 0 1 0`)}}colortorgb(n){const t=ot.rgb(n);return{r:t.r/255,g:t.g/255,b:t.b/255}}setdata(n){const t=new Set,e=[],r=n.levelArray.map(v=>v.levelName||null);n.nodes.forEach((v,m)=>{const S=r.indexOf(v.levelName||"");v.zIndex=S>-1?S+1:m%3+1,t.add(v.zIndex),e.push(v.zIndex)});const a={};e.forEach(v=>{a[v]?a[v]++:a[v]=1});const s=t.size;if(s<1)return;let l=this.ldivHeight/2;s>1&&(l=(this.ldivHeight-2*this.nowOption.margintop)/(r.length-1)),Array.from(t).sort((v,m)=>+v-m);const f={};n.nodes.forEach(v=>{v.y=(v.zIndex-1)*l+this.nowOption.margintop;const S=v.zIndex;f[S]?f[S]++:f[S]=1,v.x=2*this.nowOption.fontSize+f[S]*((this.ldivWidth-4*this.nowOption.fontSize)/(a[v.zIndex]+1))});const h=[];for(let v=0;v<r.length;v++)h.push(v*l+this.nowOption.margintop);this.drawbackRect(n.levelArray,h,l/2),this.addLevelIcon()}drawbackRect(n,t,e){n.forEach((r,a)=>{var s;r.cid=a,r.y=t[a],r.y1=t[a]-e,r.y2=t[a]+e,this.firstLoad&&(null===(s=this.nowOption.levellIcon[a])||void 0===s?void 0:s.open)&&void 0!==r.topodata&&(this.firstLoad=!1,setTimeout(()=>{this.callback.call(this.scope,{node:{name:r.levelName},data:r.topodata||{}})},100))}),this.backrcetG.selectAll("rect").filter(".backrect").data(n).join("rect").attr("class","backrect").attr("x",0).attr("y",r=>r.y1).attr("width",this.ldivWidth).attr("height",r=>r.y2-r.y1).attr("fill",this.nowOption.lbackground).attr("fill-opacity",r=>r.cid%2==0?.4:.6).on("click",r=>{this.callback.call(this.scope,{node:{name:r.levelName},data:r.topodata||{}})}),this.backrcetG.selectAll("rect").filter(".backrect2").data(n).join("rect").attr("class","backrect2").attr("x","0.5em").attr("y",r=>r.y).attr("width","1em").attr("height","1em").style("transform","translateY(-0.5em)").style("fill",(r,a)=>`url(#${this.__id}treesvg${a})`),this.backrcetG.selectAll("text").data(n).join("text").attr("x","1.8em").attr("y",r=>r.y).attr("text-anchor","start").attr("dominant-baseline","middle").attr("fill","#ffffff").text(r=>r.levelName)}addLevelIcon(){this.levelicondefs.selectAll("pattern").data(this.nowOption.levellIcon).join("pattern").attr("id",(t,e)=>`${this.__id}treesvg${e}`).attr("x","0%").attr("y","0%").attr("height","100%").attr("width","100%").attr("viewBox",`0 0 ${this.mainRadius} ${this.mainRadius}`).selectAll("image").data(t=>[t]).join("image").attr("x","0%").attr("y","0%").attr("height",this.mainRadius).attr("width",this.mainRadius).attr("xlink:href",t=>t.img)}updateData(n){if(null==n.nodes||n.nodes.length<1)return;this.u_data=n,this.setdata(n),n.links.forEach(e=>{e.source=n.nodes.find(r=>r.id==e.from),e.target=n.nodes.find(r=>r.id==e.to)}),n.links=n.links.filter(e=>e.source&&e.target);const t=new Set;n.nodes.map(e=>{void 0===e.color&&(e.color=this.nowOption.defaultColor),t.add(e.color)}),this.colorsTofilter(Array.from(t)),this.drawNodes(n),this.drawLinks(n)}drawNodes(n){const t=n.nodes,e=this,a=this.nodesG.selectAll("g").data(t).join("g").attr("transform",s=>`translate(${s.x},${s.y}) scale(${this.nowOption.nodeScale||1})`);a.call(ot.drag().on("start",function(d){}).on("drag",function(d){d.x=ot.event.x,d.y=ot.event.y,ot.select(this).attr("transform",`translate(${ot.event.x},${ot.event.y}) scale(${e.nowOption.nodeScale||1})`),e.drawLinks(n),e.nowOption.savePos[d.id]={x:d.x/e.divleft.node().offsetWidth,y:d.y/e.divleft.node().offsetHeight}}).on("end",function(d){e.callback.call(e.scope,{pos:e.nowOption.savePos})})),a.on("click",s=>{const l={nodes:[],links:[]};s.topodata&&(s.topodata.nodes&&(l.nodes=s.topodata.nodes),s.topodata.links&&(l.links=s.topodata.links)),this.callback.call(this.scope,{node:s,data:l})}),a.selectAll("circle").filter(".circle").data(s=>[s]).join("circle").attr("class","circle").attr("cx",0).attr("cy",0).attr("r","30").style("filter",s=>`grayscale(1) url('#${this.__id+"-"+s.color}')`).style("fill","url(#treesvgHexagon)").style("cursor","pointer"),a.selectAll("polygon").filter(".polygon").data(s=>!0===s.marking?[s]:[]).join("polygon").attr("class","polygon").attr("points","29.6560222 0 60 18.4939356 60 53.0207176 31.0716603 69.9132389 0.18337131 53.0207176 0.18337131 18.4939356").attr("fill","none").attr("stroke","#FFF").attr("stroke-width","2").attr("stroke-dasharray",[5,5]).attr("stroke-dashoffset",0).attr("transform","scale(0.9) translate(-30, -35)").style("animation","treedash 8s linear infinite"),a.selectAll("rect").filter(".rect").data(s=>[s]).join("rect").attr("class","rect").attr("x",-this.nowOption.boxsize).attr("y",-this.nowOption.boxsize).attr("width",2*this.nowOption.boxsize).attr("height",2*this.nowOption.boxsize).style("fill",s=>`url(#treesvg${s.iconType||"application"})`).style("cursor","pointer"),a.selectAll("circle").filter(".circle2").data(s=>null!=s.warningNum?[s]:[]).join("circle").attr("class","circle2").attr("cx",13).attr("cy",-20).attr("r","8").attr("stroke","#ffffff").attr("stroke-width",1).attr("fill",s=>s.color),a.selectAll("text").filter(".text").data(s=>null!=s.warningNum?[s]:[]).join("text").attr("class","text").attr("x",13).attr("y",-19).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","12px").attr("fill","#FFF").text(s=>s.warningNum).style("pointer-events","none")}drawLinks(n){this.defspath.selectAll("path").remove(),this.linsAddxy(n);const t=n.links;this.linksG.selectAll("path").filter(".line0").data(t).join("path").attr("class","line0").attr("stroke",r=>r.target.color).attr("stroke-width",this.nowOption.lineWidth+1).attr("stroke-opacity",.75).attr("fill","none").attr("d",r=>{const a=this.crpath(r);return this.defspath.append("path").attr("d",a[1]).attr("id",this.__id+"-"+r.source.id+"-"+r.target.id),a[0]}),this.linksG.selectAll("path").filter(".line").data(()=>this.nowOption.flowline?t:[]).join("path").attr("class","line").attr("stroke",r=>r.target.color).attr("stroke-width",this.nowOption.lineWidth+2).attr("stroke-opacity",1).attr("stroke-dasharray",[10,190]).attr("stroke-dashoffset",0).attr("fill","none").attr("stroke-linejoin","unset").attr("stroke-linecap","unset").style("animation","treedash 4s linear infinite").attr("d",r=>this.crpath(r)[0]),this.linksG.selectAll("text").filter(".text").data(t).join("text").attr("class","text").attr("text-anchor","middle").attr("dy","-8").attr("opacity",.9).attr("fill",r=>r.target.color).selectAll("textPath").data(r=>[r]).join("textPath").attr("xlink:href",r=>"#"+this.__id+"-"+r.source.id+"-"+r.target.id).text(r=>r.info||"").attr("startOffset","50%")}crpath(n){Math.abs(n.txy.x-n.sxy.x),Math.abs(n.txy.y-n.sxy.y);const a=[n.sxy.x,n.sxy.y],s=[n.txy.x,n.txy.y],l=[n.sxy.x,n.txy.y],c=[n.txy.x,n.sxy.y],d=`M${a[0]},${a[1]} C${l[0]},${l[1]} ${c[0]},${c[1]} ${s[0]},${s[1]}`;let f=d;return n.sxy.x>n.txy.x&&(f=`M${s[0]},${s[1]} C${c[0]},${c[1]} ${l[0]},${l[1]} ${a[0]},${a[1]}`),[d,f]}linsAddxy(n){for(let t=0;t<n.links.length;t++)n.links[t].sxy={x:n.links[t].source.x,y:n.links[t].source.y},n.links[t].txy={x:n.links[t].target.x,y:n.links[t].target.y}}setOption(n){void 0===n&&(n={}),this.nowOption=this.deepCopy(this.defOption,n)}deepCopy(n,t){const e=Object.assign({},n);for(const r in t)"object"!=typeof n[r]||null===n[r]||Array.isArray(n[r])?void 0!==t[r]&&(e[r]=t[r]):e[r]=this.deepCopy(n[r],t[r]);return e}dispose(){this.svg.remove()}resize(){this.ldivHeight=this.divleft.node().offsetHeight,this.ldivWidth=this.divleft.node().offsetWidth,this.svg.attr("width",this.ldivWidth).attr("height",this.ldivHeight),this.updateData(this.u_data)}setfontSize(n){this.nowOption.fontSize=n,this.divleft.style.fontSize=this.nowOption.fontSize+"px",this.updateData(this.u_data)}clearPos(){this.nowOption.savePos={},this.updateData(this.u_data)}updateOptions(n){this.setOption(n),this.updateData(this.u_data)}}(this.divleft,this.nowOption,e=>{e.data&&(this.title=e.node.levelName||e.node.name||"",this.titleDiv.text(this.title),"close"==this.opentag&&e.data.nodes.length>0?(this.openright(),this.treeright.updateData(e.data)):this.treeright.updateData(e.data))},this),this.treeright=new class{constructor(n,t,e,r){this.__id=(new Date).getTime(),this.ldivWidth=300,this.ldivHeight=300,this.u_data={},this.simulation=ot.forceSimulation(),this.defOption={fontSize:12,lineColor:"#00D8FF",lineWidth:1,savePos:{},treelenged:{},defaultColor:"#005bea",margintop:80,marginleft:100,boxsize:10},this.treeDirection="up",this.topDiv=n,this.setOption(t),this.d3dom=n,this.ldivWidth=n.node().offsetWidth,this.ldivHeight=n.node().offsetHeight,this.callback=e,this.scope=r,n.style.fontSize=this.nowOption.fontSize+"px",this.svg=n.append("svg").attr("width",this.ldivWidth).attr("height",this.ldivHeight).style("position","absolute"),this.linksG=this.svg.append("g").attr("class","linksG"),this.nodesG=this.svg.append("g").attr("class","nodesG"),this.defscolor=this.svg.append("defs"),this.defspath=this.svg.append("defs")}colorsTofilter(n){this.defscolor.selectAll("filter").remove(),n.push(this.nowOption.defaultColor);for(let t=0;t<n.length;t++){let e=this.defscolor.append("filter").attr("id",this.__id+"-"+n[t]),r=this.colortorgb(n[t]);e.append("feColorMatrix").attr("type","matrix").attr("values",`\n                ${r.r} 0 0 0 0\n                0 ${r.g} 0 0 0\n                0 0 ${r.b} 0 0\n                0 0 0 1 0`)}}colortorgb(n){let t=ot.rgb(n);return{r:t.r/255,g:t.g/255,b:t.b/255}}testdata(){return{nodes:[{id:"1",name:"1",value:34},{id:"2",name:"2",value:12,marking:!0},{id:"3",name:"3",value:62},{id:"4",name:"4",value:37},{id:"5",name:"5",value:52},{id:"6",name:"6",value:34}],links:[{source:"1",target:"2",info:"123ms / 1%"},{source:"1",target:"3",info:"123ms / 2%"},{source:"1",target:"4",info:"123ms / 3%"},{source:"1",target:"5",info:"123ms / 4%"},{source:"1",target:"6",info:"123ms / 5%"},{source:"5",target:"6",info:"123ms / 6%"}]}}updateData(n){if(!n.nodes)return;this.u_data=n,this.simulation.alphaTarget(.3).restart(),this.sto&&clearTimeout(this.sto),this.sto=setTimeout(()=>{this.simulation.alphaTarget(0)},2e3);let t=new Set;n.nodes.map(e=>{void 0===e.color&&(e.color=this.nowOption.defaultColor),t.add(e.color)}),this.colorsTofilter(Array.from(t)),n.links.map(e=>{e.source=e.from,e.target=e.to}),this.simulation.nodes(n.nodes),this.simulation.force("collide",ot.forceCollide().radius(40)),this.simulation.force("charge",ot.forceManyBody().strength(-10)),this.simulation.force("center",ot.forceCenter(this.ldivWidth/2,this.ldivHeight/2)),this.simulation.force("link",ot.forceLink(n.links).id(e=>e.id).distance(this.ldivWidth/3)),this.simulation.on("tick",()=>{this.drawNodes(n),this.drawLinks(n)}),this.drawNodes(n),this.drawLinks(n)}drawNodes(n){let t=n.nodes,e=this,a=this.nodesG.selectAll("g").data(t).join("g").attr("transform",(s,l)=>`translate(${s.x},${s.y}) scale(${this.nowOption.nodeScale||1})`).call(ot.drag().on("start",function(d){}).on("drag",function(d){d.x=ot.event.x,d.y=ot.event.y,ot.select(this).attr("transform",`translate(${ot.event.x},${ot.event.y}) scale(${e.nowOption.nodeScale||1})`),e.drawLinks(n),e.nowOption.savePos[d.id]={x:d.x/e.d3dom.node().offsetWidth,y:d.y/e.d3dom.node().offsetHeight}}).on("end",function(d){e.callback.call(e.scope,e.nowOption.savePos)}));a.selectAll("circle").filter(".circle").data(s=>[s]).join("circle").attr("class","circle").attr("cx",0).attr("cy",0).attr("r","20").style("filter",s=>`grayscale(1) url('#${this.__id+"-"+s.color}')`).style("fill","url(#treesvgHexagon)").style("cursor","pointer"),a.selectAll("polygon").filter(".polygon").data(s=>!0===s.marking?[s]:[]).join("polygon").attr("class","polygon").attr("points","29.6560222 0 60 18.4939356 60 53.0207176 31.0716603 69.9132389 0.18337131 53.0207176 0.18337131 18.4939356").attr("fill","none").attr("stroke","#FFF").attr("stroke-width","2").attr("stroke-dasharray",[5,5]).attr("stroke-dashoffset",0).attr("transform"," scale(0.6) translate(-30, -35)").style("animation","treedash 8s linear infinite"),a.selectAll("rect").filter(".rect").data(s=>[s]).join("rect").attr("class","rect").attr("x",-this.nowOption.boxsize).attr("y",-this.nowOption.boxsize).attr("width",2*this.nowOption.boxsize).attr("height",2*this.nowOption.boxsize).style("fill",s=>`url(#treesvg${s.iconType||"application"})`).style("cursor","pointer")}drawLinks(n){this.defspath.selectAll("path").remove(),this.linsAddxy(n);let t=n.links;this.linksG.selectAll("path").filter(".line").data(t).join("path").attr("class","line").attr("stroke",r=>r.target.color).attr("stroke-width",this.nowOption.lineWidth+1).attr("stroke-opacity",1).attr("fill","none").attr("stroke-linejoin","unset").attr("stroke-linecap","unset").attr("d",r=>{const a=this.crpath(r);return this.defspath.append("path").attr("d",a[1]).attr("id",this.__id+"-"+r.source.id+"-"+r.target.id),a[0]}),this.linksG.selectAll("text").filter(".text").data(t).join("text").attr("class","text").attr("text-anchor","middle").attr("fill",r=>r.target.color).attr("opacity",.9).attr("dy","-5").selectAll("textPath").data(r=>[r]).join("textPath").attr("xlink:href",r=>"#"+this.__id+"-"+r.source.id+"-"+r.target.id).text(r=>r.info).attr("startOffset","50%")}crpath(n){let t=Math.abs(n.txy.x-n.sxy.x),e=Math.abs(n.txy.y-n.sxy.y),a=[n.sxy.x,n.sxy.y],s=[n.txy.x,n.txy.y],l=[n.sxy.x,n.txy.y],c=[n.txy.x,n.sxy.y];l=c=[Math.min(n.sxy.x,n.txy.x)+t/2,Math.min(n.sxy.y,n.txy.y)+e/2];const v=`M${a[0]},${a[1]} C${l[0]},${l[1]} ${c[0]},${c[1]} ${s[0]},${s[1]}`;let m=v;return n.sxy.x>n.txy.x&&(m=`M${s[0]},${s[1]} C${c[0]},${c[1]} ${l[0]},${l[1]} ${a[0]},${a[1]}`),[v,m]}linsAddxy(n){for(let t=0;t<n.links.length;t++)n.links[t].sxy={x:n.links[t].source.x,y:n.links[t].source.y},n.links[t].txy={x:n.links[t].target.x,y:n.links[t].target.y}}setOption(n){void 0===n&&(n={}),this.nowOption=this.deepCopy(this.defOption,n)}deepCopy(n,t){let e=Object.assign({},n);for(let r in t)"object"!=typeof n[r]||null===n[r]||Array.isArray(n[r])?void 0!==t[r]&&(e[r]=t[r]):e[r]=this.deepCopy(n[r],t[r]);return e}dispose(){this.svg.remove()}resize(){this.ldivHeight=this.d3dom.node().offsetHeight,this.ldivWidth=this.d3dom.node().offsetWidth,this.svg.attr("width",this.ldivWidth).attr("height",this.ldivHeight),this.updateData(this.u_data)}clearPos(){this.nowOption.savePos={},this.updateData(this.u_data)}updateOptions(n){this.setOption(n),this.updateData(this.u_data)}}(this.divright,this.nowOption,e=>{},this)}updateData(n){let t=n[0]||{};t=this.testdatahierarcty(),this.treeleft.updateData(t)}createData(n){const t={nodes:[],links:[]};for(let e=0;e<n;e++)t.nodes.push({id:e,name:e,value:e,marking:e===Math.floor(Math.random()*n-1),color:this.d3randomcolor(),iconType:this.icons[Math.random()*this.icons.length|0]});for(let e=1;e<n;e++)t.links.push({from:e,to:Math.floor(Math.random()*e),info:"link"+e});return t}testdata(){return{name:"root",id:0,color:"#e62e2e",iconType:this.icons[Math.random()*this.icons.length|0],children:[{name:"C1 #1",id:1,linkinfo:"C1 #1 info",marking:!0,color:this.d3randomcolor(),iconType:this.icons[Math.random()*this.icons.length|0],children:[{name:"C2 #1",id:2,linkinfo:"C2 #1 info",topodata:this.createData(6),color:this.d3randomcolor(),iconType:this.icons[Math.random()*this.icons.length|0]},{name:"C2 #2",id:3,linkinfo:"C2 #2 info",topodata:this.createData(4),color:this.d3randomcolor(),iconType:this.icons[Math.random()*this.icons.length|0]},{name:"C2 #3",id:4,linkinfo:"C2 #3 info",topodata:this.createData(5),color:this.d3randomcolor(),iconType:this.icons[Math.random()*this.icons.length|0]},{name:"C2 #4",id:5,linkinfo:"C2 #4 info",topodata:this.createData(6),iconType:this.icons[Math.random()*this.icons.length|0],children:[{name:"C3 #4 #1",id:9,linkinfo:"C3 #4 #1 info",color:this.d3randomcolor(),iconType:this.icons[Math.random()*this.icons.length|0]}]},{name:"C2 #5",id:6,linkinfo:"C2 #5 info",topodata:this.createData(7),color:this.d3randomcolor(),iconType:this.icons[Math.random()*this.icons.length|0],warningNum:1},{name:"C2 #6",id:7,linkinfo:"C2 #6 info",topodata:this.createData(8),color:this.d3randomcolor(),iconType:this.icons[Math.random()*this.icons.length|0],warningNum:2},{name:"C2 #7",id:8,linkinfo:"C2 #7 info",topodata:this.createData(9),color:this.d3randomcolor(),iconType:this.icons[Math.random()*this.icons.length|0]}]}]}}testdatahierarcty(){return{levelArray:[{levelName:"\u4e1a\u52a1\u7cfb\u7edf",topodata:this.createData(6)},{levelName:"\u670d\u52a1",topodata:this.createData(4)},{levelName:"\u8fdb\u7a0b",topodata:this.createData(5)},{levelName:"\u4e3b\u673a",topodata:this.createData(6)}],nodes:[{levelName:"\u4e1a\u52a1\u7cfb\u7edf",id:"1",color:this.d3randomcolor(),iconType:this.icons[Math.random()*this.icons.length|0]},{levelName:"\u670d\u52a1",id:"2",topodata:this.createData(6),color:this.d3randomcolor(),iconType:this.icons[Math.random()*this.icons.length|0]},{levelName:"\u670d\u52a1",id:"3",color:this.d3randomcolor(),iconType:this.icons[Math.random()*this.icons.length|0]},{levelName:"\u670d\u52a1",id:"4",color:this.d3randomcolor(),iconType:this.icons[Math.random()*this.icons.length|0]},{levelName:"\u670d\u52a1",id:"5",color:this.d3randomcolor(),iconType:this.icons[Math.random()*this.icons.length|0]},{levelName:"\u670d\u52a1",id:"6",warningNum:2,color:this.d3randomcolor(),iconType:this.icons[Math.random()*this.icons.length|0]},{levelName:"\u670d\u52a1",id:"7",warningNum:1,color:this.d3randomcolor(),iconType:this.icons[Math.random()*this.icons.length|0]},{levelName:"\u670d\u52a1",id:"8",color:this.d3randomcolor(),iconType:this.icons[Math.random()*this.icons.length|0]},{levelName:"\u8fdb\u7a0b",id:"9",marking:!0,color:this.d3randomcolor(),iconType:this.icons[Math.random()*this.icons.length|0]},{levelName:"\u4e3b\u673a",id:"10",color:this.d3randomcolor(),iconType:this.icons[Math.random()*this.icons.length|0]}],links:[{from:"10",to:"9"},{from:"9",to:"2"},{from:"9",to:"3"},{from:"9",to:"4"},{from:"9",to:"5"},{from:"9",to:"6"},{from:"9",to:"7"},{from:"9",to:"8",info:"9/8"},{from:"5",to:"1"}]}}d3randomcolor(){return ot.scaleOrdinal(ot.schemeCategory10).range()[Math.floor(10*Math.random())]}addHexagon(){const n=this.svg.append("defs");["Hexagon"].forEach(t=>{n.append("pattern").attr("id",`treesvg${t}`).attr("x","0%").attr("y","0%").attr("height","100%").attr("width","100%").attr("viewBox",`0 0 ${this.mainRadius} ${this.mainRadius}`).append("image").attr("x","0%").attr("y","0%").attr("height",this.mainRadius).attr("width",this.mainRadius).attr("xlink:href",`./assets/tree/${t}.svg`)})}addIcon(){const n=this.svg.append("defs");this.icons.forEach(t=>{n.append("pattern").attr("id",`treesvg${t}`).attr("x","0%").attr("y","0%").attr("height","100%").attr("width","100%").attr("viewBox",`0 0 ${this.mainRadius} ${this.mainRadius}`).append("image").attr("x","0%").attr("y","0%").attr("height",this.mainRadius).attr("width",this.mainRadius).attr("xlink:href",`./assets/tree/svgicon/${t}.svg`)})}dispose(){var n,t;null===(n=this.treeleft)||void 0===n||n.dispose(),null===(t=this.treeright)||void 0===t||t.dispose()}resize(){var n,t;null===(n=this.treeleft)||void 0===n||n.resize(),null===(t=this.treeright)||void 0===t||t.resize()}updateOptions(n){var t,e;this.setOption(n),null===(t=this.treeleft)||void 0===t||t.updateOptions(n),null===(e=this.treeright)||void 0===e||e.updateOptions(n),this.divright.style("background-color",this.nowOption.rbackground)}}const nf=["container"],rf=function(i,n){return{fontSize:i,transform:n}};let Ms=(()=>{class i{constructor(){this.config={width:"100%",height:"100%",left:"0px",top:"0px",right:"unset",bottom:"unset"},this.options={scale:1,fontSize:14,leftPer:60,nodeScale:1,lineWidth:1,margintop:120,lbackground:"#5476aa60",rbackground:"#5476aa90",defaultColor:"#005bea",flowline:!0,levellIcon:[{img:"./assets/tree/level1.svg",open:!1},{img:"./assets/tree/level2.svg",open:!0},{img:"./assets/tree/level3.svg",open:!1},{img:"./assets/tree/level4.svg",open:!1}]},this.optionsData={scale:{name:"\u7f29\u653e",type:"slider",min:0,max:4,step:.1},nodeScale:{name:"\u8282\u70b9\u7f29\u653e",type:"slider",min:.1,max:4,step:.1},lineWidth:{name:"\u8fde\u7ebf\u5bbd\u5ea6",type:"slider",min:.1,max:10,step:1},fontSize:{name:"\u5b57\u4f53\u5927\u5c0f",type:"number"},leftPer:{name:"\u5de6\u4fa7\u767e\u5206\u6bd4",type:"number"},margintop:{name:"\u4e0a\u4e0b\u8fb9\u8ddd",type:"number"},lbackground:{name:"\u5de6\u4fa7\u80cc\u666f\u989c\u8272",type:"fill"},rbackground:{name:"\u53f3\u4fa7\u80cc\u666f\u989c\u8272",type:"fill"},defaultColor:{name:"\u8282\u70b9\u9ed8\u8ba4\u989c\u8272",type:"fill"},flowline:{name:"\u6d41\u7ebf\u5f00\u5173",type:"switch"},levellIcon:{name:"\u5c42\u7ea7\u56fe\u6807",type:"tabs2"}}}ngAfterViewInit(){this.scene=new ef(this.container.nativeElement,this.options,function(e){},this),this.scene.updateData([])}ngOnInit(){}ngOnChanges(){var t;null===(t=this.scene)||void 0===t||t.resize()}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}onchangeOption(t){this.scene&&this.scene.updateOptions(t)}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-treeandtopo"]],viewQuery:function(t,e){if(1&t&&o.Gf(nf,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{config:"config"},features:[o.TTD],decls:2,vars:5,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1),2&t&&o.Akn(o.WLB(2,rf,e.options.fontSize+"px","scale("+e.options.scale+")"))},styles:["@keyframes treedash{to{stroke-dashoffset:-200}}"]}),i})();const sf=["container"],lf=function(i,n,t,e,r,a){return{width:i,height:n,left:t,top:e,right:r,bottom:a,position:"absolute"}};let Ps=(()=>{class i{constructor(){this.config={width:"100%",height:"100%",left:"0px",top:"0px",right:"unset",bottom:"unset"}}ngOnInit(){}ngAfterViewInit(){this.scene=new class{constructor(n,t,e,r){this.__id=(new Date).getTime(),this.ldivWidth=300,this.ldivHeight=300,this.u_data={},this.simulation=ot.forceSimulation(),this.defOption={fontSize:12,lineColor:"#00D8FF",lineWidth:1,heightDy:0,savePos:{},treelenged:{},defaultColor:"#005bea",margintop:50,marginleft:100,leftPer:.6},this.firstLoad=!0,this.mainRadius=100,this.lenedconfig={},this.treeDirection="up",this.setOption(t),this.divleft=ot.select(n),this.ldivWidth=this.divleft.node().offsetWidth,this.ldivHeight=this.divleft.node().offsetHeight,this.lenedconfig=t.treelenged,this.callback=e,this.scope=r,this.divleft.style.fontSize=this.nowOption.fontSize+"px",this.svg=this.divleft.append("svg").attr("width",this.ldivWidth).attr("height",this.ldivHeight).style("position","absolute"),this.linksG=this.svg.append("g").attr("class","linksG"),this.nodesG=this.svg.append("g").attr("class","nodesG"),this.svg.append("defs").html('\n            <filter id="colorMatrix">\n                <feColorMatrix type="matrix" values="\n                0.16 0 0 0 0\n                0 0.47 0 0 0\n                0 0 1 0 0\n                0 0 0 1 0" />\n            </filter>\n                '),this.addfindImg(),this.defspath=this.svg.append("defs")}testdata(){return{name:"root",id:0,children:[{name:"C1 #1",id:1,linkinfo:"C1 #1 info",marking:!0,children:[{name:"C2 #1",id:2,linkinfo:"C2 #1 info"},{name:"C2 #2",id:3,linkinfo:"C2 #2 info"},{name:"C2 #3",id:4,linkinfo:"C2 #3 info"},{name:"C2 #4",id:5,linkinfo:"C2 #4 info",children:[{name:"C3 #4 #1",id:9,linkinfo:"C3 #4 #1 info"}]},{name:"C2 #5",id:6,linkinfo:"C2 #5 info"},{name:"C2 #6",id:7,linkinfo:"C2 #6 info"},{name:"C2 #7",id:8,linkinfo:"C2 #7 info",children:[{name:"C3 #7 #1",id:10,linkinfo:"C3 #7 #1 info"},{name:"C3 #7 #2",id:11,linkinfo:"C3 #7 #2 info"}]}]}]}}updateData(n){let t=[{id:1,name:"1",parent:""},{id:2,name:"2",parent:"1"},{id:3,name:"3",parent:"1"},{id:4,name:"4",parent:"3"},{id:5,name:"5",parent:"3"},{id:6,name:"6",parent:"1"},{id:7,name:"7",parent:"1"},{id:8,name:"8",parent:"7"},{id:9,name:"9",parent:"1"}];for(let d=10;d<=80;d++)t.push({id:d,name:d.toString(),parent:(Math.floor(Math.random()*(d-1))+1).toString()});n=ot.stratify().id(function(d){return d.id}).parentId(function(d){return d.parent})(t),this.u_data=n;let a=ot.hierarchy(n),l=ot.tree().size([this.ldivWidth,-(this.ldivHeight-2*this.nowOption.margintop)])(a),c={nodes:l.descendants(),links:l.links()};c.nodes.map(d=>{d.y+=this.ldivHeight-this.nowOption.margintop}),console.log("nodedata :>> ",c),this.drawNodes(c),this.drawLinks(c)}drawNodes(n){let t=n.nodes,e=this,a=this.nodesG.selectAll("g").data(t).join("g").attr("transform",(s,l)=>`translate(${s.x},${s.y}) scale(${s.scale||1})`).call(ot.drag().on("start",function(d){}).on("drag",function(d){d.x=ot.event.x,d.y=ot.event.y,ot.select(this).attr("transform",`translate(${ot.event.x},${ot.event.y}) scale(${d.scale||1})`),e.drawLinks(n),e.nowOption.savePos[d.id]={x:d.x/e.divleft.node().offsetWidth,y:d.y/e.divleft.node().offsetHeight}}).on("end",function(d){e.callback.call(e.scope,e.nowOption.savePos)}));a.selectAll("circle").filter(".circle").data(s=>[s]).join("circle").attr("class","circle").attr("cx",0).attr("cy",0).attr("r","15").style("filter","grayscale(1) url('#colorMatrix')").style("fill","url(#treesvgHexagon)").style("cursor","pointer"),a.selectAll("polygon").filter(".polygon").data(s=>!0===s.data.marking?[s]:[]).join("polygon").attr("class","polygon").attr("points","29.6560222 0 60 18.4939356 60 53.0207176 31.0716603 69.9132389 0.18337131 53.0207176 0.18337131 18.4939356").attr("fill","none").attr("stroke","#FFF").attr("stroke-width","2").attr("stroke-dasharray",[5,5]).attr("stroke-dashoffset",0).attr("transform"," scale(0.6) translate(-30, -35)").style("animation","treedash 8s linear infinite"),a.selectAll("text").filter(".text").data(s=>[s]).join("text").attr("class","text").attr("x",0).attr("y",0).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","12px").attr("fill","#FFF").text(s=>s.data.data.name).style("pointer-events","none")}drawLinks(n){this.defspath.selectAll("path").remove(),this.linsAddxy(n);let t=n.links;this.linksG.selectAll("path").filter(".line").data(t).join("path").attr("class","line").attr("stroke",this.nowOption.lineColor).attr("stroke-width",this.nowOption.lineWidth+1).attr("stroke-opacity",1).attr("stroke-dasharray",[4,6]).attr("stroke-dashoffset",0).attr("fill","none").attr("stroke-linejoin","unset").attr("stroke-linecap","unset").style("animation","treedash 4s linear infinite").attr("d",r=>{const a=this.crpath(r);return this.defspath.append("path").attr("d",a[1]).attr("id",this.__id+"-"+r.source.data.id+"-"+r.target.data.id),a[0]}),this.linksG.selectAll("text").filter(".text").data(t).join("text").attr("class","text").attr("text-anchor","middle").attr("dy","-10").attr("fill",this.nowOption.lineColor).selectAll("textPath").data(r=>[r]).join("textPath").attr("xlink:href",r=>"#"+this.__id+"-"+r.source.data.id+"-"+r.target.data.id).text(r=>r.target.data.linkinfo).attr("startOffset","60%")}crpath(n){Math.abs(n.txy.x-n.sxy.x),Math.abs(n.txy.y-n.sxy.y);let a=[n.sxy.x,n.sxy.y],s=[n.txy.x,n.txy.y],l=[n.sxy.x,n.txy.y],c=[n.txy.x,n.sxy.y];Math.min(n.sxy.x,n.txy.x),Math.min(n.sxy.y,n.txy.y);const h=`M${a[0]},${a[1]} C${l[0]},${l[1]} ${c[0]},${c[1]} ${s[0]},${s[1]}`;let v=h;return n.sxy.x>n.txy.x&&(v=`M${s[0]},${s[1]} C${c[0]},${c[1]} ${l[0]},${l[1]} ${a[0]},${a[1]}`),[h,v]}linsAddxy(n){for(let t=0;t<n.links.length;t++)n.links[t].sxy={x:n.links[t].source.x,y:n.links[t].source.y},n.links[t].txy={x:n.links[t].target.x,y:n.links[t].target.y}}setOption(n){void 0===n&&(n={}),this.nowOption=this.deepCopy(this.defOption,n)}addfindImg(){let n=this.svg.append("defs");["Hexagon","Hexagon","Hexagon"].forEach(t=>{n.append("pattern").attr("id",`treesvg${t}`).attr("x","0%").attr("y","0%").attr("height","100%").attr("width","100%").attr("viewBox",`0 0 ${this.mainRadius} ${this.mainRadius}`).append("image").attr("x","0%").attr("y","0%").attr("height",this.mainRadius).attr("width",this.mainRadius).attr("xlink:href",`./assets/tree/${t}.svg`)})}deepCopy(n,t){let e=Object.assign({},n);for(let r in t)"object"!=typeof n[r]||null===n[r]||Array.isArray(n[r])?void 0!==t[r]&&(e[r]=t[r]):e[r]=this.deepCopy(n[r],t[r]);return e}dispose(){this.svg.remove()}resize(){this.ldivHeight=this.divleft.node().offsetHeight,this.ldivWidth=this.divleft.node().offsetWidth,this.svg.attr("width",this.ldivWidth).attr("height",this.ldivHeight),this.updateData(this.u_data)}setfontSize(n){this.nowOption.fontSize=n,this.divleft.style.fontSize=this.nowOption.fontSize+"px",this.updateData(this.u_data)}setheightDy(n){this.nowOption.heightDy=n,this.updateData(this.u_data)}clearPos(){this.nowOption.savePos={},this.updateData(this.u_data)}setLenged(n,t){this.lenedconfig=n,this.nowOption.defaultColor=t,this.updateData(this.u_data)}}(this.container.nativeElement,{},function(e){},this),this.scene.updateData([])}ngOnChanges(){var t;null===(t=this.scene)||void 0===t||t.resize()}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-d3hierarchy"]],viewQuery:function(t,e){if(1&t&&o.Gf(sf,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{config:"config"},features:[o.TTD],decls:2,vars:9,consts:[["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",null,0),2&t&&o.Akn(o.HTZ(2,lf,e.config.width,e.config.height,e.config.left,e.config.top,e.config.right,e.config.bottom))},styles:["@keyframes treedash{to{stroke-dashoffset:-100}}"]}),i})();const pf=class extends Ne.H{constructor(n,t,e,r){super(),this.divWidth=300,this.divHeight=300,this.u_data={},this.defOption={fontSize:12,lineColor:"#166be4",lineWidth:2,heightDy:0,savePos:{1:{x:.13981042654028436,y:.35422740524781343},2:{x:.14010663507109006,y:.8411078717201166}},defaultColor:"#005bea",margintop:50,marginleft:100,leftPer:.6},this.setOption(this.defOption,t),this.divdom=ot.select(n),this.divWidth=this.divdom.node().offsetWidth,this.divHeight=this.divdom.node().offsetHeight,this.callback=e,this.scope=r,this.divdom.style.fontSize=this.nowOption.fontSize+"px",this.svg=this.divdom.append("svg").attr("width",this.divWidth).attr("height",this.divHeight).style("position","absolute"),this.marker=this.svg.append("defs"),this.marker.html(`\n        <marker id="triangle" fill="${this.nowOption.lineColor}" markerUnits="strokeWidth"  markerWidth="5" markerHeight="4" refX="4" refY="2" orient="auto">\n         <path d="M 0 0 L 5 2 L 0 4 z" />\n        </marker>\n        `),this.svg.append("defs").html(`\n              <filter id="Gaussian${this.__id}" x = '-20' y = '-20' width = '200' height = '200'>\n                  <feGaussianBlur in="SourceGraphic" stdDeviation="4" />\n              </filter>\n        `),this.linksG=this.svg.append("g").attr("class","linksG"),this.nodesG=this.svg.append("g").attr("class","nodesG"),this.svg.append("defs").html('\n            <filter id="colorMatrix">\n                <feColorMatrix type="matrix" values="\n                0.16 0 0 0 0\n                0 0.47 0 0 0\n                0 0 1 0 0\n                0 0 0 1 0" />\n            </filter>\n                '),this.defspath=this.svg.append("defs"),this.rot=ot.stratify().id(function(a){return a.id}).parentId(function(a){return a.parent})}updateData(n){this.u_data=n;let e=this.rot(n),r=ot.hierarchy(e),s=ot.tree().size([this.divHeight-2*this.nowOption.margintop,this.divWidth-2*this.nowOption.margintop])(r),l={nodes:s.descendants(),links:s.links()};l.nodes.map(c=>{[c.x,c.y]=[c.y,c.x],c.x+=this.nowOption.margintop,c.y+=this.nowOption.margintop}),console.log("nodedata :>> ",l),l.nodes.map(c=>{this.nowOption.savePos[c.data.id]&&(c.x=this.nowOption.savePos[c.data.id].x*this.divdom.node().offsetWidth,c.y=this.nowOption.savePos[c.data.id].y*this.divdom.node().offsetHeight)}),this.drawNodes(l),this.drawLinks(l)}drawNodes(n){let t=n.nodes,e=this,a=this.nodesG.selectAll("g").data(t).join("g").attr("transform",(s,l)=>`translate(${s.x},${s.y}) scale(${s.scale||1})`).call(ot.drag().on("start",function(d){}).on("drag",function(d){d.x=ot.event.x,d.y=ot.event.y,ot.select(this).attr("transform",`translate(${ot.event.x},${ot.event.y}) scale(${d.scale||1})`),e.drawLinks(n),e.nowOption.savePos[d.data.id]={x:d.x/e.divdom.node().offsetWidth,y:d.y/e.divdom.node().offsetHeight}}).on("end",function(d){e.callback.call(e.scope,e.nowOption.savePos)}));a.selectAll("text").filter(".text").data(s=>[s]).join("text").attr("class","text").attr("x",0).attr("y",60).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","12px").attr("fill","#FFF").text(s=>s.data.data.name).style("pointer-events","none"),a.selectAll("foreignObject").remove(),a.append("foreignObject").attr("width","100").attr("height","100").attr("transform","scale(0.8)").attr("x",-50).attr("y",-50).append("xhtml:div").style("width","100%").style("height","100%").style("box-shadow",s=>`inset 0 0 10px 1px ${s.data.data.color||this.nowOption.lineColor}`).style("border-radius","10px").html(s=>`\n            <img style="position:absolute;width:70%;height:70%;margin:15px" src="./assets/topo253d/${s.data.data.iconType}.png" alt="">\n            `)}drawLinks(n){this.defspath.selectAll("path").remove(),this.linsAddxy(n);let t=n.links;this.linksG.selectAll("path").filter(".line2").data(t).join("path").attr("class","line2").attr("stroke",this.nowOption.lineColor).attr("stroke-width",this.nowOption.lineWidth+1).attr("stroke-opacity",1).attr("fill","none").attr("stroke-linejoin","unset").attr("stroke-linecap","unset").attr("d",r=>(r.sxy.y===r.txy.y&&(r.txy.y+=.5),this.crpath(r)[0])).style("marker-end",r=>"url(#triangle)").attr("filter","url(#Gaussian"+this.__id+")"),this.linksG.selectAll("path").filter(".line").data(t).join("path").attr("class","line").attr("stroke",this.nowOption.lineColor).attr("stroke-width",this.nowOption.lineWidth).attr("stroke-opacity",1).attr("stroke-dasharray",[4,6]).attr("stroke-dashoffset",0).attr("fill","none").attr("stroke-linejoin","unset").attr("stroke-linecap","unset").style("animation","treedash 4s linear infinite").attr("d",r=>{const a=this.crpath(r);return this.defspath.append("path").attr("d",a[1]).attr("id",this.__id+"-"+r.source.data.id+"-"+r.target.data.id),a[0]}).style("marker-end",r=>"url(#triangle)"),this.linksG.selectAll("text").filter(".text").data(t).join("text").attr("class","text").attr("text-anchor","end").attr("dy","-10").attr("fill","#FFF").attr("fill-opacity",.6).selectAll("textPath").data(r=>[r]).join("textPath").attr("xlink:href",r=>"#"+this.__id+"-"+r.source.data.id+"-"+r.target.data.id).text(r=>null!=r.target.data.data.linkinfo?r.target.data.data.linkinfo:"").attr("startOffset","95%")}crpath(n){let t=40,e=0,r=[n.txy.x-n.sxy.x,n.txy.y-n.sxy.y],a=180*Math.atan2(r[1],r[0])/Math.PI+180,s=!1;a>=70&&a<110?(t=0,e=-40,s=!0):a>=110&&a<250?(t=40,e=0):a>=250&&a<290?(t=0,e=40,s=!0):(t=-40,e=0);let l=[n.sxy.x+t,n.sxy.y+e],c=[n.txy.x-t,n.txy.y-e],d=[c[0],l[1]],f=[l[0],c[1]];s&&([d,f]=[f,d]);const h=`M${l[0]},${l[1]} C${d[0]},${d[1]} ${f[0]},${f[1]} ${c[0]},${c[1]}`;let v=h;return n.sxy.x>n.txy.x&&(v=`M${c[0]},${c[1]} C${f[0]},${f[1]} ${d[0]},${d[1]} ${l[0]},${l[1]}`),[h,v]}linsAddxy(n){for(let t=0;t<n.links.length;t++)n.links[t].sxy={x:n.links[t].source.x,y:n.links[t].source.y},n.links[t].txy={x:n.links[t].target.x,y:n.links[t].target.y}}dispose(){this.svg.remove()}resize(){this.divHeight=this.divdom.node().offsetHeight,this.divWidth=this.divdom.node().offsetWidth,this.svg.attr("width",this.divWidth).attr("height",this.divHeight),this.updateData(this.u_data)}updateOptions(n){this.setOption(this.defOption,n),this.marker.html(`\n        <marker id="triangle" fill="${this.nowOption.lineColor}" markerUnits="strokeWidth"  markerWidth="5" markerHeight="4" refX="4" refY="2" orient="auto">\n         <path d="M 0 0 L 5 2 L 0 4 z" />\n        </marker>\n        `)}},df=["container"],uf=function(i,n,t,e,r,a){return{width:i,height:n,left:t,top:e,right:r,bottom:a,position:"absolute"}};let ks=(()=>{class i{constructor(){this.config={width:"100%",height:"100%",left:"0px",top:"0px",right:"unset",bottom:"unset"}}ngOnInit(){}ngAfterViewInit(){this.scene=new pf(this.container.nativeElement,{},function(a){console.log("pos :>> ",a)},this),this.scene.updateData([{id:1,iconType:"0",name:"\u624b\u673a\u94f6\u884c",parent:""},{id:2,iconType:"1",name:"\u9632\u706b\u5899",parent:"1",linkinfo:"102ms/ 17aps"},{id:3,iconType:"2",name:"F5",parent:"2",linkinfo:"103ms/ 17aps"},{id:4,iconType:"3",name:"\u7f51\u5173",parent:"3",linkinfo:"104ms/ 17aps",color:"#a04532"},{id:5,iconType:"4",name:"\u624b\u673a\u94f6\u884c\u540e\u7aef",parent:"4",linkinfo:"105ms/ 17aps"},{id:6,iconType:"12",name:"ESB-GW",parent:"5",linkinfo:"106ms/ 17aps"},{id:7,iconType:"15",name:"\u53cd\u6b3a\u8bc8\u4e2d\u5fc3",parent:"6",linkinfo:"107ms/ 17aps"},{id:8,iconType:"15",name:"\u6570\u636e\u5e93",parent:"7",linkinfo:"108ms/ 17aps"},{id:9,iconType:"16",name:"\u7406\u8d22\u7cfb\u7edf",parent:"6",linkinfo:"109ms/ 17aps"},{id:10,iconType:"16",name:"\u6838\u5fc3\u8d22\u52a1\u7cfb\u7edf",parent:"9",linkinfo:"110ms/ 17aps"},{id:11,iconType:"15",name:"\u6570\u636e\u5e93",parent:"10",linkinfo:"111ms/ 17aps"},{id:12,iconType:"16",name:"\u57fa\u91d1\u7cfb\u7edf",parent:"6",linkinfo:"112ms/ 17aps"},{id:13,iconType:"15",name:"\u6570\u636e\u5e93",parent:"12",linkinfo:"113ms/ 17aps",color:"#a04532"}])}ngOnChanges(){var t;null===(t=this.scene)||void 0===t||t.resize()}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-d3hierarchy"]],viewQuery:function(t,e){if(1&t&&o.Gf(df,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{config:"config"},features:[o.TTD],decls:2,vars:9,consts:[["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",null,0),2&t&&o.Akn(o.HTZ(2,uf,e.config.width,e.config.height,e.config.left,e.config.top,e.config.right,e.config.bottom))},styles:["@keyframes treedash{to{stroke-dashoffset:-100}}"]}),i})();var li=p(11386),Is=p(14146),Rs=p(67896),zs=p(49825);const vf=["container"],gf=function(i,n){return{fontSize:i,transform:n}};let Gs=(()=>{class i{constructor(){this.config={},this.widgetPos={},this.defaultOpt={},this.fixedOptions={legendType:null,textLegend:[{label:"\u4e25\u91cd",color:"#EA5252"},{label:"\u4e00\u822c",color:"#FFCA14"},{label:"\u826f\u597d",color:"#0087db"}],numLegend:[{gte:80,lt:1/0,color:"#FF544D"},{gte:60,lt:80,color:"#FCB33C"},{gte:0,lt:60,color:"#11F2DB"}]},this.options={scale:1,fontSize:14,heightDy:0,viewAngle:20,rotateDx:1,timeInterval:4,ciyMax:!1,margintop:1,marginleft:1,defaultColor:"#11F2DB",lineLegend:[{gte:0,lt:60,color:"#11F2DB"},{gte:60,lt:80,color:"#FCB33C"},{gte:80,color:"#FF544D"}],nodeLegend:[{gte:0,lt:60,color:"#11F2DB"},{gte:60,lt:80,color:"#FCB33C"},{gte:80,color:"#FF544D"}]},this.optionsData={scale:{name:"\u7f29\u653e",type:"slider",min:0,max:4,step:.1},fontSize:{name:"\u5b57\u4f53\u5927\u5c0f",type:"number"},heightDy:{name:"\u4e0a\u4e0b\u504f\u79fb",type:"number"},viewAngle:{name:"\u76f8\u673a\u89c6\u89d2",type:"number"},rotateDx:{name:"\u65cb\u8f6c\u901f\u5ea6",type:"number"},timeInterval:{name:"\u8f6e\u64ad\u95f4\u9694",type:"number"},ciyMax:{name:"\u4f18\u5148\u8f6e\u64ad\u6700\u5927\u7ea7\u522b",type:"switch"},margintop:{name:"tip\u4e0a\u8fb9\u8ddd",type:"number"},marginleft:{name:"tip\u5de6\u8fb9\u8ddd",type:"number"},defaultColor:{name:"\u9ed8\u8ba4\u989c\u8272",type:"fill"},nodeLegend:{name:"\u8282\u70b9\u989c\u8272\u914d\u7f6e",type:"tabs",template:{name:"\u503c\u57df<%=i+1%>",children:{gte:{name:"\u5927\u4e8e\u7b49\u4e8e",type:"number"},lt:{name:"\u5c0f\u4e8e",type:"number"},color:{name:"\u989c\u8272",type:"fill"}}}},lineLegend:{name:"\u8fde\u7ebf\u989c\u8272\u914d\u7f6e",type:"tabs",template:{name:"\u503c\u57df<%=i+1%>",children:{gte:{name:"\u5927\u4e8e\u7b49\u4e8e",type:"number"},lt:{name:"\u5c0f\u4e8e",type:"number"},color:{name:"\u989c\u8272",type:"fill"}}}}}}ngOnInit(){}ngOnChanges(t){var e;null===(e=this.scene)||void 0===e||e.resize()}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}onchangeOption(t){this.scene&&this.scene.updateOptions(t)}ngAfterViewInit(){this.scene=new class{constructor(n,t,e,r){this.__id=(new Date).getTime(),this.divWidth=300,this.divHeight=300,this.u_data={},this.tweeng=new Pe.ZA,this.rk=2,this.getNum=40,this.__t=0,this.defOption={fontSize:16,linecolor:"#00D8FF",lineWidth:2,heightDy:0,viewAngle:40,rotateDx:10,linenameopacity:.8,linelineopacity:.9,linewidth:1,linelightcolor:"#ffffff",nodeLegend:{},lineLegend:[{gte:80,color:"#FF544D"},{gte:60,lt:80,color:"#FCB33C"},{gte:0,lt:60,color:"#11F2DB"}]},this.line2groupArr=[],this.allgroup=new N.ZAu,this.line2group=new N.ZAu,this.line1group=new N.ZAu,this.pointgroup=new N.ZAu,this.pointArray=[],this.titleArray=[],this.allTweens={},this.sk=80,this.render=()=>{if(this.request=requestAnimationFrame(this.render),this.renderer.render(this.scene,this.camera),this.labelRenderer.render(this.scene,this.camera),this.tweeng.update(),this.__t%this.rk==0)for(let a=0;a<this.line2groupArr.length;a++){const s=this.line2groupArr[a].colors,l=s.pop(),c=s.pop(),d=s.pop();s.unshift(d,c,l),this.line2groupArr[a].geometry.setColors(s)}this.__t++,this.allgroup.rotation.y=this.__t*this.nowOption.rotateDx*1e-4},this.domdiv=n,this.divWidth=n.offsetWidth,this.divHeight=n.offsetHeight,this.setOption(t),this.callback=e,this.scope=r,n.style.fontSize=this.nowOption.fontSize+"px",this.scene=new N.xsS,this.sk=this.divWidth<=this.divHeight?this.divWidth/this.nowOption.viewAngle:this.divHeight/this.nowOption.viewAngle,this.camera=new N.iKG(-this.divWidth/this.sk,this.divWidth/this.sk,this.divHeight/this.sk,-this.divHeight/this.sk,-2001,2e4),this.camera.position.set(0,5,80),this.camera.lookAt(0,0,0),this.renderer=new N.CP7({alpha:!0,antialias:!0,preserveDrawingBuffer:"true"===localStorage.getItem("drawingBuffer")}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(0,0),this.renderer.setSize(this.divWidth,this.divHeight),this.labelRenderer=new li.M,this.labelRenderer.setSize(this.divWidth,this.divHeight),this.labelRenderer.domElement.style.position="absolute",this.labelRenderer.domElement.style.top=0,this.init(),this.scene.add(this.allgroup),this.allgroup.add(this.line2group),this.line2group.name="line2group",this.allgroup.add(this.line1group),this.line1group.name="line1group",this.allgroup.add(this.pointgroup),this.pointgroup.name="pointgroup"}init(){this.domdiv.appendChild(this.renderer.domElement),this.domdiv.appendChild(this.labelRenderer.domElement),this.render()}updateData(n){if(this.u_data=n,void 0===n.nodes||""===n.nodes||null===n.nodes)return;const t=n.nodes;if(t.length<1||null==t.length)return;const e=n.links;this.cleartopo();const r=this.setdata(n),a=[];for(let l=0;l<r;l++)a[l]=[];for(let l=0;l<r;l++)t.map(c=>{c.realLay==l+1&&a[l].push(c)});const s=[];if(a[0].map(l=>{1==l.warming&&s.push(l)}),a.map(l=>{const c=this.scale(l.length);this.drawNodes(l,c)}),e.map(l=>{const c=l.source;let d=[0,0,0];const f=l.target;let h=[0,0,0];const v=l.value||0;t.map(m=>{m.id==c&&(d=m.pos),m.id==f&&(h=m.pos)}),this.drawFatLine([...d,...h],v)}),s.length>0){let l=0;this.setfi=setInterval(()=>{if(l>=s.length){clearInterval(this.setfi);let c=0;this.set1=setInterval(()=>{this.callback.call(this.scope,a[0][c]),this.pointArray.map(d=>{if(d.name===a[0][c].id){this.allTweens.a&&this.allTweens.a.stop();const f={s:0};this.allTweens.a=new Pe.kX(f,this.tweeng).to({s:3.14*this.nowOption.timeInterval},1e3*this.nowOption.timeInterval).easing(Pe.oY.Linear.None).onUpdate(()=>{const h=1+Math.abs(2*Math.sin(f.s));d.scale.set(h,h,h)}),this.allTweens.a.start()}else d.scale.set(1,1,1)}),this.titleArray.map(d=>{d.attr("cid")==a[0][c].id?d.style("opacity",1):d.style("opacity",.6)}),c++,c>=a[0].length&&(c=0)},1e3*this.nowOption.timeInterval+10)}else this.callback.call(this.scope,s[l]),this.pointArray.map(c=>{if(c.name===s[l].id){this.allTweens.a&&this.allTweens.a.stop();const d={s:0};this.allTweens.a=new Pe.kX(d,this.tweeng).to({s:3.14*this.nowOption.timeInterval},1e3*this.nowOption.timeInterval).easing(Pe.oY.Linear.None).onUpdate(()=>{const f=1+Math.abs(2*Math.sin(d.s));c.scale.set(f,f,f)}),this.allTweens.a.start()}else c.scale.set(1,1,1)}),this.titleArray.map(c=>{c.attr("cid")==s[l].id?c.style("opacity",1):c.style("opacity",.6)});l++},1e3*this.nowOption.timeInterval)}else{let l=0;this.set1=setInterval(()=>{this.callback.call(this.scope,a[0][l]),this.pointArray.map(c=>{if(c.name===a[0][l].id){this.allTweens.a&&this.allTweens.a.stop();const d={s:0};this.allTweens.a=new Pe.kX(d,this.tweeng).to({s:3.14*this.nowOption.timeInterval},1e3*this.nowOption.timeInterval).easing(Pe.oY.Linear.None).onUpdate(()=>{const f=1+Math.abs(2*Math.sin(d.s));c.scale.set(f,f,f)}),this.allTweens.a.start()}else c.scale.set(1,1,1)}),this.titleArray.map(c=>{c.attr("cid")==a[0][l].id?c.style("opacity",1):c.style("opacity",.6)}),l++,l>=a[0].length&&(l=0)},1e3*this.nowOption.timeInterval+10)}}cleartopo(){this.set1&&clearInterval(this.set1),this.setfi&&clearInterval(this.setfi),this.line2groupArr=[],this.pointArray=[],this.titleArray=[],this.emptyGroup(this.pointgroup),this.emptyGroup(this.line1group),this.emptyGroup(this.line2group)}drawNodes(n,t){const e=n.length;if(n.length<1)return;const r=2*Math.PI/e;for(let s=0;s<e;s++){const l=-t*Math.sin(r*s),c=t*Math.cos(r*s),d=this.addName(n[s].name,n[s].id,n[s].color);d.name=n[s].id,this.pointArray.push(d),d.position.set(l,n[s].y,c),n[s].ang=r*s,n[s].pos=[l,n[s].y,c]}this.drawLines(60,t).position.y=n[0].y}ptopoints(n){const t=new N.Pa4(n[0],n[1],n[2]),e=new N.Pa4(n[3],n[4],n[5]);if(t.distanceTo(e)<.1){const a=(new N.Pa4).lerpVectors(t,e,.5);a.y+=5;const l=new N.YT8([t,a,e],!1,"catmullrom",.5).getPoints(this.getNum),c=[];return l.map(d=>{c.push(d.x,d.y,a.z)}),{p:c,lp:[a.x,a.y,a.z]}}{const a=(new N.Pa4).lerpVectors(t,e,.5);if(t.y===e.y){a.y+=8;const s=new N.mXe(t,a,e),l=s.getPoints(this.getNum),c=[];l.map(f=>{c.push(f.x,f.y,f.z)});const d=s.getPoint(.5);return{p:c,lp:[d.x,d.y,d.z]}}{const s=new N.YT8([t,a,e],!1,"catmullrom",.2),l=s.getPoints(this.getNum),c=[];l.map(f=>{c.push(f.x,f.y,f.z)});const d=s.getPoint(.5);return{p:c,lp:[d.x,d.y,d.z]}}}}drawFatLine(n,t){const e=new zs.L,r=this.ptopoints(n);e.setPositions(r.p);const a=[],s=this.valueTocolor(t),c=(Math.floor(Math.random()*this.getNum),ot.scaleLinear().domain([0,this.getNum+1]).range([ot.color(s).darker(2),ot.color(s).brighter(2)]));for(let h=0,v=this.getNum+1;h<v;h++){const m=ot.color(c(h));a.push(m.r/255,m.g/255,m.b/255)}e.setColors(a);const d=new Rs.Y({linewidth:this.nowOption.linewidth,vertexColors:!0,opacity:this.nowOption.linelineopacity,transparent:!0});d.resolution=new N.FM8(this.domdiv.offsetWidth,this.domdiv.offsetHeight);const f=new Is.w(e,d);return f.colors=a,this.line2group.add(f),this.line2groupArr.push(f),f}valueTocolor(n){let e=this.nowOption.defaultColor;return this.nowOption.lineLegend.map(r=>{n>=r.gte&&n<=(null==r.lt?1/0:r.lt)&&(e=r.color)}),e}drawLines(n,t){const e=[],r=2*Math.PI/n;for(let c=0;c<n;c++){const d=-t*Math.sin(r*c),f=t*Math.cos(r*c);e.push(new N.Pa4(d,0,f))}e.push(e[0]);const a=new N.FT0({color:16777215,dashSize:.5,gapSize:.3,transparent:!0,opacity:.5}),s=(new N.u9r).setFromPoints(e),l=new N.x12(s,a);return l.computeLineDistances(),this.line1group.add(l),l}addName(n,t,e){const r=new N.vBJ({color:e}),a=new N.Aip(.2,16,16),s=new N.Kj0(a,r);this.pointgroup.add(s);const l=document.createElement("div");l.style.fontSize="1em",l.style.color="#ffffff",l.style.position="absolute",l.style.marginTop="1.2em";const c=new li.j(l);s.add(c);const d=ot.select(l).attr("cid",t);return d.text(n).style("opacity",0).transition().duration(2e3).style("opacity",.6),this.titleArray.push(d),s}addPoints(){const n=new N.vBJ({color:16777215}),t=new N.Aip(.3),e=new N.Kj0(t,n);return this.scene.add(e),e}setdata(n){const t=new Set,e=[];n.nodes.forEach(h=>{(null==h.zIndex||null==h.zIndex||""==h.zIndex)&&(h.zIndex=1),t.add(h.zIndex),e.push(h.zIndex)});const r={};e.forEach(h=>{r[h]?r[h]++:r[h]=1});const a=[];for(const h in r)a.push(r[h]);this.scale=ot.scaleLinear().domain([Math.min(...a),Math.max(...a)]).rangeRound([20,40]);const s=t.size;if(s<1)return;let l=0;s>1&&(l=10/(s-1));const d=Array.from(t);d.sort((h,v)=>+h-v);const f=d.length;return n.nodes.forEach(h=>{const v=d.indexOf(h.zIndex)+1;h.y=5-(v-1)*l+this.nowOption.heightDy,1==s&&(h.y=this.nowOption.heightDy),h.realLay=v,null==h.value&&(h.value=0),this.fingColor(h)}),f}fingColor(n){n.color=this.nowOption.defaultColor;const e=this.setGrades(this.nowOption.nodeLegend);e[0].min<e[1].min&&e.reverse();for(let r=0;r<e.length;r++)n.value>=e[r].min&&n.value<e[r].max&&(n.color=e[r].col,n.warming=0==r)}setGrades(n){if(!n)return;const t=[];for(const e in n){const r=n[e];t.push({min:r.gte?r.gte:0,max:r.lt?r.lt:1/0,col:r.color||this.nowOption.defaultColor})}return t}linsAddxy(n){for(let t=0;t<n.links.length;t++)for(let e=0;e<n.nodes.length;e++)n.links[t].source==n.nodes[e].id&&(n.links[t].sxy={x:n.nodes[e].x,y:n.nodes[e].y}),n.links[t].target==n.nodes[e].id&&(n.links[t].txy={x:n.nodes[e].x,y:n.nodes[e].y})}setOption(n){void 0===n&&(n={}),this.nowOption=this.deepCopy(this.defOption,n)}deepCopy(n,t){const e=Object.assign({},n);for(const r in t)"object"!=typeof n[r]||null===n[r]||Array.isArray(n[r])?void 0!==t[r]&&(e[r]=t[r]):e[r]=this.deepCopy(n[r],t[r]);return e}dispose(){this.cleartopo(),cancelAnimationFrame(this.request),this.removeSceneChildrens(),this.tweeng.removeAll(),setTimeout(()=>{this.domdiv.innerHTML=""},100)}emptyGroup(n){const t=n.children.length;for(let e=0;e<t;e++){const r=n.children[0];r.traverse(a=>{a.isMesh&&(a.material.dispose(),a.geometry.dispose()),r.remove(a)}),r.isMesh&&(r.material.dispose(),r.geometry.dispose()),n.remove(r)}}removeSceneChildrens(){const n=this.scene.children.length;for(let t=0;t<n;t++){const e=this.scene.children[0];e.traverse(r=>{r.isMesh&&(r.material.dispose(),r.geometry.dispose()),e.isMesh?e.remove(r):this.scene.remove(r)}),this.scene.remove(e)}}resize(){this.divHeight=this.domdiv.offsetHeight,this.divWidth=this.domdiv.offsetWidth,this.sk=this.divWidth<=this.divHeight?this.divWidth/this.nowOption.viewAngle:this.divHeight/this.nowOption.viewAngle,this.camera.aspect=this.divWidth/this.divHeight,this.camera.left=this.divWidth/-this.sk,this.camera.right=this.divWidth/this.sk,this.camera.top=this.divHeight/this.sk,this.camera.bottom=this.divHeight/-this.sk,this.camera.updateProjectionMatrix(),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.divWidth,this.divHeight),this.labelRenderer.setSize(this.divWidth,this.divHeight),this.updateData(this.u_data)}clInter(){this.set1&&clearInterval(this.set1),this.setfi&&clearInterval(this.setfi)}updateOptions(n){this.setOption(n),this.domdiv.style.fontSize=this.nowOption.fontSize+"px",this.resize()}}(this.container.nativeElement,this.options,function(c){},this);let r=()=>30+Math.round(60*Math.random()),a=[];for(let c=0;c<24;c++)a.push({id:c,zIndex:1,name:"\u8282\u70b9"+c,value:r()});let s=[];for(let c=0;c<24;c++)s.push({source:c,target:Math.floor(Math.random()*c),value:r()});this.scene.updateData({nodes:a,links:s})}ngOnDestroy(){this.scene&&this.scene.dispose()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-topoline"]],viewQuery:function(t,e){if(1&t&&o.Gf(vf,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{config:"config",widgetPos:"widgetPos"},features:[o.TTD],decls:2,vars:5,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1),2&t&&o.Akn(o.WLB(2,gf,e.options.fontSize+"px","scale("+e.options.scale+")"))},styles:[""]}),i})();const yf=["container"];let Ns=(()=>{class i{constructor(){this.config={},this.widgetPos={},this.defaultOpt={}}ngOnInit(){}ngOnChanges(t){var e;null===(e=this.scene)||void 0===e||e.resize()}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngAfterViewInit(){this.scene=new class{constructor(n,t,e,r){this.__id=(new Date).getTime(),this.divWidth=300,this.divHeight=300,this.u_data={},this.tweeng=new Pe.ZA,this.rk=2,this.getNum=40,this.__t=0,this.defOption={fontSize:16,linecolor:"#00D8FF",lineWidth:2,heightDy:0,viewAngle:40,rotateDx:10,linenameopacity:.8,linelineopacity:.9,linewidth:1,linelightcolor:"#ffffff"},this.lenedconfig={},this.line2groupArr=[],this.firstLoad=!0,this.allgroup=new N.ZAu,this.line2group=new N.ZAu,this.line1group=new N.ZAu,this.pointgroup=new N.ZAu,this.pointArray=[],this.titleArray=[],this.allTweens={},this.sk=80,this.render=()=>{if(this.request=requestAnimationFrame(this.render),this.renderer.render(this.scene,this.camera),this.labelRenderer.render(this.scene,this.camera),this.tweeng.update(),this.__t%this.rk==0)for(let a=0;a<this.line2groupArr.length;a++){const s=this.line2groupArr[a].colors;let l=s.pop(),c=s.pop(),d=s.pop();s.unshift(d,c,l),this.line2groupArr[a].geometry.setColors(s)}this.__t++,this.allgroup.rotation.y=this.__t*this.nowOption.rotateDx*1e-4},this.domdiv=n,this.divWidth=n.offsetWidth,this.divHeight=n.offsetHeight,this.setOption(t),this.lenedconfig=t.treelenged,this.callback=e,this.scope=r,n.style.fontSize=this.nowOption.fontSize+"px",this.scene=new N.xsS,this.sk=this.divWidth<=this.divHeight?this.divWidth/this.nowOption.viewAngle:this.divHeight/this.nowOption.viewAngle,this.camera=new N.iKG(-this.divWidth/this.sk,this.divWidth/this.sk,this.divHeight/this.sk,-this.divHeight/this.sk,-2001,2e4),this.camera.position.set(0,5,80),this.camera.lookAt(0,0,0),this.renderer=new N.CP7({alpha:!0,antialias:!0,preserveDrawingBuffer:"true"===localStorage.getItem("drawingBuffer")}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(0,0),this.renderer.setSize(this.divWidth,this.divHeight),this.labelRenderer=new li.M,this.labelRenderer.setSize(this.divWidth,this.divHeight),this.labelRenderer.domElement.style.position="absolute",this.labelRenderer.domElement.style.top=0,this.init(),this.scene.add(this.allgroup),this.allgroup.add(this.line2group),this.line2group.name="line2group",this.allgroup.add(this.line1group),this.line1group.name="line1group",this.allgroup.add(this.pointgroup),this.pointgroup.name="pointgroup"}init(){this.domdiv.appendChild(this.renderer.domElement),this.domdiv.appendChild(this.labelRenderer.domElement),this.render(),console.log(this.scene)}updateData(n){if(this.u_data=n,void 0===n.nodes||""===n.nodes||null===n.nodes)return;let t=n.nodes;if(t.length<1||null==t.length)return;let e=n.links;console.log("linkobjs :>> ",n),this.cleartopo();const r=this.setdata(n);this.firstLoad=!1;let a=[];for(let l=0;l<r;l++)a[l]=[];for(let l=0;l<r;l++)t.map(c=>{c.realLay==l+1&&a[l].push(c)});const s=[];if(a[0].map(l=>{1==l.warming&&s.push(l)}),console.log("warmingarr :>> ",s),a.map((l,c)=>{let d=this.scale(l.length);this.drawNodes(l,d)}),e.map(l=>{let c=l.source,d=[0,0,0],f=l.target,h=[0,0,0],v=l.value||0;t.map(m=>{m.id==c&&(d=m.pos),m.id==f&&(h=m.pos)}),this.drawFatLine([...d,...h],v)}),s.length>0){let l=0;this.setfi=setInterval(()=>{if(l>=s.length){clearInterval(this.setfi);let c=0;this.set1=setInterval(()=>{this.callback.call(this.scope,a[0][c]),this.pointArray.map(d=>{if(d.name===a[0][c].id){this.allTweens.a&&this.allTweens.a.stop();let f={s:0};this.allTweens.a=new Pe.kX(f,this.tweeng).to({s:3.14*this.nowOption.timeInterval},1e3*this.nowOption.timeInterval).easing(Pe.oY.Linear.None).onUpdate(()=>{let h=1+Math.abs(2*Math.sin(f.s));d.scale.set(h,h,h)}),this.allTweens.a.start()}else d.scale.set(1,1,1)}),this.titleArray.map(d=>{d.attr("cid")==a[0][c].id?d.style("opacity",1):d.style("opacity",.6)}),c++,c>=a[0].length&&(c=0)},1e3*this.nowOption.timeInterval+10)}else this.callback.call(this.scope,s[l]),this.pointArray.map(c=>{if(c.name===s[l].id){this.allTweens.a&&this.allTweens.a.stop();let d={s:0};this.allTweens.a=new Pe.kX(d,this.tweeng).to({s:3.14*this.nowOption.timeInterval},1e3*this.nowOption.timeInterval).easing(Pe.oY.Linear.None).onUpdate(()=>{let f=1+Math.abs(2*Math.sin(d.s));c.scale.set(f,f,f)}),this.allTweens.a.start()}else c.scale.set(1,1,1)}),this.titleArray.map(c=>{c.attr("cid")==s[l].id?c.style("opacity",1):c.style("opacity",.6)});l++},1e3*this.nowOption.timeInterval)}else{let l=0;this.set1=setInterval(()=>{this.callback.call(this.scope,a[0][l]),this.pointArray.map(c=>{if(c.name===a[0][l].id){this.allTweens.a&&this.allTweens.a.stop();let d={s:0};this.allTweens.a=new Pe.kX(d,this.tweeng).to({s:3.14*this.nowOption.timeInterval},1e3*this.nowOption.timeInterval).easing(Pe.oY.Linear.None).onUpdate(()=>{let f=1+Math.abs(2*Math.sin(d.s));c.scale.set(f,f,f)}),this.allTweens.a.start()}else c.scale.set(1,1,1)}),this.titleArray.map(c=>{c.attr("cid")==a[0][l].id?c.style("opacity",1):c.style("opacity",.6)}),l++,l>=a[0].length&&(l=0)},1e3*this.nowOption.timeInterval+10)}}cleartopo(){this.set1&&clearInterval(this.set1),this.setfi&&clearInterval(this.setfi),this.line2groupArr=[],this.pointArray=[],this.titleArray=[],this.emptyGroup(this.pointgroup),this.emptyGroup(this.line1group),this.emptyGroup(this.line2group)}drawNodes(n,t){let e=n.length;if(n.length<1)return;let r=2*Math.PI/e;for(let s=0;s<e;s++){let l=-t*Math.sin(r*s),c=t*Math.cos(r*s),d=this.addName(n[s].name,n[s].id,n[s].color);d.name=n[s].id,this.pointArray.push(d),d.position.set(l,n[s].y,c),n[s].ang=r*s,n[s].pos=[l,n[s].y,c]}this.drawLines(60,t).position.y=n[0].y}ptopoints(n){const t=new N.Pa4(n[0],n[1],n[2]),e=new N.Pa4(n[3],n[4],n[5]);if(t.distanceTo(e)<.1){const a=(new N.Pa4).lerpVectors(t,e,.5);a.y+=5;const l=new N.YT8([t,a,e],!1,"catmullrom",.5).getPoints(this.getNum),c=[];return l.map(d=>{c.push(d.x,d.y,a.z)}),{p:c,lp:[a.x,a.y,a.z]}}{const a=(new N.Pa4).lerpVectors(t,e,.5);if(t.y===e.y){a.y+=8;const s=new N.mXe(t,a,e),l=s.getPoints(this.getNum),c=[];l.map(f=>{c.push(f.x,f.y,f.z)});const d=s.getPoint(.5);return{p:c,lp:[d.x,d.y,d.z]}}{const s=new N.YT8([t,a,e],!1,"catmullrom",.2),l=s.getPoints(this.getNum),c=[];l.map(f=>{c.push(f.x,f.y,f.z)});const d=s.getPoint(.5);return{p:c,lp:[d.x,d.y,d.z]}}}}drawFatLine(n,t){const e=new zs.L,r=this.ptopoints(n);e.setPositions(r.p);let a=[],s=this.valueTocolor(t);Math.floor(Math.random()*this.getNum);var c=ot.scaleLinear().domain([0,this.getNum+1]).range([ot.color(s).darker(2),ot.color(s).brighter(2)]);for(let h=0,v=this.getNum+1;h<v;h++){let m=ot.color(c(h));a.push(m.r/255,m.g/255,m.b/255)}e.setColors(a);const d=new Rs.Y({linewidth:this.nowOption.linewidth,vertexColors:!0,opacity:this.nowOption.linelineopacity,transparent:!0});d.resolution=new N.FM8(this.domdiv.offsetWidth,this.domdiv.offsetHeight);let f=new Is.w(e,d);return f.colors=a,this.line2group.add(f),this.line2groupArr.push(f),f}valueTocolor(n){let e="#11F2DB";return this.nowOption.legend.map((r,a)=>{n>=r.gte&&n<=(null==r.lt?1/0:r.lt)&&(e=r.color)}),e}drawLines(n,t){const e=[];let r=2*Math.PI/n;for(let c=0;c<n;c++){let d=-t*Math.sin(r*c),f=t*Math.cos(r*c);e.push(new N.Pa4(d,0,f))}e.push(e[0]);const a=new N.FT0({color:16777215,dashSize:.5,gapSize:.3,transparent:!0,opacity:.5}),s=(new N.u9r).setFromPoints(e),l=new N.x12(s,a);return l.computeLineDistances(),this.line1group.add(l),l}addName(n,t,e){let r=new N.vBJ({color:e}),a=new N.Aip(.2,16,16),s=new N.Kj0(a,r);this.pointgroup.add(s);let l=document.createElement("div");l.style.fontSize="1em",l.style.color="#ffffff",l.style.position="absolute",l.style.marginTop="1.2em";let c=new li.j(l);s.add(c);const d=ot.select(l).attr("cid",t);return d.text(n).style("opacity",0).transition().duration(2e3).style("opacity",.6),this.titleArray.push(d),s}addPoints(){let n=new N.vBJ({color:16777215}),t=new N.Aip(.3),e=new N.Kj0(t,n);return this.scene.add(e),e}setdata(n){let t=new Set,e=[];n.nodes.forEach((h,v)=>{(null==h.zIndex||null==h.zIndex||""==h.zIndex)&&(h.zIndex=1),t.add(h.zIndex),e.push(h.zIndex)});const r={};e.forEach(h=>{r[h]?r[h]++:r[h]=1});const a=[];for(const h in r)a.push(r[h]);this.scale=ot.scaleLinear().domain([Math.min(...a),Math.max(...a)]).rangeRound([10,40]);const s=t.size;if(s<1)return;let l=0;s>1&&(l=10/(s-1));let d=Array.from(t);d.sort((h,v)=>+h-v);let f=d.length;return n.nodes.forEach(h=>{let v=d.indexOf(h.zIndex)+1;h.y=5-(v-1)*l+this.nowOption.heightDy,1==s&&(h.y=this.nowOption.heightDy),h.realLay=v,null==h.value&&(h.value=0),this.fingColor(h)}),f}fingColor(n){let t="zIndex"+n.zIndex;if(n.color=this.nowOption.defaultColor,null!=this.lenedconfig[t])if(1==this.lenedconfig[t].sortType)this.lenedconfig[t].sortValue.map((e,r)=>{e.label==n.value&&(n.color=e.color,n.warming=0==r)});else if(2==this.lenedconfig[t].sortType){let e=this.setGrades(this.lenedconfig[t].numLegend);for(let r=0;r<e.length;r++)n.value>=e[r].min&&n.value<=e[r].max&&(n.color=e[r].col,n.warming=0==r)}}setGrades(n){if(!n)return;const t=[];for(const e in n){const r=n[e];t.push({min:r.gte?r.gte:0,max:r.lt?r.lt:1/0,col:r.color||this.nowOption.defaultColor})}return t}linsAddxy(n){for(let t=0;t<n.links.length;t++)for(let e=0;e<n.nodes.length;e++)n.links[t].source==n.nodes[e].id&&(n.links[t].sxy={x:n.nodes[e].x,y:n.nodes[e].y}),n.links[t].target==n.nodes[e].id&&(n.links[t].txy={x:n.nodes[e].x,y:n.nodes[e].y})}setOption(n){void 0===n&&(n={}),this.nowOption=this.deepCopy(this.defOption,n)}deepCopy(n,t){let e=Object.assign({},n);for(let r in t)"object"!=typeof n[r]||null===n[r]||Array.isArray(n[r])?void 0!==t[r]&&(e[r]=t[r]):e[r]=this.deepCopy(n[r],t[r]);return e}dispose(){this.cleartopo(),cancelAnimationFrame(this.request),this.removeSceneChildrens(),this.tweeng.removeAll(),setTimeout(()=>{this.domdiv.innerHTML=""},100)}emptyGroup(n){let t=n.children.length;for(let e=0;e<t;e++){let r=n.children[0];r.traverse(a=>{a.isMesh&&(a.material.dispose(),a.geometry.dispose()),r.remove(a)}),r.isMesh&&(r.material.dispose(),r.geometry.dispose()),n.remove(r)}}removeSceneChildrens(){let n=this.scene.children.length;for(let t=0;t<n;t++){let e=this.scene.children[0];e.traverse(r=>{r.isMesh&&(r.material.dispose(),r.geometry.dispose()),e.isMesh?e.remove(r):this.scene.remove(r)}),this.scene.remove(e)}}resize(){this.divHeight=this.domdiv.offsetHeight,this.divWidth=this.domdiv.offsetWidth,this.sk=this.divWidth<=this.divHeight?this.divWidth/this.nowOption.viewAngle:this.divHeight/this.nowOption.viewAngle,this.camera.aspect=this.divWidth/this.divHeight,this.camera.left=this.divWidth/-this.sk,this.camera.right=this.divWidth/this.sk,this.camera.top=this.divHeight/this.sk,this.camera.bottom=this.divHeight/-this.sk,this.camera.updateProjectionMatrix(),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.divWidth,this.divHeight),this.labelRenderer.setSize(this.divWidth,this.divHeight),this.updateData(this.u_data)}setfontSize(n){this.nowOption.fontSize=n,this.domdiv.style.fontSize=this.nowOption.fontSize+"px",this.updateData(this.u_data)}setRotateDx(n){this.nowOption.rotateDx=+n}setheightDy(n,t){this.nowOption.heightDy=n,this.nowOption.viewAngle=t,this.resize()}clearPos(){this.nowOption.savePos={},this.updateData(this.u_data)}setnameLenged(n,t){this.lenedconfig=n,this.nowOption.defaultColor=t,this.updateData(this.u_data)}setLegend(n){this.nowOption.legend=n,this.updateData(this.u_data)}settimeInterval(n){+n<1&&(n=1),this.nowOption.timeInterval=+n,this.updateData(this.u_data)}clInter(){this.set1&&clearInterval(this.set1),this.setfi&&clearInterval(this.setfi)}}(this.container.nativeElement,{heightDy:0,viewAngle:20,rotateDx:1,timeInterval:4,savePos:{},headerId:null,defaultColor:"#11F2DB",nameColor:{},sortKey:"",sortType:null,sortValue:[{label:"\u4e25\u91cd",color:"#EA5252",readonly:!0},{label:"\u4e00\u822c",color:"#FFCA14",readonly:!0},{label:"\u826f\u597d",color:"#0087db",readonly:!0}],numLegend:[{gte:80,lt:0,label:"80",color:"#FF544D"},{gte:60,lt:80,label:"60-80",color:"#FCB33C"},{gte:0,lt:60,label:"0-60",color:"#11F2DB"}],treelenged:{},legendSort:!0,legend:[{gte:80,lt:0,label:"80",color:"#FF544D"},{gte:60,lt:80,label:"60-80",color:"#FCB33C"},{gte:0,lt:60,label:"0-60",color:"#11F2DB"}]},function(d){},this);let a=()=>10+Math.round(90*Math.random()),s=[];for(let d=0;d<36;d++)s.push({id:d,zIndex:1,name:"\u8282\u70b9"+d,value:a()});let l=[];for(let d=0;d<36;d++)l.push({source:d,target:Math.floor(Math.random()*d),value:a()});this.scene.updateData({nodes:s,links:l}),setTimeout(()=>{let d=[];for(let v=0;v<32;v++)d.push({id:v,zIndex:1,name:"\u8282\u70b9"+v,value:a()});for(let v=32;v<36;v++)d.push({id:v,zIndex:2,name:"\u8282\u70b9"+v,value:a()});let f=[];for(let v=0;v<32;v++)f.push({source:32+Math.floor(4*Math.random()),target:Math.floor(32*Math.random()),value:a()});const h={nodes:d,links:f};console.log("data----- :>> ",h),this.scene.updateData(h)},4e3)}ngOnDestroy(){this.scene&&this.scene.dispose()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-topoline2"]],viewQuery:function(t,e){if(1&t&&o.Gf(yf,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{config:"config",widgetPos:"widgetPos"},features:[o.TTD],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},styles:[""]}),i})();const jn=function(i,n){return[i[0]+n[0],i[1]+n[1]]},Ti=function(i,n){return[i[0]*n,i[1]*n]},Bs=function(i,n){return i[0]*n[1]-i[1]*n[0]==0},_o=function(i,n){return i[0]*n[0]+i[1]*n[1]};function Co(i,n){return i.find(t=>t!=n)}function Ai(i){return(0!=i[0]||0!=i[1])&&(0==i[0]?[0,i[1]/Math.abs(i[1])]:0==i[1]?[i[0]/Math.abs(i[0]),0]:function(i){var n=Math.sqrt(i[0]*i[0]+i[1]*i[1]);return[i[0]/n,i[1]/n]}(i))}const Of=["container"];let Fs=(()=>{class i{constructor(){this.config={},this.widgetPos={},this.defaultOpt={}}ngOnInit(){}ngOnChanges(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngAfterViewInit(){this.scene=new class{constructor(n,t,e,r){this.rectspos=[],this.offset={x:0,y:0},this.opt={entryPoint:[50,50],entryDirection:[0,1],entryExt:50,exitPoint:[400,50],exitDirection:[-1,0],exitExt:50},this.rcolor=ot.schemeCategory10,this.dr=50,this.linesarr=[],this.domdiv=n,this.svg=ot.select(n).append("svg").attr("width","100%").attr("height","100%"),this.grect=this.svg.append("g"),this.gline=this.svg.append("g"),this.drawrects(25);for(let a=0;a<20;a++){let s=Math.floor(Math.random()*this.rectspos.length),l=Math.floor(Math.random()*this.rectspos.length);if(s!=l){let c=this.rectspos[s],d=this.rectspos[l],f=[+c.attr("x")+this.dr/2,+c.attr("y")+this.dr/2],h=[+d.attr("x")+this.dr/2,+d.attr("y")+this.dr/2];this.darglins(f,h,c.attr("class"),d.attr("class"))}else a--}}getsrt(n,t){n&&n.length>0&&(this.opt.entryPoint=n),t&&t.length>0&&(this.opt.exitPoint=t);let e_a=this.opt.exitPoint[0]-this.opt.entryPoint[0],e_b=this.opt.exitPoint[1]-this.opt.entryPoint[1],r_a=-e_a,r_b=-e_b,a={a:e_a>e_b?0:e_a>=0?1:-1,b:e_a>e_b?e_b>=0?1:-1:0},s={a:r_a>r_b?0:r_a>=0?1:-1,b:r_a>r_b?r_b>=0?1:-1:0};this.opt.entryDirection=[a.a,a.b],this.opt.exitDirection=[s.a,s.b],Math.sqrt(Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2))<200?(this.opt.entryExt=0,this.opt.exitExt=0):(this.opt.entryExt=50,this.opt.exitExt=50);let c=function({entryPoint:i=[0,0],entryDirection:n=[0,1],entryExt:t=10,exitPoint:e=[10,10],exitDirection:r=[1,0],exitExt:a=10},s=.5){if(null===r||"0,0"==r.join()){let R=function(i,n){return[n[0]-i[0],n[1]-i[1]]}(e,i);r=Math.abs(R[0])>Math.abs(R[1])?[R[0]/Math.abs(R[0]),0]:[0,R[1]/Math.abs(R[1])]}let l=jn(i,Ti(n,t)),c=jn(e,Ti(r,a));r=Ti(r,-1);let v,h=[[c[0]-l[0],0],[0,c[1]-l[1]]],m=h.find(R=>Bs(R,n));v=_o(m,n)>0?m:Co(h,m);let S,T=h.find(R=>Bs(R,r));S=_o(T,r)>0?T:Co(h,T);let k=_o(v,S)>0?2:1,E=Co(h,S),P=[];if(P.push({position:i,direction:null},{position:l,direction:n}),1==k){let R=jn(l,v),B=Ai(v),V=jn(R,S),L=Ai(S);P.push({position:R,direction:B},{position:V,direction:L})}else{let R=jn(l,Ti(v,s)),B=Ai(v),V=jn(R,E),L=Ai(E),Z=jn(V,Ti(S,1-s)),q=Ai(S);P.push({position:R,direction:B},{position:V,direction:L,type:"pathMiddleP"},{position:Z,direction:q})}return P.push({position:e,direction:r}),P.filter(R=>!1!==R.direction)}(this.opt,.5),d=[];c.forEach(h=>{d.push(h.position)});let f="";return d.forEach(h=>{f+=`${h[0]},${h[1]} `}),f}darglins(n,t,e,r){let a=this.getsrt(n,t),s=this.gline.append("polyline").attr("class",e+"_"+r).attr("points",a).attr("fill","none").attr("stroke",this.rcolor[Math.floor(10*Math.random())]).attr("stroke-width","4");this.linesarr.push(s)}changelines(n,t,e,r){!t||n.forEach(a=>{let s=a.attr("class").split("_");if(t===s[0]){let l=this.findrectxy(s[1]),c=this.getsrt([e,r],l);a.attr("points",c)}else if(t===s[1]){let l=this.findrectxy(s[0]),c=this.getsrt(l,[e,r]);a.attr("points",c)}})}findline(n){let t=[];return this.linesarr.forEach(e=>{e.attr("class").split("_").indexOf(n)>-1&&t.push(e)}),t}findrectxy(n){let t=[];return this.rectspos.forEach(e=>{e.attr("class")===n&&t.push(+e.attr("x")+this.dr/2,+e.attr("y")+this.dr/2)}),t}drawrects(n){for(let t=0;t<n;t++){let e=4,r=150,a=100+Math.floor(t/e)*r,s=100+t%e*r,l=this.grect.append("rect").attr("class","rect"+t).attr("x",a-this.dr/2).attr("y",s-this.dr/2).attr("width",this.dr).attr("height",this.dr).attr("fill",this.rcolor[Math.floor(10*Math.random())]);this.rectspos.push(l),l.call(this.darg())}}darg(){let n=this;return ot.drag().on("start",function(){n.offset.x=ot.event.x-ot.select(this).attr("x"),n.offset.y=ot.event.y-ot.select(this).attr("y")}).on("drag",function(){let t=ot.event.x-n.offset.x,e=ot.event.y-n.offset.y,r=ot.select(this).attr("class"),a=n.findline(r);n.changelines(a,r,t+n.dr/2,e+n.dr/2),ot.select(this).attr("x",t).attr("y",e)}).on("end",function(){})}updateData(n){}dispose(){}resize(){}}(this.container.nativeElement,{},function(a){},this)}ngOnDestroy(){this.scene&&this.scene.dispose()}onresize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-polyline"]],viewQuery:function(t,e){if(1&t&&o.Gf(Of,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{config:"config",widgetPos:"widgetPos"},features:[o.TTD],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},styles:[""]}),i})();var ci=p(64762),hn=function(i){N.Tme.call(this),this.element=i||document.createElement("div"),this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.addEventListener("removed",function(){this.traverse(function(n){n.element instanceof Element&&null!==n.element.parentNode&&n.element.parentNode.removeChild(n.element)})})};hn.prototype=Object.assign(Object.create(N.Tme.prototype),{constructor:hn,copy:function(i,n){return N.Tme.prototype.copy.call(this,i,n),this.element=i.element.cloneNode(!0),this}});var dr=function(i){hn.call(this,i)};(dr.prototype=Object.create(hn.prototype)).constructor=dr;var Tf=function(){var n,t,e,r,i=this,a=new N.yGw,s={camera:{fov:0,style:""},objects:new WeakMap},l=document.createElement("div");l.style.overflow="hidden",this.domElement=l;var c=document.createElement("div");c.style.WebkitTransformStyle="preserve-3d",c.style.transformStyle="preserve-3d",c.style.pointerEvents="none",l.appendChild(c);var d=/Trident/i.test(navigator.userAgent);function f(E){return Math.abs(E)<1e-10?0:E}function h(E){var P=E.elements;return"matrix3d("+f(P[0])+","+f(-P[1])+","+f(P[2])+","+f(P[3])+","+f(P[4])+","+f(-P[5])+","+f(P[6])+","+f(P[7])+","+f(P[8])+","+f(-P[9])+","+f(P[10])+","+f(P[11])+","+f(P[12])+","+f(-P[13])+","+f(P[14])+","+f(P[15])+")"}function v(E,P){var R=E.elements,B="matrix3d("+f(R[0])+","+f(R[1])+","+f(R[2])+","+f(R[3])+","+f(-R[4])+","+f(-R[5])+","+f(-R[6])+","+f(-R[7])+","+f(R[8])+","+f(R[9])+","+f(R[10])+","+f(R[11])+","+f(R[12])+","+f(R[13])+","+f(R[14])+","+f(R[15])+")";return d?"translate(-50%,-50%)translate("+e+"px,"+r+"px)"+P+B:"translate(-50%,-50%)"+B}function m(E,P,R,B){if(E instanceof hn){var V;E.onBeforeRender(i,P,R),E instanceof dr?(a.copy(R.matrixWorldInverse),a.transpose(),a.copyPosition(E.matrixWorld),a.scale(E.scale),a.elements[3]=0,a.elements[7]=0,a.elements[11]=0,a.elements[15]=1,V=v(a,B)):V=v(E.matrixWorld,B);var L=E.element,Z=s.objects.get(E);if(void 0===Z||Z.style!==V){L.style.WebkitTransform=V,L.style.transform=V;var q={style:V};d&&(q.distanceToCameraSquared=S(R,E)),s.objects.set(E,q)}L.style.display=E.visible?"":"none",L.parentNode!==c&&c.appendChild(L),E.onAfterRender(i,P,R)}for(var tt=0,$=E.children.length;tt<$;tt++)m(E.children[tt],P,R,B)}this.getSize=function(){return{width:n,height:t}},this.setSize=function(E,P){e=(n=E)/2,r=(t=P)/2,l.style.width=E+"px",l.style.height=P+"px",c.style.width=E+"px",c.style.height=P+"px"};var E,P,S=(E=new N.Pa4,P=new N.Pa4,function(R,B){return E.setFromMatrixPosition(R.matrixWorld),P.setFromMatrixPosition(B.matrixWorld),E.distanceToSquared(P)});this.render=function(E,P){var R=P.projectionMatrix.elements[5]*r;if(s.camera.fov!==R&&(P.isPerspectiveCamera?(l.style.WebkitPerspective=R+"px",l.style.perspective=R+"px"):(l.style.WebkitPerspective="",l.style.perspective=""),s.camera.fov=R),!0===E.autoUpdate&&E.updateMatrixWorld(),null===P.parent&&P.updateMatrixWorld(),P.isOrthographicCamera)var B=-(P.right+P.left)/2,V=(P.top+P.bottom)/2;var L=P.isOrthographicCamera?"scale("+R+")translate("+f(B)+"px,"+f(V)+"px)"+h(P.matrixWorldInverse):"translateZ("+R+"px)"+h(P.matrixWorldInverse),Z=L+"translate("+e+"px,"+r+"px)";s.camera.style!==Z&&!d&&(c.style.WebkitTransform=Z,c.style.transform=Z,s.camera.style=Z),m(E,E,P,L),d&&function(E){for(var P=function(E){var P=[];return E.traverse(function(R){R instanceof hn&&P.push(R)}),P}(E).sort(function(L,Z){return s.objects.get(L).distanceToCameraSquared-s.objects.get(Z).distanceToCameraSquared}),R=P.length,B=0,V=P.length;B<V;B++)P[B].element.style.zIndex=R-B}(E)}};const Un=function(i,n){return[i[0]+n[0],i[1]+n[1]]},Ei=function(i,n){return[i[0]*n,i[1]*n]},Ls=function(i,n){return i[0]*n[1]-i[1]*n[0]==0},So=function(i,n){return i[0]*n[0]+i[1]*n[1]};function Do(i,n){return i.find(t=>t!=n)}function Mi(i){return(0!=i[0]||0!=i[1])&&(0==i[0]?[0,i[1]/Math.abs(i[1])]:0==i[1]?[i[0]/Math.abs(i[0]),0]:function(i){var n=Math.sqrt(i[0]*i[0]+i[1]*i[1]);return[i[0]/n,i[1]/n]}(i))}const Rf=["container"];let Hs=(()=>{class i{constructor(){this.config={},this.widgetPos={},this.defaultOpt={}}ngOnInit(){}ngOnChanges(t){var e;null===(e=this.scene)||void 0===e||e.resize()}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngAfterViewInit(){this.scene=new class{constructor(n,t,e,r){this.divWidth=300,this.divHeight=300,this.defOption={fontSize:16,nodedis:25,numofrow:4,camerapos:{x:-55,y:50,z:90,target:-10},offsetx:.02},this.offset={x:0,y:0},this.opt={entryPoint:[50,50],entryDirection:[0,1],entryExt:10,exitPoint:[400,50],exitDirection:[-1,0],exitExt:10},this.firstLoad=!0,this.scene=new N.xsS,this.movetag=!1,this.loader=new Oi,this.boxsarr=[],this.loading=!1,this.tubeGroup=new N.ZAu,this.css3drender=new Tf,this.titlearrs=[],this.lineinfoarrs=[],this.linematerial=new N.nls({color:16777215,opacity:.15,transparent:!0}),this.linegradgroup=new N.ZAu,this.lastrow=1,this.lastcol=1,this.render=()=>{this.request=requestAnimationFrame(this.render),this.renderer.render(this.scene,this.camera),this.css3drender.render(this.scene,this.camera),this.mapoffset()},this.domdiv=n,this.divWidth=n.offsetWidth,this.divHeight=n.offsetHeight,this.setOption(t),n.style.fontSize=this.nowOption.fontSize+"px",this.callback=e,this.scope=r,this.camera=new N.cPb(45,this.divWidth/this.divHeight,1,1e4),this.camera.position.set(this.nowOption.camerapos.x,this.nowOption.camerapos.y,this.nowOption.camerapos.z),this.camera.lookAt(0,this.nowOption.camerapos.target,0),this.renderer=new N.CP7({alpha:!0,antialias:!0,preserveDrawingBuffer:"true"===localStorage.getItem("drawingBuffer")}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(16711680,0),this.renderer.setSize(this.divWidth,this.divHeight),this.css3drender.setSize(this.divWidth,this.divHeight),this.css3drender.domElement.style.position="absolute",this.css3drender.domElement.style.top="0",this.domdiv.appendChild(this.renderer.domElement),this.domdiv.appendChild(this.css3drender.domElement),this.scene.add(this.tubeGroup),this.scene.add(this.linegradgroup),this.init()}loadGltfModel(n){return(0,ci.mG)(this,void 0,void 0,function*(){return yield new Promise((e,r)=>{this.loader.load(n,a=>{e(a.scene)},a=>{console.log(a.loaded/a.total*100+"% loaded")},a=>{r(a)})})})}init(){this.controls=new _n.z(this.camera,this.css3drender.domElement),this.controls.minDistance=1,this.controls.maxDistance=2e3,this.controls.target.set(0,this.nowOption.camerapos.target,0),this.controls.update(),this.initLight(),this.render()}drawGrid(n){let t=n+1,e=this.nowOption.numofrow+1;if(this.lastrow==t&&this.lastcol==e)return;this.emptylins(this.linegradgroup),this.lastrow=t,this.lastcol=e;let r=this.nowOption.nodedis;const a=r*e,s=r*t,l=[];for(let m=1;m<3*e;m++)l.push(new N.Pa4(m*r/3-a/2,-.1,-s/2)),l.push(new N.Pa4(m*r/3-a/2,-.1,s/2));const c=(new N.u9r).setFromPoints(l),d=new N.ejS(c,this.linematerial);this.linegradgroup.add(d);const f=[];for(let m=1;m<3*t;m++)f.push(new N.Pa4(-a/2,-.1,m*r/3-s/2)),f.push(new N.Pa4(a/2,-.1,m*r/3-s/2));const h=(new N.u9r).setFromPoints(f),v=new N.ejS(h,this.linematerial);this.linegradgroup.add(v)}emptylins(n){let t=n.children.length;for(let e=0;e<t;e++){let r=n.children[0];r.material.dispose(),r.geometry.dispose(),n.remove(r)}}updateData(n){return(0,ci.mG)(this,void 0,void 0,function*(){if(!0===this.movetag||void 0===n||null==n||""==n)return;let t=n.nodes||[],e=n.links||[];if(this.u_data=n,!0===this.firstLoad){this.firstLoad=!1,this.canvasimg=this.createCanvas(256,128);const r=yield this.loadGltfModel("assets/topo/model/box.gltf");r.rotateY(Math.PI/2),r.traverse(a=>{a.isMesh&&(a.material.depthTest=!0,a.material.depthWrite=!0)}),this.computer=r,this.loading=!0,this.darw(t,e)}else this.loading?this.darw(t,e):setTimeout(()=>{this.updateData(n)},100)})}darw(n,t){this.drawBox(n);let e=this.filterlinks(n,t);this.emptyGroup(this.tubeGroup),this.clearLinesinfo();for(let r=0;r<e.length;r++)this.drawTubeGeometry(e[r],r)}filterlinks(n,t){return(t=t.filter(e=>e.source!=e.target)).filter(e=>{const r=n.find(s=>{if(s.id==e.source)return e.spos=[s.position.x,s.position.z],!0}),a=n.find(s=>{if(s.id==e.target)return e.tpos=[s.position.x,s.position.z],!0});if(r&&a)return!0})}hideAllBox(){this.boxsarr.forEach(n=>{n.visible=!1,n.position.x=1e4})}drawBox(n){this.hideAllBox(),this.clearTitles();const t=Math.ceil(n.length/this.nowOption.numofrow),e=this.nowOption.nodedis*(this.nowOption.numofrow-1)/2,r=this.nowOption.nodedis*(t-1)/2,a=["recta1","recta2","recta3","\u88c5\u9970\u7403"];for(let s=0;s<n.length;s++){let l=this.boxsarr[s];if(void 0===l){l=new N.ZAu;const d=this.computer.clone();l.add(d),d.traverse(f=>{f.isMesh&&a.includes(f.name)&&(f.material=f.material.clone())}),this.boxsarr[s]=l}else l.visible=!0;l.children[0].traverse(d=>{d.isMesh&&a.includes(d.name)&&d.material.color.set(n[s].color||"#566293")}),l.position.x=this.nowOption.nodedis*(s%this.nowOption.numofrow)-e,l.position.z=this.nowOption.nodedis*Math.floor(s/this.nowOption.numofrow)-r,n[s].position={x:l.position.x,z:l.position.z},this.scene.add(l),this.Drawnodetitle(s,l.position.x,12,l.position.z,n[s].info||{})}this.drawGrid(t)}getPoints(n,t,e){n&&n.length>0&&(this.opt.entryPoint=n),t&&t.length>0&&(this.opt.exitPoint=t);let r_a=this.opt.exitPoint[0]-this.opt.entryPoint[0],r_b=this.opt.exitPoint[1]-this.opt.entryPoint[1],a_a=-r_a,a_b=-r_b,s={a:r_a>r_b?0:r_a>=0?1:-1,b:r_a>r_b?r_b>=0?1:-1:0},l={a:a_a>a_b?0:a_a>=0?1:-1,b:a_a>a_b?a_b>=0?1:-1:0};this.opt.entryDirection=[s.a,s.b],this.opt.exitDirection=[l.a,l.b],e.length>0&&(0==this.opt.entryDirection[0]?this.opt.entryPoint[0]+=e[0]||0:this.opt.entryPoint[1]+=e[0]||0,0==this.opt.exitDirection[0]?this.opt.exitPoint[0]+=e[1]||0:this.opt.exitPoint[1]+=e[1]||0),Math.sqrt(Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2))<this.nowOption.nodedis+5?(this.opt.entryExt=0,this.opt.exitExt=0):(this.opt.entryExt=10,this.opt.exitExt=10);let d=.5+(e[2]||0);d>1?d=1:d<0&&(d=0),console.log("turnRatio :>> ",d);let f=function({entryPoint:i=[0,0],entryDirection:n=[0,1],entryExt:t=10,exitPoint:e=[10,10],exitDirection:r=[1,0],exitExt:a=10},s=.5){if(null===r||"0,0"==r.join()){let R=function(i,n){return[n[0]-i[0],n[1]-i[1]]}(e,i);r=Math.abs(R[0])>Math.abs(R[1])?[R[0]/Math.abs(R[0]),0]:[0,R[1]/Math.abs(R[1])]}let l=Un(i,Ei(n,t)),c=Un(e,Ei(r,a));r=Ei(r,-1);let v,h=[[c[0]-l[0],0],[0,c[1]-l[1]]],m=h.find(R=>Ls(R,n));v=So(m,n)>0?m:Do(h,m);let S,T=h.find(R=>Ls(R,r));S=So(T,r)>0?T:Do(h,T);let k=So(v,S)>0?2:1,E=Do(h,S),P=[];if(P.push({position:i,direction:null},{position:l,direction:n}),1==k){let R=Un(l,v),B=Mi(v),V=Un(R,S),L=Mi(S);P.push({position:R,direction:B},{position:V,direction:L})}else{let R=Un(l,Ei(v,s)),B=Mi(v),V=Un(R,E),L=Mi(E),Z=Un(V,Ei(S,1-s)),q=Mi(S);P.push({position:R,direction:B},{position:V,direction:L,type:"pathMiddleP"},{position:Z,direction:q})}return P.push({position:e,direction:r}),P.filter(R=>!1!==R.direction)}(this.opt,d),h=[];return f.forEach(v=>{h.push(v.position)}),h}drawTubeGeometry(n,t){let a=this.getPoints(n.spos,n.tpos,n.offset||[]);const s=[];for(let R=0;R<a.length;R++)s.push(new N.Pa4(a[R][0],0,a[R][1]));const l=new N.YT8(s,!1,"catmullrom",.01),c=l.getLength(),d=l.getPoint(.5),f=l.getPoint(.4),h=l.getPoint(.6),v=new N.Pa4(h.x-f.x,0,h.z-f.z);let m=c>20?Math.floor(c):20;const S=new N.WXh(l,m,.08,8,!1),T=new N.ROQ(this.canvasimg);T.wrapS=T.wrapT=N.rpg,T.repeat.set(m/5,1);let k=new N.YBo({color:"#2f4399",transparent:!0,side:N.ehD,map:T,depthTest:!0,depthWrite:!1}),E=new N.Kj0(S,k);this.tubeGroup.add(E);let P=this.drawlineinfo(t,d.x,.5,d.z,void 0===n.info?"":n.info);P.rotation.set(0,0,0),Math.abs(v.x)<Math.abs(v.z)&&P.rotateY(-Math.PI/2),P.rotateX(-Math.PI/5),this.scene.add(P)}setOption(n){void 0===n&&(n={}),this.nowOption=this.deepCopy(this.defOption,n)}createCanvas(n,t){const e=document.createElement("canvas");e.width=n,e.height=t;const r=e.getContext("2d");return r.fillStyle="#ffffff10",r.fillRect(0,0,.5*n,t),r.fillStyle="#ffffff60",r.fillRect(.5*n,0,.5*n,t),e}Drawnodetitle(n,t,e,r,a){let s=null,l=null;this.titlearrs[n]?(s=this.titlearrs[n][1]||document.createElement("div"),l=this.titlearrs[n][0]||new hn(s)):(s=document.createElement("div"),l=new hn(s),l.scale.set(.05,.05,.05),this.titlearrs[n]=[l,s],this.scene.add(l)),l.position.set(t,e,r),l.visible=!0,s.innerHTML=` \n        <div class="title" \n        style="text-align:center;padding:5px;\n        background:linear-gradient(180deg, #0025a4 0%, #0025a480 100%);\n        transform: translate(0px, -50%);" >\n          <div>${void 0===a.name?"":a.name}</div>\n          <div>${void 0===a.value?"":a.value}</div>\n        </div>  \n      `}clearTitles(){this.titlearrs.forEach(n=>{n[0].visible=!1,n[1].innerHTML=""})}clearLinesinfo(){this.lineinfoarrs.forEach(n=>{n[0].visible=!1,n[1].innerHTML=""})}drawlineinfo(n,t,e,r,a){let s=null,l=null;return this.lineinfoarrs[n]?(s=this.lineinfoarrs[n][1]||document.createElement("div"),l=this.lineinfoarrs[n][0]||new hn(s)):(s=document.createElement("div"),l=new hn(s),l.scale.set(.08,.08,.08),this.lineinfoarrs[n]=[l,s],this.scene.add(l)),l.position.set(t,e,r),l.visible=!0,s.innerHTML=` \n        <div\n        style="text-align:center;\n        color:#ffffff90;\n        transform: translate(0px, -20%);" >\n          <div>${void 0===a?"":a}</div>\n        </div>  \n      `,l}deepCopy(n,t){let e=Object.assign({},n);for(let r in t)"object"!=typeof n[r]||null===n[r]||Array.isArray(n[r])?void 0!==t[r]&&(e[r]=t[r]):e[r]=this.deepCopy(n[r],t[r]);return e}dispose(){this.controls.dispose(),this.removeSceneChildrens(),setTimeout(()=>{cancelAnimationFrame(this.request)},100)}removeSceneChildrens(){let n=this.scene.children.length;for(let t=0;t<n;t++){let e=this.scene.children[0];e.traverse(r=>{r.isMesh&&(r.material.dispose(),r.geometry.dispose()),e.isMesh?e.remove(r):this.scene.remove(r)}),this.scene.remove(e)}}mapoffset(){this.tubeGroup.children.forEach(n=>{n.material.map.offset.x-=this.nowOption.offsetx})}resize(){this.divHeight=this.domdiv.offsetHeight,this.divWidth=this.domdiv.offsetWidth,this.camera.aspect=this.divWidth/this.divHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.divWidth,this.divHeight),this.css3drender.setSize(this.divWidth,this.divHeight)}initLight(){let n=new N.Mig(16777215,1);this.scene.add(n);let t=new N.vmT(6710886,0,1);this.scene.add(t);let e=new N.Ox3(16777215,2);this.scene.add(e),e.position.set(-.5,2,1)}emptyGroup(n){let t=n.children.length;for(let e=0;e<t;e++){let r=n.children[0];r.traverse(a=>{a.isMesh&&(a.material.dispose(),a.geometry.dispose(),r.material.map.dispose()),r.remove(a)}),r.isMesh&&(r.material.dispose(),r.geometry.dispose(),r.material.map.dispose()),n.remove(r)}}setFontSize(n){n<12&&(n=12),this.domdiv.style.fontSize=n+"px"}getCameraPos(){return{x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z}}updateOptions(n){this.nowOption=this.deepCopy(this.nowOption,n),this.camera.position.set(this.nowOption.camerapos.x,this.nowOption.camerapos.y,this.nowOption.camerapos.z),this.camera.lookAt(0,this.nowOption.camerapos.target,0),this.controls.target.set(0,this.nowOption.camerapos.target,0),this.controls.update(),this.setFontSize(this.nowOption.fontsize),this.updateData(this.u_data),this.resize()}}(this.container.nativeElement,{numofrow:4,nodedis:30},function(s){},this);let a=this.setdata(20,20);this.scene.updateData(JSON.parse(JSON.stringify(a)))}ngOnDestroy(){this.scene&&this.scene.dispose()}setdata(t,e){let r=()=>30+Math.round(60*Math.random()),a=[];for(let c=0;c<t;c++)a.push({id:c,name:"\u8282\u70b9"+c,value:r(),info:{name:"eurka_"+c+"_\u4f53\u9a8c\u4e91",value:"1.00 2041ram 0."+(1e3*Math.random()|0)+"%"}});let s=[];for(let c=0;c<e;c++){let d=Math.floor(Math.random()*(t+0)),f=Math.floor(Math.random()*(t+0));d!=f?s.push({source:d,target:f,value:r(),info:"0."+(1e3*Math.random()|0)+"s/ 0."+(1e3*Math.random()|0)+"pm "+d+"-"+f}):c--}return{nodes:a,links:s}}setdata2(){return{nodes:[{id:0,name:"\u8282\u70b90",value:53,info:{name:"eurka_0_\u4f53\u9a8c\u4e91",value:"1.00 2041ram 0.52%"}},{id:1,name:"\u8282\u70b91",value:75,info:{name:"eurka_1_\u4f53\u9a8c\u4e91",value:"1.00 2041ram 0.50%"}},{id:2,name:"\u8282\u70b92",value:80,info:{name:"eurka_2_\u4f53\u9a8c\u4e91",value:"1.00 2041ram 0.433%"}},{id:3,name:"\u8282\u70b93",value:78,info:{name:"eurka_3_\u4f53\u9a8c\u4e91",value:"1.00 2041ram 0.60%"}}],links:[{source:0,target:2,value:37,info:"0.650s/ 0.160pm 0-3a"},{source:0,target:3,offset:[2,2,-.5],value:35,info:"0.105s/ 0.198pm 0-3b"},{source:0,target:3,offset:[-1,2,1],value:35,info:"0.105s/ 0.198pm 0-3c"},{source:2,target:1,value:45,info:"0.591s/ 0.912pm 0-2",offset:[-2,-2,.2]},{source:1,target:2,value:82,offset:[1,-1,.3],info:"0.31s/ 0.350pm 1-2"}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-topo25"]],viewQuery:function(t,e){if(1&t&&o.Gf(Rf,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{config:"config",widgetPos:"widgetPos"},features:[o.TTD],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},styles:[""]}),i})();const Gf=class extends Ne.H{constructor(n,t,e,r){super(),this.divWidth=300,this.divHeight=300,this.defOption={fontSize:14,linecolor:"#2ffffe",tip:{right:20,top:10,scale:1.5,margin:40},camerapos:{x:0,y:100,z:40},targetpos:{x:0,y:0,z:0}},this.firstLoad=!0,this.scene=new N.xsS,this.loader=new Oi,this.boxsarr=[[],[],[],[]],this.loading=!1,this.allcanvasarr=[],this.linematerial=new N.nls({color:16777215,opacity:.25,transparent:!0,depthTest:!0,depthWrite:!0}),this.linegradgroup=new N.ZAu,this.planematerial=new N.vBJ({color:"#ffffff"}),this.planegeometry=new N.BKK(.1,.1),this.titleMeshArr=[[],[],[],[]],this.titledivArr=[[],[],[],[]],this.titleGroup=new N.ZAu,this.areatitlegroup=new N.ZAu,this.rnodelength=0,this.render=()=>{this.request=requestAnimationFrame(this.render),this.renderer.render(this.scene,this.camera),this.labelRenderer.render(this.scene,this.camera)},this.domdiv=n,this.divWidth=n.offsetWidth,this.divHeight=n.offsetHeight,this.setOption(this.defOption,t),n.style.fontSize=this.nowOption.fontSize+"px",this.svg=ot.select(n).append("svg").attr("width",this.divWidth).attr("height",this.divHeight).style("position","absolute").style("pointer-events","none"),this.svg.append("defs").html(`\n              <filter id="Gaussian${this.__id}" x = '-20' y = '-20' width = '200' height = '200'>\n                  <feGaussianBlur in="SourceGraphic" stdDeviation="5" />\n              </filter>\n              `),this.rlineg=this.svg.append("g").attr("class","rlines"),this.toppoint=ot.select(n).append("div").style("position","absolute").style("pointer-events","none").style("width","10px").style("height","10px").style("border-radius","50%").style("offset-rotate","auto").style("box-shadow",`${this.nowOption.linecolor.substr(0,7)}80 0px 0px 10px 10px`).style("background-color","rgb(255, 255, 255)").style("animation","4s linear 0s infinite normal none running motion-path-animation"),this.botpoint=ot.select(n).append("div").style("position","absolute").style("pointer-events","none").style("width","10px").style("height","10px").style("border-radius","50%").style("offset-rotate","auto").style("box-shadow",`${this.nowOption.linecolor.substr(0,7)}80 0px 0px 10px 10px`).style("background-color","rgb(255, 255, 255)").style("animation","2s linear 0s infinite normal none running motion-path-animation"),this.callback=e,this.scope=r,this.camera=new N.cPb(45,this.divWidth/this.divHeight,1,1e4),this.camera.position.set(this.nowOption.camerapos.x,this.nowOption.camerapos.y,this.nowOption.camerapos.z),this.camera.lookAt(this.nowOption.targetpos.x,this.nowOption.targetpos.y,this.nowOption.targetpos.z),this.renderer=new N.CP7({alpha:!0,antialias:!0,preserveDrawingBuffer:"true"===localStorage.getItem("drawingBuffer")}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(16711680,0),this.renderer.setSize(this.divWidth,this.divHeight),this.labelRenderer=new li.M,this.labelRenderer.setSize(this.divWidth,this.divHeight),this.labelRenderer.domElement.style.position="absolute",this.labelRenderer.domElement.style.top=0,this.domdiv.appendChild(this.renderer.domElement),this.domdiv.appendChild(this.labelRenderer.domElement),this.scene.add(this.linegradgroup),this.scene.add(this.titleGroup),this.scene.add(this.areatitlegroup),this.init(),this.drawlinetop(),this.drawlinebottom(),this.drawlinecenter()}redrawlinecenter(n){const e=+this.nowOption.tip.top,r=this.divWidth-+this.nowOption.tip.right-300-250,a=this.findBoxById(n.id1);if(!a)return;const s=this.three3dto2d(a,{x:6,y:0,z:-1}),l=this.findBoxById(n.id2);if(!l)return;const c=this.three3dto2d(l,{x:-6,y:0,z:0}),d=this.three3dto2d(l,{x:6,y:0,z:0}),f=this.crpathcenter(s,c,d,{x:r,y:e+40});this.centerlinepath.attr("d",f[0]).attr("stroke",this.nowOption.linecolor)}drawlinecenter(){this.centerlinepath=this.svg.append("path").attr("d","").attr("stroke",this.nowOption.linecolor).attr("stroke-width",1).attr("fill","none").attr("stroke-dasharray",[10,10]).attr("stroke-dashoffset",0).style("animation","topo253ddash 2s linear infinite")}drawlinebottom(){this.botlinepath=this.svg.append("path").attr("d","").attr("stroke",this.nowOption.linecolor).attr("stroke-width",2).attr("fill","none"),this.botlinetext=this.svg.append("text").attr("x",0).attr("y",0).attr("fill","#aaa").attr("font-size","1em").text("").attr("text-anchor","end").attr("dominant-baseline","ideographic")}redrawlinebottom(n){const r=+this.nowOption.tip.scale,s=this.divWidth-+this.nowOption.tip.right-230*r,l=+this.nowOption.tip.top+(this.rnodelength*(+this.nowOption.tip.margin+80)-40)*r,c=this.findBoxById(n.id1);if(!c)return;const d=this.three3dto2d(c,{x:6,y:0,z:0}),f=this.crpathbot(d,{x:s,y:l});this.botlinepath.attr("d",f[0]).attr("stroke",this.nowOption.linecolor);const h=this.toplinepath.node().getTotalLength(),v=(h/80|0)<1?1:h/80|0;this.botpoint.style("offset-path",`path("${f[0].replace(/[\r\n]/g,"")}")`).style("box-shadow",`${this.nowOption.linecolor.substr(0,7)}80 0px 0px 10px 10px`).style("animation",`${v}s linear 0s infinite reverse none running motion-path-animation`),this.botlinetext.attr("x",f[1][0]).attr("y",f[1][1]).text(void 0===n.info?"":n.info)}drawlinetop(){this.toplinepath=this.svg.append("path").attr("d","").attr("stroke",this.nowOption.linecolor).attr("stroke-width",2).attr("fill","none"),this.toplinetext=this.svg.append("text").attr("x",0).attr("y",0).attr("fill","#aaa").attr("font-size","1em").text("").attr("text-anchor","end").attr("dominant-baseline","ideographic")}redrawlinetop(n){const t=+this.nowOption.tip.right,e=+this.nowOption.tip.top,r=+this.nowOption.tip.scale,d=this.crpath({x:this.divWidth-t-300-250,y:e+40},{x:this.divWidth-t-230*r,y:e+(+this.nowOption.tip.margin+40)*r});this.toplinepath.attr("d",d[0]).attr("stroke",this.nowOption.linecolor);const f=this.toplinepath.node().getTotalLength(),h=(f/80|0)<1?1:f/80|0;this.toppoint.style("offset-path",`path("${d[0].replace(/[\r\n]/g,"")}")`).style("box-shadow",`${this.nowOption.linecolor.substr(0,7)}80 0px 0px 10px 10px`).style("animation",`${h}s linear 0s infinite normal none running motion-path-animation`),this.toplinetext.attr("x",d[1][0]).attr("y",d[1][1]).text(void 0===n.info?"":n.info)}crpath(n,t){let e=[n.x,n.y],r=[t.x,t.y],a="";const s=100;if(Math.abs(n.x-t.x)>s){const l=Math.abs(n.x-t.x);e=[t.x-s,n.y],r=[t.x-10,t.y];const c=[t.x-10,n.y],d=[t.x-s,t.y];a=`M${n.x},${n.y} l ${l-s} 0 C${c[0]-10},${c[1]} ${d[0]+10},${d[1]} ${r[0]},${r[1]} l 10 0`}else a=`M${n.x} ${n.y} L${t.x} ${t.y}`;return[a,e]}crpathbot(n,t){let e="",l={x:0,y:0};if(Math.abs(n.x-t.x)>200){const c={x:n.x+60,y:n.y},d={x:n.x,y:t.y+60},f={x:c.x,y:d.y};l={x:t.x-60,y:t.y+60};const h={x:t.x,y:l.y},v={x:l.x,y:t.y};e=`M${n.x} ${n.y}  C${c.x} ${c.y} ${d.x} ${d.y} ${f.x} ${f.y} L ${l.x} ${l.y}\n      C${h.x} ${h.y} ${v.x} ${v.y} ${t.x} ${t.y}\n      `}else e=`M${n.x} ${n.y}  L${t.x} ${t.y}`,l=t;return[e,[l.x,l.y]]}crpathcenter(n,t,e,r){let a="";if(Math.abs(n.x-t.x)>100){const d={x:n.x+60,y:n.y},f={x:n.x+12,y:t.y},h={x:d.x,y:f.y},v={x:e.x+60,y:e.y},S={x:v.x,y:r.y+120},T={x:S.x,y:r.y},k={x:r.x,y:S.y};a=`M${n.x} ${n.y}  C${d.x} ${d.y} ${f.x} ${f.y} ${h.x} ${h.y}\n      L ${t.x} ${t.y} M ${e.x} ${e.y}\n      C ${v.x} ${v.y}  ${v.x} ${v.y}  ${S.x} ${S.y}\n      C ${T.x} ${T.y}  ${k.x} ${k.y}  ${r.x} ${r.y}\n      `}else a=`M${n.x} ${n.y}  L${t.x} ${t.y} M ${e.x} ${e.y} L ${r.x} ${r.y}`;return[a,n]}loadGltfModel(n,t){return(0,ci.mG)(this,void 0,void 0,function*(){return yield new Promise((r,a)=>{this.loader.load(n,s=>{r(t?s.scene.children[0]:s.scene)},s=>{console.log(s.loaded/s.total*100+"% loaded")},s=>{a(s)})})})}init(){this.drawGrid(),this.controls=new _n.z(this.camera,this.labelRenderer.domElement),this.controls.minDistance=1,this.controls.maxDistance=2e3,this.controls.target.set(this.nowOption.targetpos.x,this.nowOption.targetpos.y,this.nowOption.targetpos.z),this.controls.update(),this.controls.addEventListener("change",()=>{this.redrawlines()}),this.initLight(),this.render()}drawGrid(){this.emptylins(this.linegradgroup);const a=[];for(let m=0;m<12;m++)a.push(new N.Pa4(10*m,-.1,-30)),a.push(new N.Pa4(10*m,-.1,30));const s=(new N.u9r).setFromPoints(a),l=new N.ejS(s,this.linematerial);this.linegradgroup.add(l),l.position.x=-70,l.renderOrder=1;const f=[];for(let m=0;m<13;m++)f.push(new N.Pa4(-55,-.1,5*m)),f.push(new N.Pa4(55,-.1,5*m));const h=(new N.u9r).setFromPoints(f),v=new N.ejS(h,this.linematerial);v.position.set(-15,0,-30),v.renderOrder=1,this.linegradgroup.add(v)}emptylins(n){const t=n.children.length;for(let e=0;e<t;e++){const r=n.children[0];r.material.dispose(),r.geometry.dispose(),n.remove(r)}}updateData(n){var t;return(0,ci.mG)(this,void 0,void 0,function*(){if(void 0===n||null==n||""==n)return;const e=(n=JSON.parse(JSON.stringify(n))).areaA||{},r=n.areaB||{};if(this.u_data=n,this.linksdata=n.linksdata||{},this.rnodelength=(null===(t=n.rnodes)||void 0===t?void 0:t.length)||0,!0===this.firstLoad){this.firstLoad=!1;const a=yield this.loadGltfModel("assets/topo/model2/small.gltf",!0);a.scale.set(4.5,4.5,4.5),a.renderOrder=10;const s=new N.TOt(a.geometry,2),l=new N.nls({color:11184810,transparent:!0,opacity:.4,depthTest:!0,depthWrite:!0}),c=new N.ejS(s,l);c.renderOrder=2,this.computer=a,a.add(c);const d=yield this.loadGltfModel("assets/topo/model2/big.gltf",!0);d.scale.set(4.8,4.8,4.8),d.renderOrder=10;const f=new N.TOt(d.geometry,2),h=new N.ejS(f,l);h.renderOrder=2,this.computerbig=d,d.add(h),this.loading=!0,this.darw(e,r),this.drawsmallcomputer();const v=yield this.loadGltfModel("assets/topo/model2/plane.gltf",!0),m=new N.TOt(v.geometry,1),S=new N.ejS(m,l);S.scale.set(4.5,4.5,4.5),S.position.set(-14,0,0),this.scene.add(S),S.renderOrder=2}else this.loading?this.darw(e,r):setTimeout(()=>{this.updateData(n)},100)})}drawsmallcomputer(){const n=new N.ZAu,t=this.computerbig.clone();n.add(t);const e=n.clone();n.scale.set(.5,.5,.25),n.position.set(25,0,17),this.scene.add(n),e.scale.set(.4,.4,.2),e.position.set(20,0,13),this.scene.add(e)}clearScene(){this.hideAllBox(),this.emptyGroup(this.titleGroup),this.emptyGroup(this.areatitlegroup)}darw(n,t){this.clearScene();const e=n.children||[],r=e[0]||{},a=e[1]||{},s=e[2]||{},l=n.name||"",c=r.children||[],d=a.children||[],f=s.children||[],h=r.name||"",v=a.name||"",m=s.name||"";c.splice(4,c.length),d.splice(4,d.length),f.splice(4,f.length);const T=t.name||"",k=(t||{}).children||[];k.splice(2,k.length),c.forEach((P,R)=>{P.position={x:-47.5,y:0,z:8*R-8*(c.length-1>=1?c.length-1:0)/2}}),d.forEach((P,R)=>{P.position={x:-27.2,y:0,z:8*R-8*(d.length-1>=1?d.length-1:0)/2}}),f.forEach((P,R)=>{P.position={x:-7,y:0,z:8*R-8*(f.length-1>=1?f.length-1:0)/2}}),k.forEach((P,R)=>{P.position={x:20,y:0,z:12*R-10}}),this.drawBox(c,0),this.drawBox(d,1),this.drawBox(f,2),this.drawBox(k,3),this.addareatitle(l,0,-27,1,24,1,"#4ba4ff"),this.addareatitle(T,1,20,1,24,1,"#4ba4ff"),this.addareatitle(h,2,-47.5,1,15.5,1,"#49fcff"),this.addareatitle(v,3,-27.2,1,15.5,1,"#49fcff"),this.addareatitle(m,4,-7,1,15.5,1,"#49fcff"),setTimeout(()=>{this.redrawlines()},100)}hideAllBox(){this.boxsarr.forEach(n=>{n.forEach(t=>{t.visible=!1,t.position.x=1e4})})}findBoxById(n){let t;return this.boxsarr.forEach(e=>{e.forEach(r=>{r.nodeid==n&&(t=r)})}),t}drawBox(n,t){for(let e=0;e<n.length;e++){let r=this.boxsarr[t][e];if(void 0===r){r=new N.ZAu;const a=3===t?this.computerbig.clone():this.computer.clone();r.add(a),this.boxsarr[t][e]=r,this.scene.add(r)}else r.visible=!0;r.nodeid=n[e].id||"",r.position.x=n[e].position.x,r.position.y=n[e].position.y,r.position.z=n[e].position.z,this.addName(n[e],t,e)}}addName(n,t,e){if(void 0===this.titleMeshArr[t][e]){const a=new N.Kj0(this.planegeometry,this.planematerial);a.visible=!1,this.titleMeshArr[t][e]=a;const s=document.createElement("div");this.titledivArr[t][e]=s}const r=new li.j(this.titledivArr[t][e]);this.titleMeshArr[t][e].add(r),this.titleGroup.add(this.titleMeshArr[t][e]),this.titledivArr[t][e].innerHTML=`\n    <div style="text-align: center;transform: translateY(-60%);">\n        <div style="color:white;background:${n.color||"#0053a8"};\n        font-size: 0.75em;line-height: initial;min-width: 80px;padding: 3px 5px;" >${n.name}</div>\n    </div>\n    `,this.titleMeshArr[t][e].position.x=n.position.x,this.titleMeshArr[t][e].position.y=n.position.y+8,this.titleMeshArr[t][e].position.z=n.position.z}addareatitle(n,t,e,r,a,s,l){const d=this.canvasText(n,16,t,l);if(!d)return;const f=new N.ROQ(d),h=new N.BKK(16,3),v=new N.vBJ({map:f,transparent:!0,depthWrite:!1,depthTest:!0,color:l}),m=new N.Kj0(h,v);m.rotation.x=-.5*Math.PI,m.position.set(e,r,a),m.scale.set(s,s,s),m.renderOrder=3,this.areatitlegroup.add(m)}canvasText(n,t,e,r){let a=this.allcanvasarr[e];a||(a=document.createElement("canvas"),this.allcanvasarr[e]=a),a.width=64*t,a.height=192;const l=a.getContext("2d");if(l)return l.fillStyle=r,l.font="normal bold 98px Arial",l.textAlign="center",l.fillText(n,64*t/2,142),a}dispose(){this.controls.dispose(),this.removeSceneChildrens(),setTimeout(()=>{cancelAnimationFrame(this.request)},100)}removeSceneChildrens(){const n=this.scene.children.length;for(let t=0;t<n;t++){const e=this.scene.children[0];e.traverse(r=>{r.isMesh&&(r.material.dispose(),r.geometry.dispose()),e.isMesh?e.remove(r):this.scene.remove(r)}),this.scene.remove(e)}}resize(){this.divHeight=this.domdiv.offsetHeight,this.divWidth=this.domdiv.offsetWidth,this.camera.aspect=this.divWidth/this.divHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.divWidth,this.divHeight),this.labelRenderer.setSize(this.divWidth,this.divHeight),this.svg.attr("width",this.divWidth).attr("height",this.divHeight),this.redrawlines()}redrawlines(){if(0===this.rnodelength)return;const{top:n,center:t,bottom:e}=this.linksdata;n&&this.redrawlinetop(n),e&&this.redrawlinebottom(e),t&&this.redrawlinecenter(t),this.drawrlines(this.rnodelength)}drawrlines(n){if(n<=1)return;const t=[],r=+this.nowOption.tip.top,a=+this.nowOption.tip.scale,s=+this.nowOption.tip.margin,l=this.divWidth-+this.nowOption.tip.right-150*a;for(let c=1;c<n;c++)t.push({x:l,y:r+c*(80+s)*a});this.rlineg.selectAll("line").filter(".rline1").data(t.concat(t)).join("line").attr("class","rline1").attr("x1",l).attr("y1",c=>c.y).attr("x2",l+1).attr("y2",c=>c.y+s*a).attr("stroke",this.nowOption.linecolor).attr("stroke-width",2).attr("filter","url(#Gaussian"+this.__id+")"),this.rlineg.selectAll("line").filter(".rline2").data(t).join("line").attr("class","rline2").attr("x1",l).attr("y1",c=>c.y).attr("x2",l+.01).attr("y2",c=>c.y+s*a).attr("stroke",this.nowOption.linecolor).attr("stroke-width",2).attr("stroke-dasharray","5,5"),this.rlineg.selectAll("path").filter(".pathG").data(t).join("path").attr("class","pathG").attr("d",ot.symbol().type(ot.symbolTriangle).size(120)).attr("fill",this.nowOption.linecolor).attr("transform",c=>"translate("+l+","+(c.y+s*a-8)+"),rotate(180)").attr("filter","url(#Gaussian"+this.__id+")"),this.rlineg.selectAll("path").filter(".pathG2").data(t).join("path").attr("class","pathG2").attr("d",ot.symbol().type(ot.symbolTriangle).size(100)).attr("fill",this.nowOption.linecolor).attr("transform",c=>"translate("+l+","+(c.y+s*a-8)+"),rotate(180)")}initLight(){const n=new N.Mig(16777215,3);this.scene.add(n)}three3dto2d(n,t){let e=new N.Pa4;return e=n.position.clone().add(new N.Pa4(t.x,t.y,t.z)).project(this.camera),{x:Math.round(e.x*this.divWidth/2+this.divWidth/2),y:Math.round(-e.y*this.divHeight/2+this.divHeight/2)}}emptyGroup(n){var t;const e=n.children.length;for(let r=0;r<e;r++){const a=n.children[0];a.traverse(s=>{var l;s.isMesh&&(s.material.dispose(),s.geometry.dispose(),null===(l=a.material.map)||void 0===l||l.dispose()),a.remove(s)}),a.isMesh&&(a.material.dispose(),a.geometry.dispose(),null===(t=a.material.map)||void 0===t||t.dispose()),n.remove(a)}}setFontSize(n){n<12&&(n=12),this.domdiv.style.fontSize=n+"px"}updateOptions(n){this.nowOption=this.deepCopy(this.nowOption,n),this.camera.position.set(this.nowOption.camerapos.x,this.nowOption.camerapos.y,this.nowOption.camerapos.z),this.camera.lookAt(this.nowOption.targetpos.x,this.nowOption.targetpos.y,this.nowOption.targetpos.z),this.controls.target.set(this.nowOption.targetpos.x,this.nowOption.targetpos.y,this.nowOption.targetpos.z),this.controls.update(),this.setFontSize(this.nowOption.fontSize),this.updateData(this.u_data),this.resize()}},Nf=["container"],Bf=function(i,n){return{"box-shadow":i,margin:n}},Ff=function(i){return{background:i,"background-size":"100% 100%"}};function Lf(i,n){if(1&i&&(o.TgZ(0,"div",4),o._UZ(1,"span",5),o.TgZ(2,"span",6),o._uU(3),o.qZA(),o.qZA()),2&i){const t=n.$implicit,e=o.oxw();o.Akn(o.WLB(5,Bf,"inset 0 0 10px 1px "+t.color,e.options.tip.margin+"px auto")),o.xp6(1),o.Akn(o.VKq(8,Ff,"url("+t.imgurl+") no-repeat")),o.xp6(2),o.Oqu(t.name)}}const Hf=function(i,n,t){return{right:i,top:n,transform:t}};let Zs=(()=>{class i{constructor(){this.config={},this.widgetPos={},this.defaultOpt={},this.defimg="/assets/topo253d/0.png",this.options={fontSize:14,linecolor:"#2ffffe",imgurls:["/assets/topo253d/1.png","/assets/topo253d/2.png","/assets/topo253d/3.png","/assets/topo253d/4.png","/assets/topo253d/5.png"],tip:{right:20,top:20,scale:1,margin:40},camerapos:{x:0,y:100,z:40},targetpos:{x:0,y:0,z:0}},this.optionsData={fontSize:{name:"\u5b57\u4f53\u5927\u5c0f",type:"number"},linecolor:{name:"\u7ebf\u6761\u989c\u8272",type:"fill"},pieoptions:{name:"\u997c\u56fe\u914d\u7f6e",type:"group",children:{innerDiameter:{name:"\u5185\u5f84",type:"number"},thickness:{name:"\u539a\u5ea6",type:"number"},minheight:{name:"\u6700\u5c0f\u9ad8\u5ea6",type:"number"},maxheight:{name:"\u6700\u5927\u9ad8\u5ea6",type:"number"}}},camerapos:{name:"\u76f8\u673a\u4f4d\u7f6e",type:"group",children:{x:{name:"x",type:"number"},y:{name:"y",type:"number"},z:{name:"z",type:"number"}}}},this.nodes=[]}ngOnInit(){}ngOnChanges(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngAfterViewInit(){this.scene=new Gf(this.container.nativeElement,this.options,function(a){},this);let r=this.setdata();setTimeout(()=>{this.nodes=r.rnodes,this.nodes.map((a,s)=>{a.imgurl=this.options.imgurls[s]||this.defimg}),this.scene.updateData(JSON.parse(JSON.stringify(r)))},10)}onchangeOption(t){this.scene&&this.scene.updateOptions(t)}ngOnDestroy(){this.scene&&this.scene.dispose()}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}setdata(){return{areaA:{name:"\u8fd0\u884c\u7eb3\u7ba1\u533a",children:[{name:"\u751f\u4ea7\u57df",children:[{name:"\u4e1a\u52a1\u5904\u7406\u7ec4",id:"1"},{name:"\u6280\u672f\u652f\u6491\u7ec4",id:"2"},{name:"\u65e5\u5e38\u5de1\u68c0\u7ec4",id:"3"}]},{name:"\u529e\u516c\u57df",children:[{name:"\u4e1a\u52a1\u5904\u7406\u7ec4",id:"4"},{name:"\u6280\u672f\u652f\u6491\u7ec4",id:"5"}]},{name:"\u4e92\u8054\u7f51\u57df",children:[{name:"\u5916\u8054\u4e92\u8054\u7f51",id:"6"},{name:"\u53cc\u6808\u7ec4",id:"7"},{name:"\u4f20\u7edf\u7ec4",id:"8"},{name:"DMZ\u7ec4",id:"9"}]}]},areaB:{name:"\u5f00\u53d1\u6d4b\u8bd5\u533a",children:[{name:"\u5f00\u53d1\u6d4b\u8bd5\u57df"},{name:"\u751f\u4ea7\u9a8c\u8bc1\u57df"}]},linksdata:{top:{info:"178ms/ 18 aps /19%--"},center:{id1:"2",id2:"9"},bottom:{id1:"2",info:"122 ms / 38 aps /30%--"}},rnodes:[{name:"\u9632\u706b\u5899",color:"#3d86ed"},{name:"F5",color:"#f9c842"},{name:"\u7f51\u5173",color:"#f9c842"},{name:"\u624b\u673a\u94f6\u884c\u540e\u7aef",color:"#f90842"},{name:"\u8eab\u4efd\u8ba4\u8bc1",color:"#f9c842"}]}}setdata2(){return{areaA:{name:"\u8fd0\u884c\u7eb3\u7ba1\u533a",children:[{name:"\u751f\u4ea7\u57df1",children:[{name:"1"}]},{name:"\u529e\u516c\u57df1",children:[]},{name:"\u4e92\u8054\u7f51\u57df1",children:[{name:"\u5916\u8054\u4e92\u8054\u7f51"},{name:"\u53cc\u6808\u7ec4"},{name:"\u4f20\u7edf\u7ec4"},{name:"DMZ\u7ec4"},{name:"DMZ\u7ec42"}]}]},areaB:{name:"\u5f00\u53d1\u6d4b\u8bd5\u533a1",children:[{name:"\u5f00\u53d1\u6d4b\u8bd5\u57df1"},{name:"\u751f\u4ea7\u9a8c\u8bc1\u57df1"},{name:"\u751f\u4ea7\u9a8c\u8bc1\u57df2"}]},links:[]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-topo253d"]],viewQuery:function(t,e){if(1&t&&o.Gf(Nf,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{config:"config",widgetPos:"widgetPos"},features:[o.TTD],decls:4,vars:7,consts:[[2,"width","100%","height","100%"],["container",""],[1,"rightbox"],["class","box",3,"style",4,"ngFor","ngForOf"],[1,"box"],[1,"box-img"],[1,"box-title"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0,1),o.TgZ(2,"div",2),o.YNc(3,Lf,4,10,"div",3),o.qZA(),o.qZA()),2&t&&(o.xp6(2),o.Akn(o.kEZ(3,Hf,e.options.tip.right+"px",e.options.tip.top+"px","scale("+e.options.tip.scale+")")),o.xp6(1),o.Q6J("ngForOf",e.nodes))},directives:[w.sg],styles:[".rightbox[_ngcontent-%COMP%]{position:absolute;width:300px;right:20px;top:10px;z-index:1;transform:scale(1.5);transform-origin:right top;border-radius:5px;box-shadow:inset 0 0 10px 1px #3d86ed}.box[_ngcontent-%COMP%]{display:flex;align-items:center;width:160px;padding:0 10px;text-align:center;border-radius:10px;margin:40px auto;height:80px}.box[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]{display:inline-block;width:60px;height:60px;min-width:60px;vertical-align:middle}.box[_ngcontent-%COMP%]   .box-title[_ngcontent-%COMP%]{text-align:left;-webkit-line-clamp:2;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical}@keyframes topo253ddash{to{stroke-dashoffset:100}}@keyframes motion-path-animation{0%{offset-distance:0%}to{offset-distance:100%}}"]}),i})();var Ws=p(84939);const Vs={fontSize:14,scale:1,svg:{sw:1015,sh:690,sx:2.5,sz:2},line:{uOffSpeed:2},tipsTime:5,camera:{x:1,y:2,z:-3,tx:0,ty:0,tz:0},nodes:[{id:1,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:382,y:104},{id:2,type:"box",name:"",x:291,y:82},{id:3,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:898,y:104},{id:4,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:784,y:104},{id:5,type:"box",name:"",x:955,y:231},{id:6,type:"ips",name:"IPS",x:769,y:308},{id:7,type:"ips",name:"IPS",x:769,y:381},{id:8,type:"box",name:"",x:955,y:456},{id:9,type:"firewall2",name:"\u9632\u706b\u5899",x:382,y:161},{id:10,type:"firewall2",name:"\u9632\u706b\u5899",x:492,y:161},{id:11,type:"firewall2",name:"\u9632\u706b\u5899",x:784,y:161},{id:12,type:"firewall2",name:"\u9632\u706b\u5899",x:898,y:161},{id:13,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:492,y:104},{id:14,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:14,y:141},{id:15,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:124,y:141},{id:16,type:"box",name:"",x:583,y:82},{id:17,type:"box",name:"",x:693,y:82},{id:18,type:"box",name:"",x:986,y:82},{id:19,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:899,y:286},{id:20,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:899,y:400},{id:21,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:160,y:287},{id:22,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:18,y:546},{id:23,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:125,y:546},{id:24,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:378,y:585},{id:25,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:492,y:585},{id:26,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:792,y:585},{id:27,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:899,y:585},{id:28,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:160,y:401},{id:29,type:"firewall",name:"\u9632\u706b\u5899",x:626,y:298},{id:30,type:"firewall",name:"\u9632\u706b\u5899",x:626,y:393},{id:31,type:"firewall2",name:"\u9632\u706b\u5899",x:377,y:531},{id:32,type:"firewall2",name:"\u9632\u706b\u5899",x:491,y:531},{id:33,type:"firewall2",name:"\u9632\u706b\u5899",x:791,y:531},{id:34,type:"firewall2",name:"\u9632\u706b\u5899",x:898,y:531},{id:35,type:"extranet",name:"\u5916\u7f51",x:1e3,y:341},{id:36,type:"host",name:"\u670d\u52a1\u5668",x:69,y:50},{id:37,type:"host",name:"\u670d\u52a1\u5668",x:439,y:14},{id:38,type:"host",name:"\u670d\u52a1\u5668",x:843,y:14},{id:39,type:"host",name:"\u670d\u52a1\u5668",x:70,y:637},{id:40,type:"coreSwitch",name:"\u6838\u5fc3\u4ea4\u6362\u673a",x:477,y:406},{id:41,type:"coreSwitch",name:"\u6838\u5fc3\u4ea4\u6362\u673a",x:477,y:283},{id:42,type:"host",name:"\u670d\u52a1\u5668",x:842,y:676},{id:43,type:"host",name:"\u670d\u52a1\u5668",x:441,y:676},{id:44,type:"host",name:"\u670d\u52a1\u5668",x:32,y:345,angle:-90}],links:["1000 335 935 335 935 286 828 286 828 305 569 305 569 283 84 283 84 341 32 341","1000 349 935 349 935 399 828 399 828 385 569 385 569 406 84 406 84 347 32 347","955 456 899 456 898 231 955 231","986 82 941 82 941 104 746 104 746 82 693 82","838 676 838 622 791 622 792 470 569 470 569 193 792 193 791 50 839 50 839 14","848 14 848 50 898 50 898 208 14 208 14 104 64 104 64 50","846 676 846 622 898 622 899 489 14 489 14 582 65 582 65 637","445 14 445 65 491 65 492 226 477 226 477 456 492 456 492 622 445 622 445 676","439 14 439 65 384 65 384 470 125 470 125 582 75 582 75 637","439 676 439 622 377 622 377 226 125 226 125 104 75 104 75 50","291 82 291 111 583 111 583 82"]};class Zf extends Ne.H{constructor(n,t,e,r){super(),this.defOption=Vs,this.emMaterials={},this.linmaterials=[],this._data={},this.runPlane=[],this.loadend=!1,this._dist=0,this.callback=e,this.scope=r,this.domDiv=n,this.setOption(this.defOption,t);const a=document.createElement("canvas");n.appendChild(a),this.canvas=a,a.width=n.offsetWidth,a.height=n.offsetHeight,this.engine=new mt.Engine(a,!0,{preserveDrawingBuffer:"true"===localStorage.getItem("drawingBuffer"),stencil:!0}),this.scene=new mt.Scene(this.engine),this.scene.clearColor=new mt.Color4(0,0,0,0),this.init(),this.render(),this.addGltf()}init(){const n=new mt.ArcRotateCamera("Camera",3*Math.PI/2,Math.PI/3,2,mt.Vector3.Zero(),this.scene);n.attachControl(this.canvas,!0),n.wheelPrecision=300,n.lowerRadiusLimit=1,n.upperRadiusLimit=5,n.minZ=.1,n.upperBetaLimit=Math.PI/2*.9,this.activeCamera=n,this.changeCamera(),n.onViewMatrixChangedObservable.add(()=>{var d;this.changePlanePosition(null===(d=this.clickPlane)||void 0===d?void 0:d.position)}),new mt.HemisphericLight("sun",new mt.Vector3(.2,1,.2),this.scene).intensity=.5,new mt.PointLight("point",new mt.Vector3(0,1,0),this.scene).intensity=.5;const r=new mt.GlowLayer("glow",this.scene,{mainTextureSamples:4});r.intensity=1;const a=new mt.GlowLayer("glow",this.scene,{mainTextureSamples:4});this.gl1=r,this.gl2=a;let s=0;setInterval(()=>{a.intensity=.2*(.5+Math.sin(s)),s+=.5},100),this.addPipe();const l=mt.MeshBuilder.CreatePlane("plane",{width:14,height:10},this.scene);l.position.y=-.02,l.rotation.x=Math.PI/2;const c=new mt.StandardMaterial("planeMat",this.scene);c.diffuseColor=mt.Color3.FromHexString("#191f25"),c.emissiveColor=new mt.Color3(0,0,0),c.specularPower=200,c.backFaceCulling=!1,l.material=c,this.addLines(),this.createDisc()}createDisc(){mt.Effect.ShadersStore.customVertexShader="\n    attribute vec3 position;\n    attribute vec2 uv;\n\n    uniform mat4 worldViewProjection;\n\n\t\tvarying vec3 vPosition;\n\t\tvarying vec2 vUv;\n    \n\t\tvoid main() { \n\t\t\tvUv = uv; \n\t\t\tgl_Position = worldViewProjection * vec4(position, 1.0);\n\t\t}\n\t\t",mt.Effect.ShadersStore.customFragmentShader="\n\t\tuniform float iTime;\n\t\tuniform vec2 iResolution; \n\t\tvarying vec2 vUv;\n\n    vec3 hsb2rgb(in vec3 c)\n    {\n        vec3 rgb = clamp(abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),\n                                6.0)-3.0)-1.0,\n                        0.0,\n                        1.0 );\n        rgb = rgb*rgb*(3.0-2.0*rgb);\n        return c.z * mix( vec3(1.0), rgb, c.y);\n    }\n    void main(void) {\n        \n      vec2 p = (2.0*vUv.xy-iResolution.xy)/iResolution.y;\n      float r = length(p) * 2.5;\n\t    vec3 color = hsb2rgb(vec3(0.0,1.0,1.0));\n    \n      float a = pow(r, 2.0);\n      float b = sin(r * 0.8 - 1.6);\n      float c = sin(r - 0.010);\n      float s = sin(a - iTime * 3.0 + b) * c;\n      \n      color *= abs(1.0 / (s * 10.8)) - 0.01;\n\t    gl_FragColor = vec4(color, 1.);\n      gl_FragColor = vec4(gl_FragColor.rgb, 4.0*pow((1.0-length(p)*0.8),2.0));\n\n    }\n\t\t";const e=new mt.ShaderMaterial("custom",this.scene,{vertex:"custom",fragment:"custom"},{attributes:["position","uv"],uniforms:["worldViewProjection"]});e.backFaceCulling=!1,e.setFloat("iTime",0),e.setVector2("iResolution",new mt.Vector2(1,1)),e.alphaMode=mt.Engine.ALPHA_MAXIMIZED,e.alpha=.4;const r=mt.MeshBuilder.CreateDisc("disc",{radius:.3,tessellation:64,sideOrientation:mt.Mesh.DOUBLESIDE});r.position.y=.02,r.rotation.x=Math.PI/2,r.material=e,this.disc=r,this.disc.setEnabled(!1)}changeCamera(){const{x:n,y:t,z:e,tx:r,ty:a,tz:s}=this.nowOption.camera;this.activeCamera&&(this.activeCamera.setPosition(new mt.Vector3(n,t,e)),this.activeCamera.target=new mt.Vector3(r,a,s))}updateData(n){void 0!==n&&(n=JSON.parse(JSON.stringify(n)),this._data=n,this.changeEmissiveColor(n.hostData),this.loadend&&this.autoRunHostTips())}addLines(){const t=2.3,e=.1,r=[],a=Math.floor(34),s=Math.floor(t/e);for(let l=0;l<=a;l++){const c=mt.MeshBuilder.CreateLines("line",{colors:[new mt.Color4(.9,.9,.8,.2),new mt.Color4(.9,.9,.8,.2)],points:[new mt.Vector3(l*e-1.7,0,-t/2),new mt.Vector3(l*e-1.7,0,t/2)]},this.scene);c.position.y=-.01,r.push(c)}for(let l=0;l<=s;l++){const c=mt.MeshBuilder.CreateLines("line",{colors:[new mt.Color4(.9,.9,.8,.2),new mt.Color4(.9,.9,.8,.2)],points:[new mt.Vector3(-1.7,0,-t/2+l*e),new mt.Vector3(1.7,0,-t/2+l*e)]},this.scene);c.position.y=-.01,r.push(c)}}addGltf(){mt.SceneLoader.LoadAssetContainer("./assets/model/","computer-room.glb",this.scene,n=>{n.materials.forEach(function(c){c.backFaceCulling=!1});const t=new mt.Vector3(.01,.01,.01);n.transformNodes.forEach(c=>{if("platform"===c.name||"platform2"===c.name){const d=c.clone("platform");d.scaling=t,"platform"===c.name&&(d.position.y=-.05);const f=new mt.StandardMaterial("platform",this.scene);f.diffuseColor=mt.Color3.FromHexString("#292c31"),("platform2"===c.name||"platform"===c.name)&&d.getChildMeshes().forEach(h=>{"platform.circle"!=h.name&&(h.material=f)})}});const e=this.nowOption.nodes,{sw:r,sh:a,sx:s,sz:l}=this.nowOption.svg;e.map(c=>{const d=n.transformNodes.find(f=>f.name===c.type);if(d){let f=1;"host"===c.type&&(f=3);const h=new mt.TransformNode(c.type,this.scene);h.scaling=t;for(let E=0;E<f;E++){const P=d.clone(c.type);P.parent=h;let R=0;3===f&&(R=10*E-10),P.position=new mt.Vector3(R,0,0),P.getChildMeshes().forEach(B=>{"host.state"===B.name&&(B.material=B.material.clone(),B.material.emissiveColor=new mt.Color3(Math.random(),.3,Math.random()),this.emMaterials[c.id]||(this.emMaterials[c.id]=[]),this.emMaterials[c.id].push(B.material),this.gl2.addIncludedOnlyMesh(B)),"coreSwitch.cylinder1"===B.name&&(B.material.emissiveColor=new mt.Color3(.2,.2,.2)),"extranet.cloud"===B.name&&(B.material.emissiveColor=new mt.Color3(.2,.2,.2)),"branchExchange.arrow"===B.name&&(B.material.emissiveColor=new mt.Color3(.2,.2,.2))})}let v=0,m=0;"host"===c.type&&(v=Math.PI),"firewall2"===c.type&&(v=Math.PI/2),"firewall"===c.type&&(m=-Math.PI/2);const S=Number(c.x)/r*s-s/2,T=0,k=-Number(c.y)/a*l+l/2;h.position=new mt.Vector3(S,T,k),null!=c.angle&&(v+=c.angle*Math.PI/180,m+=c.angle*Math.PI/180),h.rotation=new mt.Vector3(0,v,0),""!=c.name&&null!=c.name&&this.addName(h,c,S,k,m),"coreSwitch"===c.type&&(this.addCylinder(S,k),this.addParticleSystem(S,0,k))}}),this.updateData(this._data),this.disc.setEnabled(!0),this.autoRunHostTips(),this.loadend=!0})}changeEmissiveColor(n){n&&n.length>0&&n.forEach(t=>{this.emMaterials[t.id]&&this.emMaterials[t.id].forEach((e,r)=>{t.colors[r]&&(e.emissiveColor=mt.Color3.FromHexString(t.colors[r]))})})}addName(n,t,e,r,a){const s=n.getHierarchyBoundingVectors(),l=s.max.y-s.min.y,d=mt.MeshBuilder.CreatePlane("plane",{width:.4,height:.2},this.scene),f=Ws.AdvancedDynamicTexture.CreateForMesh(d);d.position.set(e,l+.05,r),d.rotation=new mt.Vector3(0,a,0);const h=Ws.Button.CreateSimpleButton("but1",t.name.toString());h.width=1,h.height=.5,h.children[0].color="#ffffff",h.children[0].fontSize=140,h.color="#00ff0000",h.background="#11539b10",f.addControl(h),"host"===t.type&&this.runPlane.push([d,t])}autoRunHostTips(){if(this.nowOption.tipsTime<=0)return;this.tipsrunset&&clearInterval(this.tipsrunset);let n=0,t=()=>{let e=this.runPlane[n][0];this.disc.position.set(e.position.x,.01,e.position.z),this.clickPlanenode(e,this.runPlane[n][1]),this.clickPlane=e,n++,n>=this.runPlane.length&&(n=0)};t(),this.tipsrunset=setInterval(()=>{t()},1e3*this.nowOption.tipsTime)}clickPlanenode(n,t){if(this.scene.activeCamera){const e=mt.Vector3.Project(n.position,mt.Matrix.Identity(),this.scene.getTransformMatrix(),this.scene.activeCamera.viewport.toGlobal(this.engine.getRenderWidth(),this.engine.getRenderHeight()));this.callback.call(this.scope,{alarmBox:{top:e.y,left:e.x},node:t})}}changePlanePosition(n){if(this.scene.activeCamera){if(!n)return;if(this.clickPlane){const t=mt.Vector3.Project(n,mt.Matrix.Identity(),this.scene.getTransformMatrix(),this.scene.activeCamera.viewport.toGlobal(this.engine.getRenderWidth(),this.engine.getRenderHeight()));this.callback.call(this.scope,{alarmBox:{top:t.y,left:t.x}})}}}createCanvasPoint(n,t){const e=document.createElement("canvas");e.width=n,e.height=t;const r=e.getContext("2d"),a=r.createRadialGradient(n/2,t/2,0,n/2,t/2,n/3);return a.addColorStop(0,"#ffffff"),a.addColorStop(1,"#ffffff00"),r.fillStyle=a,r.fillRect(0,0,e.width,e.height),e}addParticleSystem(n,t,e){const r=.05,a=new mt.ParticleSystem("particles",2e3,this.scene),s=this.createCanvasPoint(128,128);a.particleTexture=new mt.Texture(s.toDataURL(),this.scene),a.minEmitBox=new mt.Vector3(-r,0,-r),a.maxEmitBox=new mt.Vector3(r,0,r),a.color1=new mt.Color4(.7,.8,1,1),a.color2=new mt.Color4(.1,.8,1,1),a.start(),a.minSize=.05,a.maxSize=.02,a.minEmitPower=.5,a.maxEmitPower=1,a.emitter=new mt.Vector3(n,t,e)}mitredExtrude(n,t,e){const r=t.shape,a=t.path,s=t.close||!1,c=a.length,d=mt.Vector3.Zero(),f=mt.Vector3.Zero();let h=mt.Vector3.Zero(),v=mt.Vector3.Zero(),m=mt.Vector3.Zero(),S=mt.Vector3.Zero(),T=mt.Vector3.Zero(),k=mt.Vector3.Zero(),E=mt.Vector3.Zero();const P=mt.Vector3.Zero(),R=mt.Vector3.Zero();mt.Vector3.Zero();let Z,L=0;const q=[];for(let $=0;$<r.length;$++){a[1].subtractToRef(a[0],d),m=d.clone().normalize(),h=mt.Vector3.Cross(e.activeCamera.position,m).normalize(),v=mt.Vector3.Cross(m,h),E=a[0].add(h.scale(r[$].x)).add(v.scale(r[$].y));const ft=[E.clone()];for(let X=0;X<c-2;X++){a[X+2].subtractToRef(a[X+1],f),k=f.clone().normalize(),S=mt.Vector3.Cross(e.activeCamera.position,k).normalize(),T=mt.Vector3.Cross(k,S),k.subtractToRef(m,R);const ct=mt.Vector3.Cross(k,m),yt=mt.Vector3.Cross(ct,R),xt=mt.Plane.FromPositionAndNormal(a[X+1],yt);Z=new mt.Ray(E,m),L=Z.intersectsPlane(xt),E.addToRef(m.scale(L),P),ft.push(P.clone()),h=S.clone(),v=T.clone(),m=k.clone(),E=P.clone()}if(s){a[0].subtractToRef(a[c-1],f),k=f.clone().normalize(),S=mt.Vector3.Cross(e.activeCamera.position,k).normalize(),T=mt.Vector3.Cross(k,S),k.subtractToRef(m,R);let X=mt.Vector3.Cross(k,m),ct=mt.Vector3.Cross(X,R),yt=mt.Plane.FromPositionAndNormal(a[c-1],ct);Z=new mt.Ray(E,m),L=Z.intersectsPlane(yt),E.addToRef(m.scale(L),P),ft.push(P.clone()),h=S.clone(),v=T.clone(),m=k.clone(),E=P.clone(),a[1].subtractToRef(a[0],f),k=f.clone().normalize(),S=mt.Vector3.Cross(e.activeCamera.position,k).normalize(),T=mt.Vector3.Cross(k,S),k.subtractToRef(m,R),X=mt.Vector3.Cross(k,m),ct=mt.Vector3.Cross(X,R),yt=mt.Plane.FromPositionAndNormal(a[0],ct),Z=new mt.Ray(E,m),L=Z.intersectsPlane(yt),E.addToRef(m.scale(L),P),ft.shift(),ft.unshift(P.clone())}else{const ct=mt.Plane.FromPositionAndNormal(a[c-1],m);Z=new mt.Ray(E,m),L=Z.intersectsPlane(ct),E.addToRef(m.scale(L),P),ft.push(P.clone())}q.push(ft)}return mt.MeshBuilder.CreateRibbon("ribbon",{pathArray:q,sideOrientation:mt.Mesh.DOUBLESIDE,closeArray:!0,closePath:s},e)}addPipe(){const n=[];this.nowOption.links.forEach(s=>{n.push(s.split(" "))});const{sw:t,sh:e,sx:r,sz:a}=this.nowOption.svg;n.forEach(s=>{const l=[];for(let T=0;T<s.length;T+=2){const k=Number(s[T])/t*r-r/2,E=0,P=-Number(s[T+1])/e*a+a/2;l.push(new mt.Vector3(k,E,P))}const c=[],d=.0025;for(let T=0;T<36;T++)c.push(new mt.Vector3(d*Math.cos(2*T*Math.PI/36),d*Math.sin(2*T*Math.PI/36),0));const h=this.mitredExtrude("line",{path:l,shape:c},this.scene);h.isPickable=!1;let v=0;for(let T=0;T<l.length-1;T++)v+=mt.Vector3.Distance(l[T],l[T+1]);const m=new mt.StandardMaterial("cylinderMat",this.scene),S=this.createCanvas(256,512);m.diffuseTexture=new mt.Texture(S.toDataURL(),this.scene),m.diffuseTexture.uScale=Math.ceil(10*v),m.diffuseTexture.hasAlpha=!0,m.diffuseColor=mt.Color3.FromHexString("#5385ee"),m.emissiveColor=mt.Color3.FromHexString("#264480"),m.useAlphaFromDiffuseTexture=!0,h.material=m,this.linmaterials.push(m)})}createCanvas(n,t){const e=document.createElement("canvas");e.width=n,e.height=t;const r=e.getContext("2d");return r.fillStyle="#ffffff60",r.fillRect(0,0,.5*n,t),r.fillStyle="#ffffffa0",r.fillRect(.5*n,0,.5*n,t),e}createCanvas2(n,t){const e=document.createElement("canvas");e.width=n,e.height=t;const r=e.getContext("2d"),a=r.createLinearGradient(0,0,0,t);return a.addColorStop(0,"#ffffff00"),a.addColorStop(1,"#ffffffa0"),r.fillStyle=a,r.fillRect(0,0,n,.9*t),e}addCylinder(n,t){const e=[];e[0]=new mt.Vector4(.98,.98,1,1),e[1]=new mt.Vector4(.95,0,0,.95),e[2]=new mt.Vector4(.98,.98,1,1);const r=mt.MeshBuilder.CreateCylinder("cylinder",{diameter:.1,height:.6,tessellation:24,faceUV:e},this.scene);r.position.set(n,.28,t);const a=mt.MeshBuilder.CreateCylinder("cylinder2",{diameter:.15,height:.5,tessellation:24,faceUV:e},this.scene);a.position.set(n,.22,t);const s=new mt.StandardMaterial("cylinderMat",this.scene),l=this.createCanvas2(512,512);s.diffuseTexture=new mt.Texture(l.toDataURL(),this.scene),s.diffuseTexture.hasAlpha=!0,s.diffuseColor=new mt.Color3(1,1,1),s.emissiveColor=mt.Color3.FromHexString("#5385ee"),s.alpha=.45,s.useAlphaFromDiffuseTexture=!0,r.material=s,a.material=s}render(){this.engine.runRenderLoop(()=>{this.scene.render(),this.linmaterials.forEach(n=>{n.diffuseTexture.uOffset+=this.nowOption.line.uOffSpeed/100}),this.disc&&(this.disc.material.setFloat("iTime",this._dist+.5*Math.sin(.17*this._dist)+.5*Math.cos(.3*this._dist)),this._dist+=.03)})}dispose(){var n;this.tipsrunset&&clearInterval(this.tipsrunset),null===(n=this.engine)||void 0===n||n.dispose()}resize(){var n;this.canvas.width=this.domDiv.offsetWidth,this.canvas.height=this.domDiv.offsetHeight,null===(n=this.engine)||void 0===n||n.resize()}updateOptions(n){this.setOption(this.defOption,n),this.changeCamera()}}const js=["#BB4CB8","#004CFE","#FE4CE0","#D24C07","#754C73","#934CAF","#AE4C26","#C04C47","#F34CC7","#9F4C9F","#8B4C35","#E24CE1"];function We(){const i=[];for(let n=0;n<3;n++){let t=js[Math.floor(Math.random()*js.length)];i.push(t)}return i}function Wf(){return ze.mock({"hostData|7":[{"id|+1":[36,37,38,39,42,43,44],"colors|1":[We(),We(),We(),We(),We(),We(),We()],boxdata:{name:"\u544a\u8b66\u4fe1\u606f",title:"E@integer(10,100)-\u670d\u52a1\u5668",status:"\u6301\u7eed\u4e2d",time:"\u5df2\u6301\u7eed@integer(1,24)\u5c0f\u65f6",list:[{host:"\u8b66\u62a5\u4e3b\u673a/IP",content:"\u544a\u8b66\u5185\u5bb9"},{host:"@ip",content:"\u54cd\u5e94\u65f6\u95f4(@integer(100,1000)ms) \u8d85\u8fc7\u9608\u503c"}],start:"\u5f00\u59cb\u65f6\u95f4: @datetime"}}]})}const jf=["container"];function Uf(i,n){if(1&i&&(o.TgZ(0,"th"),o._uU(1),o.qZA()),2&i){const t=o.oxw(),e=t.$implicit,r=t.index;o.xp6(1),o.AsE("",null==e?null:e.host,"",r,"")}}function Yf(i,n){if(1&i&&(o.TgZ(0,"th"),o._uU(1),o.qZA()),2&i){const t=o.oxw().$implicit;o.xp6(1),o.Oqu(null==t?null:t.content)}}function Xf(i,n){if(1&i&&(o.TgZ(0,"td"),o._uU(1),o.qZA()),2&i){const t=o.oxw().$implicit;o.xp6(1),o.Oqu(null==t?null:t.host)}}function Jf(i,n){if(1&i&&(o.TgZ(0,"td"),o._uU(1),o.qZA()),2&i){const t=o.oxw().$implicit;o.xp6(1),o.Oqu(null==t?null:t.content)}}function Kf(i,n){if(1&i&&(o.TgZ(0,"tr"),o.YNc(1,Uf,2,2,"th",10),o.YNc(2,Yf,2,1,"th",10),o.YNc(3,Xf,2,1,"td",10),o.YNc(4,Jf,2,1,"td",10),o.qZA()),2&i){const t=n.index;o.xp6(1),o.Q6J("ngIf",0==t),o.xp6(1),o.Q6J("ngIf",0==t),o.xp6(1),o.Q6J("ngIf",0!=t),o.xp6(1),o.Q6J("ngIf",0!=t)}}const Qf=function(i,n){return{fontSize:i,transform:n}},qf=function(i,n,t){return{top:i,left:n,opacity:t}};let Us=(()=>{class i{constructor(){this.hostData=[],this.alarmTips={},this.options=Vs,this.optionsData={scale:{name:"\u7f29\u653e",type:"slider",min:0,max:4,step:.1}},this.mockjs=Wf,this.comData=this.mockjs(),this.alarmBox={top:200,left:200,opacity:0}}ngOnInit(){}ngOnChanges(t){var e;null===(e=this.scene)||void 0===e||e.resize()}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}onchangeOption(t){this.scene&&this.scene.updateOptions(t)}onchangeDemoData(t){t&&(this.comData=t,this.scene&&this.scene.updateData(t))}ngAfterViewInit(){let t=function(e){if(this.alarmBox.opacity=1,e.alarmBox&&(this.alarmBox=e.alarmBox,this.alarmBox.opacity=1),e.node){let r=e.node.id;r&&this.hostData.find(a=>{a.id==r&&(this.alarmTips=a.boxdata)})}};setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new Zf(this.container.nativeElement,this.options,t,this);let r=ze.mock({"hostData|7":[{"id|+1":[36,37,38,39,42,43,44],"colors|1":[We(),We(),We(),We(),We(),We(),We()],boxdata:{name:"@ctitle(2,4)",title:"E@integer(10,100)-\u670d\u52a1\u5668",status:"\u6301\u7eed\u4e2d",time:"\u5df2\u6301\u7eed@integer(1,24)\u5c0f\u65f6",list:[{host:"\u8b66\u62a5\u4e3b\u673a/IP",content:"\u544a\u8b66\u5185\u5bb9"},{host:"@ip",content:"\u54cd\u5e94\u65f6\u95f4(@integer(100,1000)ms) \u8d85\u8fc7\u9608\u503c"}],start:"\u5f00\u59cb\u65f6\u95f4: @datetime"}}]});this.hostData=r.hostData,this.scene.updateData(r)},10)}ngOnDestroy(){this.scene&&this.scene.dispose()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-computer-room"]],viewQuery:function(t,e){if(1&t&&o.Gf(jf,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},features:[o.TTD],decls:17,vars:17,consts:[[2,"width","100%","height","100%","position","absolute"],["container",""],[1,"alarm-box",2,"background","url(./assets/computer-room/back.png)","background-size","100% 100%"],[1,"alarm-t0"],[1,"alarm-t1"],[1,"alarm-t2"],[1,"alarm-table"],[4,"ngFor","ngForOf"],[1,"alarm-t3"],[1,"alarm-svg",2,"background","url(./assets/computer-room/alarm.png)","background-size","100% 100%"],[4,"ngIf"]],template:function(t,e){1&t&&(o._UZ(0,"div",0,1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o._uU(4),o.qZA(),o.TgZ(5,"div",4),o._uU(6),o.qZA(),o.TgZ(7,"div",5),o.TgZ(8,"span"),o._uU(9),o.qZA(),o.TgZ(10,"span"),o._uU(11),o.qZA(),o.qZA(),o.TgZ(12,"table",6),o.YNc(13,Kf,5,4,"tr",7),o.qZA(),o.TgZ(14,"div",8),o._uU(15),o.qZA(),o._UZ(16,"div",9),o.qZA()),2&t&&(o.Akn(o.WLB(10,Qf,e.options.fontSize+"px","scale("+e.options.scale+")")),o.xp6(2),o.Akn(o.kEZ(13,qf,e.alarmBox.top+"px",e.alarmBox.left+"px",e.alarmBox.opacity)),o.xp6(2),o.Oqu(null==e.alarmTips?null:e.alarmTips.name),o.xp6(2),o.Oqu(null==e.alarmTips?null:e.alarmTips.title),o.xp6(3),o.Oqu(null==e.alarmTips?null:e.alarmTips.status),o.xp6(2),o.Oqu(null==e.alarmTips?null:e.alarmTips.time),o.xp6(2),o.Q6J("ngForOf",e.alarmTips.list),o.xp6(2),o.hij(" ",null==e.alarmTips?null:e.alarmTips.start," "))},directives:[w.sg,w.O5],styles:[".alarm-box[_ngcontent-%COMP%]{position:absolute;color:#fff;width:368px;min-height:202px;height:min-content;padding:20px;transform:translate(-50%,-100%)}.alarm-box[_ngcontent-%COMP%]   .alarm-t0[_ngcontent-%COMP%]{font-size:18px;color:#c62222;padding:10px 0}.alarm-box[_ngcontent-%COMP%]   .alarm-t1[_ngcontent-%COMP%]{font-size:22px}.alarm-box[_ngcontent-%COMP%]   .alarm-t2[_ngcontent-%COMP%]{font-size:13px;padding-top:10px;color:#ffc7c7}.alarm-box[_ngcontent-%COMP%]   .alarm-t2[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{color:#fff;background-color:#0091ff;padding:0 10px;margin-right:10px}.alarm-box[_ngcontent-%COMP%]   .alarm-table[_ngcontent-%COMP%]{font-size:13px;width:100%;padding-top:10px;border-collapse:unset}.alarm-box[_ngcontent-%COMP%]   .alarm-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#c62222;font-weight:normal}.alarm-box[_ngcontent-%COMP%]   .alarm-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{height:20px}.alarm-box[_ngcontent-%COMP%]   .alarm-t3[_ngcontent-%COMP%]{font-size:13px;padding-top:15px}.alarm-box[_ngcontent-%COMP%]   .alarm-svg[_ngcontent-%COMP%]{width:90px;height:90px;position:absolute;right:20px;top:20px}"]}),i})();const Ys={padding:25,drawType:2,textStyle:{color:"#fff",fontSize:14,fontStyle:"normal",fontWeight:"normal",fontFamily:""}},$f={};function t0(){return ze.mock({name:"flare",children:[{name:"\u5317\u4eac","value|50-300":1e3},{name:"\u6cb3\u5357",children:[{name:"\u90d1\u5dde","value|10-100":100},{name:"\u6d1b\u9633","value|10-100":100},{name:"\u4fe1\u9633",children:[{name:"\u65b0\u53bf","value|10-60":100},{name:"\u6dee\u6ee8","value|10-60":100}]},{name:"\u7126\u4f5c","value|10-100":100}]},{name:"\u6e56\u5317",children:[{name:"\u6b66\u6c49","value|10-100":100},{name:"\u8944\u9633","value|10-100":100}]},{name:"\u6e56\u5357",children:[{name:"\u957f\u6c99","value|10-100":100},{name:"\u6e58\u6f6d","value|10-100":100}]},{name:"\u5e7f\u4e1c",children:[{name:"\u5e7f\u5dde","value|10-100":100},{name:"\u6df1\u5733","value|10-100":100},{name:"\u4f5b\u5c71","value|10-100":100}]},{name:"\u5e7f\u897f",children:[{name:"\u5357\u5b81","value|10-100":100},{name:"\u67f3\u5dde","value|10-100":100}]}],series:[{id:"\u5317\u4eac","value|1000-1000000":1e3,parent:""},{id:"\u6cb3\u5357","value|1000-1000000":1e3,parent:""},{id:"\u6e56\u5317","value|1000-1000000":1e3,parent:""},{id:"\u6e56\u5357","value|1000-1000000":1e3,parent:""},{id:"\u5e7f\u4e1c","value|1000-1000000":1e3,parent:""},{id:"\u5e7f\u897f","value|1000-1000000":1e3,parent:""},{id:"\u90d1\u5dde","value|10-100":100,parent:"\u6cb3\u5357"},{id:"\u6d1b\u9633","value|10-100":100,parent:"\u6cb3\u5357"},{id:"\u5f00\u5c01","value|10-100":100,parent:"\u6cb3\u5357"},{id:"\u7126\u4f5c","value|10-100":100,parent:"\u6cb3\u5357"},{id:"\u8bb8\u660c","value|10-100":100,parent:"\u6cb3\u5357"},{id:"\u5e73\u9876\u5c71","value|10-100":100,parent:"\u6cb3\u5357"},{id:"\u6b66\u6c49","value|10-100":100,parent:"\u6e56\u5317"},{id:"\u9ec4\u77f3","value|10-100":100,parent:"\u6e56\u5317"},{id:"\u5341\u5830","value|10-100":100,parent:"\u6e56\u5317"},{id:"\u5b9c\u660c","value|10-100":100,parent:"\u6e56\u5317"},{id:"\u8944\u9633","value|10-100":100,parent:"\u6e56\u5317"},{id:"\u9102\u5dde","value|10-100":100,parent:"\u6e56\u5317"},{id:"\u957f\u6c99","value|10-100":100,parent:"\u6e56\u5357"},{id:"\u682a\u6d32","value|10-100":100,parent:"\u6e56\u5357"},{id:"\u6e58\u6f6d","value|10-100":100,parent:"\u6e56\u5357"},{id:"\u8861\u9633","value|10-100":100,parent:"\u6e56\u5357"},{id:"\u5e7f\u5dde","value|10-100":100,parent:"\u5e7f\u4e1c"},{id:"\u6df1\u5733","value|10-100":100,parent:"\u5e7f\u4e1c"},{id:"\u73e0\u6d77","value|10-100":100,parent:"\u5e7f\u4e1c"},{id:"\u6c55\u5934","value|10-100":100,parent:"\u5e7f\u4e1c"},{id:"\u4f5b\u5c71","value|10-100":100,parent:"\u5e7f\u4e1c"},{id:"\u6c5f\u95e8","value|10-100":100,parent:"\u5e7f\u4e1c"},{id:"\u5357\u5b81","value|10-100":100,parent:"\u5e7f\u897f"},{id:"\u67f3\u5dde","value|10-100":100,parent:"\u5e7f\u897f"}]})}const n0=class extends Ne.H{constructor(n,t,e,r){super(),this.divWidth=300,this.divHeight=300,this.u_data={},this.defOption=Ys,this.setOption(this.defOption,t),this.divdom=ot.select(n),this.divWidth=this.divdom.node().offsetWidth,this.divHeight=this.divdom.node().offsetHeight,this.callback=e,this.scope=r,this.divdom.style.fontSize=this.nowOption.fontSize+"px",this.svg=this.divdom.append("svg").attr("width",this.divWidth).attr("height",this.divHeight).style("position","absolute"),this.nodeg=this.svg.append("g").attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.defsg=this.svg.append("defs")}updateData(n){!n.children||n.children.length<1||(this.u_data=JSON.parse(JSON.stringify(n)),1===this.nowOption.drawType?this.singleRing(n):2===this.nowOption.drawType&&this.mulRings(n))}singleRing(n){const t=ot.pack().size([this.divWidth,this.divHeight]).padding(this.nowOption.padding||25),e=ot.hierarchy(n).sum(l=>l.value);t(e);const r=this.nodeg.selectAll("g").data(t(e).leaves()).join("g");r.attr("transform",l=>`translate(${l.x-this.divWidth/2},${l.y-this.divHeight/2}) scale(0.01)`).transition().duration(1e3).attr("transform",l=>`translate(${l.x-this.divWidth/2},${l.y-this.divHeight/2}) scale(1)`);let a=+ot.max(r.data(),l=>l.r);a<=0&&(a=1);let s=+ot.min(r.data(),l=>l.r);s<=0&&(s=1),this.defsg.selectAll("radialGradient").remove(),r.selectAll("circle").data(l=>[l]).join("circle").attr("r",l=>l.r).style("fill",l=>{const c=ot.scaleLinear().domain([s,a]).range([0,1]),d=this.defsg.append("radialGradient").attr("id","gradient"+l.x).attr("cx","75%").attr("cy","20%").attr("r","80%").attr("fx","75%").attr("fy","25%");return d.append("stop").attr("offset","0%").style("stop-color",ot.interpolateRainbow(c(l.r))).style("stop-opacity",1),d.append("stop").attr("offset","100%").style("stop-color",ot.interpolateRainbow(c(l.r))).style("stop-opacity",.1),"url(#gradient"+l.x+")"}),r.selectAll("text").filter(".name").data(l=>[l]).join("text").attr("class","name").text(l=>{let c=l.data.name;return c=c.replace(/\u7701|\u81ea\u6cbb\u533a|\u7279\u522b\u884c\u653f\u533a|\u56de\u65cf\u81ea\u6cbb\u533a|\u7ef4\u543e\u5c14\u81ea\u6cbb\u533a|\u58ee\u65cf\u81ea\u6cbb\u533a/g,""),c}).attr("text-anchor","middle").attr("dominant-baseline","text-after-edge").attr("fill","white").attr("font-size","1em"),r.selectAll("text").filter(".value").data(l=>[l]).join("text").attr("class","value").text(l=>l.data.value).attr("text-anchor","middle").attr("dominant-baseline","text-before-edge").attr("fill","white").attr("font-size","1em")}mulRings(n){const t=ot.pack().size([this.divWidth,this.divHeight]).padding(this.nowOption.padding||25),e=ot.hierarchy(n).sum(l=>l.value).sort((l,c)=>c.value-l.value);t(e);const r=this.nodeg.selectAll("g").data(e.descendants()).join("g");console.log("object :>> ",e.descendants()),r.attr("transform",l=>`translate(${l.x-this.divWidth/2},${l.y-this.divHeight/2}) scale(0.01)`).transition().duration(1e3).attr("transform",l=>`translate(${l.x-this.divWidth/2},${l.y-this.divHeight/2}) scale(1)`);let a=+ot.max(r.data(),l=>l.r);a<=0&&(a=1);let s=+ot.min(r.data(),l=>l.r);s<=0&&(s=1),this.defsg.selectAll("radialGradient").remove(),r.selectAll("circle").data(l=>[l]).join("circle").attr("r",l=>l.r).style("fill",l=>{const c=ot.scaleLinear().domain([s,a]).range([0,1]);l.color=ot.interpolateRainbow(c(l.r));const d=this.defsg.append("radialGradient").attr("id","gradient"+l.x).attr("cx","75%").attr("cy","20%").attr("r","80%").attr("fx","75%").attr("fy","25%");return d.append("stop").attr("offset","0%").style("stop-color",l.color).style("stop-opacity",1),d.append("stop").attr("offset","100%").style("stop-color",l.color).style("stop-opacity",.1),l.children?l.color:"url(#gradient"+l.x+")"}).style("stroke",l=>l.children?l.color||"#ffffff":"url(#gradient"+l.x+")").attr("fill-opacity",l=>l.children?.1:1),r.selectAll("text").filter(".name").data(l=>[l]).join("text").attr("class","name").text(l=>{let c=l.data.name;return c=c.replace(/\u7701|\u81ea\u6cbb\u533a|\u7279\u522b\u884c\u653f\u533a|\u56de\u65cf\u81ea\u6cbb\u533a|\u7ef4\u543e\u5c14\u81ea\u6cbb\u533a|\u58ee\u65cf\u81ea\u6cbb\u533a/g,""),l.children&&(c=""),c}).attr("text-anchor","middle").attr("dominant-baseline","text-after-edge").attr("fill","white").attr("font-size","1em"),r.selectAll("text").filter(".value").data(l=>[l]).join("text").attr("class","value").text(l=>l.data.value).attr("text-anchor","middle").attr("dominant-baseline","text-before-edge").attr("fill","white").attr("font-size","1em")}dispose(){this.svg.remove()}resize(){this.divHeight=this.divdom.node().offsetHeight,this.divWidth=this.divdom.node().offsetWidth,this.svg.attr("width",this.divWidth).attr("height",this.divHeight),this.nodeg.attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.updateData(this.u_data)}updateOptions(n){this.setOption(this.defOption,n),this.updateData(this.u_data)}},r0=["container"],o0=function(i,n,t,e,r){return{color:i,"font-size":n,"font-weight":t,"font-style":e,"font-family":r}};let Xs=(()=>{class i{constructor(t){this.http=t,this.options=Ys,this.optionsData=$f,this.mockjs=t0,this.comData=this.mockjs(),this.newsqaUrl="https://api.inews.qq.com/newsqa/v1/query/inner/publish/modules/list?modules=diseaseh5Shelf"}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new n0(this.container.nativeElement,this.options,{},this),this.scene.updateData(this.comData)},10)}onApiRequest(t){this.http.get(t).subscribe(e=>{let r=e.data.diseaseh5Shelf.areaTree[0];console.log(r),this.scene.updateData(r)})}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){t&&(this.options=t,this.scene.updateOptions(this.options))}onchangeDemoData(t){t&&(this.comData=t,this.scene.updateData(this.comData))}}return i.\u0275fac=function(t){return new(t||i)(o.Y36(wn.eN))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-d3bubble"]],viewQuery:function(t,e){if(1&t&&o.Gf(r0,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:8,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1),2&t&&o.Akn(o.qbA(2,o0,e.options.textStyle.color,e.options.textStyle.fontSize+"px",e.options.textStyle.fontWeight,e.options.textStyle.fontStyle,e.options.textStyle.fontFamily))},styles:[""]}),i})();const Js={minRadius:30,maxRadius:50,centerLen:40,edgeMin:1,edgeMax:10},a0={};function s0(){return ze.mock({"series|8-25":[{value:"@integer(10,1000)","name|+1":["/dev/sdal","/dev/sda2","/dev/srO","/dev/sda1","/dev/fca4"],unit:"M"}]})}const c0=class extends Ne.H{constructor(n,t,e,r){super(),this.divWidth=300,this.divHeight=300,this.u_data={},this.defOption=Js,this.simulation=ot.forceSimulation(),this.setOption(this.defOption,t),this.divdom=ot.select(n),this.divWidth=this.divdom.node().offsetWidth,this.divHeight=this.divdom.node().offsetHeight,this.callback=e,this.scope=r,this.divdom.style.fontSize=this.nowOption.fontSize+"px",this.svg=this.divdom.append("svg").attr("width",this.divWidth).attr("height",this.divHeight).style("position","absolute"),this.nodeg=this.svg.append("g").attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.defsg=this.svg.append("defs"),this.addbackImg()}addbackImg(){let n=this.svg.append("defs");["green-ball","purple-ball","young-ball"].forEach((t,e)=>{n.append("pattern").attr("id",`ball${e}_${this.__id}`).attr("x","0%").attr("y","0%").attr("height","100%").attr("width","100%").attr("viewBox","0 0 100 100").append("image").attr("x","0%").attr("y","0%").attr("height",100).attr("width",100).attr("xlink:href",`./assets/images/${t}.png`)})}updateData(n){if(!n.series||n.series.length<1)return;this.u_data=JSON.parse(JSON.stringify(n)),console.log(n);let t=JSON.parse(JSON.stringify(n.series)),e=ot.extent(t,h=>h.value),r=ot.scaleSqrt().domain(e).range([this.nowOption.minRadius,this.nowOption.maxRadius]);t.forEach(h=>{h.r=r(h.value),h.cid=Math.floor(3*Math.random()),h.value==e[1]&&(h.maxTag=!0,h.fx=0,h.fy=0),h.value==e[0]&&(h.minTag=!0)}),this.simulation.alphaTarget(1).restart(),this.sto&&clearTimeout(this.sto),this.sto=setTimeout(()=>{this.simulation.alphaTarget(0)},6e4);const a=this.nowOption.centerLen;let s=this.nowOption.edgeMin,l=this.nowOption.edgeMax,c=s+Math.random()*(l-s);this.simulation.nodes(t),this.simulation.force("charge",ot.forceManyBody().strength(100)),this.simulation.force("center",ot.forceCenter(0,0)),this.simulation.force("collide",ot.forceCollide().radius((h,v)=>h.maxTag?h.r+a:h.r+c)),this.simulation.on("tick",()=>{this.nodeg.selectAll("g").attr("transform",h=>(h.x>this.divWidth/2-h.r&&(h.x=this.divWidth/2-h.r),h.x<-this.divWidth/2+h.r&&(h.x=-this.divWidth/2+h.r),h.y>this.divHeight/2-h.r&&(h.y=this.divHeight/2-h.r),h.y<-this.divHeight/2+h.r&&(h.y=-this.divHeight/2+h.r),`translate(${h.x},${h.y})`))});const f=this.nodeg.selectAll("g").data(t).join("g").attr("class","node").attr("transform",h=>`translate(${h.x},${h.y})`);f.selectAll("circle").filter(".circle").data(h=>[h]).join("circle").attr("class","circle").attr("r",h=>h.r).attr("fill",h=>`url(#ball${h.cid}_${this.__id})`),f.selectAll("text").filter(".text").data(h=>[h]).join("text").attr("class","text").attr("text-anchor","middle").attr("dominant-baseline","text-after-edge").attr("fill","#fff").attr("fill-opacity",.5).attr("font-size",h=>.25*h.r).text(h=>h.name).style("pointer-events","none"),f.selectAll("text").filter(".text2").data(h=>[h]).join("text").attr("class","text2").attr("text-anchor","middle").attr("dominant-baseline","text-before-edge").attr("fill","#fff").attr("font-size",h=>.3*h.r).text(h=>h.value+(h.unit||"")).attr("dy",h=>.1*h.r).style("pointer-events","none")}dispose(){this.svg.remove()}resize(){this.divHeight=this.divdom.node().offsetHeight,this.divWidth=this.divdom.node().offsetWidth,this.svg.attr("width",this.divWidth).attr("height",this.divHeight),this.nodeg.attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.updateData(this.u_data)}updateOptions(n){this.setOption(this.defOption,n),this.updateData(this.u_data)}},p0=["container"];let Ks=(()=>{class i{constructor(t){this.http=t,this.options=Js,this.optionsData=a0,this.mockjs=s0,this.comData=this.mockjs(),this.newsqaUrl="https://api.inews.qq.com/newsqa/v1/query/inner/publish/modules/list?modules=diseaseh5Shelf"}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new c0(this.container.nativeElement,this.options,{},this),this.scene.updateData(this.comData)},10)}onApiRequest(t){this.http.get(t).subscribe(e=>{let r=e.data.diseaseh5Shelf.areaTree[0];console.log(r),this.scene.updateData(r)})}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){t&&(this.options=t,this.scene.updateOptions(this.options))}onchangeDemoData(t){t&&(this.comData=t,this.scene.updateData(this.comData))}}return i.\u0275fac=function(t){return new(t||i)(o.Y36(wn.eN))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-d3bubble2"]],viewQuery:function(t,e){if(1&t&&o.Gf(p0,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},styles:[""]}),i})();const Qs={minRadius:30,maxRadius:50,minDir:100,maxDir:150,textStyle:{color:"#fff",fontSize:14,fontStyle:"normal",fontWeight:"normal",fontFamily:""}},d0={};function u0(){return ze.mock({"series|5-8":[{value:"@integer(10,100)",name:"@province",unit:"%"}]})}class f0{constructor(n){return this.el=n,this.context=this.el.getContext("2d"),this.Aball=[],this.dcount=1,this.time=(new Date).getTime(),this.data=[],this.options={},this}init(n,t){var e,r;if(this.el.width=(null===(e=this.el.parentElement)||void 0===e?void 0:e.clientWidth)||500,this.el.height=(null===(r=this.el.parentElement)||void 0===r?void 0:r.clientHeight)||300,this.data=n,this.options=t,0!=n.length){this.Aball=[];for(let a=0;a<n.length;a++)this.Aball[a]=new v0(this.context,n,a,t,this.el.width,this.el.height);this.animId&&window.cancelAnimationFrame(this.animId),this.draw()}}draw(){var n,t,e;null===(n=this.context)||void 0===n||n.clearRect(0,0,this.el.width,this.el.height);for(let r=0;r<this.dcount;r++)null===(t=this.Aball[r])||void 0===t||t.moveBall(),null===(e=this.Aball[r])||void 0===e||e.impactDetection(this.Aball);if(this.dcount<this.data.length){const r=(new Date).getTime();r-this.time>600&&(this.dcount++,this.time=r)}this.animId=requestAnimationFrame(()=>this.draw())}}class v0{constructor(n,t,e,r,a,s){this.context=n,this.data=t,this.index=e,this.options=r,this.maxWidth=a,this.maxHeight=s,this.id=this.index,this.isDraw=!1,this.a=!0,this.b=!0,this.item=this.data[this.index],this.name=this.item.name||"",this.unit=this.item.unit||"",this.value=this.item.value||0,this.color=this.item.color,this.rd=Math.min(this.maxWidth,this.maxHeight)/(5+.25*(this.data.length-5)),this.r=Math.max(Math.floor(this.item.value/100*Math.floor(this.rd)),40),this.maxr=10,this.av=.5,this.x=this.random(this.r,this.maxWidth-this.r),this.y=this.random(this.r,this.maxHeight-this.r),this._ispeed=.5*Math.random(),this.ispeed=this._ispeed>.1?this._ispeed:.1+this._ispeed,this._ispeed2=Math.random(),this.ispeed2=this._ispeed2>.1?this._ispeed2:.1+this._ispeed2}random(n,t){return Math.floor(Math.random()*(t-n)+n)}isCollisionWithCircle(n,t){return Math.sqrt(Math.pow(n.x>t.x?n.x-t.x:t.x-n.x,2)+Math.pow(n.y>t.y?n.y-t.y:t.y-n.y,2))<=n.r+t.r}impactDetection(n){for(let t=0;t<n.length;t++){const e=n[t];if(e.id==this.id||!e.isDraw)continue;Math.pow(this.x-e.x,2);const a=Math.pow(this.y-e.y,2),s=Math.pow(this.r+e.r,2);this.isCollisionWithCircle(this,e)&&(this.x=this.x-e.x>0?Math.abs(Math.sqrt(s-a)+e.x)+2:e.x-Math.abs(Math.sqrt(s-a))-2,this.a=!this.a,this.b=!this.b)}}moveBall(){this.a?(this.x+=this.ispeed,this.x>=this.maxWidth-this.r&&(this.a=!1)):(this.x-=this.ispeed,this.x<=this.r&&(this.a=!0)),this.b?(this.y+=this.ispeed2,this.y>=this.maxHeight-this.r&&(this.b=!1)):(this.y-=this.ispeed2,this.y<=this.r&&(this.b=!0));const n=this.context.createRadialGradient(this.x,this.y,0,this.x,this.y,this.maxr);n.addColorStop(0,"transparent"),n.addColorStop(.3,"transparent"),n.addColorStop(1,this.color),this.context.beginPath(),this.maxr=this.maxr+this.av,this.maxr=this.maxr>this.r?this.r:this.maxr,this.av=this.av+.5,this.context.arc(this.x,this.y,this.maxr,0,2*Math.PI),this.context.fillStyle=n,this.context.fill(),this.context.font="14px Arial",this.context.textAlign="center",this.context.fillStyle="#ffffff",this.context.fillText(this.name.replace(/\u7701|\u81ea\u6cbb\u533a|\u7279\u522b\u884c\u653f\u533a|\u56de\u65cf\u81ea\u6cbb\u533a|\u7ef4\u543e\u5c14\u81ea\u6cbb\u533a|\u58ee\u65cf\u81ea\u6cbb\u533a/g,""),this.x,this.y),this.context.font="18px Arial",this.context.fillText(this.value+this.unit,this.x,this.y+18),this.isDraw=!0}}const g0=class extends Ne.H{constructor(n,t,e,r){super(),this.divWidth=300,this.divHeight=300,this.u_data={},this.defOption=Qs,this.setOption(this.defOption,t),this.divdom=ot.select(n),this.divWidth=this.divdom.node().offsetWidth,this.divHeight=this.divdom.node().offsetHeight,this.callback=e,this.scope=r,this.divdom.style.fontSize=this.nowOption.fontSize+"px",this.svg=this.divdom.append("svg").attr("width",this.divWidth).attr("height",this.divHeight).style("position","absolute"),this.nodeg=this.svg.append("g").attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.defsg=this.svg.append("defs");const a=document.createElement("canvas");n.appendChild(a),a.getContext("2d"),this.balls=new f0(a)}updateData(n){var t;if(!n.series||n.series.length<1)return;this.u_data=n;let e=n.series,r=ot.extent(e,s=>s.value);const a=ot.scaleLinear().domain([r[0],r[1]]).range([0,1]);e.forEach(s=>{s.color=ot.interpolateRainbow(a(s.value))}),null===(t=this.balls)||void 0===t||t.init(e,{color:"#fff000"})}dispose(){this.svg.remove()}resize(){this.divHeight=this.divdom.node().offsetHeight,this.divWidth=this.divdom.node().offsetWidth,this.svg.attr("width",this.divWidth).attr("height",this.divHeight),this.nodeg.attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.updateData(this.u_data)}updateOptions(n){this.setOption(this.defOption,n)}},m0=["container"],x0=function(i,n,t,e,r){return{color:i,"font-size":n,"font-weight":t,"font-style":e,"font-family":r}};let qs=(()=>{class i{constructor(t){this.http=t,this.options=Qs,this.optionsData=d0,this.mockjs=u0,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new g0(this.container.nativeElement,this.options,{},this),this.scene.updateData(this.comData)},10)}onApiRequest(t){this.http.get(t).subscribe(e=>{let r=e.data.diseaseh5Shelf.areaTree[0];console.log(r),this.scene.updateData(r)})}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){t&&(this.options=t,this.scene.updateOptions(this.options))}onchangeDemoData(t){t&&(this.comData=t,this.scene.updateData(this.comData))}}return i.\u0275fac=function(t){return new(t||i)(o.Y36(wn.eN))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-d3bubble3"]],viewQuery:function(t,e){if(1&t&&o.Gf(m0,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:8,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1),2&t&&o.Akn(o.qbA(2,x0,e.options.textStyle.color,e.options.textStyle.fontSize+"px",e.options.textStyle.fontWeight,e.options.textStyle.fontStyle,e.options.textStyle.fontFamily))},styles:[""]}),i})();const $s={margin:4,padding:25,gradientType:1,nodeColor:"#EE3C48",useUColors:!1,textStyle:{color:"#fff",fontSize:14,fontStyle:"normal",fontWeight:"normal",fontFamily:""}},y0={};function w0(){return ze.mock({name:"flare","children|5-10":[{name:"@province","value|10-100":100}]})}const _0=class extends Ne.H{constructor(n,t,e,r){super(),this.divWidth=300,this.divHeight=300,this.u_data={},this.defOption=$s,this.setOption(this.defOption,t),this.divdom=ot.select(n),this.divWidth=this.divdom.node().offsetWidth,this.divHeight=this.divdom.node().offsetHeight,this.callback=e,this.scope=r,this.divdom.style.fontSize=this.nowOption.fontSize+"px",this.svg=this.divdom.append("svg").attr("width",this.divWidth).attr("height",this.divHeight).style("position","absolute"),this.nodeg=this.svg.append("g").attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.defsg=this.svg.append("defs")}updateData(n){!n.children||n.children.length<1||(this.u_data=JSON.parse(JSON.stringify(n)),this.mulRings(JSON.parse(JSON.stringify(n))))}mulRings(n){let t=this.nowOption.margin||4;const e=ot.pack().size([this.divWidth-2*t,this.divHeight-2*t]).padding(this.nowOption.padding||25);let r=!0,a=-1/0,s=1/0;const l=v=>{void 0===v.value&&void 0===v.children&&(r=!1,v.value=50*Math.random()|50),v.value>a&&(a=v.value),v.value<s&&(s=v.value),v.children&&v.children.forEach(m=>{l(m)})};l(n);const c=ot.scaleLinear().domain([s,a]).range([2,10]),d=ot.hierarchy(n).sum(v=>c(v.value)).sort((v,m)=>m.value-v.value);e(d);const f=this,h=this.nodeg.selectAll("g").data(d.descendants()).join("g").attr("opacity",.9).on("click",function(v){if(!v.children){f.callback.call(this.scope,v.data);const m=ot.select(this);m.attr("transform",S=>`translate(${S.x-f.divWidth/2+t},${S.y-f.divHeight/2+t}) scale(1.2)`),m.attr("opacity",1),setTimeout(()=>{m.attr("transform",S=>`translate(${S.x-f.divWidth/2+t},${S.y-f.divHeight/2+t}) scale(1)`),m.attr("opacity",.9)},500)}}).on("mouseover",function(v,m){!v.children&&ot.select(this).attr("opacity",1)}).on("mouseout",function(v,m){!v.children&&ot.select(this).attr("opacity",.9)});h.attr("transform",v=>`translate(${v.x-this.divWidth/2+t},${v.y-this.divHeight/2+t}) scale(0.01)`).transition().duration(1e3).attr("transform",v=>`translate(${v.x-this.divWidth/2+t},${v.y-this.divHeight/2+t}) scale(1)`),this.defsg.selectAll("radialGradient").remove(),h.selectAll("circle").data(v=>[v]).join("circle").attr("r",v=>v.r).style("fill",v=>{if(v.color=this.nowOption.useUColors?this.nowOption.nodeColor||"#EE3C48":ot.interpolateRainbow(c(v.r)),1===this.nowOption.gradientType){const S=this.defsg.append("radialGradient").attr("id","gradient"+v.x).attr("cx","50%").attr("cy","50%").attr("r","55%").attr("fx","50%").attr("fy","50%");S.append("stop").attr("offset","0%").style("stop-color",v.color).style("stop-opacity",0),S.append("stop").attr("offset",v.children?"80%":"40%").style("stop-color",v.color).style("stop-opacity",0),S.append("stop").attr("offset","100%").style("stop-color",v.color).style("stop-opacity",.9)}else{const S=this.defsg.append("radialGradient").attr("id","gradient"+v.x).attr("cx","75%").attr("cy","20%").attr("r","80%").attr("fx","75%").attr("fy","25%");S.append("stop").attr("offset","0%").style("stop-color",v.color).style("stop-opacity",1),S.append("stop").attr("offset","100%").style("stop-color",v.color).style("stop-opacity",.1)}return"url(#gradient"+v.x+")"}).style("cursor","pointer"),h.selectAll("text").filter(".name").data(v=>[v]).join("text").attr("class","name").text(v=>{let m=v.data.name;return m=m.replace(/\u7701|\u81ea\u6cbb\u533a|\u7279\u522b\u884c\u653f\u533a|\u56de\u65cf\u81ea\u6cbb\u533a|\u7ef4\u543e\u5c14\u81ea\u6cbb\u533a|\u58ee\u65cf\u81ea\u6cbb\u533a/g,""),v.children&&(m=""),m}).attr("text-anchor","middle").attr("dominant-baseline",r?"text-after-edge":"central").attr("fill","white").attr("font-size","1em").style("pointer-events","none"),r?h.selectAll("text").filter(".value").data(v=>[v]).join("text").attr("class","value").text(v=>v.data.value).attr("text-anchor","middle").attr("dominant-baseline","text-before-edge").attr("fill","white").attr("font-size","1em").style("pointer-events","none"):h.selectAll("text").filter(".value").remove()}dispose(){this.svg.remove()}resize(){this.divHeight=this.divdom.node().offsetHeight,this.divWidth=this.divdom.node().offsetWidth,this.svg.attr("width",this.divWidth).attr("height",this.divHeight),this.nodeg.attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.updateData(this.u_data)}updateOptions(n){this.setOption(this.defOption,n),this.updateData(this.u_data)}},C0=["container"],S0=function(i,n,t,e,r){return{color:i,"font-size":n,"font-weight":t,"font-style":e,"font-family":r}};let tl=(()=>{class i{constructor(t){this.http=t,this.options=$s,this.optionsData=y0,this.mockjs=w0,this.comData=this.mockjs()}ngOnInit(){}callback(t){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new _0(this.container.nativeElement,this.options,this.callback,this),this.scene.updateData(this.comData)},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){t&&(this.options=t,this.scene.updateOptions(this.options))}onchangeDemoData(t){t&&(this.comData=t,this.scene.updateData(this.comData))}}return i.\u0275fac=function(t){return new(t||i)(o.Y36(wn.eN))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-d3bubble4"]],viewQuery:function(t,e){if(1&t&&o.Gf(C0,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:8,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1),2&t&&o.Akn(o.qbA(2,S0,e.options.textStyle.color,e.options.textStyle.fontSize+"px",e.options.textStyle.fontWeight,e.options.textStyle.fontStyle,e.options.textStyle.fontFamily))},styles:[""]}),i})();const el={fontSize:12,margin:100,colNum:5,sideLength:50,spacing:1.15,listType:1,legendSet:{show:!0,right:160,bottom:100,title1:"\u6574\u4f53\u5f97\u5206",title2:"\u7cfb\u7edf\u7b49\u7ea7"},colorAndClass:[{gte:0,lt:60,color:"#EE3C48"},{gte:60,lt:80,color:"#FF9038"},{gte:80,color:"#0081FF"}],stroke:[{name:"\u6838\u5fc3",color:"#00FFFC"},{name:"\u91cd\u8981",color:"#F6BD16"},{name:"\u666e\u901a",color:"#4198FF"}]},D0={};function O0(){let i=100*Math.random();return i<80?"\u666e\u901a":i<95&&i>=80?"\u91cd\u8981":"\u6838\u5fc3"}function T0(){let i=100*Math.random();return i<80?20*Math.random()|80:i<95&&i>=80?20*Math.random()|60:40*Math.random()|20}function A0(){let i=[];for(let t=0;t<61;t++)i.push({value:T0(),name:"\u7cfb\u7edf-"+t,title:"\u6574\u4f53\u5f97\u5206",level:O0()});return i}function E0(){return{series:A0()}}const P0=class extends Ne.H{constructor(n,t,e,r){super(),this.divWidth=300,this.divHeight=300,this.u_data={},this.defOption=el,this.hexagonPath="",this.setOption(this.defOption,t),this.divdom=ot.select(n),this.divWidth=this.divdom.node().offsetWidth,this.divHeight=this.divdom.node().offsetHeight,this.callback=e,this.scope=r,this.divdom.style.fontSize=this.nowOption.fontSize+"px",this.svg=this.divdom.append("svg").attr("width",this.divWidth).attr("height",this.divHeight).style("position","absolute"),this.nodeg=this.svg.append("g").attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.legendg=this.svg.append("g").attr("calss","legendg").attr("transform","translate("+(this.divWidth-this.nowOption.legendSet.right)+","+(this.divHeight-this.nowOption.legendSet.bottom)+")"),this.hexagonPath=this.gethexagonPath()}updateData(n){!n.series||n.series.length<1||(this.u_data=n,this.drawHexagons(JSON.parse(JSON.stringify(n.series||[]))),this.drawLegend())}gethexagonPath(n){let t=this.nowOption.sideLength;n&&(t=n);const e=[];for(let a=0;a<6;a++){const s=0+t*Math.cos(60*a*Math.PI/180),l=0+t*Math.sin(60*a*Math.PI/180);e.push([s,l])}let r="M"+e[0][0]+","+e[0][1];for(let a=1;a<e.length;a++)r+="L"+e[a][0]+","+e[a][1];return r+="Z",r}drawHexagons(n){const t=this.nowOption.sideLength,e=this.nowOption.spacing,r=this.nowOption.margin;let a=[];for(let d=0;d<2*n.length;d++){let f=R0(d,t*e);null!=f&&a.push({i:d,x:f.x,y:f.y,tag:f.tag})}n.forEach((d,f)=>{let h=[0,0];2===this.nowOption.listType?(h=this.hexagonPos(f,3*t*e),h[0]+=r,h[1]+=r):(a.forEach((v,m)=>{if(v.i==f)h=[v.x,v.y];else if(f>v.i&&f<a[m+1].i){let S=m+1;v.tag&&(S=m-5);let E=function(i,n,t){let e=[];for(let r=0;r<t;r++)e.push({x:i.x+(n.x-i.x)/t*r,y:i.y+(n.y-i.y)/t*r});return e}(a[m],a[S],ur(f)),P=f-v.i;h=[E[P].x,E[P].y]}}),h[0]+=this.divWidth/2,h[1]+=this.divHeight/2),d.xy=h,this.nowOption.stroke.forEach(v=>{v.name==d.level&&(d.stroke=v.color)}),d.color=this.valueToColor(d.value)});const s=this,l=this.nodeg.selectAll("g").data(n).join("g").attr("transform",d=>`translate(${d.xy[0]-this.divWidth/2}, ${d.xy[1]-this.divHeight/2})`).attr("opacity",d=>{let f=d.xy[0]-this.divWidth/2,h=d.xy[1]-this.divHeight/2,v=Math.sqrt(f*f+h*h),m=1-Math.pow(v/(.7*this.divWidth),2)-.1;return d.opacity=m,m}).on("mouseover",function(){ot.select(this).attr("opacity",1)}).on("mouseout",function(d){ot.select(this).attr("opacity",d.opacity)}).on("click",function(d,f){s.callback.call(s.scope,d);let h=ot.select(this);h.attr("transform",`translate(${d.xy[0]-s.divWidth/2}, ${d.xy[1]-s.divHeight/2}) scale(${e})`).attr("opacity",1),setTimeout(()=>{h.attr("transform",`translate(${d.xy[0]-s.divWidth/2}, ${d.xy[1]-s.divHeight/2}) scale(1)`).attr("opacity",d.opacity)},500)});l.selectAll("path").filter(".hexagon").data(d=>[d]).join("path").attr("class","hexagon").attr("d",d=>this.hexagonPath).attr("fill",d=>d.color||"red").attr("stroke",d=>d.stroke).attr("stroke-width",5),l.selectAll("foreignObject").remove(),l.append("foreignObject").attr("width",2*t).attr("height",2*t).attr("pointer-events","none").attr("x",-t).attr("y",-t).html(d=>`<div style="display: flex;\n            align-items: center;\n            justify-content: center;\n            flex-direction: column;\n            line-height: initial;\n            width: ${2*t}px;\n            height: ${2*t}px;">\n              <div style="font-size: 1.5em;">${void 0===d.value?"":d.value}</div>\n              <div style="font-size: 0.75em;">${d.title||""}</div>\n              <div style="font-size: 1em;">${d.name||""}</div>\n            </div>`)}hexagonPos(n,t){const e=this.nowOption.colNum||5,r=2*e-1,a=Math.floor(n/r);let s=0;s=n%r>=e?2*a+1:2*a;let l=0;return l=n%r>=e?n%r-e:n%r,[s%2==0?l*t:(l+.5)*t,.866*s*t/3]}valueToColor(n){let t=this.nowOption.colorAndClass[0].color||"#E82323";return this.nowOption.colorAndClass.forEach(e=>{n>=e.gte&&n<=(e.lt?e.lt:1/0)&&(t=e.color)}),t}drawLegend(){const n=this.nowOption.colorAndClass,t=this.nowOption.stroke,{title1:e,title2:r,show:a}=this.nowOption.legendSet;this.legendg.style("display",a?"block":"none"),this.legendg.selectAll("text").filter(".title1").data([e]).join("text").attr("class","title1").attr("x",5).attr("y",0).attr("fill","#ffffff").attr("text-anchor","start").attr("dominant-baseline","middle").attr("font-size",13).text(l=>l),this.legendg.selectAll("text").filter(".title2").data([r]).join("text").attr("class","title2").attr("x",80).attr("y",0).attr("fill","#ffffff").attr("text-anchor","start").attr("dominant-baseline","middle").attr("font-size",13).text(l=>l),this.legendg.selectAll("text").filter(".colorAndClass").data(n).join("text").attr("class","colorAndClass").attr("x",(l,c)=>0).attr("y",(l,c)=>20*c).attr("fill","#ffffffa0").text(l=>l.gte+(l.lt?"~"+l.lt:"+")).attr("font-size",12).attr("font-family","sans-serif").attr("alignment-baseline","middle").attr("text-anchor","start").attr("transform","translate(20, 20)");let s=this.gethexagonPath(5);this.legendg.selectAll("path").filter(".colorAndClass").data(n).join("path").attr("class","colorAndClass").attr("d",s).attr("fill",l=>l.color).attr("transform",(l,c)=>`translate(10, ${20+20*c-1})`),this.legendg.selectAll("text").filter(".stroke").data(t).join("text").attr("class","stroke").attr("x",(l,c)=>0).attr("y",(l,c)=>20*c).attr("fill","#ffffffa0").text(l=>l.name).attr("font-size",12).attr("font-family","sans-serif").attr("alignment-baseline","middle").attr("text-anchor","start").attr("transform","translate(95, 20)"),s=this.gethexagonPath(4),this.legendg.selectAll("path").filter(".stroke").data(t).join("path").attr("class","stroke").attr("d",s).attr("fill","none").attr("stroke",l=>l.color).attr("stroke-width",2).attr("transform",(l,c)=>`translate(85, ${20+20*c-1})`)}dispose(){this.svg.remove()}resize(){this.divHeight=this.divdom.node().offsetHeight,this.divWidth=this.divdom.node().offsetWidth,this.svg.attr("width",this.divWidth).attr("height",this.divHeight),this.nodeg.attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.legendg.attr("transform","translate("+(this.divWidth-this.nowOption.legendSet.right)+","+(this.divHeight-this.nowOption.legendSet.bottom)+")"),this.updateData(this.u_data)}updateOptions(n){this.setOption(this.defOption,n),this.hexagonPath=this.gethexagonPath(),this.updateData(this.u_data)}};function nl(i){return 1+i*(i+1)*3}function ur(i){let n=0;for(;i>=nl(n);)n++;return n}function il(i,n){return 0===i?0:n-nl(i-1)}function R0(i,n){n*=1.732;let t=ur(i);const e=ur(i)*n,r=function(i){let n=ur(i);if(0==n)return 0;{let t=function(i){return 0===i?1:6*i}(n),e=il(n,i);return 2*Math.PI/t*e}}(i)+Math.PI/6,a=e*Math.cos(r),s=e*Math.sin(r);let l=il(t,i);if(t>1&&l%t!=0)return null;{let c=!1;return r>5.7&&r<5.8&&(c=!0),{x:a,y:s,tag:c}}}const G0=["container"],N0=function(i){return{"font-size":i}};let rl=(()=>{class i{constructor(t){this.http=t,this.options=el,this.optionsData=D0,this.mockjs=E0,this.comData=this.mockjs()}ngOnInit(){}callback(t){console.log(t)}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new P0(this.container.nativeElement,this.options,this.callback,this),this.scene.updateData(this.comData)},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){t&&(this.options=t,this.scene.updateOptions(this.options))}onchangeDemoData(t){t&&(this.comData=t,this.scene.updateData(this.comData))}}return i.\u0275fac=function(t){return new(t||i)(o.Y36(wn.eN))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-d3honeycomb"]],viewQuery:function(t,e){if(1&t&&o.Gf(G0,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:4,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1),2&t&&o.Akn(o.VKq(2,N0,e.options.fontSize+"px"))},styles:[""]}),i})();const ol={margin:4,padding:25,gradientType:1,nodeColor:"#EE3C48",useUColors:!1,textStyle:{color:"#fff",fontSize:14,fontStyle:"normal",fontWeight:"normal",fontFamily:""}},B0={};function F0(){return ze.mock({name:"flare","children|5-10":[{name:"@province","value|10-100":100}]})}var L0=p(95863),al=p.n(L0);const W0=class extends Ne.H{constructor(n,t,e,r){super(),this.divWidth=300,this.divHeight=300,this.u_data={},this.defOption=ol,this.setOption(this.defOption,t),this.divdom=ot.select(n),this.divWidth=this.divdom.node().offsetWidth,this.divHeight=this.divdom.node().offsetHeight,this.callback=e,this.scope=r,this.divdom.style.fontSize=this.nowOption.fontSize+"px",this.svg=this.divdom.append("svg").attr("width",this.divWidth).attr("height",this.divHeight).style("position","absolute"),this.nodeg=this.svg.append("g").attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.defsg=this.svg.append("defs");let l=function(i,n){const t=[],e=[];for(let r=0;r<10;r++)t[r]={id:r,label:r};for(let r=0;r<20;r++){let a=Math.floor(10*Math.random()),s=Math.floor(10*Math.random());e[r]={source:a,target:s,label:a+"-"+s}}return{nodes:t,edges:e}}();l={nodes:[{id:"1",label:"1"},{id:"2",label:"2"},{id:"3",label:"3"},{id:"4",label:"4"},{id:"5",label:"5"},{id:"6",label:"6"},{id:"7",label:"7"},{id:"8",label:"8"},{id:"9",label:"9"}],edges:[{source:"1",target:"2",label:""},{source:"1",target:"3",label:""},{source:"3",target:"4",label:""},{source:"2",target:"5",label:""},{source:"1",target:"6",label:""},{source:"2",target:"3",label:""},{source:"6",target:"4",label:""},{source:"6",target:"1",label:""},{source:"6",target:"7",label:""},{source:"7",target:"8",label:""},{source:"7",target:"9",label:""},{source:"7",target:"6",label:""},{source:"7",target:"5",label:""}]};const c=(new(al().graphlib.Graph)).setGraph({ranksep:10,marginx:20,marginy:20}).setDefaultEdgeLabel(function(){return{}});l.nodes.forEach(T=>{c.setNode(T.id,{label:T.label,shape:"circle",width:10,style:"fill: #ff0000; stroke: #00ff00; stroke-width: 1px;",labelStyle:"font-size: 12px; fill: #00ffff; font-weight: bold;"})}),l.edges.forEach((T,k)=>{c.setEdge(T.source,T.target,{abelType:"html",label:T.label,style:"fill: none; stroke: #ffff00; stroke-width: 1px;",labelStyle:"font-size: 12px; fill: #ffffff",arrowhead:"vee",arrowheadStyle:"fill: #ff00a0; stroke: #ffff00; stroke-width: 1px;",curve:ot.curveMonotoneY})});const d=new(al().render);let f=this.svg.append("g");d(f,c);let h=ot.zoom().on("zoom",function(){f.attr("transform",ot.event.transform)});this.svg.call(h);let v=c.graph().width,m=c.graph().height;console.log(v,m)}updateData(n){!n.children||n.children.length<1||(this.u_data=JSON.parse(JSON.stringify(n)))}dispose(){this.svg.remove()}resize(){this.divHeight=this.divdom.node().offsetHeight,this.divWidth=this.divdom.node().offsetWidth,this.svg.attr("width",this.divWidth).attr("height",this.divHeight),this.nodeg.attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.updateData(this.u_data)}updateOptions(n){this.setOption(this.defOption,n),this.updateData(this.u_data)}};var V0=p(95157);const j0=["container"],U0=function(i,n,t,e,r){return{color:i,"font-size":n,"font-weight":t,"font-style":e,"font-family":r}};let sl=(()=>{class i{constructor(){this.options=ol,this.optionsData=B0,this.mockjs=F0,this.comData=this.mockjs()}ngOnInit(){}callback(t){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(0,V0.G)(this.options,this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.scene=new W0(this.container.nativeElement,this.options,this.callback,this),this.scene.updateData(this.comData)},10)}onResize(t){var e;null===(e=this.scene)||void 0===e||e.resize()}ngOnDestroy(){var t;null===(t=this.scene)||void 0===t||t.dispose()}onchangeOption(t){t&&(this.options=t,this.scene.updateOptions(this.options))}onchangeDemoData(t){t&&(this.comData=t,this.scene.updateData(this.comData))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-d3-dagre"]],viewQuery:function(t,e){if(1&t&&o.Gf(j0,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:2,vars:8,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1),2&t&&o.Akn(o.qbA(2,U0,e.options.textStyle.color,e.options.textStyle.fontSize+"px",e.options.textStyle.fontWeight,e.options.textStyle.fontStyle,e.options.textStyle.fontFamily))},encapsulation:2}),i})();var Y0=p(28859);const X0=["container"];let ll=(()=>{class i extends An.H{constructor(){super(),this.coreclass=Y0}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-g61"]],viewQuery:function(t,e){if(1&t&&o.Gf(X0,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{coreclass:"coreclass"},features:[o.qOj],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();var J0=p(97852);const K0=["container"];let cl=(()=>{class i extends An.H{constructor(){super(),this.coreclass=J0}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-topomx"]],viewQuery:function(t,e){if(1&t&&o.Gf(K0,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{coreclass:"coreclass"},features:[o.qOj],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},encapsulation:2}),i})();const Q0=["container"],q0=function(i){return{transform:i}},$0=function(i,n){return{background:i,"border-color":n}},tv=function(i){return{animation:i}},ev=function(i){return{background:i,"background-size":"100% 100%"}};function nv(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"div",5),o.TgZ(1,"div",6,7),o.NdJ("click",function(){const a=o.CHM(t).$implicit,s=o.MAs(2);return o.oxw(2).onCabClick(s,a)}),o.TgZ(3,"span",8),o.O4$(),o.TgZ(4,"svg",9),o.TgZ(5,"defs"),o.TgZ(6,"linearGradient",10),o._UZ(7,"stop",11),o._UZ(8,"stop",12),o.qZA(),o.qZA(),o.TgZ(9,"g",13),o.TgZ(10,"g",14),o.TgZ(11,"g",15),o._UZ(12,"path",16),o._UZ(13,"path",17),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.kcU(),o._UZ(14,"span",18),o.TgZ(15,"span",19),o._uU(16),o.qZA(),o.qZA(),o.qZA()}if(2&i){const t=n.$implicit,e=o.oxw(2);o.Q6J("ngStyle",o.VKq(11,q0,"scale("+e.options.scale+")")),o.xp6(1),o.Q6J("ngStyle",o.WLB(13,$0,t.color+"33",t.color)),o.xp6(2),o.Q6J("ngStyle",o.VKq(16,tv,"img1ani "+t.time+"s infinite")),o.xp6(3),o.uIk("id",t.color),o.xp6(1),o.uIk("stop-color",t.color),o.xp6(1),o.uIk("stop-color",t.color),o.xp6(4),o.uIk("fill",t.color),o.xp6(1),o.uIk("fill",t.fill),o.xp6(1),o.Q6J("ngStyle",o.VKq(18,ev,"url(/assets/images/cabinet."+e.options.nodeImgType+") no-repeat center center")),o.xp6(2),o.AsE("",t.name,"-",t.value,"")}}const iv=function(i){return{"margin-bottom":i}},pl=function(){return[]};function rv(i,n){if(1&i&&(o.TgZ(0,"div",3),o.YNc(1,nv,17,20,"div",4),o.qZA()),2&i){const t=n.$implicit,e=o.oxw();o.Q6J("ngStyle",o.VKq(2,iv,e.options.rowSpace+"px")),o.xp6(1),o.Q6J("ngForOf",t||o.DdM(4,pl))}}const ov={exoptions:{rowSpace:20,scale:1,nodeImgType:"png",_dataSetInt:3e3},optionsData:{},mockjs:function(){let i=[];for(let n=0;n<3;n++){i[n]=[];let t=5;2==n&&(t=ze.Random.integer(2,t));for(let e=1;e<=t;e++){let r=ze.Random.color();i[n].push({name:"\u673a\u67dc"+e,value:ze.Random.integer(10,100),color:r})}}return i}};let dl=(()=>{class i extends An.H{constructor(){super(),this.coreclass=ov}dataProcess(t){return t.forEach(e=>{e.forEach(r=>{r.fill="url(#"+r.color+")",r.time=ze.Random.float(1,3,2,2)})}),t}onCabClick(t,e){this.clearStyle(),t&&(t.style.boxShadow=`0 0 0px 4px ${e.color}`),event.stopPropagation()}clearStyle(){this.container.nativeElement.getElementsByClassName("cabblock").forEach(e=>{e.style.boxShadow="none"})}onBgClick(){this.clearStyle()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-cabinetlist"]],viewQuery:function(t,e){if(1&t&&o.Gf(Q0,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{coreclass:"coreclass"},features:[o.qOj],decls:3,vars:2,consts:[[2,"width","100%","height","100%",3,"click"],["container",""],["class","cablist",3,"ngStyle",4,"ngFor","ngForOf"],[1,"cablist",3,"ngStyle"],[3,"ngStyle",4,"ngFor","ngForOf"],[3,"ngStyle"],[1,"cabblock",3,"ngStyle","click"],["cabblock",""],[1,"img1",3,"ngStyle"],["width","31px","height","62px","viewBox","0 0 31 62","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink"],["x1","50%","y1","25%","x2","50%","y2","100%"],["stop-opacity","0","offset","0%"],["offset","100%"],["id","\u9875\u9762-1","stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["id","\u8bbe\u5907","transform","translate(-9.838500, 0.329068)"],["id","\u53d8\u8272\u5149","transform","translate(10.413093, 0.000000)"],["d","M14.3344804,43.6981278 L0.3156837,51.684378 C-0.0789209249,51.9096574 -0.0789209249,52.4718847 0.3156837,52.6966786 L0.3156837,52.6966786 L14.3344804,60.6829288 C14.7049758,60.8946137 15.1615756,60.8946137 15.532071,60.6829288 L15.532071,60.6829288 L29.5503757,52.6966786 C29.9449803,52.4718847 29.9449803,51.9096574 29.5503757,51.684378 L29.5503757,51.684378 L15.532071,43.6981278 C15.3465773,43.5927709 15.1399265,43.5398497 14.9332757,43.5398497 L14.9332757,43.5398497 C14.7261329,43.5398497 14.5194821,43.5927709 14.3344804,43.6981278","id","Fill-9"],["d","M0.0197302312,8.28734496 C-0.0460372062,37.7437048 0.0526139499,52.546816 0.3156837,52.6966786 L14.3344804,60.6829288 C14.7049758,60.8946137 15.1615756,60.8946137 15.532071,60.6829288 L29.5503757,52.6966786 C29.8134454,52.546816 29.9261896,37.7437048 29.8886082,8.28734496 L15.532071,0.158278167 C15.3465773,0.0529212275 15.1399265,0 14.9332757,0 C14.7261329,0 14.5194821,0.0529212275 14.3344804,0.158278167 L0.0197302312,8.28734496 Z","id","Fill-9\u5907\u4efd-4"],[1,"img2",3,"ngStyle"],[1,"name"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0,1),o.NdJ("click",function(){return e.onBgClick()}),o.YNc(2,rv,2,5,"div",2),o.qZA()),2&t&&(o.xp6(2),o.Q6J("ngForOf",e.comData||o.DdM(1,pl)))},directives:[w.sg,w.PC],styles:[".cablist[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;margin-bottom:20px}.cablist[_ngcontent-%COMP%]   .cabblock[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:nowrap;align-items:center;justify-content:space-evenly;width:110px;height:147px;border-radius:4px;margin-right:0;margin-left:0;transform:scale(1);border:0 solid}.cablist[_ngcontent-%COMP%]   .cabblock[_ngcontent-%COMP%]   .img1[_ngcontent-%COMP%]{margin-bottom:-32px;z-index:2}.cablist[_ngcontent-%COMP%]   .cabblock[_ngcontent-%COMP%]   .img2[_ngcontent-%COMP%]{display:inline-block;width:80px;height:80px}.cablist[_ngcontent-%COMP%]   .cabblock[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:12px;font-family:SourceHanSansSC-Bold,SourceHanSansSC;font-weight:bold;color:#fff;line-height:18px;margin-bottom:11px}.cablist[_ngcontent-%COMP%]   .cabblock[_ngcontent-%COMP%]:hover{transform:scale(1.1)}@keyframes img1ani{0%{opacity:1}50%{opacity:.5}to{opacity:1}}"]}),i})();const av={textAlign:"center",letterSpacing:0,duration:10,textStyle:{color:"#fff",fontSize:26,fontStyle:"normal",fontWeight:"normal"}},sv={textAlign:{name:"\u5bf9\u9f50\u65b9\u5f0f",type:"string"}};let ul=["\u8bfb\u4e66\u4e0d\u89c9\u5df2\u6625\u6df1\uff0c\u4e00\u5bf8\u5149\u9634\u4e00\u5bf8\u91d1\u3002","\u4eba\u751f\u82e5\u53ea\u5982\u521d\u89c1\uff0c\u4f55\u4e8b\u79cb\u98ce\u60b2\u753b\u6247\u3002","\u5d06\u5cd2\u8bbf\u9053\u81f3\u6e58\u6e56\uff0c\u4e07\u5377\u8bd7\u4e66\u770b\u8f6c\u611a\u3002","\u4e00\u5bf8\u5149\u9634\u4e00\u5bf8\u91d1\uff0c\u5bf8\u91d1\u96be\u4e70\u5bf8\u5149\u9634\u3002","\u4eba\u751f\u5f97\u610f\u987b\u5c3d\u6b22\uff0c\u83ab\u4f7f\u91d1\u6a3d\u7a7a\u5bf9\u6708\u3002","\u4eba\u751f\u82e5\u53ea\u5982\u521d\u89c1\uff0c\u4f55\u4e8b\u79cb\u98ce\u60b2\u753b\u6247\u3002","\u6625\u98ce\u5f97\u610f\u9a6c\u8e44\u75be\uff0c\u4e00\u65e5\u770b\u5c3d\u957f\u5b89\u82b1\u3002","\u767b\u9ad8\u6b32\u7a77\u5343\u91cc\u76ee\uff0c\u6101\u4e91\u4f4e\u9501\u8861\u9633\u8def\u3002","\u751f\u5e74\u4e0d\u6ee1\u767e\uff0c\u5e38\u6000\u5343\u5c81\u5fe7\u3002","\u800c\u6d6e\u751f\u82e5\u68a6\uff0c\u4e3a\u6b22\u51e0\u4f55\uff1f","\u751f\u5e74\u4e0d\u6ee1\u767e\uff0c\u5e38\u6000\u5343\u5c81\u5fe7\u3002","\u4eba\u751f\u65e0\u6839\u8482\uff0c\u98d8\u5982\u964c\u4e0a\u5c18\u3002","\u5f97\u6b22\u5f53\u4f5c\u4e50\uff0c\u6597\u9152\u805a\u6bd4\u90bb\u3002","\u916c\u4f73\u8282\uff0c\u987b\u9169\u914a\uff0c\u83ab\u76f8\u8fdd\u3002\u4eba\u751f\u5982\u5bc4\uff0c\u4f55\u4e8b\u8f9b\u82e6\u6028\u659c\u6656\u3002","\u609f\u5df2\u5f80\u4e4b\u4e0d\u8c0f\uff0c\u77e5\u6765\u8005\u4e4b\u53ef\u8ffd\u3002","\u4eba\u751f\u5230\u5904\u77e5\u4f55\u4f3c\uff0c\u5e94\u4f3c\u98de\u9e3f\u8e0f\u96ea\u6ce5\u3002","\u4eba\u751f\u4ea6\u6709\u547d\uff0c\u5b89\u80fd\u884c\u53f9\u590d\u5750\u6101\uff1f","\u552f\u89c1\u6708\u5bd2\u65e5\u6696\uff0c\u6765\u714e\u4eba\u5bff\u3002","\u6211\u95ed\u5357\u697c\u770b\u9053\u4e66\uff0c\u5e7d\u5e18\u6e05\u5bc2\u5728\u4ed9\u5c45\u3002","\u9152\u76c8\u676f\uff0c\u4e66\u6ee1\u67b6\uff0c\u540d\u5229\u4e0d\u5c06\u5fc3\u6302\u3002","\u4e00\u6708\u4e0d\u8bfb\u4e66\uff0c\u8033\u76ee\u5931\u7cbe\u723d\u3002","\u4e66\u5f53\u5feb\u610f\u8bfb\u6613\u5c3d\uff0c\u5ba2\u6709\u53ef\u4eba\u671f\u4e0d\u6765\u3002","\u7c97\u7f2f\u5927\u5e03\u88f9\u751f\u6daf\uff0c\u8179\u6709\u8bd7\u4e66\u6c14\u81ea\u534e\u3002","\u628a\u541b\u8bd7\u5377\u706f\u524d\u8bfb\uff0c\u8bd7\u5c3d\u706f\u6b8b\u5929\u672a\u660e\u3002","\u513f\u5927\u8bd7\u4e66\u5973\u4e1d\u9ebb\uff0c\u516c\u4f46\u8bfb\u4e66\u716e\u6625\u8336\u3002","\u8bfb\u4e66\u7834\u4e07\u5377\uff0c\u4e0b\u7b14\u5982\u6709\u795e\u3002","\u5e74\u5c0f\u4ece\u4ed6\u7231\u68a8\u6817\uff0c\u957f\u6210\u987b\u8bfb\u4e94\u8f66\u4e66\u3002","\u4e0d\u662f\u9053\u4eba\u6765\u5f15\u7b11\uff0c\u5468\u60c5\u5b54\u601d\u6b63\u8ffd\u5bfb\u3002","\u72ec\u5750\u5e7d\u7bc1\u91cc\uff0c\u5f39\u7434\u590d\u957f\u5578\u3002\u6df1\u6797\u4eba\u4e0d\u77e5\uff0c\u660e\u6708\u6765\u76f8\u7167\u3002","\u65e0\u804a\u6210\u72ec\u5367\uff0c\u5f39\u6307\u97f6\u5149\u8fc7\u3002\u4e00\u66f2\u7ea2\u7ee1\u6b8b\uff0c\u4e00\u679d\u7fe0\u67f3\u4f4e\u3002","\u805a\u6563\u5306\u5306\uff0c\u4e91\u8fb9\u5b64\u96c1\uff0c\u6c34\u4e0a\u6d6e\u840d\u3002","\u53f9\u606f\u8001\u6765\u4ea4\u65e7\u5c3d\uff0c\u7761\u6765\u8c01\u5171\u5348\u74ef\u8336\u3002","\u591a\u5c11\u516d\u671d\u5174\u5e9f\u4e8b\uff0c\u5c3d\u5165\u6e14\u6a35\u95f2\u8bdd\u3002","\u5386\u89c8\u524d\u8d24\u56fd\u4e0e\u5bb6\uff0c\u6210\u7531\u52e4\u4fed\u7834\u7531\u5962\u3002","\u82e5\u65e0\u6c34\u6bbf\u9f99\u821f\u4e8b\uff0c\u5171\u79b9\u8bba\u529f\u4e0d\u8f83\u591a\u3002","\u60a0\u60a0\u4e07\u4e16\u529f\uff0c\u77fb\u77fb\u5f53\u5e74\u82e6\u3002","\u5343\u53e4\u5174\u4ea1\u591a\u5c11\u4e8b\uff1f\u60a0\u60a0\u3002\u4e0d\u5c3d\u957f\u6c5f\u6eda\u6eda\u6d41\u3002","\u5176\u4eba\u867d\u5df2\u6ca1\uff0c\u5343\u8f7d\u6709\u9980\u60c5\u3002","\u6211\u5bc4\u6101\u5fc3\u4e0e\u660e\u6708\uff0c\u968f\u541b\u76f4\u5230\u591c\u90ce\u897f\u3002","\u8d60\u541b\u660e\u6708\u6ee1\u524d\u6eaa\uff0c\u76f4\u5230\u897f\u6e56\u7554\u3002","\u6211\u4e0e\u5148\u751f\uff0c\u5919\u671f\u5df2\u4e45\uff0c\u4eba\u95f4\u65e0\u6b64\u3002","\u6570\u4ea9\u8352\u56ed\u7559\u6211\u4f4f\uff0c\u534a\u74f6\u6d4a\u9152\u5f85\u541b\u6e29\u3002","\u6e38\u4eba\u4e94\u9675\u53bb\uff0c\u5b9d\u5251\u503c\u5343\u91d1\u3002\u5206\u624b\u8131\u76f8\u8d60\uff0c\u5e73\u751f\u4e00\u7247\u5fc3\u3002","\u9065\u77e5\u6e56\u4e0a\u4e00\u6a3d\u9152\uff0c\u80fd\u5fc6\u5929\u6daf\u4e07\u91cc\u4eba\u3002","\u552f\u6709\u76f8\u601d\u4f3c\u6625\u8272\uff0c\u6c5f\u5357\u6c5f\u5317\u9001\u541b\u5f52\u3002","\u82b3\u8349\u5df2\u4e91\u66ae\uff0c\u6545\u4eba\u6b8a\u672a\u6765\u3002","\u7434\u8bd7\u9152\u4f34\u7686\u629b\u6211\uff0c\u96ea\u6708\u82b1\u65f6\u6700\u5fc6\u541b\u3002","\u6211\u4eca\u56e0\u75c5\u9b42\u98a0\u5012\uff0c\u552f\u68a6\u95f2\u4eba\u4e0d\u68a6\u541b\u3002","\u5f52\u53bb\u6765\uff0c\u7389\u697c\u6df1\u5904\uff0c\u6709\u4e2a\u4eba\u76f8\u5fc6\u3002","\u6795\u524d\u6cea\u5171\u9636\u524d\u96e8\uff0c\u9694\u4e2a\u7a97\u513f\u6ef4\u5230\u660e\u3002","\u6591\u7af9\u679d\uff0c\u6591\u7af9\u679d\uff0c\u6cea\u75d5\u70b9\u70b9\u5bc4\u76f8\u601d\u3002","\u4e03\u5915\u4eca\u5bb5\u770b\u78a7\u9704\uff0c\u7275\u725b\u7ec7\u5973\u6e21\u6cb3\u6865\u3002","\u5f85\u7ea6\u4e2a\u6885\u9b42\uff0c\u9ec4\u660f\u6708\u6de1\uff0c\u4e0e\u4f0a\u6df1\u601c\u4f4e\u8bed\u3002","\u6c85\u6709\u82b7\u516e\u6fa7\u6709\u5170\uff0c\u601d\u516c\u5b50\u516e\u672a\u6562\u8a00\u3002","\u5ff5\u4f73\u4eba\u3001\u97f3\u5c18\u522b\u540e\uff0c\u5bf9\u6b64\u5e94\u89e3\u76f8\u601d\u3002","\u77e5\u6211\u610f\uff0c\u611f\u541b\u601c\uff0c\u6b64\u60c5\u987b\u95ee\u5929\u3002","\u4f73\u4eba\u72ec\u7acb\u76f8\u601d\u82e6\u3002\u8584\u8896\u6b3a\u5bd2\u8129\u7af9\u66ae\u3002","\u7ec8\u65e5\u671b\u541b\u541b\u4e0d\u81f3\uff0c\u4e3e\u5934\u95fb\u9e4a\u559c\u3002","\u66f2\u6e2f\u8df3\u9c7c\uff0c\u5706\u8377\u6cfb\u9732\uff0c\u5bc2\u5bde\u65e0\u4eba\u89c1\u3002","\u8bbf\u6234\u5f52\u6765\uff0c\u5bfb\u6885\u61d2\u53bb\uff0c\u72ec\u9493\u65e0\u804a\u3002","\u82b1\u95f4\u4e00\u58f6\u9152\uff0c\u72ec\u914c\u65e0\u76f8\u4eb2\u3002\u4e3e\u676f\u9080\u660e\u6708\uff0c\u5bf9\u5f71\u6210\u4e09\u4eba\u3002","\u6708\u843d\u4e4c\u557c\u971c\u6ee1\u5929\uff0c\u6c5f\u67ab\u6e14\u706b\u5bf9\u6101\u7720","\u72ec\u5728\u5f02\u4e61\u4e3a\u5f02\u5ba2\uff0c\u6bcf\u9022\u4f73\u8282\u500d\u601d\u4eb2\u3002","\u9189\u821e\u4e0b\u5c71\u53bb\uff0c\u660e\u6708\u9010\u4eba\u5f52\u3002","\u9189\u91cc\u6311\u706f\u770b\u5251\uff0c\u68a6\u56de\u5439\u89d2\u8fde\u8425\u3002"];function lv(){return{value:ul[Math.floor(Math.random()*ul.length)]}}const cv=["container"],pv=function(i,n,t,e,r,a,s){return{"text-align":i,"letter-spacing":n,color:t,"font-size":e,"font-weight":r,"font-style":a,animation:s}};let hl=(()=>{class i{constructor(){this.options=av,this.optionsData=sv,this.mockjs=lv,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData)},10)}onResize(t){}ngOnDestroy(){}onchangeOption(t){t&&(this.options=t)}onchangeDemoData(t){t&&(this.comData=t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-marquee"]],viewQuery:function(t,e){if(1&t&&o.Gf(cv,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:4,vars:11,consts:[[2,"width","100%","height","100%","overflow","hidden","white-space","nowrap"],["container",""],[1,"roll",2,"display","inline-block","padding-left","100%"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0,1),o.TgZ(2,"div",2),o._uU(3),o.qZA(),o.qZA()),2&t&&(o.xp6(2),o.Akn(o.Hh0(3,pv,e.options.textAlign,e.options.letterSpacing+"px",e.options.textStyle.color,e.options.textStyle.fontSize+"px",e.options.textStyle.fontWeight,e.options.textStyle.fontStyle,e.options.duration+"s linear 0s infinite marquee-animation")),o.xp6(1),o.Oqu(e.comData.value))},styles:["@keyframes marquee-animation{0%{transform:translate(0)}to{transform:translate(-100%)}}"]}),i})();const dv={textAlign:"center",letterSpacing:0,textStyle:{color:"#fff",fontSize:26,fontStyle:"normal",fontWeight:"normal"}},uv={textAlign:{name:"\u5bf9\u9f50\u65b9\u5f0f",type:"string"}};let fl=["\u8bfb\u4e66\u4e0d\u89c9\u5df2\u6625\u6df1\uff0c\u4e00\u5bf8\u5149\u9634\u4e00\u5bf8\u91d1\u3002","\u4eba\u751f\u82e5\u53ea\u5982\u521d\u89c1\uff0c\u4f55\u4e8b\u79cb\u98ce\u60b2\u753b\u6247\u3002","\u5d06\u5cd2\u8bbf\u9053\u81f3\u6e58\u6e56\uff0c\u4e07\u5377\u8bd7\u4e66\u770b\u8f6c\u611a\u3002","\u4e00\u5bf8\u5149\u9634\u4e00\u5bf8\u91d1\uff0c\u5bf8\u91d1\u96be\u4e70\u5bf8\u5149\u9634\u3002","\u4eba\u751f\u5f97\u610f\u987b\u5c3d\u6b22\uff0c\u83ab\u4f7f\u91d1\u6a3d\u7a7a\u5bf9\u6708\u3002","\u4eba\u751f\u82e5\u53ea\u5982\u521d\u89c1\uff0c\u4f55\u4e8b\u79cb\u98ce\u60b2\u753b\u6247\u3002","\u6625\u98ce\u5f97\u610f\u9a6c\u8e44\u75be\uff0c\u4e00\u65e5\u770b\u5c3d\u957f\u5b89\u82b1\u3002","\u767b\u9ad8\u6b32\u7a77\u5343\u91cc\u76ee\uff0c\u6101\u4e91\u4f4e\u9501\u8861\u9633\u8def\u3002","\u751f\u5e74\u4e0d\u6ee1\u767e\uff0c\u5e38\u6000\u5343\u5c81\u5fe7\u3002","\u800c\u6d6e\u751f\u82e5\u68a6\uff0c\u4e3a\u6b22\u51e0\u4f55\uff1f","\u751f\u5e74\u4e0d\u6ee1\u767e\uff0c\u5e38\u6000\u5343\u5c81\u5fe7\u3002","\u4eba\u751f\u65e0\u6839\u8482\uff0c\u98d8\u5982\u964c\u4e0a\u5c18\u3002","\u5f97\u6b22\u5f53\u4f5c\u4e50\uff0c\u6597\u9152\u805a\u6bd4\u90bb\u3002","\u916c\u4f73\u8282\uff0c\u987b\u9169\u914a\uff0c\u83ab\u76f8\u8fdd\u3002\u4eba\u751f\u5982\u5bc4\uff0c\u4f55\u4e8b\u8f9b\u82e6\u6028\u659c\u6656\u3002","\u609f\u5df2\u5f80\u4e4b\u4e0d\u8c0f\uff0c\u77e5\u6765\u8005\u4e4b\u53ef\u8ffd\u3002","\u4eba\u751f\u5230\u5904\u77e5\u4f55\u4f3c\uff0c\u5e94\u4f3c\u98de\u9e3f\u8e0f\u96ea\u6ce5\u3002","\u4eba\u751f\u4ea6\u6709\u547d\uff0c\u5b89\u80fd\u884c\u53f9\u590d\u5750\u6101\uff1f","\u552f\u89c1\u6708\u5bd2\u65e5\u6696\uff0c\u6765\u714e\u4eba\u5bff\u3002","\u6211\u95ed\u5357\u697c\u770b\u9053\u4e66\uff0c\u5e7d\u5e18\u6e05\u5bc2\u5728\u4ed9\u5c45\u3002","\u9152\u76c8\u676f\uff0c\u4e66\u6ee1\u67b6\uff0c\u540d\u5229\u4e0d\u5c06\u5fc3\u6302\u3002","\u4e00\u6708\u4e0d\u8bfb\u4e66\uff0c\u8033\u76ee\u5931\u7cbe\u723d\u3002","\u4e66\u5f53\u5feb\u610f\u8bfb\u6613\u5c3d\uff0c\u5ba2\u6709\u53ef\u4eba\u671f\u4e0d\u6765\u3002","\u7c97\u7f2f\u5927\u5e03\u88f9\u751f\u6daf\uff0c\u8179\u6709\u8bd7\u4e66\u6c14\u81ea\u534e\u3002","\u628a\u541b\u8bd7\u5377\u706f\u524d\u8bfb\uff0c\u8bd7\u5c3d\u706f\u6b8b\u5929\u672a\u660e\u3002","\u513f\u5927\u8bd7\u4e66\u5973\u4e1d\u9ebb\uff0c\u516c\u4f46\u8bfb\u4e66\u716e\u6625\u8336\u3002","\u8bfb\u4e66\u7834\u4e07\u5377\uff0c\u4e0b\u7b14\u5982\u6709\u795e\u3002","\u5e74\u5c0f\u4ece\u4ed6\u7231\u68a8\u6817\uff0c\u957f\u6210\u987b\u8bfb\u4e94\u8f66\u4e66\u3002","\u4e0d\u662f\u9053\u4eba\u6765\u5f15\u7b11\uff0c\u5468\u60c5\u5b54\u601d\u6b63\u8ffd\u5bfb\u3002","\u72ec\u5750\u5e7d\u7bc1\u91cc\uff0c\u5f39\u7434\u590d\u957f\u5578\u3002\u6df1\u6797\u4eba\u4e0d\u77e5\uff0c\u660e\u6708\u6765\u76f8\u7167\u3002","\u65e0\u804a\u6210\u72ec\u5367\uff0c\u5f39\u6307\u97f6\u5149\u8fc7\u3002\u4e00\u66f2\u7ea2\u7ee1\u6b8b\uff0c\u4e00\u679d\u7fe0\u67f3\u4f4e\u3002","\u805a\u6563\u5306\u5306\uff0c\u4e91\u8fb9\u5b64\u96c1\uff0c\u6c34\u4e0a\u6d6e\u840d\u3002","\u53f9\u606f\u8001\u6765\u4ea4\u65e7\u5c3d\uff0c\u7761\u6765\u8c01\u5171\u5348\u74ef\u8336\u3002","\u591a\u5c11\u516d\u671d\u5174\u5e9f\u4e8b\uff0c\u5c3d\u5165\u6e14\u6a35\u95f2\u8bdd\u3002","\u5386\u89c8\u524d\u8d24\u56fd\u4e0e\u5bb6\uff0c\u6210\u7531\u52e4\u4fed\u7834\u7531\u5962\u3002","\u82e5\u65e0\u6c34\u6bbf\u9f99\u821f\u4e8b\uff0c\u5171\u79b9\u8bba\u529f\u4e0d\u8f83\u591a\u3002","\u60a0\u60a0\u4e07\u4e16\u529f\uff0c\u77fb\u77fb\u5f53\u5e74\u82e6\u3002","\u5343\u53e4\u5174\u4ea1\u591a\u5c11\u4e8b\uff1f\u60a0\u60a0\u3002\u4e0d\u5c3d\u957f\u6c5f\u6eda\u6eda\u6d41\u3002","\u5176\u4eba\u867d\u5df2\u6ca1\uff0c\u5343\u8f7d\u6709\u9980\u60c5\u3002","\u6211\u5bc4\u6101\u5fc3\u4e0e\u660e\u6708\uff0c\u968f\u541b\u76f4\u5230\u591c\u90ce\u897f\u3002","\u8d60\u541b\u660e\u6708\u6ee1\u524d\u6eaa\uff0c\u76f4\u5230\u897f\u6e56\u7554\u3002","\u6211\u4e0e\u5148\u751f\uff0c\u5919\u671f\u5df2\u4e45\uff0c\u4eba\u95f4\u65e0\u6b64\u3002","\u6570\u4ea9\u8352\u56ed\u7559\u6211\u4f4f\uff0c\u534a\u74f6\u6d4a\u9152\u5f85\u541b\u6e29\u3002","\u6e38\u4eba\u4e94\u9675\u53bb\uff0c\u5b9d\u5251\u503c\u5343\u91d1\u3002\u5206\u624b\u8131\u76f8\u8d60\uff0c\u5e73\u751f\u4e00\u7247\u5fc3\u3002","\u9065\u77e5\u6e56\u4e0a\u4e00\u6a3d\u9152\uff0c\u80fd\u5fc6\u5929\u6daf\u4e07\u91cc\u4eba\u3002","\u552f\u6709\u76f8\u601d\u4f3c\u6625\u8272\uff0c\u6c5f\u5357\u6c5f\u5317\u9001\u541b\u5f52\u3002","\u82b3\u8349\u5df2\u4e91\u66ae\uff0c\u6545\u4eba\u6b8a\u672a\u6765\u3002","\u7434\u8bd7\u9152\u4f34\u7686\u629b\u6211\uff0c\u96ea\u6708\u82b1\u65f6\u6700\u5fc6\u541b\u3002","\u6211\u4eca\u56e0\u75c5\u9b42\u98a0\u5012\uff0c\u552f\u68a6\u95f2\u4eba\u4e0d\u68a6\u541b\u3002","\u5f52\u53bb\u6765\uff0c\u7389\u697c\u6df1\u5904\uff0c\u6709\u4e2a\u4eba\u76f8\u5fc6\u3002","\u6795\u524d\u6cea\u5171\u9636\u524d\u96e8\uff0c\u9694\u4e2a\u7a97\u513f\u6ef4\u5230\u660e\u3002","\u6591\u7af9\u679d\uff0c\u6591\u7af9\u679d\uff0c\u6cea\u75d5\u70b9\u70b9\u5bc4\u76f8\u601d\u3002","\u4e03\u5915\u4eca\u5bb5\u770b\u78a7\u9704\uff0c\u7275\u725b\u7ec7\u5973\u6e21\u6cb3\u6865\u3002","\u5f85\u7ea6\u4e2a\u6885\u9b42\uff0c\u9ec4\u660f\u6708\u6de1\uff0c\u4e0e\u4f0a\u6df1\u601c\u4f4e\u8bed\u3002","\u6c85\u6709\u82b7\u516e\u6fa7\u6709\u5170\uff0c\u601d\u516c\u5b50\u516e\u672a\u6562\u8a00\u3002","\u5ff5\u4f73\u4eba\u3001\u97f3\u5c18\u522b\u540e\uff0c\u5bf9\u6b64\u5e94\u89e3\u76f8\u601d\u3002","\u77e5\u6211\u610f\uff0c\u611f\u541b\u601c\uff0c\u6b64\u60c5\u987b\u95ee\u5929\u3002","\u4f73\u4eba\u72ec\u7acb\u76f8\u601d\u82e6\u3002\u8584\u8896\u6b3a\u5bd2\u8129\u7af9\u66ae\u3002","\u7ec8\u65e5\u671b\u541b\u541b\u4e0d\u81f3\uff0c\u4e3e\u5934\u95fb\u9e4a\u559c\u3002","\u66f2\u6e2f\u8df3\u9c7c\uff0c\u5706\u8377\u6cfb\u9732\uff0c\u5bc2\u5bde\u65e0\u4eba\u89c1\u3002","\u8bbf\u6234\u5f52\u6765\uff0c\u5bfb\u6885\u61d2\u53bb\uff0c\u72ec\u9493\u65e0\u804a\u3002","\u82b1\u95f4\u4e00\u58f6\u9152\uff0c\u72ec\u914c\u65e0\u76f8\u4eb2\u3002\u4e3e\u676f\u9080\u660e\u6708\uff0c\u5bf9\u5f71\u6210\u4e09\u4eba\u3002","\u6708\u843d\u4e4c\u557c\u971c\u6ee1\u5929\uff0c\u6c5f\u67ab\u6e14\u706b\u5bf9\u6101\u7720","\u72ec\u5728\u5f02\u4e61\u4e3a\u5f02\u5ba2\uff0c\u6bcf\u9022\u4f73\u8282\u500d\u601d\u4eb2\u3002","\u9189\u821e\u4e0b\u5c71\u53bb\uff0c\u660e\u6708\u9010\u4eba\u5f52\u3002","\u9189\u91cc\u6311\u706f\u770b\u5251\uff0c\u68a6\u56de\u5439\u89d2\u8fde\u8425\u3002"];function hv(){return{value:fl[Math.floor(Math.random()*fl.length)]}}const fv=["container"],vv=function(i,n,t,e,r,a){return{"text-align":i,"letter-spacing":n,color:t,"font-size":e,"font-weight":r,"font-style":a}};let vl=(()=>{class i{constructor(){this.options=dv,this.optionsData=uv,this.mockjs=hv,this.comData=this.mockjs()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData)},10)}onResize(t){}ngOnDestroy(){}onchangeOption(t){t&&(this.options=t)}onchangeDemoData(t){t&&(this.comData=t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-title"]],viewQuery:function(t,e){if(1&t&&o.Gf(fv,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:3,vars:10,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(t,e){1&t&&(o.TgZ(0,"div",0,1),o._uU(2),o.qZA()),2&t&&(o.Akn(o.HTZ(3,vv,e.options.textAlign,e.options.letterSpacing+"px",e.options.textStyle.color,e.options.textStyle.fontSize+"px",e.options.textStyle.fontWeight,e.options.textStyle.fontStyle)),o.xp6(2),o.hij(" ",e.comData.value,"\n"))},encapsulation:2}),i})();const gv={textAlign:"center",top:4,letterSpacing:0,setInt:5,duration:1,autoRun:!0,changeRun:!1,textStyle:{color:"#fff",fontSize:16,fontStyle:"normal",fontWeight:"normal",fontFamily:"serif"},boxImg:{url:"./assets/images/back.svg",width:180,height:100}},mv={textAlign:{name:"\u5bf9\u9f50\u65b9\u5f0f",type:"string"}};function xv(){return ze.mock({data:[{value:'@datetime("yyyy/MM/dd")',fontSize:16,lineHeight:18},{value:"@province",fontSize:16,lineHeight:18},{value:"@integer(1000, 100000)",color:"@color",fontSize:26,textAlign:"center",lineHeight:30,fontWeight:"normal",fontStyle:"normal",fontFamily:"serif",toLocaleString:!0}]})}const yv=["container"],wv=["runbox"],bv=function(i,n,t,e,r,a,s){return{color:i,"font-size":n,"text-align":t,"line-height":e,"font-weight":r,"font-style":a,"font-family":s}};function _v(i,n){if(1&i&&(o.TgZ(0,"div"),o._uU(1),o.qZA()),2&i){const t=n.$implicit;o.Akn(o.Hh0(3,bv,t.color,t.fontSize+"px",t.textAlign,t.lineHeight+"px",t.fontWeight,t.fontStyle,t.fontFamily)),o.xp6(1),o.hij(" ",t.toLocaleString?t.value.toLocaleString():t.value," ")}}const Cv=function(i,n,t,e,r,a,s){return{"text-align":i,"letter-spacing":n,color:t,"font-size":e,"font-weight":r,"font-style":a,"font-family":s,"white-space":"nowrap"}},Sv=function(i,n){return{top:i,left:n}},Dv=function(i,n,t){return{width:i,height:n,background:t,"background-size":"100% 100%"}},Ov=function(i){return{top:i}};let gl=(()=>{class i{constructor(){this.options=gv,this.optionsData=mv,this.mockjs=xv,this.comData=this.mockjs(),this.boxPos={top:0,left:0,width:400,height:400}}ngOnInit(){}ngAfterViewInit(){const t=this.container.nativeElement.offsetWidth,e=this.container.nativeElement.offsetHeight;setTimeout(()=>{this.boxPos.top=e/2,this.boxPos.left=t/2,this.boxPos.width=t,this.boxPos.height=e,this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.runbox.nativeElement.style.animation=`tip-random-animation ${this.options.duration}s ease-out`,this.setRun=setInterval(()=>{this.options.autoRun&&this.options.setInt>=1&&this.changePos()},1e3*this.options.setInt)},10)}changePos(){this.boxPos.top=Math.random()*this.boxPos.height,this.boxPos.left=Math.random()*this.boxPos.width,this.runbox.nativeElement.style.animation=`tip-random-animation ${this.options.duration}s ease-out`,setTimeout(()=>{this.runbox.nativeElement.style.animation=""},1e3*this.options.duration+10)}onResize(t){this.boxPos.width=this.container.nativeElement.offsetWidth,this.boxPos.height=this.container.nativeElement.offsetHeight}ngOnDestroy(){this.setRun&&clearInterval(this.setRun)}onchangeOption(t){t&&(this.options=t)}onchangeDemoData(t){t&&(this.comData=t,this.options.changeRun&&this.changePos())}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-tip-random-pos"]],viewQuery:function(t,e){if(1&t&&(o.Gf(yv,5),o.Gf(wv,5)),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first),o.iGM(r=o.CRH())&&(e.runbox=r.first)}},inputs:{factoryData:"factoryData"},decls:7,vars:26,consts:[[2,"width","100%","height","100%"],["container",""],[1,"runbox"],["runbox",""],[1,"backimg"],[1,"content"],[3,"style",4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0,1),o.TgZ(2,"div",2,3),o._UZ(4,"div",4),o.TgZ(5,"div",5),o.YNc(6,_v,2,11,"div",6),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.Akn(o.Hh0(9,Cv,e.options.textAlign,e.options.letterSpacing+"px",e.options.textStyle.color,e.options.textStyle.fontSize+"px",e.options.textStyle.fontWeight,e.options.textStyle.fontStyle,e.options.textStyle.fontFamily)),o.xp6(2),o.Akn(o.WLB(17,Sv,e.boxPos.top+"px",e.boxPos.left+"px")),o.xp6(2),o.Akn(o.kEZ(20,Dv,e.options.boxImg.width+"px",e.options.boxImg.height+"px","url("+e.options.boxImg.url+")")),o.xp6(1),o.Akn(o.VKq(24,Ov,e.options.top+"px")),o.xp6(1),o.Q6J("ngForOf",e.comData.data))},directives:[w.sg],styles:[".runbox[_ngcontent-%COMP%]{position:absolute}.content[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%,-50%)}.backimg[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%,-50%)}@keyframes tip-random-animation{0%{opacity:0}to{opacity:1}}"]}),i})();const Tv={top:0,setInt:5,distance:200,minScale:.7,maxScale:1,textStyle:{color:"#fff",fontSize:16,letterSpacing:0,fontStyle:"normal",fontWeight:"normal",fontFamily:"serif"},boxImg:{url:"./assets/images/but.svg",width:180,height:100}},Av={};function Ev(){return ze.mock({"series|6":[{name:"@province@integer(1000, 100000)"}]})}const Mv=["container"],Pv=function(i,n,t){return{width:i,height:n,background:t,"background-size":"100% 100%"}},kv=function(i){return{top:i}};function Iv(i,n){if(1&i&&(o.TgZ(0,"div",3),o._UZ(1,"div",4),o._UZ(2,"div",5),o.qZA()),2&i){const t=o.oxw();o.xp6(1),o.Akn(o.kEZ(4,Pv,t.options.boxImg.width+"px",t.options.boxImg.height+"px","url("+t.options.boxImg.url+")")),o.xp6(1),o.Akn(o.VKq(8,kv,t.options.top+"px"))}}const Rv=function(i,n,t,e,r,a){return{"text-align":"center","letter-spacing":i,color:n,"font-size":t,"font-weight":e,"font-style":r,"font-family":a,"white-space":"nowrap"}};let ml=(()=>{class i{constructor(){this.options=Tv,this.optionsData=Av,this.mockjs=Ev,this.comData=this.mockjs(),this.listData=[{name:""},{name:""},{name:""}]}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.factoryData.options&&(this.options=this.factoryData.options),this.factoryData.comData&&(this.comData=this.factoryData.comData),this.updateData(this.comData.series||[])},10)}changePos(t,e){const{distance:r,minScale:a,maxScale:s}=this.options;ot.select(this.container.nativeElement).selectAll("div").filter(".runbox").each(function(l,c){let d=ot.select(this).attr("posTag");"left"==d&&ot.select(this).style("opacity",1).style("transform",`translateX(-${r}px) scale(${a})`).transition().duration(500).style("transform",`translateX(-${r+100}px) scale(0.01)`).style("opacity",0).on("end",function(){ot.select(this).select(".content").text(t[e].name||""),ot.select(this).attr("posTag","right").style("opacity",1).style("transform",`translateX(${r+100}px) scale(0.01)`).transition().duration(500).style("transform",`translateX(${r}px) scale(${a})`)}),"right"==d&&ot.select(this).style("transform",`translateX(${r}px) scale(${a})`).transition().duration(1e3).style("transform",`translateX(0px) scale(${s})`).attr("posTag","center"),"center"==d&&ot.select(this).style("transform",`translateX(0px) scale(${s})`).transition().duration(1e3).style("transform",`translateX(-${r}px) scale(${a})`).attr("posTag","left")})}onResize(t){}ngOnDestroy(){this.setRun&&clearInterval(this.setRun)}onchangeOption(t){t&&(this.options=t)}onchangeDemoData(t){t&&(this.comData=t,this.updateData(this.comData.series||[]))}updateData(t){let e=t.length;if(0===e)this.setRun&&clearInterval(this.setRun),ot.select(this.container.nativeElement).selectAll("div").filter(".runbox").each(function(r,a){ot.select(this).select(".content").text("")});else{1===e&&(t.push(t[0]),t.push(t[0])),2===e&&t.push(t[0]),e=t.length;const{distance:r,minScale:a,maxScale:s}=this.options;ot.select(this.container.nativeElement).selectAll("div").filter(".runbox").each(function(c,d){0==d&&(ot.select(this).select(".content").text(t[0].name||""),ot.select(this).attr("posTag","left").style("opacity",0).style("transform","translateX(0px) scale(0.01)").transition().duration(1e3).style("transform",`translateX(-${r}px) scale(${a})`).style("opacity",1)),1==d&&(ot.select(this).select(".content").text(t[1].name||""),ot.select(this).attr("posTag","center").style("opacity",0).style("transform","translateX(0px) scale(0.01)").transition().duration(1e3).style("transform",`translateX(0px) scale(${s})`).style("opacity",1)),2==d&&(ot.select(this).select(".content").text(t[2].name||""),ot.select(this).attr("posTag","right").style("opacity",0).style("transform","translateX(0px) scale(0.01)").transition().duration(1e3).style("transform",`translateX(${r}px) scale(${a})`).style("opacity",1))}),this.setRun&&clearInterval(this.setRun);let l=3;this.setRun=setInterval(()=>{l>=e&&(l=0),this.options.setInt>=1&&this.changePos(t,l),l++},1e3*this.options.setInt)}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-tip-rotation"]],viewQuery:function(t,e){if(1&t&&o.Gf(Mv,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{factoryData:"factoryData"},decls:3,vars:10,consts:[[2,"width","100%","height","100%","transform","translate(50%, 50%)"],["container",""],["class","runbox",4,"ngFor","ngForOf"],[1,"runbox"],[1,"backimg"],[1,"content"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0,1),o.YNc(2,Iv,3,10,"div",2),o.qZA()),2&t&&(o.Akn(o.HTZ(3,Rv,e.options.textStyle.letterSpacing+"px",e.options.textStyle.color,e.options.textStyle.fontSize+"px",e.options.textStyle.fontWeight,e.options.textStyle.fontStyle,e.options.textStyle.fontFamily)),o.xp6(2),o.Q6J("ngForOf",e.listData))},directives:[w.sg],styles:[".runbox[_ngcontent-%COMP%]{position:absolute}.content[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%,-50%)}.backimg[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%,-50%)}"]}),i})();const zv=["container"];function Gv(i,n){if(1&i&&(o.TgZ(0,"div"),o._uU(1),o.qZA()),2&i){const t=n.$implicit;o.xp6(1),o.Oqu(t.name)}}const Nv=function(i){return{background:i}};function Bv(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"li",9),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw().onClickPageNum(a)}),o.TgZ(1,"span"),o._uU(2),o.qZA(),o.qZA()}if(2&i){const t=n.$implicit;o.Q6J("ngStyle",o.VKq(2,Nv,t.active?"#1890FF":"transparent")),o.xp6(2),o.Oqu(t.pageNumber)}}const xl=function(i){return{color:i}},Fv={exoptions:{pageSize:3,pageShow:3,_dataSetInt:3e3},optionsData:{},mockjs:function(){let i=[];for(let n=1;n<=10;n++)i.push({name:n+":"+ze.Random.city(!0),value:n});return i}};let yl=(()=>{class i extends An.H{constructor(){super(),this.coreclass=Fv,this.pageNums=[],this.nowPages=[],this.myPageData=[]}setData(t){let e=t.length,r=this.options.pageSize,a=this.options.pageShow;this.pageNums=[],this.nowPages=[];let s=Math.ceil(e/r),l=Math.ceil(s/a);for(let c=0;c<l;c++){let d=[];for(let f=0;f<a;f++){let h=c*a+f+1;if(h<=s){let v=0===c,m=c===l-1;d.push({data:t.slice((h-1)*r,h*r),pageNumber:h,active:!1,pageIndex:c+1,firstIndex:v,lastIndex:m})}}this.pageNums.push(d)}this.changeNat(0)}dataProcess(t){this.setData(t)}onchangeOption(t){console.log(t),this.options=t,this.setData(this.comData)}onClickPageNum(t){this.nowPages.forEach(e=>{e.active=!1}),t.active=!0,this.myPageData=t.data,console.log("tiem :>> ",t)}onClickLast(){this.changeNat(this.nowPages[0].pageIndex-2)}onClickNext(){this.changeNat(this.nowPages[0].pageIndex)}changeNat(t){this.pageNums[t]&&(this.nowPages.forEach(e=>{e.active=!1}),this.nowPages=this.pageNums[t],this.nowPages[0].active=!0,this.myPageData=this.nowPages[0].data)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-pagination"]],viewQuery:function(t,e){if(1&t&&o.Gf(zv,5),2&t){let r;o.iGM(r=o.CRH())&&(e.container=r.first)}},inputs:{coreclass:"coreclass"},features:[o.qOj],decls:12,vars:8,consts:[[2,"width","100%","height","100%"],["container",""],[2,"text-align","left","margin-bottom","10px","white-space","nowrap"],[4,"ngFor","ngForOf"],[1,"page-ul"],[1,"page-last",3,"click"],[3,"ngStyle"],[3,"ngStyle","click",4,"ngFor","ngForOf"],[1,"page-next",3,"click"],[3,"ngStyle","click"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0,1),o.TgZ(2,"div",2),o.YNc(3,Gv,2,1,"div",3),o.qZA(),o.TgZ(4,"ul",4),o.TgZ(5,"li",5),o.NdJ("click",function(){return e.onClickLast()}),o.TgZ(6,"span",6),o._uU(7," \uff1c "),o.qZA(),o.qZA(),o.YNc(8,Bv,3,4,"li",7),o.TgZ(9,"li",8),o.NdJ("click",function(){return e.onClickNext()}),o.TgZ(10,"span",6),o._uU(11," \uff1e "),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.xp6(3),o.Q6J("ngForOf",e.myPageData),o.xp6(3),o.Q6J("ngStyle",o.VKq(4,xl,null!=e.nowPages[0]&&e.nowPages[0].firstIndex?"#ffffff40":"#ffffffA6")),o.xp6(2),o.Q6J("ngForOf",e.nowPages),o.xp6(2),o.Q6J("ngStyle",o.VKq(6,xl,null!=e.nowPages[0]&&e.nowPages[0].lastIndex?"#ffffff40":"#ffffffA6")))},directives:[w.sg,w.PC],styles:[".page-ul[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none;white-space:nowrap;text-align:center}.page-ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#1890ff;display:inline-block;min-width:22px;height:22px;line-height:22px;text-align:center;vertical-align:middle;list-style:none;border-radius:2px;margin:0 2px;cursor:pointer}.page-ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:22px;font-size:14px;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#ffffffa6;line-height:22px}.page-ul[_ngcontent-%COMP%]   .page-last[_ngcontent-%COMP%]{background-color:transparent}.page-ul[_ngcontent-%COMP%]   .page-next[_ngcontent-%COMP%]{background-color:transparent}.page-ul[_ngcontent-%COMP%]   .page-next[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ffffffa6}"]}),i})();const Pi=[{title:"\u57fa\u672c\u56fe\u8868",children:[{icon:"linechart",title:"\u6298\u7ebf\u56fe",selector:"LinechartComponent",component:pd,position:{width:400,height:250}},{icon:"basicbar",title:"\u67f1\u72b6\u56fe",selector:"BasicbarComponent",component:ud,position:{width:400,height:250}},{icon:"basicpie",title:"\u997c\u56fe",component:gd,selector:"BasicpieComponent",position:{width:300,height:300}},{icon:"polarbar",title:"\u6781\u5750\u6807\u67f1\u72b6\u56fe",selector:"PolarbarComponent",component:fd,position:{width:300,height:300}},{icon:"barstacksbend",title:"\u5f2f\u66f2\u5806\u53e0\u6761\u5f62\u56fe",selector:"BarStacksBendComponent",component:Dh,position:{width:180,height:180}},{icon:"barstack",title:"\u5806\u53e0\u6761\u5f62\u56fe",selector:"BarStackComponent",component:wh,position:{width:360,height:60}},{icon:"pie3d",title:"3D\u997c\u56fe",selector:"Pie3dComponent",component:pe.Gf,position:{width:400,height:400}},{icon:"piesingle",title:"\u73af\u5f62\u6307\u6807",selector:"PieSingleComponent",component:pe.gh,position:{width:180,height:180}},{icon:"pieproportion",title:"\u997c\u56fe\u6bd4\u4f8b",selector:"PieproportionComponent",component:Mh,position:{width:180,height:80}}]},{title:"\u5217\u8868\u7ec4\u4ef6",children:[{icon:"cabinetlist",title:"\u673a\u67dc\u5217\u8868",selector:"CabinetlistComponent",component:dl,position:{width:650,height:500}},{icon:"polygon",title:"\u591a\u8fb9\u5f62",selector:"PolygonComponent",component:Xu,position:{width:400,height:400}},{icon:"alarmfaultlist",title:"\u544a\u8b66\u5217\u8868",selector:"AlarmfaultlistComponent",component:Qu,position:{width:1200,height:800}},{icon:"summonerscanyon",title:"\u53ec\u5524\u5e08\u5ce1\u8c37",selector:"SummonerscanyonComponent",component:ih,position:{width:1200,height:800}},{icon:"barstackrect",title:"\u5806\u53e0\u67f1\u72b6\u56fe",selector:"BarstackrectComponent",component:oh,position:{width:800,height:300}},{icon:"barstripe",title:"\u6761\u5f62\u56fe",selector:"BarstripeComponent",component:sh,position:{width:600,height:400}},{icon:"barstripelist",title:"\u6761\u5f62\u56fe\u5217\u8868",selector:"BarstripelistComponent",component:ch,position:{width:600,height:400}},{icon:"d3alarmlist",title:"\u544a\u8b66\u5217\u8868",selector:"D3alarmlistComponent",component:dh,position:{width:600,height:200}},{icon:"hostlist",title:"\u4e3b\u673a\u5217\u8868",selector:"HostlistComponent",component:hh,position:{width:600,height:600}},{icon:"gaugestripelist",title:"\u4eea\u8868\u76d8\u5217\u8868",selector:"GaugestripelistComponent",component:vh,position:{width:600,height:400}}]},{title:"\u6df7\u5408\u56fe\u8868",children:[{icon:"alarmlist",title:"\u544a\u8b66\u6536\u655b",selector:"AlarmlistComponent",component:pe.pn},{icon:"mulpies",title:"\u6df7\u5408\u997c\u56fe",selector:"MulpiesComponent",component:pe.oU},{icon:"miniarealine",title:"\u8ff7\u4f60\u9762\u79ef\u56fe",selector:"MiniarealineComponent",component:pe.bu},{icon:"minipiesicon",title:"\u8ff7\u4f60\u997c\u56fe",selector:"MimipiesComponent",component:pe.dC},{icon:"d3lineareaicon",title:"\u6298\u7ebf\u9762\u79ef\u56fe",selector:"D3lineareaComponent",component:pe.Oy},{icon:"titleareaicon",title:"\u6807\u9898\u9762\u79ef\u56fe",selector:"TitleareaComponent",component:pe.gR},{icon:"lineschart",title:"\u8f6e\u64ad\u6298\u7ebf\u56fe",selector:"LineschartComponent",component:pe.J0}]},{title:"\u6587\u672c\u7ec4\u4ef6",children:[{icon:"title",title:"\u6807\u9898",selector:"TitleComponent",component:vl,position:{width:700,height:40}},{icon:"marquee",title:"\u8dd1\u9a6c\u706f",selector:"MarqueeComponent",component:hl,position:{width:700,height:40}},{icon:"pagination",title:"\u5206\u9875",selector:"PaginationComponent",component:yl,position:{width:300,height:130}},{icon:"tiprandomPos",title:"\u968f\u673a\u6807\u7b7e",selector:"TipRandomPosComponent",component:gl,position:{width:300,height:300}},{icon:"tiprotation",title:"\u65cb\u8f6c\u6807\u7b7e",selector:"TipRotationComponent",component:ml,position:{width:550,height:100}},{icon:"table1",title:"\u8868\u683c1",selector:"Table1Component",component:pe.ND,position:{width:420,height:300}},{icon:"table2",title:"\u8868\u683c2",selector:"Table2Component",component:pe.r4,position:{width:420,height:300}}]},{title:"\u88c5\u9970\u7ec4\u4ef6",children:[{icon:"head1",title:"\u5934\u90e81",selector:"Head1Component",component:pe.J6,position:{width:1200,height:60}},{icon:"head2",title:"\u5934\u90e82",selector:"Head2Component",component:pe.RN},{icon:"borderbox01",title:"borderbox01",selector:"Borderbox01Component",component:pe.F5},{icon:"borderbox02",title:"borderbox02",selector:"Borderbox02Component",component:pe.cs},{icon:"clock",title:"\u65f6\u949f",selector:"ClockComponent",component:pe.Fu},{icon:"yuanhuan",title:"\u88c5\u9970\u5706\u73af",selector:"YuanhuanComponent",component:pe.Fl},{icon:"videosphere",title:"\u89c6\u9891\u7eb9\u7406",selector:"VideosphereComponent",component:pe.rm},{icon:"centerrader",title:"\u4e2d\u592e\u96f7\u8fbe",selector:"CenterraderComponent",component:pe.XD},{icon:"noisesphere",title:"\u566a\u58f0\u7403",selector:"NoiseSphereComponent",component:pe.$F},{icon:"earth",title:"\u88c5\u9970\u5730\u7403",selector:"EarthComponent",component:pe.Lw},{icon:"ammojs",title:"Ammojs",selector:"AmmojsComponent",component:pe.mP},{icon:"turnbook3d",title:"Turnbook3d",selector:"Turnbook3dComponent",component:pe.DJ},{icon:"book3d",title:"\u62d3\u6251\u673a\u7bb1",selector:"Book3dbasehtmlComponent",component:pe.rp},{icon:"circlepointbar",title:"\u5706\u5f62\u8fdb\u5ea6\u6761",selector:"CirclepointbarComponent",component:mu,position:{width:400,height:400}},{icon:"three3dtree",title:"3D\u6811",selector:"Three3dtreeComponent",component:bu,position:{width:400,height:400}},{icon:"threegeometry",title:"\u4e09\u7ef4\u51e0\u4f55\u4f53",selector:"ThreegeometryComponent",component:yu,position:{width:400,height:400}},{icon:"ring2",title:"\u88c5\u9970\u5706\u73af",selector:"Ring2Component",component:vu,position:{width:400,height:400}},{icon:"ring",title:"Siri\u6548\u679c",selector:"RingComponent",component:iu,position:{width:400,height:400}},{icon:"supersportscar",title:"\u672a\u6765\u8d85\u7ea7\u8dd1\u8f66",selector:"SuperSportsCarComponent",component:du,position:{width:400,height:400}},{icon:"plane",title:"\u6d77\u9762\u98ce\u8f66\u5c0f\u8239",selector:"PlaneComponent",component:qd,position:{width:400,height:400}},{icon:"sphere",title:"\u7403\u4f53",selector:"SphereComponent",component:Ud,position:{width:400,height:400}},{icon:"effect1",title:"effect1",selector:"Effect1Component",component:xd,position:{width:400,height:400}},{icon:"effect2",title:"effect2",selector:"Effect2Component",component:wd,position:{width:400,height:400}},{icon:"effect3",title:"effect3",selector:"Effect3Component",component:_d,position:{width:400,height:400}},{icon:"effect4",title:"effect4",selector:"Effect4Component",component:Sd,position:{width:400,height:400}},{icon:"effect5",title:"effect5",selector:"Effect5Component",component:Od,position:{width:400,height:400}},{icon:"effect6",title:"effect6",selector:"Effect6Component",component:Ad,position:{width:400,height:400}},{icon:"book3dbase",title:"\u65e0\u5b57\u5929\u4e66",selector:"Book3dbaseComponent",component:pe.Pp}]},{title:"\u5730\u56fe\u7ec4\u4ef6",children:[{icon:"worldmap1",title:"\u4e16\u754c\u5730\u56fe",selector:"Worldmap1Component",component:pe.tf},{icon:"chinamap1",title:"\u4e2d\u56fd\u5730\u56fe1",selector:"Chinamap1Component",component:pe._0},{icon:"mapsvg",title:"svg\u5730\u56fe",selector:"MapsvgComponent",component:pe.Kp},{icon:"chinamap2",title:"\u5730\u56fed3js",selector:"Chinamap2Component",component:pe.TW},{icon:"chinamapthree1",title:"\u5730\u56fethree1",selector:"Chinamapthree1Component",component:pe.eY},{icon:"chinamap",title:"\u4e2d\u56fd\u5730\u56febar",selector:"ChinamapComponent",component:pe.ZK},{icon:"chinamap4",title:"\u4e2d\u56fd\u5730\u56feline",selector:"MapChina4Component",component:pe.Jt}]},{title:"\u62d3\u6251\u7ec4\u4ef6",children:[{icon:"d3honeycomb",title:"\u8702\u7a9d\u56fe",selector:"D3HoneycombComponent",component:rl,position:{width:800,height:900}},{icon:"d3dagre",title:"\u5c42\u7ea7\u62d3\u6251",selector:"D3DagreComponent",component:sl,position:{width:800,height:900}},{icon:"d3bubble",title:"\u6c14\u6ce1\u56fe",selector:"D3bubbleComponent",component:Xs,position:{width:400,height:400}},{icon:"d3bubble2",title:"\u6c14\u6ce1\u56fe2",selector:"D3bubble2Component",component:Ks,position:{width:400,height:400}},{icon:"d3bubble3",title:"\u6c14\u6ce1\u56fe3",selector:"D3bubble3Component",component:qs,position:{width:400,height:400}},{icon:"d3bubble4",title:"\u6c14\u6ce1\u56fe4",selector:"D3bubble4Component",component:tl,position:{width:400,height:400}},{icon:"d3hierarchy2",title:"\u6d41\u7a0b\u56fe",selector:"D3hierarchy2Component",component:ks,position:{width:1e3,height:400}},{icon:"computerroom",title:"\u673a\u623f\u53ef\u89c6\u5316",selector:"ComputerRoomComponent",component:Us,position:{width:1e3,height:800}},{icon:"topo253d",title:"\u673a\u623f\u5173\u7cfb\u56fe",selector:"Topo253dComponent",component:Zs,position:{width:1e3,height:680}},{icon:"topo25",title:"2.5D\u62d3\u6251\u56fe",selector:"Topo25Component",component:Hs,position:{width:750,height:600}},{icon:"usertree",title:"\u81ea\u5b9a\u4e49\u5c42\u7ea7\u6811",selector:"UsertreeComponent",component:Es,position:{width:700,height:300}},{icon:"hierarchytree",title:"\u5c42\u7ea7\u6811\u62d3\u6251",selector:"TreeAndTopoComponent",component:Ms,position:{width:1100,height:700}},{icon:"topod3",title:"\u5c42\u7ea7\u6811",selector:"D3hierarchyComponent",component:Ps},{icon:"topoline",title:"\u73af\u5f62\u62d3\u6251",selector:"TopolineComponent",component:Gs,position:{width:1200,height:600}},{icon:"topoline2",title:"\u73af\u5f62\u5c42\u7ea7\u62d3\u6251",selector:"Topoline2Component",component:Ns,position:{width:800,height:400}},{icon:"d3polyline",title:"\u6d41\u7a0b\u56fe\u6298\u7ebf",selector:"D3polylineComponent",component:Fs,position:{width:1100,height:700}},{icon:"g61",title:"\u62d3\u6251\u56fe",selector:"TopoG61Component",component:ll,position:{width:1100,height:700}},{icon:"mxgraph",title:"\u62d3\u6251\u56fe",selector:"TopomxComponent",component:cl,position:{width:1100,height:700}}]},{title:"\u827a\u672f\u7ec4\u4ef6",children:[{icon:"p5test",title:"p5test",selector:"P5testComponent",component:Vu,position:{width:400,height:400}},{icon:"p5bar",title:"p5bar",selector:"P5barComponent",component:Uu,position:{width:400,height:400}},{icon:"art1",title:"art1",selector:"Art1Component",component:Su,position:{width:400,height:400}},{icon:"art2",title:"art2",selector:"Art2Component",component:Tu,position:{width:400,height:400}},{icon:"art3",title:"art3",selector:"Art3Component",component:Mu,position:{width:400,height:400}},{icon:"art4",title:"art4",selector:"Art4Component",component:Ru,position:{width:400,height:400}},{icon:"art5",title:"art5",selector:"Art5Component",component:Nu,position:{width:400,height:400}},{icon:"art6",title:"art6",selector:"Art6Component",component:Fu,position:{width:400,height:400}},{icon:"art7",title:"art7",selector:"Art7Component",component:Zu,position:{width:400,height:400}}]},{title:"\u6a21\u578b\u7ec4\u4ef6",children:[{icon:"babylonbox",title:"babylonbox",selector:"BabylonboxComponent",component:bs,position:{width:400,height:400}},{icon:"babylondemo",title:"babylondemo",selector:"BabylondemoComponent",component:_s,position:{width:400,height:400}},{icon:"babylongltf",title:"gltf",selector:"BabylongltfComponent",component:Cs,position:{width:400,height:400}},{icon:"babylonhost",title:"\u670d\u52a1\u5668\u53ef\u89c6\u5316",selector:"BabylonhostComponent",component:Os,position:{width:400,height:400}},{icon:"babylontrail",title:"\u8e2a\u8ff9",selector:"BabylontrailComponent",component:Ts,position:{width:400,height:400}},{icon:"computerroomvis",title:"\u673a\u623f\u53ef\u89c6\u5316",selector:"ComputerRoomVisComponent",component:As,position:{width:400,height:400}}]}];let wl=(()=>{class i{constructor(t){this.viewContainerRef=t}}return i.\u0275fac=function(t){return new(t||i)(o.Y36(o.s_b))},i.\u0275dir=o.lG2({type:i,selectors:[["","comHost",""]]}),i})();function Lv(i,n){}let bl=(()=>{class i{constructor(t){this.componentFactoryResolver=t,this.eventEmit=new o.vpe}findComponent(t){let e=null;t:for(let r=0;r<Pi.length;r++)for(let a=0;a<Pi[r].children.length;a++)if(Pi[r].children[a].selector===t){e=Pi[r].children[a].component;break t}return e}ngOnChanges(t){if(this.widgetConfig&&this.widgetConfig.selector){let e=this.findComponent(this.widgetConfig.selector);e&&this.loadComponent(e)}}ngOnInit(){}loadComponent(t){if(!t)return;const e=this.componentFactoryResolver.resolveComponentFactory(t),r=this.comHost.viewContainerRef;r.clear(),this.componentRef=r.createComponent(e),this.componentRef.instance.factoryData=this.widgetConfig,this.eventEmit.emit({uuid:this.widgetConfig.uuid,comInstance:this.componentRef.instance})}onResize(){var t,e;this.componentRef&&(null===(e=(t=this.componentRef.instance).ngOnChanges)||void 0===e||e.call(t,{resize:!0}))}onChangeSetting(){var t,e;this.componentRef&&(null===(e=(t=this.componentRef.instance).ngOnChanges)||void 0===e||e.call(t,{config:this.widgetConfig}))}}return i.\u0275fac=function(t){return new(t||i)(o.Y36(o._Vd))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-widget"]],viewQuery:function(t,e){if(1&t&&o.Gf(wl,7),2&t){let r;o.iGM(r=o.CRH())&&(e.comHost=r.first)}},inputs:{widgetConfig:"widgetConfig"},outputs:{eventEmit:"eventEmit"},features:[o.TTD],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["comHost",""]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.YNc(1,Lv,0,0,"ng-template",1),o.qZA())},directives:[wl],encapsulation:2}),i})();const Hv=function(i){return{transform:i}};function Zv(i,n){if(1&i&&o._UZ(0,"app-widget",4,5),2&i){const t=o.oxw().$implicit;o.Akn(o.VKq(11,Hv,"rotate("+t.position.rotate+"deg)")),o.Udp("top",t.position.top,"px")("left",t.position.left,"px")("width",t.position.width,"px")("height",t.position.height,"px"),o.Q6J("widgetConfig",t)}}function Wv(i,n){if(1&i&&(o.TgZ(0,"div"),o.YNc(1,Zv,2,13,"app-widget",3),o.qZA()),2&i){const t=n.$implicit;o.xp6(1),o.Q6J("ngIf","mulcoms"!=t.type)}}const Vv=function(i,n,t){return{width:i,height:n,background:t}};let jv=(()=>{class i{constructor(t,e,r){this.route=t,this.apiService=e,this.editService=r,this.sceneAllData={components:[],options:{width:1920,height:1080,backgroundColor:"#fff"},id:"10",name:"\u65b0\u5efa\u573a\u666f"},localStorage.setItem("drawingBuffer","false")}ngOnInit(){this.route.paramMap.subscribe(t=>{const e=t.get("id");null!=e&&(10===e.length||"ass_"===e.substring(0,4)?this.editService.getScene(e).subscribe(r=>{this.sceneAllData=r}):this.apiService.getScene(e).subscribe(r=>{200===r.code&&(r.data.components=JSON.parse(r.data.components),r.data.options=JSON.parse(r.data.options),this.sceneAllData=r.data)}))})}}return i.\u0275fac=function(t){return new(t||i)(o.Y36(Je.gz),o.Y36(oi),o.Y36(ai))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-preview"]],decls:3,vars:7,consts:[[1,"prevoew-content"],["mainbody",""],[4,"ngFor","ngForOf"],["style","position: absolute;",3,"style","widgetConfig","top","left","width","height",4,"ngIf"],[2,"position","absolute",3,"widgetConfig"],["appwidget",""]],template:function(t,e){1&t&&(o.TgZ(0,"div",0,1),o.YNc(2,Wv,2,1,"div",2),o.qZA()),2&t&&(o.Akn(o.kEZ(3,Vv,e.sceneAllData.options.width+"px",e.sceneAllData.options.height+"px",e.sceneAllData.options.bgColor)),o.xp6(2),o.Q6J("ngForOf",e.sceneAllData.components))},directives:[w.sg,w.O5,bl],styles:[".prevoew-content[_ngcontent-%COMP%]{position:absolute;background-color:#000;width:1920px;height:1080px}.sc-list[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:10px}.sc-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:20px;height:20px;color:#000;display:inline-block;background-color:#faebd7;border-radius:10px;margin-right:10px;text-align:center;line-height:20px}"]}),i})();var Uv=p(83697),_l=p.n(Uv),Cl=p(94401),Yv=p(53599);function Xv(i){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return n.map(function(e){return e.split(" ").map(function(r){return r?""+i+r:""}).join(" ")}).join(" ")}function fn(i,n){return function(t){t&&(i[n]=t)}}function Sl(i,n,t){return function(e){e&&(i[n][t]=e)}}function Dl(i,n){return function(t){var e=t.prototype;i.forEach(function(r){n(e,r)})}}function Ol(i,n){return void 0===n&&(n={}),function(t,e){i.forEach(function(r){var a=n[r]||r;a in t||(t[a]=function(){for(var s,l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];var d=(s=this[e])[r].apply(s,l);return d===this[e]?this:d})})}}var Kv=function(){function i(){this.keys=[],this.values=[]}var n=i.prototype;return n.get=function(t){return this.values[this.keys.indexOf(t)]},n.set=function(t,e){var r=this.keys,a=this.values,s=r.indexOf(t),l=-1===s?r.length:s;r[l]=t,a[l]=e},i}(),Qv=function(){function i(){this.object={}}var n=i.prototype;return n.get=function(t){return this.object[t]},n.set=function(t,e){this.object[t]=e},i}(),qv="function"==typeof Map,$v=function(){function i(){}var n=i.prototype;return n.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},n.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},n.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},i}(),eg=function(){function i(t,e,r,a,s,l,c,d){this.prevList=t,this.list=e,this.added=r,this.removed=a,this.changed=s,this.maintained=l,this.changedBeforeAdded=c,this.fixed=d}var n=i.prototype;return Object.defineProperty(n,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(n,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),n.caculateOrdered=function(){var t=function(i,n){var t=[],e=[];return i.forEach(function(r){var a=r[0],s=r[1],l=new $v;t[a]=l,e[s]=l}),t.forEach(function(r,a){r.connect(t[a-1])}),i.filter(function(r,a){return!n[a]}).map(function(r,a){var s=r[0],l=r[1];if(s===l)return[0,0];var c=t[s],d=e[l-1],f=c.getIndex();return c.disconnect(),d?c.connect(d,d.next):c.connect(void 0,t[0]),[f,c.getIndex()]})}(this.changedBeforeAdded,this.fixed),e=this.changed,r=[];this.cacheOrdered=t.filter(function(a,s){var d=e[s];if(a[0]!==a[1])return r.push([d[0],d[1]]),!0}),this.cachePureChanged=r},i}();function hr(i,n,t){var e=qv?Map:t?Qv:Kv,r=t||function(P){return P},a=[],s=[],l=[],c=i.map(r),d=n.map(r),f=new e,h=new e,v=[],m=[],S={},T=[],k=0,E=0;return c.forEach(function(P,R){f.set(P,R)}),d.forEach(function(P,R){h.set(P,R)}),c.forEach(function(P,R){var B=h.get(P);void 0===B?(++E,s.push(R)):S[B]=E}),d.forEach(function(P,R){var B=f.get(P);void 0===B?(a.push(R),++k):(l.push([B,R]),v.push([B-(E=S[R]||0),R-k]),m.push(R===B),B!==R&&T.push([B,R]))}),s.reverse(),new eg(i,n,a,s,T,l,v,m)}var ng=function(){function i(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return i.prototype.update=function(t){var e=[].slice.call(t),r=hr(this.list,e,this.findKeyCallback);return this.list=e,r},i}();const ig=ng;var ki="undefined",Pl=typeof window!==ki,lg=(typeof document!==ki&&document,[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}]),Ce=1e-7,fr={cm:function(i){return 96*i/2.54},mm:function(i){return 96*i/254},in:function(i){return 96*i},pt:function(i){return 96*i/72},pc:function(i){return 96*i/6},"%":function(i,n){return i*n/100},vw:function(i,n){return void 0===n&&(n=window.innerWidth),i/100*n},vh:function(i,n){return void 0===n&&(n=window.innerHeight),i/100*n},vmax:function(i,n){return void 0===n&&(n=Math.max(window.innerWidth,window.innerHeight)),i/100*n},vmin:function(i,n){return void 0===n&&(n=Math.min(window.innerWidth,window.innerHeight)),i/100*n}};function Yn(i,n,t,e){return(i*e+n*t)/(t+e)}function vr(i){return typeof i===ki}function rn(i){return i&&"object"==typeof i}function Cn(i){return Array.isArray(i)}function Ke(i){return"string"==typeof i}function Oo(i){return"number"==typeof i}function Il(i){return"function"==typeof i}function Rl(i,n,t,e,r){return To(i,n,t)?t:function(i,n,t,e,r){for(var s,a=function(d){var f=n[d].trim();if(f===i.close&&!To(i,n,d))return{value:d};var h=d,v=Xn(r,function(m){return m.open===f});if(v&&(h=Rl(v,n,d,e,r)),-1===h)return s=d,"break";s=d=h},l=t;l<e;++l){var c=a(l);if(l=s,"object"==typeof c)return c.value;if("break"===c)break}return-1}(i,n,t+1,e,r)}function To(i,n,t){if(!i.ignore)return null;var e=n.slice(Math.max(t-3,0),t+3).join("");return new RegExp(i.ignore).exec(e)}function Ao(i,n){var t=Ke(n)?{separator:n}:n,e=t.separator,r=void 0===e?",":e,a=t.isSeparateFirst,s=t.isSeparateOnlyOpenClose,l=t.isSeparateOpenClose,c=void 0===l?s:l,d=t.openCloseCharacters,f=void 0===d?lg:d,h=f.map(function(Z){var q=Z.open,tt=Z.close;return q===tt?q:q+"|"+tt}).join("|"),m=new RegExp("(\\s*"+r+"\\s*|"+h+"|\\s+)","g"),S=i.split(m).filter(Boolean),T=S.length,k=[],E=[];function P(){return!!E.length&&(k.push(E.join("")),E=[],!0)}for(var B,R=function(Z){var q=S[Z].trim(),tt=Z,$=Xn(f,function(ct){return ct.open===q}),ft=Xn(f,function(ct){return ct.close===q});if($){if(-1!==(tt=Rl($,S,Z,T,f))&&c)return P()&&a||(k.push(S.slice(Z,tt+1).join("")),Z=tt,a)?(B=Z,"break"):(B=Z,"continue")}else{if(ft&&!To(ft,S,Z)){var X=function(){for(var i=0,n=0,t=arguments.length;n<t;n++)i+=arguments[n].length;var e=Array(i),r=0;for(n=0;n<t;n++)for(var a=arguments[n],s=0,l=a.length;s<l;s++,r++)e[r]=a[s];return e}(f);return X.splice(f.indexOf(ft),1),{value:Ao(i,{separator:r,isSeparateFirst:a,isSeparateOnlyOpenClose:s,isSeparateOpenClose:c,openCloseCharacters:X})}}if(function(i,n){return(""===n||" "==n)&&(""===i||" "==i)||i===n}(q,r)&&!s)return P(),a?(B=Z,"break"):(B=Z,"continue")}-1===tt&&(tt=T-1),E.push(S.slice(Z,tt+1).join("")),B=Z=tt},V=0;V<T;++V){var L=R(V);if(V=B,"object"==typeof L)return L.value;if("break"===L)break}return E.length&&k.push(E.join("")),k}function Mn(i){return Ao(i,"")}function Pn(i){return Ao(i,",")}function Eo(i){var n=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(i);return!n||n.length<4?{}:{prefix:n[1],value:n[2],suffix:n[3]}}function Ri(i){var n=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(i);return n?{prefix:n[1],unit:n[3],value:parseFloat(n[2])}:{prefix:"",unit:"",value:NaN}}function Mo(i,n){return void 0===n&&(n="-"),i.replace(/([a-z])([A-Z])/g,function(t,e,r){return""+e+n+r.toLowerCase()})}function gr(){return Date.now?Date.now():(new Date).getTime()}function Sn(i,n,t){void 0===t&&(t=-1);for(var e=i.length,r=0;r<e;++r)if(n(i[r],r,i))return r;return t}function Xn(i,n,t){var e=Sn(i,n);return e>-1?i[e]:t}var zl=function(){var i=gr(),n=Pl&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return n?n.bind(window):function(t){var e=gr();return window.setTimeout(function(){t(e-i)},1e3/60)}}(),fg=function(){var i=Pl&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return i?i.bind(window):function(n){clearTimeout(n)}}();function kn(i){return Object.keys(i)}function xe(i,n){var t=Ri(i),e=t.value,r=t.unit;if(rn(n)){var a=n[r];if(a){if(Il(a))return a(e);if(fr[r])return fr[r](e,a)}}else if("%"===r)return e*n/100;return fr[r]?fr[r](e):e}function Po(i,n,t){return Math.max(n,Math.min(i,t))}function Gl(i,n,t,e){return void 0===e&&(e=i[0]/i[1]),[[ie(n[0],Ce),ie(n[0]/e,Ce)],[ie(n[1]*e,Ce),ie(n[1],Ce)]].filter(function(r){return r.every(function(a,s){var l=n[s],c=ie(l,Ce);return t?a<=l||a<=c:a>=l||a>=c})})[0]||i}function ko(i){for(var n=i.length,t=0,e=n-1;e>=0;--e)t+=i[e];return n?t/n:0}function we(i,n){var r=Math.atan2(n[1]-i[1],n[0]-i[0]);return r>=0?r:r+2*Math.PI}function Io(i){var n=function(i){return[0,1].map(function(n){return ko(i.map(function(t){return t[n]}))})}(i),t=we(n,i[0]),e=we(n,i[1]);return t<e&&e-t<Math.PI||t>e&&e-t<-Math.PI?1:-1}function on(i,n){return Math.sqrt(Math.pow((n?n[0]:0)-i[0],2)+Math.pow((n?n[1]:0)-i[1],2))}function ie(i,n){if(!n)return i;var t=1/n;return Math.round(i/n)/t}function mr(i,n){return i.forEach(function(t,e){i[e]=ie(i[e],n)}),i}function Te(i,n){return i.classList?i.classList.contains(n):!!i.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))}function Ue(i,n,t,e){i.addEventListener(n,t,e)}function Ve(i,n,t,e){i.removeEventListener(n,t,e)}var Ro=function(i,n){return(Ro=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(i,n)};function Jn(i,n){function t(){this.constructor=i}Ro(i,n),i.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}var In=function(){return In=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var a in t=arguments[e])Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n},In.apply(this,arguments)};function Bl(i,n){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&n.indexOf(e)<0&&(t[e]=i[e]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(e=Object.getOwnPropertySymbols(i);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(i,e[r])&&(t[e[r]]=i[e[r]])}return t}function zo(i,n){if(i===n)return!1;for(var t in i)if(!(t in n))return!0;for(var t in n)if(i[t]!==n[t])return!0;return!1}function Go(i,n){var t=Object.keys(i),e=Object.keys(n),r=hr(t,e,function(c){return c}),a={},s={},l={};return r.added.forEach(function(c){var d=e[c];a[d]=n[d]}),r.removed.forEach(function(c){var d=t[c];s[d]=i[d]}),r.maintained.forEach(function(c){var f=t[c[0]];i[f]!==n[f]&&(l[f]=[i[f],n[f]])}),{added:a,removed:s,changed:l}}function Fl(i){i.forEach(function(n){n()})}function Ll(i){var n=0;return i.map(function(t){return null==t?"$compat"+ ++n:""+t})}function Hl(i,n,t,e){return Ke(i)||Oo(i)?new Ag("text_"+i,n,t,e,null,{}):new("string"==typeof i.type?Eg:i.type.prototype.render?Pg:Mg)(i.type,n,t,e,i.ref,i.props)}function Zl(i){var n=[];return i.forEach(function(t){n=n.concat(Cn(t)?Zl(t):t)}),n}function Wl(i){var n=i.className,t=Bl(i,["className"]);return null!=n&&(t.class=n),delete t.style,delete t.children,t}function No(i,n){if(!n)return i;for(var t in n)vr(i[t])&&(i[t]=n[t]);return i}function Qe(i,n){for(var t=[],e=2;e<arguments.length;e++)t[e-2]=arguments[e];var r=n||{},a=r.key,s=r.ref,l=Bl(r,["key","ref"]);return{type:i,key:a,ref:s,props:In(In({},l),{children:Zl(t).filter(function(c){return null!=c&&!1!==c})})}}var zi=function(){function i(t,e,r,a,s,l){void 0===l&&(l={}),this.type=t,this.key=e,this.index=r,this.container=a,this.ref=s,this.props=l,this._providers=[]}var n=i.prototype;return n._should=function(t,e){return!0},n._update=function(t,e,r,a){if(this.base&&!Ke(e)&&!a&&!this._should(e.props,r))return!1;this.original=e,this._setState(r);var s=this.props;return Ke(e)||(this.props=e.props,this.ref=e.ref),this._render(t,this.base?s:{},r),!0},n._mounted=function(){var t=this.ref;t&&t(this.base)},n._setState=function(t){},n._updated=function(){var t=this.ref;t&&t(this.base)},n._destroy=function(){var t=this.ref;t&&t(null)},i}();function Vl(i){var n={},t={};for(var e in i)0===e.indexOf("on")?t[e.replace("on","").toLowerCase()]=i[e]:n[e]=i[e];return{attributes:n,events:t}}var Ag=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}Jn(n,i);var t=n.prototype;return t._render=function(e){var r=this,a=!this.base;return a&&(this.base=document.createTextNode(this.type.replace("text_",""))),e.push(function(){a?r._mounted():r._updated()}),!0},t._unmount=function(){this.base.parentNode.removeChild(this.base)},n}(zi),Eg=function(i){function n(){var e=null!==i&&i.apply(this,arguments)||this;return e.events={},e._isSVG=!1,e}Jn(n,i);var t=n.prototype;return t.addEventListener=function(e,r){var a=this.events;a[e]=function(s){s.nativeEvent=s,r(s)},this.base.addEventListener(e,a[e])},t.removeEventListener=function(e){var r=this.events;this.base.removeEventListener(e,r[e]),delete r[e]},t._should=function(e){return zo(this.props,e)},t._render=function(e,r){var a=this,s=!this.base;if(s){var l=this._hasSVG();this._isSVG=l;var c=this.props.portalContainer;if(!c){var d=this.type;c=l?document.createElementNS("http://www.w3.org/2000/svg",d):document.createElement(d)}this.base=c}Ni(this,this._providers,this.props.children,e,null);var f=this.base,h=Vl(r),v=h.attributes,m=h.events,S=Vl(this.props),T=S.attributes,k=S.events;return function(i,n,t){var e=Go(i,n),r=e.added,a=e.removed,s=e.changed;for(var l in r)t.setAttribute(l,r[l]);for(var l in s)t.setAttribute(l,s[l][1]);for(var l in a)t.removeAttribute(l)}(Wl(v),Wl(T),f),function(i,n,t){var e=Go(i,n),r=e.added,a=e.removed,s=e.changed;for(var l in a)t.removeEventListener(l);for(var l in r)t.addEventListener(l,r[l]);for(var l in s)t.removeEventListener(l),t.addEventListener(l,s[l][1]);for(var l in a)t.removeEventListener(l)}(m,k,this),function(i,n,t){var e=t.style,r=Go(i,n),a=r.added,s=r.removed,l=r.changed;for(var c in a){var d=Mo(c,"-");e.setProperty?e.setProperty(d,a[c]):e[d]=a[c]}for(var c in l)d=Mo(c,"-"),e.setProperty?e.setProperty(d,l[c][1]):e[d]=l[c][1];for(var c in s)d=Mo(c,"-"),e.removeProperty?e.removeProperty(d):e[d]=""}(r.style||{},this.props.style||{},f),e.push(function(){s?a._mounted():a._updated()}),!0},t._unmount=function(){var e=this.events,r=this.base;for(var a in e)r.removeEventListener(a,e[a]);this._providers.forEach(function(s){s._unmount()}),this.events={},this.props.portalContainer||r.parentNode.removeChild(r)},t._hasSVG=function(){if(this._isSVG||"svg"===this.type)return!0;var e=Bo(this.container);return e&&"ownerSVGElement"in e},n}(zi);function Bo(i){if(!i)return null;var n=i.base;return n instanceof Node?n:Bo(i.container)}function Gi(i){if(!i)return null;if(i instanceof Node)return i;var n=i.$_provider._providers;return n.length?Gi(n[0].base):null}var Mg=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}Jn(n,i);var t=n.prototype;return t._render=function(e){var r=this.type(this.props);return Ni(this,this._providers,r?[r]:[],e),!0},t._unmount=function(){this._providers.forEach(function(e){e._unmount()})},n}(zi),jl=function(i){function n(e){var r=i.call(this,"container","container",0,null)||this;return r.base=e,r}Jn(n,i);var t=n.prototype;return t._render=function(){return!0},t._unmount=function(){},n}(zi),Pg=function(i){function n(e,r,a,s,l,c){return void 0===c&&(c={}),i.call(this,e,r,a,s,l,No(c,e.defaultProps))||this}Jn(n,i);var t=n.prototype;return t._should=function(e,r){return this.base.shouldComponentUpdate(No(e,this.type.defaultProps),r||this.base.state)},t._render=function(e,r){var a=this;this.props=No(this.props,this.type.defaultProps);var s=!this.base;s?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props;var l=this.base,c=l.state,d=l.render();d&&d.props&&!d.props.children.length&&(d.props.children=this.props.children),Ni(this,this._providers,d?[d]:[],e),e.push(function(){s?(a._mounted(),l.componentDidMount()):(a._updated(),l.componentDidUpdate(r,c))})},t._setState=function(e){var r=this.base;!r||!e||(r.state=e)},t._unmount=function(){this._providers.forEach(function(e){e._unmount()}),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},n}(zi),Fo=function(){function i(t){void 0===t&&(t={}),this.props=t,this.state={},this.$_timer=0,this.$_state={}}var n=i.prototype;return n.shouldComponentUpdate=function(t,e){return!0},n.render=function(){return null},n.setState=function(t,e,r){var a=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=In(In({},this.$_state),t),r?this.$_setState(e,r):this.$_timer=setTimeout(function(){a.$_timer=0,a.$_setState(e,r)})},n.forceUpdate=function(t){this.setState({},t,!0)},n.componentDidMount=function(){},n.componentDidUpdate=function(t,e){},n.componentWillUnmount=function(){},n.$_setState=function(t,e){var r=[],a=this.$_provider;Ni(a.container,[a],[a.original],r,In(In({},this.state),this.$_state),e)&&(t&&r.push(t),Fl(r))},i}(),Lo=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return Jn(n,i),n.prototype.shouldComponentUpdate=function(e,r){return zo(this.props,e)||zo(this.state,r)},n}(Fo),kg=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}Jn(n,i);var t=n.prototype;return t.componentDidMount=function(){var e=this.props,r=e.element,a=e.container;this._portalProvider=new jl(a),xr(r,a,this._portalProvider)},t.componentDidUpdate=function(){var e=this.props;xr(e.element,e.container,this._portalProvider)},t.componentWillUnmount=function(){xr(null,this.props.container,this._portalProvider),this._portalProvider=null},n}(Lo);function Ni(i,n,t,e,r,a){var s=function(i,n,t){var e=t.map(function(c){return Ke(c)?null:c.key}),s=hr(Ll(n.map(function(c){return c.key})),Ll(e),function(c){return c});s.removed.forEach(function(c){n.splice(c,1)[0]._unmount()}),s.ordered.forEach(function(c){var f=c[1],h=n.splice(c[0],1)[0];n.splice(f,0,h);var v=Gi(h.base),m=Gi(n[f+1]&&n[f+1].base);v&&v.parentNode.insertBefore(v,m)}),s.added.forEach(function(c){n.splice(c,0,Hl(t[c],e[c],c,i))});var l=s.maintained.filter(function(c){var f=c[1],h=t[f],v=n[f];return(Ke(h)?"text_"+h:h.type)!==v.type?(v._unmount(),n.splice(f,1,Hl(h,e[f],f,i)),!0):(v.index=f,!1)});return function(){for(var i=0,n=0,t=arguments.length;n<t;n++)i+=arguments[n].length;var e=Array(i),r=0;for(n=0;n<t;n++)for(var a=arguments[n],s=0,l=a.length;s<l;s++,r++)e[r]=a[s];return e}(s.added,l.map(function(c){return c[1]}))}(i,n,t),l=n.filter(function(d,f){return d._update(e,t[f],r,a)}),c=Bo(i);return c&&s.reverse().forEach(function(d){var f=n[d],h=Gi(f.base);if(h&&c!==h&&!h.parentNode){var v=function(i,n){for(var t=i._providers,e=t.length,r=n.index+1;r<e;++r){var a=Gi(t[r].base);if(a)return a}return null}(i,f);c.insertBefore(h,v)}}),l.length>0}function xr(i,n,t){void 0===t&&(t=n.__REACT_COMPAT__);var e=!!t;return t||(t=new jl(n)),function(i,n,t){var e=[];Ni(i,i._providers,n,e,void 0),Fl(e)}(t,i?[i]:[]),e||(n.__REACT_COMPAT__=t),t}function Ul(i,n,t){var e=n.__REACT_COMPAT__;i&&!e&&(n.innerHTML=""),xr(i,n,e),t&&t()}function Ho(i,n){for(var t=i.length,e=0;e<t;++e)if(n(i[e],e))return!0;return!1}function Yl(i,n){for(var t=i.length,e=0;e<t;++e)if(n(i[e],e))return i[e];return null}function Xl(i){var n=i;if(void 0===n){if("undefined"==typeof navigator||!navigator)return"";n=navigator.userAgent||""}return n.toLowerCase()}function Zo(i,n){try{return new RegExp(i,"g").exec(n)}catch(t){return null}}function Wo(i){return i.replace(/_/g,".")}function Bi(i,n){var t=null,e="-1";return Ho(i,function(r){var a=Zo("("+r.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",n);return!(!a||r.brand||(t=r,e=a[3]||"-1",r.versionAlias?e=r.versionAlias:r.versionTest&&(e=function(i,n){var t=Zo("("+i+")((?:\\/|\\s|:)([0-9|\\.|_]+))",n);return t?t[3]:""}(r.versionTest.toLowerCase(),n)||e),e=Wo(e),0))}),{preset:t,version:e}}function Fi(i,n){var t={brand:"",version:"-1"};return Ho(i,function(e){var r=Kl(n,e);return!!r&&(t.brand=e.id,t.version=e.versionAlias||r.version,"-1"!==t.version)}),t}function Kl(i,n){return Yl(i,function(t){return Zo(""+n.test,t.brand.toLowerCase())})}var Vo=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],Ql=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],jo=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],ql=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],$l=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function tc(i){return!!Bi(ql,i).preset}const Lg=function(i){return void 0===i&&function(){if("undefined"==typeof navigator||!navigator||!navigator.userAgentData)return!1;var i=navigator.userAgentData,n=i.brands||i.uaList;return!(!n||!n.length)}()?function(i){var n=navigator.userAgentData,t=(n.uaList||n.brands).slice(),e=i&&i.fullVersionList,r=n.mobile||!1,a=t[0],s=(i&&i.platform||n.platform||navigator.platform).toLowerCase(),l={name:a.brand,version:a.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Fi(ql,t).brand||tc(Xl())},c={name:"unknown",version:"-1",majorVersion:-1};l.webkit=!l.chromium&&Ho(jo,function(S){return Kl(t,S)});var d=Fi(Ql,t);if(l.chromium=!!d.brand,l.chromiumVersion=d.version,!l.chromium){var f=Fi(jo,t);l.webkit=!!f.brand,l.webkitVersion=f.version}var h=Yl($l,function(S){return new RegExp(""+S.test,"g").exec(s)});if(c.name=h?h.id:"",i&&(c.version=i.platformVersion),e&&e.length){var v=Fi(Vo,e);l.name=v.brand||l.name,l.version=v.version||l.version}else{var m=Fi(Vo,t);l.name=m.brand||l.name,l.version=m.brand&&i?i.uaFullVersion:m.version}return l.webkit&&(c.name=r?"ios":"mac"),"ios"===c.name&&l.webview&&(l.version="-1"),c.version=Wo(c.version),l.version=Wo(l.version),c.majorVersion=parseInt(c.version,10),l.majorVersion=parseInt(l.version,10),{browser:l,os:c,isMobile:r,isHints:!0}}():function(i){var n=Xl(i),t=!!/mobi/g.exec(n),e={name:"unknown",version:"-1",majorVersion:-1,webview:tc(n),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},r={name:"unknown",version:"-1",majorVersion:-1},a=Bi(Vo,n),s=a.preset,l=a.version,c=Bi($l,n),d=c.preset,f=c.version,h=Bi(Ql,n);if(e.chromium=!!h.preset,e.chromiumVersion=h.version,!e.chromium){var v=Bi(jo,n);e.webkit=!!v.preset,e.webkitVersion=v.version}return d&&(r.name=d.id,r.version=f,r.majorVersion=parseInt(f,10)),s&&(e.name=s.id,e.version=l,e.webview&&"ios"===r.name&&"safari"!==e.name&&(e.webview=!1)),e.majorVersion=parseInt(e.version,10),{browser:e,os:r,isMobile:t,isHints:!1}}(i)};function Hg(i,n,t,e,r,a){for(var s=0;s<r;++s){var l=t+s*r,c=e+s*r;i[l]+=i[c]*a,n[l]+=n[c]*a}}function Zg(i,n,t,e,r){for(var a=0;a<r;++a){var s=t+a*r,l=e+a*r,c=i[s],d=n[s];i[s]=i[l],i[l]=c,n[s]=n[l],n[l]=d}}function Wg(i,n,t,e,r){for(var a=0;a<e;++a){var s=t+a*e;i[s]/=r,n[s]/=r}}function nc(i,n,t){void 0===t&&(t=Math.sqrt(i.length));for(var e=i.slice(),r=0;r<t;++r)e[r*t+n-1]=0,e[(n-1)*t+r]=0;return e[(n-1)*(t+1)]=1,e}function vn(i,n){void 0===n&&(n=Math.sqrt(i.length));for(var t=i.slice(),e=ye(n),r=0;r<n;++r){var a=n*r+r;if(!ie(t[a],Ce))for(var s=r+1;s<n;++s)if(t[n*r+s]){Zg(t,e,r,s,n);break}if(!ie(t[a],Ce))return[];for(Wg(t,e,r,n,t[a]),s=0;s<n;++s){var l=s,d=t[s+r*n];!ie(d,Ce)||r===s||Hg(t,e,l,r,n,-d)}}return e}function ic(i,n){void 0===n&&(n=Math.sqrt(i.length));for(var t=[],e=i[n*n-1],r=0;r<n-1;++r)t[r]=i[n*(n-1)+r]/e;return t[n-1]=0,t}function Kn(i,n){for(var t=i.slice(),e=i.length;e<n-1;++e)t[e]=0;return t[n-1]=1,t}function gn(i,n,t){if(void 0===n&&(n=Math.sqrt(i.length)),n===t)return i;for(var e=ye(t),r=Math.min(n,t),a=0;a<r-1;++a){for(var s=0;s<r-1;++s)e[a*t+s]=i[a*n+s];e[(a+1)*t-1]=i[(a+1)*n-1],e[(t-1)*t+a]=i[(n-1)*n+a]}return e[t*t-1]=i[n*n-1],e}function Yo(i){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];var e=ye(i);return n.forEach(function(r){e=he(e,r,i)}),e}function he(i,n,t){void 0===t&&(t=Math.sqrt(i.length));var e=[],r=i.length/t,a=n.length/r;if(!r)return n;if(!a)return i;for(var s=0;s<t;++s)for(var l=0;l<a;++l){e[l*t+s]=0;for(var c=0;c<r;++c)e[l*t+s]+=i[c*t+s]*n[l*r+c]}return e}function oe(i,n){for(var t=Math.min(i.length,n.length),e=i.slice(),r=0;r<t;++r)e[r]=e[r]+n[r];return e}function qt(i,n){for(var t=Math.min(i.length,n.length),e=i.slice(),r=0;r<t;++r)e[r]=e[r]-n[r];return e}function Ug(i,n){return void 0===n&&(n=6===i.length),n?[i[0],i[1],0,i[2],i[3],0,i[4],i[5],1]:i}function rc(i,n){return void 0===n&&(n=9===i.length),n?[i[0],i[1],i[3],i[4],i[6],i[7]]:i}function ke(i,n,t){void 0===t&&(t=n.length);var e=he(i,n,t),r=e[t-1];return e.map(function(a){return a/r})}function Yg(i,n){return he(i,[1,0,0,0,0,Math.cos(n),Math.sin(n),0,0,-Math.sin(n),Math.cos(n),0,0,0,0,1],4)}function Xg(i,n){return he(i,[Math.cos(n),0,-Math.sin(n),0,0,1,0,0,Math.sin(n),0,Math.cos(n),0,0,0,0,1],4)}function Jg(i,n){return he(i,pi(n,4))}function yr(i,n){var t=n[0],r=n[1],s=n[2];return he(i,[void 0===t?1:t,0,0,0,0,void 0===r?1:r,0,0,0,0,void 0===s?1:s,0,0,0,0,1],4)}function Rn(i,n){return ke(pi(n,3),Kn(i,3))}function Xo(i,n){var t=n[0],r=n[1],s=n[2];return he(i,[1,0,0,0,0,1,0,0,0,0,1,0,void 0===t?0:t,void 0===r?0:r,void 0===s?0:s,1],4)}function oc(i,n){return he(i,n,4)}function pi(i,n){var t=Math.cos(i),e=Math.sin(i),r=ye(n);return r[0]=t,r[1]=e,r[n]=-e,r[n+1]=t,r}function ye(i){for(var n=i*i,t=[],e=0;e<n;++e)t[e]=e%(i+1)?0:1;return t}function ac(i,n){for(var t=ye(n),e=Math.min(i.length,n-1),r=0;r<e;++r)t[(n+1)*r]=i[r];return t}function Li(i,n){for(var t=ye(n),e=Math.min(i.length,n-1),r=0;r<e;++r)t[n*(n-1)+r]=i[r];return t}function Jo(i,n,t,e,r,a,s,l){var c=i[0],d=i[1],f=n[0],h=n[1],v=t[0],m=t[1],S=e[0],T=e[1],k=r[0],E=r[1],P=a[0],R=a[1],B=s[0],V=s[1],L=l[0],Z=l[1],tt=vn([c,0,f,0,v,0,S,0,d,0,h,0,m,0,T,0,1,0,1,0,1,0,1,0,0,c,0,f,0,v,0,S,0,d,0,h,0,m,0,T,0,1,0,1,0,1,0,1,-k*c,-E*c,-P*f,-R*f,-B*v,-V*v,-L*S,-Z*S,-k*d,-E*d,-P*h,-R*h,-B*m,-V*m,-L*T,-Z*T],8);if(!tt.length)return[];var $=he(tt,[k,E,P,R,B,V,L,Z],8);return $[8]=1,gn(function(i,n){void 0===n&&(n=Math.sqrt(i.length));for(var t=[],e=0;e<n;++e)for(var r=0;r<n;++r)t[r*n+e]=i[n*e+r];return t}($),3,4)}function Hi(i){return di(Qn(i))}function di(i){var n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return i.forEach(function(t){var e=t.matrixFunction;!e||(n=e(n,t.functionValue))}),n}function Qn(i){return(Cn(i)?i:Mn(i)).map(function(t){var e=Eo(t),r=e.prefix,a=e.value,s=null,l=r,c="";if("translate"===r||"translateX"===r||"translate3d"===r){var d=Pn(a).map(function($){return parseFloat($)}),h=d[1],m=d[2];s=Xo,c=[d[0],void 0===h?0:h,void 0===m?0:m]}else if("translateY"===r)s=Xo,c=[0,parseFloat(a),0];else if("translateZ"===r)s=Xo,c=[0,0,parseFloat(a)];else if("scale"===r||"scale3d"===r){var T=Pn(a).map(function($){return parseFloat($)}),E=T[1],R=T[2];s=yr,c=[k=T[0],void 0===E?k:E,void 0===R?1:R]}else if("scaleX"===r){var k;s=yr,c=[k=parseFloat(a),1,1]}else if("scaleY"===r)s=yr,c=[1,parseFloat(a),1];else if("scaleZ"===r)s=yr,c=[1,1,parseFloat(a)];else if("rotate"===r||"rotateZ"===r||"rotateX"===r||"rotateY"===r){var V=Ri(a),Z=V.value;"rotate"===r||"rotateZ"===r?(l="rotateZ",s=Jg):"rotateX"===r?s=Yg:"rotateY"===r&&(s=Xg),c="rad"===V.unit?Z:Z*Math.PI/180}else if("matrix3d"===r)s=oc,c=Pn(a).map(function($){return parseFloat($)});else if("matrix"===r){var tt=Pn(a).map(function($){return parseFloat($)});s=oc,c=[tt[0],tt[1],0,0,tt[2],tt[3],0,0,0,0,1,0,tt[4],tt[5],0,1]}else l="";return{name:r,functionName:l,value:a,matrixFunction:s,functionValue:c}})}var i,Ko=function(i,n){return(Ko=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(i,n)},lc="function"==typeof Map?void 0:(i=0,function(n){return n.__DIFF_KEY__||(n.__DIFF_KEY__=++i)}),qg=function(i){function n(t){return void 0===t&&(t=[]),i.call(this,t,lc)||this}return function(i,n){function t(){this.constructor=i}Ko(i,n),i.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}(n,i),n}(ig);const cc=qg;function Be(i){return ie(i,Ce)}function pc(i){return i.length<3?0:Math.abs(function(i){for(var t=0,e=i.length-1;e>=0;--e)t+=i[e];return t}(i.map(function(n,t){var e=i[t+1]||i[0];return n[0]*e[1]-e[0]*n[1]})))/2}function dc(i,n){var t=n.width,e=n.height,r=n.left,a=n.top,s=wr(i),l=s.minX,c=s.minY,h=t/(s.maxX-l),v=e/(s.maxY-c);return i.map(function(m){return[r+(m[0]-l)*h,a+(m[1]-c)*v]})}function wr(i){var n=i.map(function(e){return e[0]}),t=i.map(function(e){return e[1]});return{minX:Math.min.apply(Math,n),minY:Math.min.apply(Math,t),maxX:Math.max.apply(Math,n),maxY:Math.max.apply(Math,t)}}function Qo(i,n,t){var e=i[0],r=i[1],a=wr(n),c=[[a.minX,r],[a.maxX,r]],d=$n(c[0],c[1]),f=ta(n),h=[];if(f.forEach(function(S){var T=$n(S[0],S[1]),k=S[0];!function(i,n){return i.every(function(t,e){return 0===Be(t-n[e])})}(d,T)?$o(qo(d,T),[c,S]).forEach(function(P){S.some(function(R){return function(i,n){return!Be(i[0]-n[0])&&!Be(i[1]-n[1])}(R,P)})?h.push({pos:P,line:S,type:"point"}):0!==Be(k[1]-r)&&h.push({pos:P,line:S,type:"intersection"})}):h.push({pos:i,line:S,type:"line"})}),!t&&Xn(h,function(S){return S[0]===e}))return!0;var v=0,m={};return h.forEach(function(S){var T=S.pos,k=S.type;if(!(T[0]>e))if("intersection"===k)++v;else{if("line"===k)return;if("point"===k){var P=Xn(S.line,function(V){return V[1]!==r}),R=m[T[0]],B=P[1]>r?1:-1;R?R!==B&&++v:m[T[0]]=B}}}),v%2==1}function $n(i,n){var t=i[0],e=i[1],s=n[0]-t,l=n[1]-e;Math.abs(s)<Ce&&(s=0),Math.abs(l)<Ce&&(l=0);var c=0,d=0,f=0;return s?l?(d=1,f=-(c=-l/s)*t-e):(d=1,f=-e):l&&(c=-1,f=t),[c,d,f]}function qo(i,n){var t=i[0],e=i[1],r=i[2],a=n[0],s=n[1],l=n[2],c=0===t&&0===a,d=0===e&&0===s,f=[];if(c&&d)return[];if(c){var h=-r/e;return h!==-l/s?[]:[[-1/0,h],[1/0,h]]}if(d){var m=-r/t;return m!==-l/a?[]:[[m,-1/0],[m,1/0]]}if(0===t)f=[[k=-(s*(T=-r/e)+l)/a,T]];else if(0===a)f=[[k=-(e*(T=-l/s)+r)/t,T]];else if(0===e)f=[[k=-r/t,T=-(a*k+l)/s]];else if(0===s)f=[[k=-l/a,T=-(t*k+r)/e]];else{var k,T;f=[[k=(e*l-s*r)/(s*t-e*a),T=-(t*k+r)/e]]}return f.map(function(E){return[E[0],E[1]]})}function $o(i,n){var t=n.map(function(h){return[0,1].map(function(v){return[Math.min(h[0][v],h[1][v]),Math.max(h[0][v],h[1][v])]})}),e=[];if(2===i.length){var r=i[0],a=r[0],s=r[1];if(Be(a-i[1][0])){if(!Be(s-i[1][1])){var d=Math.max.apply(Math,t.map(function(h){return h[0][0]})),f=Math.min.apply(Math,t.map(function(h){return h[0][1]}));if(Be(d-f)>0)return[];e=[[d,s],[f,s]]}}else{var l=Math.max.apply(Math,t.map(function(h){return h[1][0]})),c=Math.min.apply(Math,t.map(function(h){return h[1][1]}));if(Be(l-c)>0)return[];e=[[a,l],[a,c]]}}return e.length||(e=i.filter(function(h){var v=h[0],m=h[1];return t.every(function(S){return 0<=Be(v-S[0][0])&&0<=Be(S[0][1]-v)&&0<=Be(m-S[1][0])&&0<=Be(S[1][1]-m)})})),e.map(function(h){return[Be(h[0]),Be(h[1])]})}function ta(i){return function(){for(var i=0,n=0,t=arguments.length;n<t;n++)i+=arguments[n].length;var e=Array(i),r=0;for(n=0;n<t;n++)for(var a=arguments[n],s=0,l=a.length;s<l;s++,r++)e[r]=a[s];return e}(i.slice(1),[i[0]]).map(function(n,t){return[i[t],n]})}function lm(i,n){var t=function(i,n){return function(i,n){var t=i.slice(),e=n.slice();-1===Io(t)&&t.reverse(),-1===Io(e)&&e.reverse();var r=ta(t),a=ta(e),s=r.map(function(f){return $n(f[0],f[1])}),l=a.map(function(f){return $n(f[0],f[1])}),c=[];s.forEach(function(f,h){var v=r[h],m=[];l.forEach(function(S,T){var E=$o(qo(f,S),[v,a[T]]);m.push.apply(m,E.map(function(P){return{index1:h,index2:T,pos:P,type:"intersection"}}))}),m.sort(function(S,T){return on(v[0],S.pos)-on(v[0],T.pos)}),c.push.apply(c,m),Qo(v[1],e)&&c.push({index1:h,index2:-1,pos:v[1],type:"inside"})}),a.forEach(function(f,h){if(Qo(f[1],t)){var v=!1,m=Sn(c,function(S){return S.index2===h?(v=!0,!1):!!v});-1===m&&(v=!1,m=Sn(c,function(S){return-1===S.index1&&S.index2+1===h?(v=!0,!1):!!v})),-1===m?c.push({index1:-1,index2:h,pos:f[1],type:"inside"}):c.splice(m,0,{index1:-1,index2:h,pos:f[1],type:"inside"})}});var d={};return c.filter(function(f){var h=f.pos,v=h[0]+"x"+h[1];return!d[v]&&(d[v]=!0,!0)})}(i,n).map(function(e){return e.pos})}(i,n);return pc(t)}var na=function(){return na=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var a in t=arguments[e])Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n},na.apply(this,arguments)},pm=function(){function i(){this._events={}}var n=i.prototype;return n.on=function(t,e){if(rn(t))for(var r in t)this.on(r,t[r]);else this._addEvent(t,e,{});return this},n.off=function(t,e){if(t)if(rn(t))for(var r in t)this.off(r);else if(e){var a=this._events[t];if(a){var s=Sn(a,function(l){return l.listener===e});s>-1&&a.splice(s,1)}}else this._events[t]=[];else this._events={};return this},n.once=function(t,e){var r=this;return e&&this._addEvent(t,e,{once:!0}),new Promise(function(a){r._addEvent(t,a,{once:!0})})},n.emit=function(t,e){var r=this;void 0===e&&(e={});var a=this._events[t];if(!t||!a)return!0;var s=!1;return e.eventType=t,e.stop=function(){s=!0},e.currentTarget=this,function(){for(var i=0,n=0,t=arguments.length;n<t;n++)i+=arguments[n].length;var e=Array(i),r=0;for(n=0;n<t;n++)for(var a=arguments[n],s=0,l=a.length;s<l;s++,r++)e[r]=a[s];return e}(a).forEach(function(l){l.listener(e),l.once&&r.off(t,l.listener)}),!s},n.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},n._addEvent=function(t,e,r){var a=this._events;a[t]=a[t]||[],a[t].push(na({listener:e},r))},i}();const ia=pm;"undefined"!=typeof document&&document;var sa=function(i,n){return(sa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(i,n)},ui=function(){return ui=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var a in t=arguments[e])Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n},ui.apply(this,arguments)};function km(i){var n=i.container;return n===document.body?[n.scrollLeft||document.documentElement.scrollLeft,n.scrollTop||document.documentElement.scrollTop]:[n.scrollLeft,n.scrollTop]}function la(i){return i?function(i){return"string"==typeof i}(i)?document.querySelector(i):function(i){return"function"==typeof i}(i)?i():i instanceof Element?i:"current"in i?i.current:"value"in i?i.value:void 0:null}var Im=function(i){function n(){var e=null!==i&&i.apply(this,arguments)||this;return e._startRect=null,e._startPos=[],e._prevTime=0,e._timer=0,e._prevScrollPos=[0,0],e._isWait=!1,e._flag=!1,e}!function(i,n){function t(){this.constructor=i}sa(i,n),i.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}(n,i);var t=n.prototype;return t.dragStart=function(e,r){var a=la(r.container);if(a){var s=0,l=0,c=0,d=0;if(a===document.body)c=window.innerWidth,d=window.innerHeight;else{var f=a.getBoundingClientRect();s=f.top,l=f.left,c=f.width,d=f.height}this._flag=!0,this._startPos=[e.clientX,e.clientY],this._startRect={top:s,left:l,width:c,height:d},this._prevScrollPos=this._getScrollPosition([0,0],r)}else this._flag=!1},t.drag=function(e,r){if(clearTimeout(this._timer),this._flag){var a=e.clientX,s=e.clientY,l=r.threshold,c=void 0===l?0:l,f=this._startRect,h=this._startPos,v=[0,0];return f.top>s-c?(h[1]>f.top||s<h[1])&&(v[1]=-1):f.top+f.height<s+c&&(h[1]<f.top+f.height||s>h[1])&&(v[1]=1),f.left>a-c?(h[0]>f.left||a<h[0])&&(v[0]=-1):f.left+f.width<a+c&&(h[0]<f.left+f.width||a>h[0])&&(v[0]=1),!(!v[0]&&!v[1])&&this._continueDrag(ui(ui({},r),{direction:v,inputEvent:e,isDrag:!0}))}},t.checkScroll=function(e){var r=this;if(this._isWait)return!1;var a=e.prevScrollPos,s=void 0===a?this._prevScrollPos:a,l=e.direction,c=e.throttleTime,d=void 0===c?0:c,f=e.inputEvent,h=e.isDrag,v=this._getScrollPosition(l||[0,0],e),m=v[0]-s[0],S=v[1]-s[1],T=l||[m?Math.abs(m)/m:0,S?Math.abs(S)/S:0];return this._prevScrollPos=v,!(!m&&!S||(this.trigger("move",{offsetX:T[0]?m:0,offsetY:T[1]?S:0,inputEvent:f}),d&&h&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){r._continueDrag(e)},d)),0))},t.dragEnd=function(){this._flag=!1,clearTimeout(this._timer)},t._getScrollPosition=function(e,r){var s=r.getScrollPosition;return(void 0===s?km:s)({container:la(r.container),direction:e})},t._continueDrag=function(e){var a,s,r=this,l=e.container,c=e.direction,d=e.throttleTime,f=e.useScroll,h=e.isDrag,v=e.inputEvent;if(!(!this._flag||h&&this._isWait)){var m=Date.now?Date.now():(new Date).getTime(),S=Math.max(d+this._prevTime-m,0);if(S>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){r._continueDrag(e)},S),!1;this._prevTime=m;var T=this._getScrollPosition(c,e);this._prevScrollPos=T,h&&(this._isWait=!0);var k={container:la(l),direction:c,inputEvent:v};return null===(s=(a=e).requestScroll)||void 0===s||s.call(a,k),this.trigger("scroll",k),this._isWait=!1,f||this.checkScroll(ui(ui({},e),{prevScrollPos:T,direction:c,inputEvent:v}))}},n}(ia);const Rm=Im;var ca=function(i,n){return(ca=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(i,n)},Se=function(){return Se=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var a in t=arguments[e])Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n},Se.apply(this,arguments)};function pa(i){return function(i,n){var r=Math.atan2(n[1]-i[1],n[0]-i[0]);return r>=0?r:r+2*Math.PI}([i[0].clientX,i[0].clientY],[i[1].clientX,i[1].clientY])/Math.PI*180}function Sr(i){return i?i.touches?function(i){for(var n=Math.min(i.length,2),t=[],e=0;e<n;++e)t.push(Sc(i[e]));return t}(i.touches):[Sc(i)]:[]}function Cc(i,n,t){var e=t.length,r=ji(i,e),a=r.clientX,s=r.clientY,l=r.originalClientX,c=r.originalClientY,d=ji(n,e),f=d.clientX,h=d.clientY,v=ji(t,e);return{clientX:l,clientY:c,deltaX:a-f,deltaY:s-h,distX:a-v.clientX,distY:s-v.clientY}}function da(i){return Math.sqrt(Math.pow(i[0].clientX-i[1].clientX,2)+Math.pow(i[0].clientY-i[1].clientY,2))}function Sc(i){return{clientX:i.clientX,clientY:i.clientY}}function ji(i,n){void 0===n&&(n=i.length);for(var t={clientX:0,clientY:0,originalClientX:0,originalClientY:0},e=0;e<n;++e){var r=i[e];t.originalClientX+="originalClientX"in r?r.originalClientX:r.clientX,t.originalClientY+="originalClientY"in r?r.originalClientY:r.clientY,t.clientX+=r.clientX,t.clientY+=r.clientY}return n?{clientX:t.clientX/n,clientY:t.clientY/n,originalClientX:t.originalClientX/n,originalClientY:t.originalClientY/n}:t}var ua=function(){function i(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}var n=i.prototype;return n.getAngle=function(t){return void 0===t&&(t=this.prevClients),pa(t)},n.getRotation=function(t){return void 0===t&&(t=this.prevClients),pa(t)-pa(this.startClients)},n.getPosition=function(t,e){void 0===t&&(t=this.prevClients);var r=Cc(t||this.prevClients,this.prevClients,this.startClients),a=r.deltaX,s=r.deltaY;return this.movement+=Math.sqrt(a*a+s*s),this.prevClients=t,r},n.getPositions=function(t){void 0===t&&(t=this.prevClients);var e=this.prevClients;return this.startClients.map(function(r,a){return Cc([t[a]],[e[a]],[r])})},n.getMovement=function(t){var e=this.movement;if(!t)return e;var r=ji(t,this.length),a=ji(this.prevClients,this.length),s=r.clientX-a.clientX,l=r.clientY-a.clientY;return Math.sqrt(s*s+l*l)+e},n.getDistance=function(t){return void 0===t&&(t=this.prevClients),da(t)},n.getScale=function(t){return void 0===t&&(t=this.prevClients),da(t)/da(this.startClients)},n.move=function(t,e){this.startClients.forEach(function(r){r.clientX-=t,r.clientY-=e}),this.prevClients.forEach(function(r){r.clientX-=t,r.clientY-=e})},i}(),Dc=["textarea","input"],Lm=function(i){function n(e,r){void 0===r&&(r={});var a=i.call(this)||this;a.options={},a.flag=!1,a.pinchFlag=!1,a.data={},a.isDrag=!1,a.isPinch=!1,a.isMouse=!1,a.isTouch=!1,a.clientStores=[],a.targets=[],a.prevTime=0,a.doubleFlag=!1,a._dragFlag=!1,a._isMouseEvent=!1,a._isSecondaryButton=!1,a._preventMouseEvent=!1,a.onDragStart=function(v,m){if(void 0===m&&(m=!0),a.flag||!1!==v.cancelable){var S=a.options,T=S.container,k=S.pinchOutside,E=S.preventWheelClick,P=S.preventRightClick,R=S.preventDefault,B=S.checkInput,V=S.preventClickEventOnDragStart,L=S.preventClickEventOnDrag,Z=S.preventClickEventByCondition,q=a.isTouch,tt=!a.flag;if(a._isSecondaryButton=3===v.which||2===v.button,E&&(2===v.which||1===v.button)||P&&(3===v.which||2===v.button))return a.stop(),!1;if(tt){var $=document.activeElement,ft=v.target;if(ft){var X=ft.tagName.toLowerCase(),ct=Dc.indexOf(X)>-1,yt=ft.isContentEditable;if(ct||yt){if(B||$===ft||$&&yt&&$.isContentEditable&&$.contains(ft))return!1}else if((R||"touchstart"===v.type)&&$){var xt=$.tagName.toLowerCase();($.isContentEditable||Dc.indexOf(xt)>-1)&&$.blur()}(V||L||Z)&&Ue(window,"click",a._onClick,!0)}a.clientStores=[new ua(Sr(v))],a.flag=!0,a.isDrag=!1,a._dragFlag=!0,a.data={},a.doubleFlag=gr()-a.prevTime<200,a._isMouseEvent=function(i){return i&&(i.type.indexOf("mouse")>-1||"button"in i)}(v),!a._isMouseEvent&&a._preventMouseEvent&&(a._preventMouseEvent=!1),!1===(a._preventMouseEvent||a.emit("dragStart",Se(Se({data:a.data,datas:a.data,inputEvent:v,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,isTrusted:m,isDouble:a.doubleFlag},a.getCurrentStore().getPosition()),{preventDefault:function(){v.preventDefault()},preventDrag:function(){a._dragFlag=!1}})))&&a.stop(),a._isMouseEvent&&a.flag&&R&&v.preventDefault()}if(!a.flag)return!1;var Ot=0;if(tt?(a._attchDragEvent(),q&&k&&(Ot=setTimeout(function(){Ue(T,"touchstart",a.onDragStart,{passive:!1})}))):q&&k&&Ve(T,"touchstart",a.onDragStart),a.flag&&function(i){return i.touches&&i.touches.length>=2}(v)){if(clearTimeout(Ot),tt&&v.touches.length!==v.changedTouches.length)return;a.pinchFlag||a.onPinchStart(v)}}},a.onDrag=function(v,m){if(a.flag){!a._isMouseEvent&&a.options.preventDefault&&v.preventDefault();var T=Sr(v),k=a.moveClients(T,v,!1);if(a._dragFlag){if((a.pinchFlag||k.deltaX||k.deltaY)&&!1===(a._preventMouseEvent||a.emit("drag",Se(Se({},k),{isScroll:!!m,inputEvent:v}))))return void a.stop();a.pinchFlag&&a.onPinch(v,T)}a.getCurrentStore().getPosition(T,!0)}},a.onDragEnd=function(v){if(a.flag){var m=a.options,S=m.pinchOutside,T=m.container,k=m.preventClickEventOnDrag,E=m.preventClickEventOnDragStart,P=m.preventClickEventByCondition,R=a.isDrag;(k||E||P)&&requestAnimationFrame(function(){a._allowClickEvent()}),!P&&!E&&k&&!R&&a._allowClickEvent(),a.isTouch&&S&&Ve(T,"touchstart",a.onDragStart),a.pinchFlag&&a.onPinchEnd(v);var B=(null==v?void 0:v.touches)?Sr(v):[];0!==B.length&&a.options.keepDragging?a._addStore(new ua(B)):a.flag=!1;var L=a._getPosition(),Z=gr(),q=!R&&a.doubleFlag;a.prevTime=R||q?0:Z,a.flag||(a._dettachDragEvent(),a._preventMouseEvent||a.emit("dragEnd",Se({data:a.data,datas:a.data,isDouble:q,isDrag:R,isClick:!R,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,inputEvent:v},L)),a.clientStores=[],a._isMouseEvent||(a._preventMouseEvent=!0,requestAnimationFrame(function(){requestAnimationFrame(function(){a._preventMouseEvent=!1})})))}},a.onBlur=function(){a.onDragEnd()},a._allowClickEvent=function(){Ve(window,"click",a._onClick,!0)},a._onClick=function(v){a._allowClickEvent(),a._preventMouseEvent=!1;var m=a.options.preventClickEventByCondition;(null==m?void 0:m(v))||(v.stopPropagation(),v.preventDefault())},a._onContextMenu=function(v){a.options.preventRightClick?a.onDragEnd(v):v.preventDefault()},a._passCallback=function(){};var s=[].concat(e);a.options=Se({checkInput:!1,container:s.length>1?window:s[0],preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var l=a.options,c=l.container,d=l.events,f=l.checkWindowBlur;if(a.isTouch=d.indexOf("touch")>-1,a.isMouse=d.indexOf("mouse")>-1,a.targets=s,a.isMouse&&(s.forEach(function(v){Ue(v,"mousedown",a.onDragStart),Ue(v,"mousemove",a._passCallback)}),Ue(c,"contextmenu",a._onContextMenu)),f&&Ue(window,"blur",a.onBlur),a.isTouch){var h={passive:!1};s.forEach(function(v){Ue(v,"touchstart",a.onDragStart,h),Ue(v,"touchmove",a._passCallback,h)})}return a}!function(i,n){function t(){this.constructor=i}ca(i,n),i.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}(n,i);var t=n.prototype;return t.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._allowClickEvent(),this._dettachDragEvent()},t.getMovement=function(e){return this.getCurrentStore().getMovement(e)+this.clientStores.slice(1).reduce(function(r,a){return r+a.movement},0)},t.isDragging=function(){return this.isDrag},t.isFlag=function(){return this.flag},t.isPinchFlag=function(){return this.pinchFlag},t.isDoubleFlag=function(){return this.doubleFlag},t.isPinching=function(){return this.isPinch},t.scrollBy=function(e,r,a,s){void 0===s&&(s=!0),this.flag&&(this.clientStores[0].move(e,r),s&&this.onDrag(a,!0))},t.move=function(e,r){var a=e[0],s=e[1],l=this.getCurrentStore();return this.moveClients(l.prevClients.map(function(d){var f=d.clientX,h=d.clientY;return{clientX:f+a,clientY:h+s,originalClientX:f,originalClientY:h}}),r,!0)},t.triggerDragStart=function(e){this.onDragStart(e,!1)},t.setEventData=function(e){var r=this.data;for(var a in e)r[a]=e[a];return this},t.setEventDatas=function(e){return this.setEventData(e)},t.getCurrentEvent=function(e){return Se(Se({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},t.getEventData=function(){return this.data},t.getEventDatas=function(){return this.data},t.unset=function(){var e=this,r=this.targets,a=this.options.container;this.off(),Ve(window,"blur",this.onBlur),this.isMouse&&(r.forEach(function(s){Ve(s,"mousedown",e.onDragStart)}),Ve(a,"contextmenu",this._onContextMenu)),this.isTouch&&(r.forEach(function(s){Ve(s,"touchstart",e.onDragStart)}),Ve(a,"touchstart",this.onDragStart)),this._allowClickEvent(),this._dettachDragEvent()},t.onPinchStart=function(e){var r=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>r)){var a=new ua(Sr(e));this.pinchFlag=!0,this._addStore(a),!1===this.emit("pinchStart",Se(Se({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:e}))&&(this.pinchFlag=!1)}},t.onPinch=function(e,r){if(this.flag&&this.pinchFlag&&!(r.length<2)){var a=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Se(Se({data:this.data,datas:this.data,movement:this.getMovement(r),angle:a.getAngle(r),rotation:a.getRotation(r),touches:a.getPositions(r),scale:a.getScale(r),distance:a.getDistance(r)},a.getPosition(r)),{inputEvent:e}))}},t.onPinchEnd=function(e){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var a=this.getCurrentStore();this.emit("pinchEnd",Se(Se({data:this.data,datas:this.data,isPinch:r,touches:a.getPositions()},a.getPosition()),{inputEvent:e}))}},t.getCurrentStore=function(){return this.clientStores[0]},t.moveClients=function(e,r,a){var s=this._getPosition(e,a),l=this.isDrag;(s.deltaX||s.deltaY)&&(this.isDrag=!0);var c=!1;return!l&&this.isDrag&&(c=!0),Se(Se({data:this.data,datas:this.data},s),{movement:this.getMovement(e),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isFirstDrag:c})},t._addStore=function(e){this.clientStores.splice(0,0,e)},t._getPosition=function(e,r){var s=this.getCurrentStore().getPosition(e,r),l=this.clientStores.slice(1).reduce(function(f,h){var v=h.getPosition();return f.distX+=v.distX,f.distY+=v.distY,f},s),c=l.distX,d=l.distY;return Se(Se({},s),{distX:c,distY:d})},t._attchDragEvent=function(){var e=this.options.container,r={passive:!1};this.isMouse&&(Ue(e,"mousemove",this.onDrag),Ue(e,"mouseup",this.onDragEnd)),this.isTouch&&(Ue(e,"touchmove",this.onDrag,r),Ue(e,"touchend",this.onDragEnd,r),Ue(e,"touchcancel",this.onDragEnd,r))},t._dettachDragEvent=function(){var e=this.options.container;this.isMouse&&(Ve(e,"mousemove",this.onDrag),Ve(e,"mouseup",this.onDragEnd)),this.isTouch&&(Ve(e,"touchstart",this.onDragStart),Ve(e,"touchmove",this.onDrag),Ve(e,"touchend",this.onDragEnd),Ve(e,"touchcancel",this.onDragEnd))},n}(ia);const Hm=Lm;const Jm=function(i){var e,n="rCS"+function(i){return function(i){for(var n=5381,t=i.length;t;)n=33*n^i.charCodeAt(--t);return n>>>0}(i).toString(36)}(i),t=0;return{className:n,inject:function(r,a){void 0===a&&(a={});var c,s=function(i){if(i&&i.getRootNode){var n=i.getRootNode();if(11===n.nodeType)return n}}(r),l=0===t;return(s||l)&&(c=function(i,n,t,e){var r=document.createElement("style");return r.setAttribute("type","text/css"),r.setAttribute("data-styled-id",i),t.nonce&&r.setAttribute("nonce",t.nonce),r.innerHTML=function(i,n,t){return t.original?n:n.replace(/([^};{\s}][^};{]*|^\s*){/gm,function(e,r){var a=r.trim();return(a?Pn(a):[""]).map(function(s){var l=s.trim();return 0===l.indexOf("@")?l:l.indexOf(":global")>-1?l.replace(/\:global/g,""):l.indexOf(":host")>-1?""+l.replace(/\:host/g,"."+i):l?"."+i+" "+l:"."+i}).join(", ")+" {"})}(i,n,t),(e||document.head||document.body).appendChild(r),r}(n,i,a,s)),l&&(e=c),s||++t,{destroy:function(){s?(s.removeChild(c),c=null):(t>0&&--t,0===t&&e&&(e.parentNode.removeChild(e),e=null))}}}}};var ha=function(i,n){return(ha=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(i,n)};function Oc(i,n){function t(){this.constructor=i}ha(i,n),i.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}var fa=function(){return fa=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var a in t=arguments[e])Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n},fa.apply(this,arguments)},Qm=function(i){function n(){var e=null!==i&&i.apply(this,arguments)||this;return e.injectResult=null,e.tag="div",e}Oc(n,i);var t=n.prototype;return t.render=function(){var e=this.props,r=e.className,a=void 0===r?"":r,l=e.portalContainer,c=function(i,n){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&n.indexOf(e)<0&&(t[e]=i[e]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(e=Object.getOwnPropertySymbols(i);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(i,e[r])&&(t[e[r]]=i[e[r]])}return t}(e,["className","cspNonce","portalContainer"]),d=this.injector.className,f=this.tag,h={};return"simple-1.1.0".indexOf("simple")>-1&&l&&(h={portalContainer:l}),Qe(f,fa({ref:fn(this,"element"),"data-styled-id":d,className:a+" "+d},h,c))},t.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},t.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},t.getElement=function(){return this.element},n}(Fo);const Tc=function(i,n){var t=Jm(n);return function(e){function r(){var a=null!==e&&e.apply(this,arguments)||this;return a.injector=t,a.tag=i,a}return Oc(r,e),r}(Qm)};var va=function(i,n){return(va=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(i,n)};function hi(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=i}va(i,n),i.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}var ht=function(){return ht=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var a in t=arguments[e])Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n},ht.apply(this,arguments)};function Jt(i,n,t){if(t||2===arguments.length)for(var a,e=0,r=n.length;e<r;e++)(a||!(e in n))&&(a||(a=Array.prototype.slice.call(n,0,e)),a[e]=n[e]);return i.concat(a||Array.prototype.slice.call(n))}function Ui(i,n){var t;return ht({events:{},props:(t={},t[i]=Boolean,t),name:i},n)}var Dr=Lg(),Ac=Dr.browser.webkit,Ec=Ac&&function(){var i="undefined"==typeof window?{userAgent:""}:window.navigator,n=/applewebkit\/([^\s]+)/g.exec(i.userAgent.toLowerCase());return!!n&&parseFloat(n[1])<605}(),i1="firefox"===Dr.browser.name,r1=parseInt(Dr.browser.webkitVersion,10)>=612||parseInt(Dr.browser.version,10)>=15,ga="moveable-",o1="\n{\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --moveable-color: #4af;\n    --zoom: 1;\n    --zoompx: 1px;\n    will-change: transform;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n    position: absolute;\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n    background: #4af;\n    background: var(--moveable-color);\n\tmargin-top: -7px;\n    margin-left: -7px;\n    border: 2px solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\twidth: 1px;\n    height: 1px;\n    background: #4af;\n    background: var(--moveable-color);\n\ttransform-origin: 0px 50%;\n}\n.line.edge {\n    z-index: 1;\n    background: transparent;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top-color: #4af;\n    border-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left-color: #4af;\n    border-left-color: var(--moveable-color);\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n}\n.line.horizontal.bold {\n    height: 2px;\n}\n\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n\tpointer-events: none;\n}\n".concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(i){return'\n.direction[data-rotation="'.concat(i,'"] {\n\t').concat(function(i){var n=function(i,n){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32,'px" height="').concat(32,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(n,'deg);transform-origin: 16px 16px"></path></svg>')}(0,i),t=45*Math.round(i/45)%180,e="ns-resize";return 135===t?e="nwse-resize":45===t?e="nesw-resize":90===t&&(e="ew-resize"),"cursor:".concat(e,";cursor: url('").concat(n,"') 16 16, ").concat(e,";")}(i),"\n}\n")}).join("\n"),"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n").concat(Ec?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"","\n"),a1=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Fe=1e-7,Yi=Math.pow(10,10),Mc=-Yi,l1=["n","w","s","e"],ma=["n","w","s","e","nw","ne","sw","se"],c1={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},xa={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},Pc={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},kc=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget"];function Xi(i,n,t,e,r,a){void 0===a&&(a="draggable");var s=n.gestos[a].move(t,i.inputEvent),l=s.originalDatas||s.datas,c=l[a]||(l[a]={});return ht(ht({},r?qc(n,s):s),{isPinch:!!e,parentEvent:!0,datas:c,originalDatas:i.originalDatas})}var fi=function(){function i(t){var e;void 0===t&&(t="draggable"),this.ableName=t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=((e={})[t]={},e)}var n=i.prototype;return n.dragStart=function(t,e){this.isDrag=!1,this.isFlag=!1;var r=e.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),ht(ht({},this.move(t,e.inputEvent)),{type:"dragstart"})},n.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},n.move=function(t,e){var r,a;return this.isFlag?(r=this.prevX+t[0],a=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0)):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],r=t[0],a=t[1],this.isFlag=!0),this.prevX=r,this.prevY=a,{type:"drag",clientX:r,clientY:a,inputEvent:e,isDrag:this.isDrag,distX:r-this.startX,distY:a-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},i}();function Ic(i,n){var r=n.datas,a=i.state,s=a.moveableClientRect,d=a.pos1,m=qt(xi(a.rootMatrix,[n.clientX-s.left,n.clientY-s.top],a.is3d?4:3),d),k=mn({datas:r,distX:m[0],distY:m[1]});return[k[0],k[1]]}function ti(i,n){var t=n.datas,e=i.state,r=e.allMatrix,a=e.beforeMatrix,s=e.is3d,l=e.left,c=e.top,d=e.origin,f=e.offsetMatrix,h=e.targetMatrix,v=e.transformOrigin,m=s?4:3;t.is3d=s,t.matrix=r,t.targetMatrix=h,t.beforeMatrix=a,t.offsetMatrix=f,t.transformOrigin=v,t.inverseMatrix=vn(r,m),t.inverseBeforeMatrix=vn(a,m),t.absoluteOrigin=Kn(oe([l,c],d),m),t.startDragBeforeDist=ke(t.inverseBeforeMatrix,t.absoluteOrigin,m),t.startDragDist=ke(t.inverseMatrix,t.absoluteOrigin,m)}function Tr(i,n){var t=i.datas,e=i.originalDatas.beforeRenderable,r=t.transformIndex,a=e.nextTransforms,s=a.length,l=e.nextTransformAppendedIndexes,c=0;-1===r?t.transformIndex=c=a.length:c=Xn(l,function(v){return v.index===r&&v.functionName===n})?r:r+l.filter(function(v){return v.index<r}).length;var d=function(i,n){var t=i.slice(0,n<0?void 0:n),e=i.slice(0,n<0?void 0:n+1),r=i[n]||"",a=n<0?[]:i.slice(n),s=n<0?[]:i.slice(n+1),l=Qn(t),c=Qn(e),d=Qn([r]),f=Qn(a),h=Qn(s),v=di(l),m=di(c),S=di(f),T=di(h),k=he(v,S,4);return{transforms:i,beforeFunctionMatrix:v,beforeFunctionMatrix2:m,targetFunctionMatrix:di(d),afterFunctionMatrix:S,afterFunctionMatrix2:T,allFunctionMatrix:k,beforeFunctions:l,beforeFunctions2:c,targetFunction:d[0],afterFunctions:f,afterFunctions2:h,beforeFunctionTexts:t,beforeFunctionTexts2:e,targetFunctionText:r,afterFunctionTexts:a,afterFunctionTexts2:s}}(a,c),f=d.targetFunction,h="rotate"===n?"rotateZ":n;t.beforeFunctionTexts=d.beforeFunctionTexts,t.afterFunctionTexts=d.afterFunctionTexts,t.beforeTransform=d.beforeFunctionMatrix,t.beforeTransform2=d.beforeFunctionMatrix2,t.targetTansform=d.targetFunctionMatrix,t.afterTransform=d.afterFunctionMatrix,t.afterTransform2=d.afterFunctionMatrix2,t.targetAllTransform=d.allFunctionMatrix,f.functionName===h?(t.afterFunctionTexts.splice(0,1),t.isAppendTransform=!1):s>c&&(t.isAppendTransform=!0,e.nextTransformAppendedIndexes=Jt(Jt([],l,!0),[{functionName:n,index:c,isAppend:!0}],!1))}function Ar(i,n,t){return"".concat(i.beforeFunctionTexts.join(" ")," ").concat(i.isAppendTransform?t:n," ").concat(i.afterFunctionTexts.join(" "))}function Rc(i,n,t){var e=i.beforeTransform,r=i.afterTransform,a=i.beforeTransform2,s=i.afterTransform2,l=i.targetAllTransform,c=t?he(l,n,4):he(n,l,4),d=he(vn(t?a:e,4),c,4);return he(d,vn(t?s:r,4),4)}function zc(i){var n=i.datas,s=n.startDragBeforeDist,c=n.is3d?4:3;return qt(ke(n.inverseBeforeMatrix,oe(n.absoluteOrigin,[i.distX,i.distY]),c),s)}function mn(i,n){var t=i.datas,c=t.startDragBeforeDist,d=t.startDragDist,h=t.is3d?4:3;return qt(ke(n?t.inverseBeforeMatrix:t.inverseMatrix,oe(t.absoluteOrigin,[i.distX,i.distY]),h),n?c:d)}function Gc(i){var n=[];return i[1]>=0&&(i[0]>=0&&n.push(3),i[0]<=0&&n.push(2)),i[1]<=0&&(i[0]>=0&&n.push(1),i[0]<=0&&n.push(0)),n}function be(i,n){var t=(n[0]+1)/2,e=(n[1]+1)/2,r=[Yn(i[0][0],i[1][0],t,1-t),Yn(i[0][1],i[1][1],t,1-t)],a=[Yn(i[2][0],i[3][0],t,1-t),Yn(i[2][1],i[3][1],t,1-t)];return[Yn(r[0],a[0],e,1-e),Yn(r[1],a[1],e,1-e)]}function Ji(i,n,t,e){return he(i,ba(n,e,t),e)}function Er(i){var n=vi(i);return{setTransform:function(t,e){void 0===e&&(e=-1),n.startTransforms=Cn(t)?t:Mn(t),ya(i,e)},setTransformIndex:function(t){ya(i,t)}}}function Mr(i,n){ya(i,Sn(vi(i).startTransforms,function(r){return 0===r.indexOf("".concat(n,"("))}))}function ya(i,n){var t=vi(i),e=i.datas;if(e.transformIndex=n,-1!==n){var r=t.startTransforms[n];if(r){var a=Qn([r]);e.startValue=a[0].functionValue}}}function wa(i,n){vi(i).nextTransforms=Mn(n)}function vi(i){return i.originalDatas.beforeRenderable}function Nc(i){return i.originalDatas.beforeRenderable.nextTransforms}function Bc(i){return Nc(i).join(" ")}function Fc(i){return vi(i).nextStyle}function Lc(i,n,t,e,r){wa(r,n);var a=Le.drag(i,Xi(r,i.state,t,e,!1)),s=a?a.transform:n;return ht(ht({transform:n,drag:a},qi({transform:s},r)),{afterTransform:s})}function Hc(i,n,t,e,r){var a=i.state,s=a.left,l=a.top,c=i.props.groupable,d=function(i,n,t){var e=i.transformOrigin,l=n.afterTransform,c=i.is3d?4:3;return Ji(i.offsetMatrix,gn(he(he(n.beforeTransform,Hi([t]),4),l,4),4,c),e,c)}(i.state,r,n),f=c?s:0,h=c?l:0,m=qt(e,Zc(i,t,d));return qt(m,[f,h])}function Zc(i,n,t){void 0===t&&(t=i.state.allMatrix);var e=i.state;return Ae(t,[e.width/2*(1+n[0]),e.height/2*(1+n[1])],e.is3d?4:3)}function Wc(i,n){return be(je(i.state),n)}function jt(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return Xv.apply(void 0,Jt([ga],i,!1))}function Vc(i){i()}function C1(i){return i&&"none"!==i?rn(i)?i:Hi(i):[1,0,0,1,0,0]}function ba(i,n,t){return Yo(n,Li(t,n),i,Li(t.map(function(e){return-e}),n))}function _a(i){var n=i.transformOrigin;return n?n.split(" "):["0","0"]}function jc(i,n){void 0===n&&(n=sn(i));var t=n.transform;if(t&&"none"!==t)return n.transform;if("transform"in i){var r=i.transform.baseVal;if(!r)return"";var a=r.length;if(!a)return"";for(var s=[],l=function(d){var f=r[d].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(h){return f[h]}).join(", "),")"))},c=0;c<a;++c)l(c);return s.join(" ")}return""}function Pr(i,n,t){var e,r,l,c,a=document.body,s=!1;if(!i||t)l=i;else{var d=null===(e=null==i?void 0:i.assignedSlot)||void 0===e?void 0:e.parentElement,f=i.parentElement;d?(s=!0,c=f,l=d):l=f}for(var h=!1,v=i===n||l===n,m="relative";l&&l!==a;){n===l&&(v=!0);var S=sn(l),T=l.tagName.toLowerCase(),k=jc(l,S);if(m=S.position,"svg"===T||"static"!==m||k&&"none"!==k||"transform"===S.willChange)break;var P=null===(r=null==i?void 0:i.assignedSlot)||void 0===r?void 0:r.parentNode,R=l.parentNode;P&&(s=!0,c=R);var B=P||R;if(B&&11===B.nodeType){l=B.host,h=!0;break}l=B,m="relative"}return{hasSlot:s,parentSlotElement:c,isCustomElement:h,isStatic:"static"===m,isEnd:v||!l||l===a,offsetParent:l||a}}function O1(i,n,t){var e,d,f,r=i.tagName.toLowerCase(),a=i.offsetLeft,s=i.offsetTop,l=vr(a),c=!l;return c||"svg"===r?f=(d=_a(t).map(function(h){return parseFloat(h)})).slice():(f=(d=Ec?function(i){return _a(sn(i,":before")).map(function(t,e){var r=Ri(t);return r.value*function(i,n,t){return"%"===n?Sa(i.ownerSVGElement)[t?"width":"height"]/100:1}(i,r.unit,0===e)})}(i):_a(t).map(function(h){return parseFloat(h)})).slice(),c=!0,e=function(i,n,t){if(!i.getBBox||!t&&"g"===i.tagName.toLowerCase())return[0,0,0,0];var e=i.getBBox(),r=Sa(i.ownerSVGElement),a=e.x-r.x,s=e.y-r.y;return[a,s,n[0]-a,n[1]-s]}(i,d,i===n&&"g"===n.tagName.toLowerCase()),a=e[0],s=e[1],d[0]=e[2],d[1]=e[3]),{tagName:r,isSVG:l,hasOffset:c,offset:[a||0,s||0],origin:d,targetOrigin:f}}function Uc(i,n,t){void 0===t&&(t=sn(i));var e=sn(document.body),r=e.position;if(!(n||r&&"static"!==r))return[0,0];var a=parseInt(e.marginLeft,10),s=parseInt(e.marginTop,10);return"absolute"===t.position&&(("auto"!==t.top||"auto"!==t.bottom)&&(s=0),("auto"!==t.left||"auto"!==t.right)&&(a=0)),[a,s]}function Ca(i){i.forEach(function(n){var t=n.matrix;t&&(n.matrix=gn(t,3,4))})}function A1(i){for(var n=i.parentElement,t=!1;n;){var e=sn(n).transform;if(e&&"none"!==e){t=!0;break}if(n===document.body)break;n=n.parentElement}return{fixedContainer:n||document.body,hasTransform:t}}function kr(i,n){return void 0===n&&(n=i.length>9),"".concat(n?"matrix3d":"matrix","(").concat(rc(i,!n).join(","),")")}function Sa(i){var n=i.clientWidth,t=i.clientHeight;if(!i)return{x:0,y:0,width:0,height:0,clientWidth:n,clientHeight:t};var e=i.viewBox,r=e&&e.baseVal||{x:0,y:0,width:0,height:0};return{x:r.x,y:r.y,width:r.width||n,height:r.height||t,clientWidth:n,clientHeight:t}}function E1(i,n){var t=Sa(i),e=t.width,r=t.height,a=t.clientWidth,s=t.clientHeight,l=a/e,c=s/r,d=i.preserveAspectRatio.baseVal,f=d.align,h=d.meetOrSlice,v=[0,0],m=[l,c],S=[0,0];if(1!==f){var T=(f-2)%3,k=Math.floor((f-2)/3);v[0]=e*T/2,v[1]=r*k/2;var E=2===h?Math.max(c,l):Math.min(l,c);m[0]=E,m[1]=E,S[0]=(a-e)/2*T,S[1]=(s-r)/2*k}var P=ac(m,n);return P[n*(n-1)]=S[0],P[n*(n-1)+1]=S[1],ba(P,n,v)}function Ae(i,n,t){return ke(i,Kn(n,t),t)}function ei(i,n,t,e){return[[0,0],[n,0],[0,t],[n,t]].map(function(r){return Ae(i,r,e)})}function qe(i){var n=i.map(function(d){return d[0]}),t=i.map(function(d){return d[1]}),e=Math.min.apply(Math,n),r=Math.min.apply(Math,t),a=Math.max.apply(Math,n),s=Math.max.apply(Math,t);return{left:e,top:r,right:a,bottom:s,width:a-e,height:s-r}}function Yc(i,n,t,e){return qe(ei(i,n,t,e))}function Ir(i,n,t,e){var a=16===i.length?4:3,s=ei(i,t,e,a),l=s[0],c=l[0],d=l[1],f=s[1],h=f[0],v=f[1],m=s[2],S=m[0],T=m[1],k=s[3],E=k[0],P=k[1],R=Ae(i,n,a),B=R[0],V=R[1],L=Math.min(c,h,S,E),Z=Math.min(d,v,T,P),q=Math.max(c,h,S,E);return c=c-L||0,{left:L,top:Z,right:q,bottom:Math.max(d,v,T,P),origin:[B=B-L||0,V=V-Z||0],pos1:[c,d=d-Z||0],pos2:[h=h-L||0,v=v-Z||0],pos3:[S=S-L||0,T=T-Z||0],pos4:[E=E-L||0,P=P-Z||0],direction:Io(s)}}function an(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Xc(i,n){return an([n[0]-i[0],n[1]-i[1]])}function Ki(i,n,t,e){void 0===t&&(t=1),void 0===e&&(e=we(i,n));var r=Xc(i,n);return{transform:"translateY(-50%) translate(".concat(i[0],"px, ").concat(i[1],"px) rotate(").concat(e,"rad) scaleY(").concat(t,")"),width:"".concat(r,"px")}}function Da(i,n){for(var t=[],e=2;e<arguments.length;e++)t[e-2]=arguments[e];var r=t.length,a=t.reduce(function(l,c){return l+c[0]},0)/r,s=t.reduce(function(l,c){return l+c[1]},0)/r;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(s,"px) rotate(").concat(i,"rad) scale(").concat(n,")")}}function ni(i,n){var t=i[n];return rn(t)?ht(ht({},i),t):i}function Jc(i,n){void 0===n&&(n=i?sn(i):null);var t=i&&!vr(i.offsetWidth),e=0,r=0,a=0,s=0,l=0,c=0,d=0,f=0,h=0,v=0,m=0,S=0,T=1/0,k=1/0,E=1/0,P=1/0,R=!1;if(i)if(t||"svg"===i.tagName.toLowerCase()){var V=i.style,L="border-box"===n.boxSizing,Z=parseFloat(n.borderLeftWidth)||0,q=parseFloat(n.borderRightWidth)||0,tt=parseFloat(n.borderTopWidth)||0,$=parseFloat(n.borderBottomWidth)||0,xt=(parseFloat(n.paddingLeft)||0)+(parseFloat(n.paddingRight)||0),Pt=(parseFloat(n.paddingTop)||0)+(parseFloat(n.paddingBottom)||0),Tt=xt+(Z+q),At=Pt+(tt+$);h=Math.max(xt,xe(n.minWidth,0)||0),v=Math.max(Pt,xe(n.minHeight,0)||0),T=xe(n.maxWidth,0),k=xe(n.maxHeight,0),isNaN(T)&&(T=1/0,k=1/0);var Nt=xe(V.width,0)||0,Rt=xe(V.height,0)||0,Yt=parseFloat(n.width)||0,Vt=parseFloat(n.height)||0;l=parseFloat(n.width),c=parseFloat(n.height),e=d=Math.abs(Yt-Nt)<1?Po(h,Nt||l,T):Yt,r=f=Math.abs(Vt-Rt)<1?Po(v,Rt||c,k):Vt,a=d,s=f,L?(E=T,P=k,m=h,S=v,d=e-Tt,f=r-At):(E=T+Tt,P=k+At,m=h+Tt,S=v+At,e=d+Tt,r=f+At),a=d+xt,s=f+Pt}else{var B=i.getBBox();R=!0,l=e=B.width,c=r=B.height,d=e,f=r,a=e,s=r}return{svg:R,offsetWidth:e,offsetHeight:r,clientWidth:a,clientHeight:s,contentWidth:d,contentHeight:f,cssWidth:l,cssHeight:c,minWidth:h,minHeight:v,maxWidth:T,maxHeight:k,minOffsetWidth:m,minOffsetHeight:S,maxOffsetWidth:E,maxOffsetHeight:P}}function Kc(i,n){return we(n>0?i[0]:i[1],n>0?i[1]:i[0])}function Qi(i,n){var t,e=0,r=0,a=0,s=0;if(i)if(i===document.body||i===document.documentElement){a=window.innerWidth,s=window.innerHeight;var l=[document.documentElement.scrollLeft||document.body.scrollLeft,document.documentElement.scrollTop||document.body.scrollTop];e=(t=[-l[0],-l[1]])[0],r=t[1]}else{var c=i.getBoundingClientRect();e=c.left,r=c.top,a=c.width,s=c.height}var d={left:e,top:r,width:a,height:s,right:e+a,bottom:r+s};return i&&n&&(d.clientLeft=i.clientLeft,d.clientTop=i.clientTop,d.clientWidth=i.clientWidth,d.clientHeight=i.clientHeight,d.scrollWidth=i.scrollWidth,d.scrollHeight=i.scrollHeight,d.overflow="visible"!==sn(i).overflow),d}function Oa(i){if(i){var n=i.getAttribute("data-direction");if(n){var t=[0,0];return n.indexOf("w")>-1&&(t[0]=-1),n.indexOf("e")>-1&&(t[0]=1),n.indexOf("n")>-1&&(t[1]=-1),n.indexOf("s")>-1&&(t[1]=1),t}}}function Ta(i,n){return[oe(n,i[0]),oe(n,i[1]),oe(n,i[2]),oe(n,i[3])]}function je(i){return Ta([i.pos1,i.pos2,i.pos3,i.pos4],[i.left,i.top])}function gi(i,n){var t;null===(t=i[n])||void 0===t||t.unset(),i[n]=null}function qi(i,n){if(n){var t=vi(n);t.nextStyle=ht(ht({},t.nextStyle),i)}return{style:i,cssText:kn(i).map(function(e){return"".concat(e,": ").concat(i[e],";")}).join("")}}function Qc(i,n,t){var e=n.afterTransform||n.transform;return ht(ht({},qi(ht(ht(ht({},i.style),n.style),{transform:e}),t)),{afterTransform:e,transform:i.transform})}function te(i,n,t,e){var r=n.datas;r.datas||(r.datas={});var a=ht(ht({},t),{target:i.state.target,clientX:n.clientX,clientY:n.clientY,inputEvent:n.inputEvent,currentTarget:i,moveable:i,datas:r.datas,stopDrag:function(){var s;null===(s=n.stop)||void 0===s||s.call(n)}});return r.isStartEvent?e||(r.lastEvent=a):r.isStartEvent=!0,a}function Ye(i,n,t){var e=n.datas,r="isDrag"in t?t.isDrag:n.isDrag;return e.datas||(e.datas={}),ht(ht({isDrag:r},t),{moveable:i,target:i.state.target,clientX:n.clientX,clientY:n.clientY,inputEvent:n.inputEvent,currentTarget:i,lastEvent:e.lastEvent,isDouble:n.isDouble,datas:e.datas})}function Aa(i,n,t){i._emitter.on(n,t)}function Ht(i,n,t,e){return i.triggerEvent(n,t,e)}function sn(i,n){return window.getComputedStyle(i,n)}function zr(i,n,t){var e={},r={};return i.filter(function(a){var s=a.name;if(e[s]||!n.some(function(l){return a[l]}))return!1;if(!t&&a.ableGroup){if(r[a.ableGroup])return!1;r[a.ableGroup]=!0}return e[s]=!0,!0})}function Ea(i,n){return i===n||null==i&&null==n}function mi(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return i.sort(function(t,e){return Math.abs(e)-Math.abs(t)}),i[0]}function xi(i,n,t){return ke(vn(i,t),Kn(n,t),t)}function qc(i,n){var t;return t=xi(i.rootMatrix,[n.distX,n.distY],i.is3d?4:3),n.distX=t[0],n.distY=t[1],n}function Gr(i,n,t,e,r){return qt(Ae(i,oe(t,n),r),e)}function ln(i,n,t){return t?"".concat(i/n*100,"%"):"".concat(i,"px")}function Nr(i){return Math.abs(i)<=Fe?0:i}function Ma(i,n){return void 0===n&&(n=[i]),function(t,e){if(e.isRequest)return!!n.some(function(a){return e.requestAble===a})&&e.parentDirection;var r=e.inputEvent.target;return Te(r,jt("direction"))&&(!i||Te(r,jt(i)))}}function B1(i){var n={};for(var t in i)n[i[t]]=t;return n}function $i(i,n){return i?i instanceof Element?i:Ke(i)?n?document.querySelector(i):i:Il(i)?i():"current"in i?i.current:i:null}function $c(i,n){return i?(function(i){return!(!i||!rn(i)||i instanceof Element)&&(Cn(i)||"length"in i)}(i)?[].slice.call(i):[i]).reduce(function(e,r){return Ke(r)&&n?Jt(Jt([],e,!0),[].slice.call(document.querySelectorAll(r)),!0):(e.push($i(r,n)),e)},[]):[]}function tp(i,n){var e=i.is3d,a=vn(i.rootMatrix,e?4:3);return e||(a=gn(a,3,4)),a[12]=0,a[13]=0,a[14]=0,function(i,n){var t=ke(i,[n[0],n[1]||0,n[2]||0,1],4),e=t[3]||1;return[t[0]/e,t[1]/e,t[2]/e]}(a,n)}function ep(i,n,t,e,r){var a=i[0],s=i[1],l=0,c=0;if(r&&a&&s){var d=we([0,0],n),f=we([0,0],e),h=an(n),v=Math.cos(d-f)*h;if(e[0])if(e[1]){var m=2*e[0]*a,S=2*e[1]*s,T=an([m+n[0],S+n[1]])-an([m,S]),k=we([0,0],[t,1]);l=Math.cos(k)*T,c=Math.sin(k)*T}else c=(l=v)/t;else l=(c=v)*t}else l=e[0]*n[0],c=e[1]*n[1];return[l,c]}function np(i,n,t,e){var r,a=t.ratio,s=t.startOffsetWidth,l=t.startOffsetHeight,c=0,d=0,f=e.distX,h=e.distY,v=e.parentDistance,m=e.parentDist,S=e.parentScale,T=t.fixedDirection,k=[0,1].map(function(L){return Math.abs(i[L]-T[L])}),E=[0,1].map(function(L){var Z=k[L];return 0!==Z&&(Z=2/Z),Z});if(m)c=m[0],d=m[1],n&&(c?d||(d=c/a):c=d*a);else if(S)c=(S[0]-1)*s,d=(S[1]-1)*l;else if(v){var P=s*k[0],R=l*k[1],B=an([P,R]);c=v/B*P*E[0],d=v/B*R*E[1]}else{var V=mn({datas:t,distX:f,distY:h});c=(r=ep([s,l],V=E.map(function(L,Z){return V[Z]*L}),a,i,n))[0],d=r[1]}return{distWidth:c,distHeight:d}}var W1=Ui("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(i,n){var t=n.datas,e=n.targets,r=n.angle,a=n.originalDatas,s=i.props,l=s.pinchable,c=s.ables;if(!l)return!1;var d="onPinch".concat(e?"Group":"","Start"),f="drag".concat(e?"Group":"","ControlStart"),h=(!0===l?i.controlAbles:c.filter(function(T){return l.indexOf(T.name)>-1})).filter(function(T){return T.canPinch&&T[f]}),v=te(i,n,{});e&&(v.targets=e);var m=Ht(i,d,v);t.isPinch=!1!==m,t.ables=h;var S=t.isPinch;return!!S&&(h.forEach(function(T){if(a[T.name]=a[T.name]||{},T[f]){var k=ht(ht({},n),{datas:a[T.name],parentRotate:r,isPinch:!0});T[f](i,k)}}),i.state.snapRenderInfo={request:n.isRequest,direction:[0,0]},S)},pinch:function(i,n){var t=n.datas,a=n.originalDatas,s=n.inputEvent,l=n.targets,c=n.angle;if(t.isPinch){var d=n.distance*(1-1/n.scale),f=te(i,n,{});l&&(f.targets=l);var h="onPinch".concat(l?"Group":"");Ht(i,h,f);var v=t.ables,m="drag".concat(l?"Group":"","Control");return v.forEach(function(S){!S[m]||S[m](i,ht(ht({},n),{datas:a[S.name],inputEvent:s,parentDistance:d,parentRotate:c,isPinch:!0}))}),f}},pinchEnd:function(i,n){var t=n.datas,e=n.isPinch,r=n.inputEvent,a=n.targets,s=n.originalDatas;if(t.isPinch){var l="onPinch".concat(a?"Group":"","End"),c=Ye(i,n,{isDrag:e});a&&(c.targets=a),Ht(i,l,c);var d=t.ables,f="drag".concat(a?"Group":"","ControlEnd");return d.forEach(function(h){!h[f]||h[f](i,ht(ht({},n),{isDrag:e,datas:s[h.name],inputEvent:r,isPinch:!0}))}),e}},pinchGroupStart:function(i,n){return this.pinchStart(i,ht(ht({},n),{targets:i.props.targets}))},pinchGroup:function(i,n){return this.pinch(i,ht(ht({},n),{targets:i.props.targets}))},pinchGroupEnd:function(i,n){return this.pinchEnd(i,ht(ht({},n),{targets:i.props.targets}))}});function zn(i,n,t){var e=t.originalDatas;e.groupable=e.groupable||{};var r=e.groupable;r.childDatas=r.childDatas||[];var a=r.childDatas;return i.moveables.map(function(s,l){return a[l]=a[l]||{},a[l][n]=a[l][n]||{},ht(ht({},t),{datas:a[l][n],originalDatas:a[l]})})}function Pa(i,n,t,e,r,a,s){var l=!!t.match(/Start$/g),c=!!t.match(/End$/g),d=r.isPinch,f=r.datas,h=zn(i,n.name,r),v=i.moveables,m=h.map(function(S,T){var k=v[T],E=k.state,P=E.gestos,R=S;if(l)R=new fi(s).dragStart(e,S);else{if(P[s]||(P[s]=f.childGestos[T]),!P[s])return;R=Xi(S,E,e,d,a,s)}var B=n[t](k,ht(ht({},R),{parentFlag:!0}));return c&&(P[s]=null),B});return l&&(f.childGestos=v.map(function(S){return S.state.gestos[s]})),m}function Dn(i,n,t,e,r,a){void 0===r&&(r=function(f,h){return h});var s=!!t.match(/End$/g),l=zn(i,n.name,e),c=i.moveables;return l.map(function(f,h){var m,v=c[h];m=r(v,f);var S=n[t](v,ht(ht({},m),{parentFlag:!0}));return S&&a&&a(v,f,S,h),s&&(v.state.gestos={}),S})}var V1=["left","right","center"],j1=["top","bottom","middle"],Gn={start:"left",end:"right",center:"center"},Nn={start:"top",end:"bottom",center:"middle"};function yi(i,n){var t=i.props,e=t.snappable,r=t.bounds,a=t.innerBounds,s=t.verticalGuidelines,l=t.horizontalGuidelines,c=t.snapGridWidth,d=t.snapGridHeight,f=i.state,h=f.guidelines;return!(!e||!f.enableSnap||n&&!0!==e&&e.indexOf(n)<0||!(c||d||r||a||h&&h.length||s&&s.length||l&&l.length))}function ka(i){return!1===i?{}:!0!==i&&i?i:{left:!0,right:!0,top:!0,bottom:!0}}function Ia(i,n){var t=function(i,n){var t=ka(i),e={};for(var r in t)r in n&&t[r]&&(e[r]=n[r]);return e}(i,n),e=j1.filter(function(a){return a in t}),r=V1.filter(function(a){return a in t});return{horizontal:e.map(function(a){return t[a]}),vertical:r.map(function(a){return t[a]})}}function Br(i,n,t,e){var a=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];for(var t=i.length-1,e=0;e<t;++e){var r=i[e];if(!vr(r))return r}return i[t]}(e,i.props.snapThreshold,5);return ip(i.state.guidelines,n,t,a)}function ip(i,n,t,e){return{vertical:op(i,"vertical",n,e),horizontal:op(i,"horizontal",t,e)}}function rp(i,n,t){var e=Ia(i.props.snapDirections,n);return Br(i,e.vertical,e.horizontal,t)}function Ra(i){var n=i.isSnap;if(!n)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var t=i.posInfos[0],e=t.guidelineInfos[0];return{isSnap:n,offset:e.offset,dist:e.dist,pos:t.pos,guideline:e.guideline}}function op(i,n,t,e){if(!i||!i.length)return{isSnap:!1,index:-1,posInfos:[]};var a="vertical"===n?0:1,s=t.map(function(c,d){var f=i.map(function(h){var m=c-h.pos[a];return{offset:m,dist:Math.abs(m),guideline:h}}).filter(function(h){return!(h.guideline.type!==n||h.dist>e)}).sort(function(h,v){return h.dist-v.dist});return{pos:c,index:d,guidelineInfos:f}}).filter(function(c){return c.guidelineInfos.length>0}).sort(function(c,d){return c.guidelineInfos[0].dist-d.guidelineInfos[0].dist}),l=s.length>0;return{isSnap:l,index:l?s[0].index:-1,posInfos:s}}function ap(i,n){var t=Math.abs(i.offset),e=Math.abs(n.offset);return i.isBound&&n.isBound?e-t:i.isBound?-1:n.isBound?1:i.isSnap&&n.isSnap?e-t:i.isSnap?-1:n.isSnap||t<Fe?1:e<Fe?-1:t-e}function Fr(i,n){return i.slice().sort(function(t,e){return t.sign[n]?e.sign[n]?ap({isBound:t.isBound,isSnap:t.isSnap,offset:t.offset[n]},{isBound:e.isBound,isSnap:e.isSnap,offset:e.offset[n]}):-1:1})[0]}function sp(i,n){var t=ko([n[0][0],n[1][0]]),e=ko([n[0][1],n[1][1]]);return{vertical:t<=i[0],horizontal:e<=i[1]}}function za(i,n){var s,l,t=n[0],e=n[1],r=e[0]-t[0],a=e[1]-t[1];return Math.abs(r)<Fe&&(r=0),Math.abs(a)<Fe&&(a=0),r?a?(s=a/r*(i[0]-t[0])+t[1],l=i[1]):(s=t[1],l=i[1]):(s=t[0],l=i[0]),s-l}function lp(i,n,t,e){return void 0===e&&(e=Fe),i.every(function(r){var a=za(r,n);return a<=0===t||Math.abs(a)<=e})}function cp(i,n,t,e,r){return void 0===r&&(r=0),e&&n-r<=i||!e&&i<=t+r?{isBound:!0,offset:e?n-i:t-i}:{isBound:!1,offset:0}}function Bn(i,n,t,e,r,a){var s=n[0],l=n[1],c=i[0],d=t[0],f=t[1],h=Nr(f[1]-d[1]),m=l,S=s,T=-s/l;if(!Nr(f[0]-d[0]))return a&&!S?{isBound:!1,offset:0}:m?cp(T*(d[0]-c[0])+c[1],d[1],f[1],e,r):(E=d[0]-c[0],{isBound:P=Math.abs(E)<=(r||0),offset:P?E:0});if(!h){if(a&&!m)return{isBound:!1,offset:0};if(S)return cp((d[1]-c[1])/T+c[0],d[0],f[0],e,r);var P,E=d[1]-c[1];return{isBound:P=Math.abs(E)<=(r||0),offset:P?E:0}}return{isBound:!1,offset:0}}function pp(i,n,t){return n.map(function(e){var r=function(i,n){var t=n.line,r=n.verticalSign,a=n.horizontalSign,s=n.lineConstants,l=i.props.innerBounds;if(!l)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var c=l.left,d=l.top,f=l.width,h=l.height,v=[[c,d],[c,d+h]],m=[[c,d],[c+f,d]],S=[[c+f,d],[c+f,d+h]],T=[[c,d+h],[c+f,d+h]];if(lp([[c,d],[c+f,d],[c,d+h],[c+f,d+h]],t,n.centerSign))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var k=Bn(t,s,m,r),E=Bn(t,s,T,r),P=Bn(t,s,v,a),R=Bn(t,s,S,a),B=k.isBound&&E.isBound,V=k.isBound||E.isBound,L=P.isBound&&R.isBound,Z=P.isBound||R.isBound,q=mi(k.offset,E.offset),tt=mi(P.offset,R.offset),$=[0,0],ft=!1,X=!1;return Math.abs(tt)<Math.abs(q)?($=[q,0],ft=V,X=B):($=[0,tt],ft=Z,X=L),{isAllBound:X,isVerticalBound:V,isHorizontalBound:Z,isBound:ft,offset:$}}(i,e),a=r.isBound,s=r.offset,l=r.isVerticalBound,c=r.isHorizontalBound,d=e.multiple,f=mn({datas:t,distX:s[0],distY:s[1]}).map(function(h,v){return h*(d[v]?2/d[v]:0)});return{sign:d,isBound:a,isVerticalBound:l,isHorizontalBound:c,isSnap:!1,offset:f}})}function Ga(i,n,t,e){var r=i.state,l=ei(r.allMatrix,100,100,r.is3d?4:3),c=be(l,[0,0]);return function(i,n){var t=[],e=i[0],r=i[1];return e&&r?t.push([[0,2*r],i,[-e,r]],[[2*e,0],i,[e,-r]]):e?(t.push([[2*e,0],[e,1],[e,-1]]),n&&t.push([[0,-1],[e,-1],[-e,-1]],[[0,1],[e,1],[-e,1]])):r?(t.push([[0,2*r],[1,r],[-1,r]]),n&&t.push([[-1,0],[-1,r],[-1,-r]],[[1,0],[1,r],[1,-r]])):t.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),t}(t,e).map(function(d){var f=d[0],h=d[1],v=d[2],m=[be(l,h),be(l,v)],S=function(i){var n=i[0],t=i[1],e=t[0]-n[0],r=t[1]-n[1];Math.abs(e)<Ce&&(e=0),Math.abs(r)<Ce&&(r=0);var a=0,s=0,l=0;return e?r?(s=1,l=(a=-r/e)*n[0]-n[1]):(s=1,l=-n[1]):(a=-1,l=n[0]),[a,s,l].map(function(c){return ie(c,Ce)})}(m),T=sp(c,m),k=T.vertical,E=T.horizontal;return{multiple:f,centerSign:za(c,m)<=0,verticalSign:k,horizontalSign:E,lineConstants:S,line:[be(n,h),be(n,v)]}})}function dp(i,n,t,e){var r=e?i.map(function(a){return Rn(a,e)}):i;return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].some(function(a){var s=za(t,a)<=0;return!lp(n,a,s)})}function Na(i,n,t){var e=i||{},r=e.position,s=e.left,c=e.top,f=e.right,v=e.bottom,S={position:void 0===r?"client":r,left:void 0===s?-1/0:s,top:void 0===c?-1/0:c,right:void 0===f?1/0:f,bottom:void 0===v?1/0:v};return{vertical:up(S,n,!0),horizontal:up(S,t,!1)}}function Lr(i,n){var t=i.state,e=t.containerClientRect,s=e.clientLeft,l=e.clientTop,c=t.snapOffset,d=c.left,f=c.top,m=n||i.props.bounds||{},T="css"===(m.position||"client"),k=m.left,P=m.top,B=m.right,V=void 0===B?T?-1/0:1/0:B,L=m.bottom,Z=void 0===L?T?-1/0:1/0:L;return T&&(V=e.clientWidth+c.right-d-V,Z=e.clientHeight+c.bottom-f-Z),{left:(void 0===k?-1/0:k)+d-s,right:V+d-s,top:(void 0===P?-1/0:P)+f-l,bottom:Z+f-l}}function up(i,n,t){var e=i[t?"left":"top"],r=i[t?"right":"bottom"],a=Math.min.apply(Math,n),s=Math.max.apply(Math,n),l=[];return e+1>a&&l.push({isBound:!0,offset:a-e,pos:e}),r-1<s&&l.push({isBound:!0,offset:s-r,pos:r}),l.length||l.push({isBound:!1,offset:0,pos:0}),l.sort(function(c,d){return Math.abs(d.offset)-Math.abs(c.offset)})}function hp(i,n,t){return(t?i.map(function(r){return Rn(r,t)}):i).some(function(r){return r[0]<n.left&&Math.abs(r[0]-n.left)>.1||r[0]>n.right&&Math.abs(r[0]-n.right)>.1||r[1]<n.top&&Math.abs(r[1]-n.top)>.1||r[1]>n.bottom&&Math.abs(r[1]-n.bottom)>.1})}function Ba(i,n){return function(i,n){var t,a=i.size,s=i.pos,l=i.zoom,d="horizontal"===i.direction,f=d?"Y":"X";return n.createElement("div",{key:i.key,className:i.classNames.join(" "),style:(t={},t[d?"width":"height"]="".concat(a),t.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(f,"(-50%) scale").concat(f,"(").concat(l,")"),t)})}(ht(ht({},i),{classNames:Jt([jt("line","guideline",i.direction)],i.classNames,!0).filter(function(t){return t}),size:i.size||"".concat(i.sizeValue,"px"),pos:i.pos||i.posValue.map(function(t){return"".concat(ie(t,.1),"px")})}),n)}function fp(i,n,t,e,r,a,s,l){var c=i.props.zoom;return t.map(function(d,f){var h=d.type,v=d.pos,m=[0,0];return m[s]=e,m[s?0:1]=-r+v,Ba({key:"".concat(n,"TargetGuideline").concat(f),classNames:[jt("target","bold",h)],posValue:m,sizeValue:a,zoom:c,direction:n},l)})}function vp(i,n,t,e,r,a){var s=i.props,l=s.zoom,c=s.isDisplayInnerSnapDigit,d="horizontal"===n?Gn:Nn,f=r[d.start],h=r[d.end];return t.filter(function(v){var S=v.elementRect;if(v.hide)return!1;if(c&&S){var T=S.rect;if(T[d.start]<=f&&h<=T[d.end])return!1}return!0}).map(function(v,m){var S=v.pos,T=v.size,k=v.element,E=v.className,P=[-e[0]+S[0],-e[1]+S[1]];return Ba({key:"".concat(n,"-default-guideline-").concat(m),classNames:k?[jt("bold"),E]:[jt("normal"),E],direction:n,posValue:P,sizeValue:T,zoom:l},a)})}function tr(i,n,t,e,r,a,s,l){var c,d=i.props,f=d.snapDigit,h=void 0===f?0:f,v=d.isDisplaySnapDigit,m=void 0===v||v,S=d.snapDistFormat,T=void 0===S?function(V,L){return V}:S,k=d.zoom,E="horizontal"===n?"X":"Y",P="vertical"===n?"height":"width",R=Math.abs(r),B=m?parseFloat(R.toFixed(h)):0;return l.createElement("div",{key:"".concat(n,"-").concat(t,"-guideline-").concat(e),className:jt("guideline-group",n),style:(c={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},c[P]="".concat(R,"px"),c)},Ba({direction:n,classNames:[jt(t),s],size:"100%",posValue:[0,0],sizeValue:R,zoom:k},l),l.createElement("div",{className:jt("size-value","gap"),style:{transform:"translate".concat(E,"(-50%) scale(").concat(k,")")}},B>0?T(B,n):""))}function Fa(i,n,t,e,r){var a=function(i,n,t,e){var r=n[0]-i[0],a=n[1]-i[1];if(Math.abs(r)<Ce&&(r=0),Math.abs(a)<Ce&&(a=0),!r)return e?[0,0]:[0,t];if(!a)return e?[t,0]:[0,0];var s=a/r,l=i[1]-s*i[0];return e?[t,s*(n[0]+t)+l-n[1]]:[(n[1]+t-l)/s-n[0],t]}(i,n,t,e);if(!a)return{isOutside:!1,offset:[0,0]};var s=on(i,n),l=on(a,i),c=on(a,n),d=l>s||c>s,f=mn({datas:r,distX:a[0],distY:a[1]});return{offset:[f[0],f[1]],isOutside:d}}function Hr(i,n){return i.isBound?i.offset:n.isSnap?Ra(n).offset:0}function fx(i,n,t,e,r,a){if(!yi(i,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=Ta(a.absolutePoses,[n,t]),l=qe(s),c=l.left,d=l.right,f=l.top,h=l.bottom,v={horizontal:s.map(function(yt){return yt[1]}),vertical:s.map(function(yt){return yt[0]})},T=Zr(i,r,Ia(ka(i.props.snapDirections),{left:c,right:d,top:f,bottom:h,center:(c+d)/2,middle:(f+h)/2}),v),k=T.vertical,E=T.horizontal,P=function(i,n,t){var e,a=pp(i,Ga(i,n,[0,0],!1).map(function(v){return ht(ht({},v),{multiple:v.multiple.map(function(m){return 2*Math.abs(m)})})}),t),s=Fr(a,0),l=Fr(a,1),c=0,d=0,f=s.isVerticalBound||l.isVerticalBound,h=s.isHorizontalBound||l.isHorizontalBound;return(f||h)&&(e=function(i,n){var t=i.datas,f=t.absoluteOrigin,h=t.is3d?4:3;return qt(ke(t.matrix,oe(t.startDragDist,[i.distX,i.distY]),h),f)}({datas:t,distX:-s.offset[0],distY:-l.offset[1]}),c=e[0],d=e[1]),{vertical:{isBound:f,offset:c},horizontal:{isBound:h,offset:d}}}(i,s,a),R=P.vertical,B=P.horizontal,V=k.isSnap,L=E.isSnap,Z=k.isBound||R.isBound,q=E.isBound||B.isBound,ft=function(i,n,t,e,r){var a=n[0],s=n[1],l=t[0],c=t[1],d=e[0],f=e[1],h=r[0],v=r[1],m=-h,S=-v;if(i&&a&&s){m=0,S=0;var T=[];if(l&&c?T.push([0,v],[h,0]):l?T.push([h,0]):c?T.push([0,v]):d&&f?T.push([0,v],[h,0]):d?T.push([h,0]):f&&T.push([0,v]),T.length){T.sort(function(R,B){return an(qt([a,s],R))-an(qt([a,s],B))});var k=T[0];if(k[0]&&Math.abs(a)>Ce)m=-k[0],S=s*Math.abs(a+m)/Math.abs(a)-s;else if(k[1]&&Math.abs(s)>Ce){var E=s;S=-k[1],m=a*Math.abs(s+S)/Math.abs(E)-a}if(i&&c&&l)if(Math.abs(m)>Ce&&Math.abs(m)<Math.abs(h))m*=P=Math.abs(h)/Math.abs(m),S*=P;else if(Math.abs(S)>Ce&&Math.abs(S)<Math.abs(v)){var P;m*=P=Math.abs(v)/Math.abs(S),S*=P}else m=mi(-h,m),S=mi(-v,S)}}else m=a||l?-h:0,S=s||c?-v:0;return[m,S]}(e,[n,t],[Z,q],[V,L],[mi(k.offset,R.offset),mi(E.offset,B.offset)]);return[{isBound:Z,isSnap:V,offset:ft[0]},{isBound:q,isSnap:L,offset:ft[1]}]}function Zr(i,n,t,e){void 0===e&&(e=t);var r=Na(Lr(i),e.vertical,e.horizontal),a=r.horizontal,s=r.vertical,l=n?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Br(i,t.vertical,t.horizontal),c=l.horizontal,d=l.vertical,f=Hr(a[0],c),h=Hr(s[0],d),v=Math.abs(f),m=Math.abs(h);return{horizontal:{isBound:a[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:v,bounds:a,snap:c},vertical:{isBound:s[0].isBound,isSnap:d.isSnap,snapIndex:d.index,offset:h,dist:m,bounds:s,snap:d}}}function gp(i,n,t,e,r){var a=Na(n,t,e),s=a.horizontal,l=a.vertical,c=ip(i,t,e,r),d=c.horizontal,f=c.vertical,h=Hr(s[0],d),v=Hr(l[0],f),m=Math.abs(h),S=Math.abs(v);return{horizontal:{isBound:s[0].isBound,isSnap:d.isSnap,snapIndex:d.index,offset:h,dist:m,bounds:s,snap:d},vertical:{isBound:l[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:v,dist:S,bounds:l,snap:f}}}function mp(i,n){return i.isBound?i.offset:n.isSnap?n.offset:0}function La(i){var n=i.state,t=n.snapOffset,e=n.containerClientRect,r=e.overflow,a=e.scrollHeight,s=e.scrollWidth,l=e.clientHeight,c=e.clientWidth,d=e.clientLeft,f=e.clientTop,h=i.props,v=h.snapGap,m=void 0===v||v,S=h.verticalGuidelines,T=h.horizontalGuidelines,k=h.snapThreshold,E=void 0===k?5:k,P=h.snapGridWidth,R=void 0===P?0:P,B=h.snapGridHeight,V=void 0===B?0:B,L=h.maxSnapElementGuidelineDistance,Z=void 0===L?1/0:L,q=qe(je(i.state)),tt=q.top,$=q.left,ft=q.bottom,X=q.right,ct={top:tt,left:$,bottom:ft,right:X,center:($+X)/2,middle:(tt+ft)/2},yt=function(i){var n=i.state,t=i.props.elementGuidelines,e=void 0===t?[]:t;if(!e.length)return n.elementRects=[],[];var r=(n.elementRects||[]).filter(function(v){return!v.refresh}),a=e.map(function(v){return rn(v)&&"element"in v?ht(ht({},v),{element:$i(v.element,!0)}):{element:$i(v,!0)}}).filter(function(v){return v.element}),s=function(i,n){return hr(i,n,lc)}(r.map(function(v){return v.element}),a.map(function(v){return v.element})),c=s.added,d=[];s.maintained.forEach(function(v){d[v[1]]=r[v[0]]}),function(i,n){if(!n.length)return[];var t=i.state,r=t.targetClientRect,a=r.top,s=r.left,l=t.rootMatrix,d=t.is3d?4:3,f=function(i,n,t){var e=Ae(i,[n.clientLeft,n.clientTop],t);return[n.left+e[0],n.top+e[1]]}(l,t.containerClientRect,d),h=f[0],v=f[1],S=wr(je(t)),E=qt([S.minX,S.minY],xi(l,[s-h,a-v],d)).map(function(B){return function(i){return Math.round(i%1==-.5?i-1:i)}(B)}),P=E[0],R=E[1];return n.map(function(B){var V=B.element.getBoundingClientRect(),L=V.left-h,Z=V.top-v,q=Z+V.height,tt=L+V.width,$=xi(l,[L,Z],d),ft=$[0],X=$[1],ct=xi(l,[tt,q],d),yt=ct[0],xt=ct[1];return ht(ht({},B),{rect:{left:ft+P,right:yt+P,top:X+R,bottom:xt+R,center:(ft+yt)/2+P,middle:(X+xt)/2+R}})})}(i,c.map(function(v){return a[v]})).map(function(v,m){d[c[m]]=v}),n.elementRects=d;var f=ka(i.props.elementSnapDirections),h=[];return d.forEach(function(v){var m=v.element,S=v.top,k=v.left,P=v.right,B=v.bottom,L=v.center,q=v.middle,$=v.className,ft=v.rect,X=Ia({top:void 0===S?f.top:S,right:void 0===P?f.right:P,left:void 0===k?f.left:k,bottom:void 0===B?f.bottom:B,center:void 0===L?f.center:L,middle:void 0===q?f.middle:q},ft),ct=X.horizontal,xt=ft.top,Pt=ft.left,Ot=ft.right-Pt,Gt=ft.bottom-xt,Tt=[Ot,Gt];X.vertical.forEach(function(At){h.push({type:"vertical",element:m,pos:[ie(At,.1),xt],size:Gt,sizes:Tt,className:$,elementRect:v})}),ct.forEach(function(At){h.push({type:"horizontal",element:m,pos:[Pt,ie(At,.1)],size:Ot,sizes:Tt,className:$,elementRect:v})})}),h}(i),xt=Jt([],yt,!0);return m&&xt.push.apply(xt,function(i,n,t){var e=i.props,r=e.maxSnapElementGuidelineDistance,a=void 0===r?1/0:r,s=e.maxSnapElementGapDistance,l=void 0===s?1/0:s,c=i.state.elementRects,d=[];return[["vertical",Gn,Nn],["horizontal",Nn,Gn]].forEach(function(f){var h=f[0],v=f[1],m=f[2],S=n[v.start],T=n[v.end],k=n[v.center],E=n[m.start],P=n[m.end];function R(L){var Z=L.rect;return Z[v.end]<S+t?S-Z[v.end]:T-t<Z[v.start]?Z[v.start]-T:-1}var B=c.filter(function(L){var Z=L.rect;return!(Z[m.start]>P||Z[m.end]<E)&&R(L)>0}).sort(function(L,Z){return R(L)-R(Z)}),V=[];B.forEach(function(L){B.forEach(function(Z){if(L!==Z){var q=L.rect,tt=Z.rect;q[m.start]>tt[m.end]||tt[m.start]>q[m.end]||V.push([L,Z])}})}),V.forEach(function(L){var Z=L[0],q=L[1],tt=Z.rect,$=q.rect,ft=tt[v.start],X=tt[v.end],ct=$[v.start],yt=$[v.end],xt=0,Pt=0,Ot=!1,Gt=!1,Tt=!1;if(X<=S&&T<=ct){if(Gt=!0,Pt=X+(xt=(ct-X-(T-S))/2)+(T-S)/2,Math.abs(Pt-k)>t)return}else if(X<ct&&yt<S+t){if(Ot=!0,Pt=yt+(xt=ct-X),Math.abs(Pt-S)>t)return}else{if(!(X<ct&&T-t<ft))return;if(Tt=!0,Pt=ft-(xt=ct-X),Math.abs(Pt-T)>t)return}!xt||!xp(n,$,h,a)||xt>l||d.push({type:h,pos:"vertical"===h?[Pt,0]:[0,Pt],element:q.element,size:0,className:q.className,isStart:Ot,isCenter:Gt,isEnd:Tt,gap:xt,hide:!0,gapRects:[Z,q]})})}),d}(i,ct,E)),xt.push.apply(xt,function(i,n,t,e,r,a){void 0===r&&(r=0),void 0===a&&(a=0);var s=[];if(n)for(var l=0;l<=e;l+=n)s.push({type:"horizontal",pos:[0,ie(l-a,.1)],size:t,hide:!0});if(i)for(l=0;l<=t;l+=i)s.push({type:"vertical",pos:[ie(l-r,.1),0],size:e,hide:!0});return s}(R,V,r?s:c,r?a:l,d,f)),xt.push.apply(xt,yp(T||!1,S||!1,r?s:c,r?a:l,d,f,t)),xt.filter(function(Pt){var Gt=Pt.elementRect;return!Pt.element||!Gt||xp(ct,Gt.rect,Pt.type,Z)})}function xp(i,n,t,e){return"horizontal"===t?Math.abs(i.right-n.left)<=e||Math.abs(i.left-n.right)<=e||i.left<=n.right&&n.left<=i.right:"vertical"!==t||Math.abs(i.bottom-n.top)<=e||Math.abs(i.top-n.bottom)<=e||i.top<=n.bottom&&n.top<=i.bottom}function yp(i,n,t,e,r,a,s){void 0===r&&(r=0),void 0===a&&(a=0),void 0===s&&(s={left:0,top:0,right:0,bottom:0});var l=[],c=s.left,d=s.top,v=t+s.right-c,m=e+s.bottom-d;return i&&i.forEach(function(S){var T=rn(S)?S:{pos:S};l.push({type:"horizontal",pos:[c,ie(T.pos-a+d,.1)],size:v,className:T.className})}),n&&n.forEach(function(S){var T=rn(S)?S:{pos:S};l.push({type:"vertical",pos:[ie(T.pos-r+c,.1),d],size:m,className:T.className})}),l}function Ha(i){var n=i.state;if(!n.guidelines||!n.guidelines.length){var t=i.state.container,e=i.props.snapContainer||t,r=n.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(t!==e){var s=$i(e,!0);if(s){var l=Qi(s),c=tp(n,[l.left-r.left,l.top-r.top]),d=tp(n,[l.right-r.right,l.bottom-r.bottom]);a.left=ie(c[0],1e-5),a.top=ie(c[1],1e-5),a.right=ie(d[0],1e-5),a.bottom=ie(d[1],1e-5)}}n.snapOffset=a,n.guidelines=La(i),n.enableSnap=!0}}function wp(i,n,t,e,r,a){var s=ei(i,n,t,a?4:3);return Ta(s,qt(r,be(s,e)))}function Cx(i,n,t,e,r,a){var l=function(i,n,t){var e=[];if(t)1!==Math.abs(n[0])||1!==Math.abs(n[1])?e.push([n,[-1,-1]],[n,[-1,1]],[n,[1,-1]],[n,[1,1]]):e.push([n,[i[0],-i[1]]],[n,[-i[0],i[1]]]),e.push([n,i]);else if(i[0]&&i[1]||!i[0]&&!i[1]){var r=i[0]?i:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(l){var c=[s*r[0],l*r[1]];n[0]===c[0]&&n[1]===c[1]||e.push([n,c])})})}else i[0]?(1===Math.abs(n[0])?[1]:[1,-1]).forEach(function(s){e.push([[n[0],-1],[s*i[0],-1]],[[n[0],0],[s*i[0],0]],[[n[0],1],[s*i[0],1]])}):i[1]&&(1===Math.abs(n[1])?[1]:[1,-1]).forEach(function(l){e.push([[-1,n[1]],[-1,l*i[1]]],[[0,n[1]],[0,l*i[1]]],[[1,n[1]],[1,l*i[1]]])});return e}(t,a.fixedDirection,e),c=Ga(i,n,t,e),d=Jt(Jt([],function(i,n,t,e,r,a){return t.map(function(s){var l=s[0],c=s[1],d=be(n,l),f=be(n,c),h=e?function(i,n,t,e){var r=function(i,n,t){var e=Lr(i),r=e.left,a=e.top,s=e.right,l=e.bottom,c=t[0],d=t[1],f=qt(t,n),h=f[0],v=f[1];Math.abs(h)<Fe&&(h=0),Math.abs(v)<Fe&&(v=0);var m=v>0,S=h>0,T={isBound:!1,offset:0,pos:0},k={isBound:!1,offset:0,pos:0};if(0===h&&0===v)return{vertical:T,horizontal:k};if(0===h)m?l<d&&(k.pos=l,k.offset=d-l):a>d&&(k.pos=a,k.offset=d-a);else if(0===v)S?s<c&&(T.pos=s,T.offset=c-s):r>c&&(T.pos=r,T.offset=c-r);else{var E=v/h,P=t[1]-E*c,R=0,B=0,V=!1;S&&s<=c?(R=E*s+P,B=s,V=!0):!S&&c<=r&&(R=E*r+P,B=r,V=!0),V&&(R<a||R>l)&&(V=!1),V||(m&&l<=d?(B=((R=l)-P)/E,V=!0):!m&&d<=a&&(B=((R=a)-P)/E,V=!0)),V&&(T.isBound=!0,T.pos=B,T.offset=c-B,k.isBound=!0,k.pos=R,k.offset=d-R)}return{vertical:T,horizontal:k}}(i,n,t),a=r.horizontal,s=r.vertical,l=e?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(i,n,t){var e=t[0],r=t[1],a=n[0],s=n[1],l=qt(t,n),c=l[0],d=l[1],f=d>0,h=c>0;c=Nr(c),d=Nr(d);var v={isSnap:!1,offset:0,pos:0},m={isSnap:!1,offset:0,pos:0};if(0===c&&0===d)return{vertical:v,horizontal:m};var S=Br(i,c?[e]:[],d?[r]:[]),T=S.vertical,k=S.horizontal;T.posInfos.filter(function(yt){var xt=yt.pos;return h?xt>=a:xt<=a}),k.posInfos.filter(function(yt){var xt=yt.pos;return f?xt>=s:xt<=s}),T.isSnap=T.posInfos.length>0,k.isSnap=k.posInfos.length>0;var E=Ra(T),P=E.isSnap,R=E.guideline,B=Ra(k),V=B.isSnap,L=B.guideline,Z=V?L.pos[1]:0,q=P?R.pos[0]:0;if(0===c)V&&(m.isSnap=!0,m.pos=L.pos[1],m.offset=r-m.pos);else if(0===d)P&&(v.isSnap=!0,v.pos=q,v.offset=e-q);else{var tt=d/c,$=t[1]-tt*e,ft=0,X=0,ct=!1;P?(ft=tt*(X=q)+$,ct=!0):V&&(X=((ft=Z)-$)/tt,ct=!0),ct&&(v.isSnap=!0,v.pos=X,v.offset=e-X,m.isSnap=!0,m.pos=ft,m.offset=r-ft)}return{vertical:v,horizontal:m}}(i,n,t),c=l.horizontal,d=l.vertical,f=mp(a,c),h=mp(s,d),v=Math.abs(f),m=Math.abs(h);return{horizontal:{isBound:a.isBound,isSnap:c.isSnap,offset:f,dist:v},vertical:{isBound:s.isBound,isSnap:d.isSnap,offset:h,dist:m}}}(i,d,f,r):Zr(i,r,{vertical:[f[0]],horizontal:[f[1]]}),v=h.horizontal,m=v.offset,S=v.isBound,T=v.isSnap,k=h.vertical,E=k.offset,P=k.isBound,R=k.isSnap,B=qt(c,l);if(!E&&!m)return{isBound:P||S,isSnap:R||T,sign:B,offset:[0,0]};var V=function(i,n,t,e){var r=we(i,n)/Math.PI*180,a=t.vertical,d=t.horizontal,m=r%180,S=m<3||m>177,T=m>87&&m<93;return d.dist<a.dist&&(a.isBound||a.isSnap&&!T&&(!e||!S))?"vertical":!d.isBound&&(!d.isSnap||S||e&&T)?"":"horizontal"}(d,f,h,e);if(!V)return{sign:B,isBound:!1,isSnap:!1,offset:[0,0]};var L="vertical"===V,Z=[0,0];return Z=(Z=e||1!==Math.abs(c[0])||1!==Math.abs(c[1])||l[0]===c[0]||l[1]===c[1]?Fa(d,f,-(L?E:m),L,a).offset:mn({datas:a,distX:-E,distY:-m})).map(function(q,tt){return q*(B[tt]?2/B[tt]:0)}),{sign:B,isBound:L?P:S,isSnap:L?R:T,offset:Z}})}(i,n,l,e,r,a),!0),pp(i,c,a),!0),f=Fr(d,0),h=Fr(d,1);return{width:{isBound:f.isBound,offset:f.offset[0]},height:{isBound:h.isBound,offset:h.offset[1]}}}function bp(i,n,t,e,r,a,s,l){for(var c=je(i.state),d=i.props.keepRatio,f=0,h=0,v=0;v<2;++v){var S=Cx(i,n(f,h),r,d,s,l),T=S.width,k=S.height,E=T.isBound,P=k.isBound,R=T.offset,B=k.offset;if(1===v&&(E||(R=0),P||(B=0)),0===v&&s&&!E&&!P)return[0,0];if(d){var V=Math.abs(R)*(t?1/t:1),L=Math.abs(B)*(e?1/e:1);(E&&P?V<L:P||!E&&V<L)?R=t*B/e:B=e*R/t}f+=R,h+=B}if(r[0]&&r[1]){var q=function(i,n,t,e,r){var a=[-t[0],-t[1]],s=i.state,l=s.width,c=s.height,d=i.props.bounds,f=1/0,h=1/0;if(d){var m=d.left,S=void 0===m?-1/0:m,T=d.top,k=void 0===T?-1/0:T,E=d.right,P=void 0===E?1/0:E,R=d.bottom,B=void 0===R?1/0:R;[[t[0],-t[1]],[-t[0],t[1]]].forEach(function(V){var L=V[0]!==a[0],Z=V[1]!==a[1],q=be(n,V),tt=360*we(e,q)/Math.PI;if(Z){var $=q.slice();(Math.abs(tt-360)<2||Math.abs(tt-180)<2)&&($[1]=e[1]);var ft=Fa(e,$,(e[1]<q[1]?B:k)-q[1],!1,r),ct=ft.offset[1],yt=ft.isOutside;isNaN(ct)||(h=c+(yt?1:-1)*Math.abs(ct))}if(L){$=q.slice(),(Math.abs(tt-90)<2||Math.abs(tt-270)<2)&&($[0]=e[0]);var xt=Fa(e,$,(e[0]<q[0]?P:S)-q[0],!0,r),Pt=xt.offset[0],Ot=xt.isOutside;isNaN(Pt)||(f=l+(Ot?1:-1)*Math.abs(Pt))}})}return{maxWidth:f,maxHeight:h}}(i,c,r,a,l),tt=q.maxWidth,$=q.maxHeight,ft=function(i,n,t,e,r,a,s,l,c){var d=be(n,s),f=Zr(i,l,{vertical:[d[0]],horizontal:[d[1]]}),h=f.horizontal.offset,v=f.vertical.offset;if(v||h){var m=mn({datas:c,distX:-v,distY:-h}),T=m[1];return[Math.min(r||1/0,t+s[0]*m[0])-t,Math.min(a||1/0,e+s[1]*T)-e]}return[0,0]}(i,n(f,h).map(function(yt){return yt.map(function(xt){return ie(xt,1e-4)})}),t+f,e+h,tt,$,r,s,l);f+=R=ft[0],h+=B=ft[1]}return[f,h]}function _p(i){var n=[];return i.forEach(function(t){t.guidelineInfos.forEach(function(e){var r=e.guideline;n.indexOf(r)>-1||n.push(r)})}),n}function Cp(i,n,t,e,r,a){var s=Na(Lr(i,a),n,t),c=s.horizontal;s.vertical.forEach(function(v){v.isBound&&e.push({type:"bounds",pos:v.pos})}),c.forEach(function(v){v.isBound&&r.push({type:"bounds",pos:v.pos})});var d=function(i){var n=i.props.innerBounds;if(!n)return{vertical:[],horizontal:[]};var t=i.getRect(),l=[t.pos1,t.pos2,t.pos3,t.pos4],c=be(l,[0,0]),d=n.left,f=n.top,h=n.width,v=n.height,m=[[d,f],[d,f+v]],S=[[d,f],[d+h,f]],T=[[d+h,f],[d+h,f+v]],k=[[d,f+v],[d+h,f+v]],E=Ga(i,l,[0,0],!1),P=[],R=[],B={top:!1,bottom:!1,left:!1,right:!1};return E.forEach(function(V){var L=V.line,Z=V.lineConstants,q=sp(c,L),tt=q.horizontal,$=q.vertical,ft=Bn(L,Z,S,$,1,!0),X=Bn(L,Z,k,$,1,!0),ct=Bn(L,Z,m,tt,1,!0),yt=Bn(L,Z,T,tt,1,!0);ft.isBound&&!B.top&&(P.push(f),B.top=!0),X.isBound&&!B.bottom&&(P.push(f+v),B.bottom=!0),ct.isBound&&!B.left&&(R.push(d),B.left=!0),yt.isBound&&!B.right&&(R.push(d+h),B.right=!0)}),{horizontal:P,vertical:R}}(i),h=d.horizontal;d.vertical.forEach(function(v){Sn(e,function(m){return"bounds"===m.type&&m.pos===v})>=0||e.push({type:"bounds",pos:v})}),h.forEach(function(v){Sn(r,function(m){return"bounds"===m.type&&m.pos===v})>=0||r.push({type:"bounds",pos:v})})}var Ex=Ma("",["resizable","scalable"]),Mx={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function,maxSnapElementGuidelineDistance:Number,maxSnapElementGapDistance:Number},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(i,n){var t=i.state,e=t.top,r=t.left,a=t.pos1,s=t.pos2,l=t.pos3,c=t.pos4,d=t.snapRenderInfo;if(!d||!yi(i,""))return[];t.guidelines=La(i);var f=Math.min(a[0],s[0],l[0],c[0]),h=Math.min(a[1],s[1],l[1],c[1]),v=d.externalPoses||[],m=je(i.state),S=[],T=[],k=[],E=[],P=[],R=qe(m),B=R.width,V=R.height,L=R.top,Z=R.left,q=R.bottom,tt=R.right,$={left:Z,right:tt,top:L,bottom:q,center:(Z+tt)/2,middle:(L+q)/2},ft=v.length>0,X=ft?qe(v):{};if(!d.request){if(d.direction&&P.push(function(i,n,t){var e=[];if(t[0]&&t[1])e=[t,[-t[0],t[1]],[t[0],-t[1]]].map(function(s){return be(n,s)});else if(t[0]||t[1])i.props.keepRatio?e=[[-1,-1],[-1,1],[1,-1],[1,1],t].map(function(s){return be(n,s)}):(e=function(i,n){return Gc(n).map(function(t){return i[t]})}(n,t),e.length>1&&e.push([(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]));else for(var r=[n[0],n[1],n[3],n[2],n[0]],a=0;a<4;++a)e.push(r[a]),e.push([(r[a][0]+r[a+1][0])/2,(r[a][1]+r[a+1][1])/2]);return Br(i,e.map(function(s){return s[0]}),e.map(function(s){return s[1]}),1)}(i,m,d.direction)),d.snap){var ct=qe(m);d.center&&(ct.middle=(ct.top+ct.bottom)/2,ct.center=(ct.left+ct.right)/2),P.push(rp(i,ct,1))}ft&&(d.center&&(X.middle=(X.top+X.bottom)/2,X.center=(X.left+X.right)/2),P.push(rp(i,X,1))),P.forEach(function(Ot){var Gt=Ot.vertical.posInfos,Tt=Ot.horizontal.posInfos;S.push.apply(S,Gt.filter(function(At){return At.guidelineInfos.some(function(Rt){return!Rt.guideline.hide})}).map(function(At){return{type:"snap",pos:At.pos}})),T.push.apply(T,Tt.filter(function(At){return At.guidelineInfos.some(function(Rt){return!Rt.guideline.hide})}).map(function(At){return{type:"snap",pos:At.pos}})),k.push.apply(k,_p(Gt)),E.push.apply(E,_p(Tt))})}Cp(i,[Z,tt],[L,q],S,T),ft&&Cp(i,[X.left,X.right],[X.top,X.bottom],S,T,d.externalBounds);var yt=Jt(Jt([],k,!0),E,!0),xt=yt.filter(function(Ot){return Ot.element&&!Ot.gapRects}),Pt=yt.filter(function(Ot){return Ot.gapRects}).sort(function(Ot,Gt){return Ot.gap-Gt.gap});return Ht(i,"onSnap",{guidelines:yt.filter(function(Ot){return!Ot.element}),elements:xt,gaps:Pt},!0),Jt(Jt(Jt(Jt(Jt(Jt([],function(i,n,t,e,r){var a=i.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(l){var c=n.filter(function(k){return k.type===l}),d="vertical"===l?1:0,f=d?0:1,h=function(i,n,t,e){var r="vertical"===i?0:1,a="vertical"===i?1:0,s=r?Gn:Nn,l=t[s.start],c=t[s.end];return function(i,n){var t=[],e=[];return i.forEach(function(r,a){var s=n(r),l=e.indexOf(s),c=t[l]||[];-1===l&&(e.push(s),t.push(c)),c.push(r)}),t}(n,function(d){return d.pos[r]}).map(function(d){var f=[],h=[];return d.forEach(function(m){var S,T,k=m.element,E=m.elementRect.rect;if(E[s.end]<l)f.push(m);else if(c<E[s.start])h.push(m);else if(E[s.start]<=l&&c<=E[s.end]&&e){var P=m.pos,R={element:k,rect:ht(ht({},E),(S={},S[s.end]=E[s.start],S))},B={element:k,rect:ht(ht({},E),(T={},T[s.start]=E[s.end],T))},V=[0,0],L=[0,0];V[r]=P[r],V[a]=P[a],L[r]=P[r],L[a]=P[a]+m.size,f.push({type:i,pos:V,size:0,elementRect:R}),h.push({type:i,pos:L,size:0,elementRect:B})}}),f.sort(function(m,S){return S.pos[a]-m.pos[a]}),h.sort(function(m,S){return m.pos[a]-S.pos[a]}),{total:d,start:f,end:h,inner:[]}})}(l,c,e,a),v=d?Nn:Gn,m=d?Gn:Nn,S=e[v.start],T=e[v.end];h.forEach(function(k){var R=k.end,B=k.inner,V=t[f]+k.total[0].pos[f]-e[m.start],L=e;k.start.forEach(function(Z){var q=Z.elementRect.rect,tt=L[v.start]-q[v.end];if(tt>0){var $=[0,0];$[d]=t[d]+L[v.start]-S-tt,$[f]=V,s.push(tr(i,l,"dashed",s.length,tt,$,Z.className,r))}L=q}),L=e,R.forEach(function(Z){var q=Z.elementRect.rect,tt=q[v.start]-L[v.end];if(tt>0){var $=[0,0];$[d]=t[d]+L[v.end]-S,$[f]=V,s.push(tr(i,l,"dashed",s.length,tt,$,Z.className,r))}L=q}),B.forEach(function(Z){var q=Z.elementRect.rect,tt=S-q[v.start],$=q[v.end]-T,ft=[0,0],X=[0,0];ft[d]=t[d]-tt,ft[f]=V,X[d]=t[d]+T-S,X[f]=V,s.push(tr(i,l,"dashed",s.length,tt,ft,Z.className,r)),s.push(tr(i,l,"dashed",s.length,$,X,Z.className,r))})})}),s}(i,xt,[f,h],$,n),!0),function(i,n,t,e,r){var a=[];return["horizontal","vertical"].forEach(function(s){var l=n.filter(function(k){return k.type===s}).slice(0,1),c="vertical"===s?0:1,d=c?0:1,f=c?Nn:Gn,h=c?Gn:Nn,v=e[f.start],m=e[f.end],S=e[h.start],T=e[h.end];l.forEach(function(k){var E=k.gap,P=k.gapRects,R=Math.max.apply(Math,Jt([S],P.map(function(L){return L.rect[h.start]}),!1)),B=Math.min.apply(Math,Jt([T],P.map(function(L){return L.rect[h.end]}),!1)),V=(R+B)/2;R===B||V===(S+T)/2||P.forEach(function(L){var Z=L.rect,q=L.className,tt=[t[0],t[1]];if(Z[f.end]<v)tt[c]+=Z[f.end]-v;else{if(!(m<Z[f.start]))return;tt[c]+=Z[f.start]-v-E}tt[d]+=V-S,a.push(tr(i,c?"vertical":"horizontal","gap",a.length,E,tt,q,r))})})}),a}(i,Pt,[f,h],$,n),!0),vp(i,"horizontal",E,[r,e],$,n),!0),vp(i,"vertical",k,[r,e],$,n),!0),fp(i,"horizontal",T,f,e,B,0,n),!0),fp(i,"vertical",S,h,r,V,1,n),!0)},dragStart:function(i,n){i.state.snapRenderInfo={request:n.isRequest,snap:!0,center:!0},Ha(i)},drag:function(i){i.state.guidelines=La(i)},pinchStart:function(i){this.unset(i)},dragEnd:function(i){this.unset(i)},dragControlCondition:function(i,n){return!(!Ex(i,n)&&!Ua(i,n))||(!n.isRequest&&n.inputEvent?Te(n.inputEvent.target,jt("snap-control")):void 0)},dragControlStart:function(i){i.state.snapRenderInfo=null,Ha(i)},dragControl:function(i){this.drag(i)},dragControlEnd:function(i){this.unset(i)},dragGroupStart:function(i,n){this.dragStart(i,n)},dragGroup:function(i){this.drag(i)},dragGroupEnd:function(i){this.unset(i)},dragGroupControlStart:function(i){i.state.snapRenderInfo=null,Ha(i)},dragGroupControl:function(i){this.drag(i)},dragGroupControlEnd:function(i){this.unset(i)},unset:function(i){var n=i.state;n.enableSnap=!1,n.guidelines=[],n.snapRenderInfo=null,n.elementRects=[]}};function Sp(i,n,t,e){var r=i.state,a=r.renderPoses,s=r.rotation,l=r.direction,c=ni(i.props,n).zoom,d=l>0?1:-1,f=s/Math.PI*180,h={},v=i.renderState;v.renderDirectionMap||(v.renderDirectionMap={});var m=v.renderDirectionMap;return t.forEach(function(S){h[S.dir]=!0}),t.map(function(S){var T=S.data,k=S.classNames,E=S.dir,P=xa[E];if(!P||!h[E])return null;m[E]=!0;var R=(ie(f,15)+d*Pc[E]+720)%180,B={};return kn(T).forEach(function(V){B["data-".concat(V)]=T[V]}),e.createElement("div",ht({className:jt.apply(void 0,Jt(["control","direction",E,n],k,!1)),"data-rotation":R,"data-direction":E},B,{key:"direction-".concat(E),style:Da.apply(void 0,Jt([s,c],P.map(function(V){return a[V]}),!1))}))})}function Dp(i,n,t,e){var r=ni(i.props,t).renderDirections,a=void 0===r?n:r;return a?Sp(i,t,(!0===a?ma:a).map(function(l){return{data:{},classNames:[],dir:l}}),e):[]}function Wr(i,n,t,e,r,a){for(var s=[],l=6;l<arguments.length;l++)s[l-6]=arguments[l];var c=we(t,e),d=n?ie(c/Math.PI*180,15)%180:-1;return i.createElement("div",{key:"line".concat(a),className:jt.apply(void 0,Jt(["line","direction",n?"edge":"",n],s,!1)),"data-rotation":d,"data-line-index":a,"data-direction":n,style:Ki(t,e,r,c)})}function Op(i,n,t,e,r){return(!0===t?l1:t).map(function(s,l){var c=xa[s],f=c[1];if(null!=f)return Wr(i,s,e[c[0]],e[f],r,"".concat(n,"Edge").concat(l),n)}).filter(Boolean)}function Tp(i){return function(n,t){var e=ni(n.props,i).edge;return e&&(!0===e||e.length)?Jt(Jt([],Op(t,i,e,n.state.renderPoses,n.props.zoom),!0),function(i,n,t){return Dp(i,["nw","ne","sw","se"],n,t)}(n,i,t),!0):Ap(n,i,t)}}function Ap(i,n,t){return Dp(i,ma,n,t)}var Le={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(i,n){var t=i.props,r=t.zoom,a=i.state,s=a.dragInfo,l=a.beforeOrigin;if(!t.throttleDragRotate||!s)return[];var c=s.dist;if(!c[0]&&!c[1])return[];var d=an(c),f=we(c,[0,0]);return[n.createElement("div",{className:jt("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(d,"px"),transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) rotate(").concat(f,"rad) scaleY(").concat(r,")")}})]},dragStart:function(i,n){var t=n.datas,e=n.parentEvent,a=i.state,s=a.target,l=a.gestos;if(l.draggable)return!1;l.draggable=n.parentGesto||i.targetGesto;var c=sn(s);t.datas={},t.left=parseFloat(c.left||"")||0,t.top=parseFloat(c.top||"")||0,t.bottom=parseFloat(c.bottom||"")||0,t.right=parseFloat(c.right||"")||0,t.startValue=[0,0],ti(i,n),Mr(n,"translate"),function(i,n){n.absolutePoses=je(i.state)}(i,t),t.prevDist=[0,0],t.prevBeforeDist=[0,0],t.isDrag=!1,t.deltaOffset=[0,0];var d=te(i,n,ht({set:function(h){t.startValue=h}},Er(n)));return!1!==(e||Ht(i,"onDragStart",d))?(t.isDrag=!0,i.state.dragInfo={startRect:i.getRect(),dist:[0,0]}):(l.draggable=null,t.isPinch=!1),!!t.isDrag&&d},drag:function(i,n){if(n){Tr(n,"translate");var t=n.datas,e=n.parentEvent,r=n.parentFlag,a=n.isPinch,s=n.isRequest,l=n.deltaOffset,c=n.distX,d=n.distY,h=t.prevDist,v=t.prevBeforeDist,m=t.startValue;if(t.isDrag){l&&(c+=l[0],d+=l[1]);var S=i.props,T=S.parentMoveable,k=e?0:S.throttleDrag||0,E=e?0:S.throttleDragRotate||0,P=!1,R=0;if(!e&&E>0&&(c||d)){var B=S.startDragRotate||0,V=ie(B+180*we([0,0],[c,d])/Math.PI,E)-B,L=d*Math.abs(Math.cos((V-90)/180*Math.PI)),q=an([c*Math.abs(Math.cos(V/180*Math.PI)),L]);R=V*Math.PI/180,c=q*Math.cos(R),d=q*Math.sin(R)}if(!a&&!e&&!r&&(!E||c||d)){var tt=fx(i,c,d,E,s||l,t),$=tt[0],ft=tt[1];P=$.isSnap||ft.isSnap||$.isBound||ft.isBound,c+=$.offset,d+=ft.offset}var Gt=oe(zc({datas:t,distX:c,distY:d}),m),Tt=oe(function(i){var n=i.datas,r=zc({datas:n,distX:i.distX,distY:i.distY}),l=Rc(n,function(i,n){for(var t=ye(4),e=0;e<3;++e)t[12+e]=i[e]||0;return t}([r[0],r[1]]));return ke(l,Kn([0,0,0],4),4)}({datas:t,distX:c,distY:d}),m);!E&&!P&&(mr(Tt,k),mr(Gt,k)),mr(Tt,Fe),mr(Gt,Fe);var At=qt(Gt,m),Nt=qt(Tt,m),Rt=qt(Nt,h),Yt=qt(At,v);t.prevDist=Nt,t.prevBeforeDist=At,t.passDelta=Rt,t.passDist=Nt;var Vt=t.left+At[0],Ut=t.top+At[1],G=t.right-At[0],F=t.bottom-At[1],Y=Ar(t,"translate(".concat(Tt[0],"px, ").concat(Tt[1],"px)"),"translate(".concat(Nt[0],"px, ").concat(Nt[1],"px)"));if(wa(n,Y),i.state.dragInfo.dist=e?[0,0]:Nt,e||T||!Rt.every(function(nt){return!nt})||!Yt.some(function(nt){return!nt})){var W=i.state,lt=te(i,n,ht({transform:Y,dist:Nt,delta:Rt,translate:Tt,beforeDist:At,beforeDelta:Yt,beforeTranslate:Gt,left:Vt,top:Ut,right:G,bottom:F,width:W.width,height:W.height,isPinch:a},qi({transform:Y},n)));return!e&&Ht(i,"onDrag",lt),lt}}}},dragAfter:function(i,n){var t=n.datas,e=t.deltaOffset;return!(!e[0]&&!e[1])&&(t.deltaOffset=[0,0],this.drag(i,ht(ht({},n),{deltaOffset:e})))},dragEnd:function(i,n){var t=n.parentEvent,e=n.datas;if(i.state.dragInfo=null,e.isDrag){e.isDrag=!1;var r=Ye(i,n,{});return!t&&Ht(i,"onDragEnd",r),r}},dragGroupStart:function(i,n){var t=n.datas,e=n.clientX,r=n.clientY,a=this.dragStart(i,n);if(!a)return!1;var s=Pa(i,this,"dragStart",[e||0,r||0],n,!1,"draggable"),c=Ht(i,"onDragGroupStart",ht(ht({},a),{targets:i.props.targets,events:s}));return t.isDrag=!1!==c,!!t.isDrag&&a},dragGroup:function(i,n){if(n.datas.isDrag){var e=this.drag(i,n),a=Pa(i,this,"drag",n.datas.passDelta,n,!1,"draggable");if(e){var s=ht({targets:i.props.targets,events:a},e);return Ht(i,"onDragGroup",s),s}}},dragGroupEnd:function(i,n){var t=n.isDrag;if(n.datas.isDrag){this.dragEnd(i,n);var r=Pa(i,this,"dragEnd",[0,0],n,!1,"draggable");return Ht(i,"onDragGroupEnd",Ye(i,n,{targets:i.props.targets,events:r})),t}},request:function(i){var n={},t=i.getRect(),e=0,r=0;return{isControl:!1,requestStart:function(){return{datas:n}},request:function(a){return"x"in a?e=a.x-t.left:"deltaX"in a&&(e+=a.deltaX),"y"in a?r=a.y-t.top:"deltaY"in a&&(r+=a.deltaY),{datas:n,distX:e,distY:r}},requestEnd:function(){return{datas:n,isDrag:!0}}}},unset:function(i){i.state.gestos.draggable=null,i.state.dragInfo=null}},Ep=Ma("resizable"),Za={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function,keepRatioFinally:Boolean,edge:Boolean},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:Tp("resizable"),dragControlCondition:Ep,dragControlStart:function(i,n){var t,r=n.isPinch,a=n.isGroup,l=n.parentGesto,c=n.datas,d=n.parentFixedDirection,f=n.parentEvent,h=n.parentDirection||(r?[0,0]:Oa(n.inputEvent.target)),v=i.state,S=v.width,T=v.height,k=v.gestos;if(!h||!v.target||k.resizable)return!1;k.resizable=l||i.controlGesto,!r&&ti(i,n),c.datas={},c.direction=h,c.startOffsetWidth=S,c.startOffsetHeight=T,c.prevWidth=0,c.prevHeight=0,c.minSize=[0,0],c.startWidth=v.cssWidth,c.startHeight=v.cssHeight,c.maxSize=[1/0,1/0],a||(c.minSize=[v.minOffsetWidth,v.minOffsetHeight],c.maxSize=[v.maxOffsetWidth,v.maxOffsetHeight]);var E=i.props.transformOrigin||"% %";function P(q){c.ratio=q&&isFinite(q)?q:0}function R(q){c.fixedDirection=q,c.fixedPosition=be(c.startPositions,q)}function B(q){c.minSize=[xe("".concat(q[0]),0)||0,xe("".concat(q[1]),0)||0]}function V(q){var tt=[q[0]||1/0,q[1]||1/0];(!Oo(tt[0])||isFinite(tt[0]))&&(tt[0]=xe("".concat(tt[0]),0)||1/0),(!Oo(tt[1])||isFinite(tt[1]))&&(tt[1]=xe("".concat(tt[1]),0)||1/0),c.maxSize=tt}c.transformOrigin=E&&Ke(E)?E.split(" "):E,c.startOffsetMatrix=v.offsetMatrix,c.startTransformOrigin=v.transformOrigin,c.isWidth=null!==(t=null==n?void 0:n.parentIsWidth)&&void 0!==t?t:!h[0]&&!h[1]||h[0]||!h[1],c.startPositions=je(i.state),P(S/T),R(d||[-h[0],-h[1]]),c.setFixedDirection=R,c.setMin=B,c.setMax=V;var L=te(i,n,{direction:h,startRatio:c.ratio,set:function(q){var $=q[1];c.startWidth=q[0],c.startHeight=$},setMin:B,setMax:V,setRatio:P,setFixedDirection:R,setOrigin:function(q){c.transformOrigin=q},dragStart:Le.dragStart(i,(new fi).dragStart([0,0],n))}),Z=f||Ht(i,"onResizeStart",L);return c.startFixedDirection=c.fixedDirection,!1!==Z&&(c.isResize=!0,i.state.snapRenderInfo={request:n.isRequest,direction:h}),!!c.isResize&&L},dragControl:function(i,n){var t,e=n.datas,r=n.parentFlag,a=n.isPinch,s=n.parentKeepRatio,l=n.dragClient,c=n.parentDist,d=n.isRequest,f=n.isGroup,h=n.parentEvent,S=e.transformOrigin,T=e.startWidth,k=e.startHeight,E=e.prevWidth,P=e.prevHeight,R=e.minSize,B=e.maxSize,V=e.ratio,L=e.startOffsetWidth,Z=e.startOffsetHeight,q=e.isWidth;if(e.isResize){if(n.resolveMatrix){var $=e.startOffsetMatrix,ft=e.startTransformOrigin,X=i.state.is3d?4:3,ct=Hi(Nc(n)),yt=Math.sqrt(ct.length);X!==yt&&(ct=gn(ct,yt,X));var xt=Ji($,ct,ft,X),Pt=ei(xt,L,Z,X);e.startPositions=Pt,e.nextTargetMatrix=ct,e.nextAllMatrix=xt}var Ot=ni(i.props,"resizable"),Gt=Ot.resizeFormat,Tt=Ot.throttleResize,At=void 0===Tt?r?0:1:Tt,Nt=Ot.parentMoveable,Rt=Ot.keepRatioFinally,Yt=e.direction,Vt=Yt,Ut=0,G=0;!Yt[0]&&!Yt[1]&&(Vt=[1,1]);var F=V&&(null!=s?s:Ot.keepRatio)||!1,W=Y(),j=W[0],Q=W[1];h||(e.setFixedDirection(e.fixedDirection),Ht(i,"onBeforeResize",te(i,n,{startFixedDirection:e.startFixedDirection,setFixedDirection:function(Kt){var $t;return e.setFixedDirection(Kt),$t=Y(),[j=$t[0],Q=$t[1]]},boundingWidth:j,boundingHeight:Q,setSize:function(Kt){j=Kt[0],Q=Kt[1]}},!0)));var lt=l;l||(lt=!r&&a?Wc(i,[0,0]):e.fixedPosition);var nt=[0,0];if(a||(nt=function(i,n,t,e,r,a,s){if(!yi(i,"resizable"))return[0,0];var l=s.fixedDirection,c=s.nextAllMatrix,d=i.state,f=d.allMatrix,h=d.is3d;return bp(i,function(v,m){return wp(c||f,n+v,t+m,l,r,h)},n,t,e,r,a,s)}(i,j,Q,Yt,lt,d,e)),c&&(!c[0]&&(nt[0]=0),!c[1]&&(nt[1]=0)),F){Vt[0]&&Vt[1]&&nt[0]&&nt[1]&&(Math.abs(nt[0])>Math.abs(nt[1])?nt[1]=0:nt[0]=0);var _t=!nt[0]&&!nt[1];_t&&vt(),Vt[0]&&!Vt[1]||nt[0]&&!nt[1]||_t&&q?Q=(j+=nt[0])/V:(!Vt[0]&&Vt[1]||!nt[0]&&nt[1]||_t&&!q)&&(j=(Q+=nt[1])*V)}else j+=nt[0],Q+=nt[1],j=Math.max(0,j),Q=Math.max(0,Q);t=function(i,n,t,e){if(!e)return i.map(function(m,S){return Po(m,n[S],t[S])});var r=i[0],a=i[1],s=!0===e?r/a:e,l=Gl(i,n,!1,s),c=l[0],d=l[1],f=Gl(i,t,!0,s),h=f[0],v=f[1];return r<c||a<d?(r=c,a=d):(r>h||a>v)&&(r=h,a=v),[r,a]}([j,Q],R,B,!!F&&V),j=t[0],Q=t[1],vt(),F&&(f||Rt)&&(q?Q=j/V:j=Q*V);var Dt=[(Ut=j-L)-E,(G=Q-Z)-P];e.prevWidth=Ut,e.prevHeight=G;var Et=function(i,n,t,e,r,a){var s=i.props.groupable,l=i.state,d=l.offsetMatrix,m=l.left,S=l.top,T=a.fixedDirection,k=a.nextTargetMatrix||l.targetMatrix,E=l.is3d?4:3,P=function(i,n,t,e,r,a){return void 0===e&&(e=n),void 0===r&&(r=t),void 0===a&&(a=[0,0]),i?i.map(function(s,l){var c=Ri(s),d=c.value,f=c.unit,h=l?r:e,v=l?t:n;return"%"===s||isNaN(d)?v*(h?a[l]/h:0):"%"!==f?d:v*d/100}):a}(r,n,t,l.width,l.height,l.transformOrigin),R=s?m:0,B=s?S:0,L=function(i,n,t,e,r,a){var l=be(ei(n,t,e,r),a);return[i[0]-l[0],i[1]-l[1]]}(e,Ji(d,k,P,E),n,t,E,T);return qt(L,[R,B])}(i,j,Q,lt,S,e);if(Nt||!Dt.every(function(Kt){return!Kt})||!Et.every(function(Kt){return!Kt})){var kt=Le.drag(i,Xi(n,i.state,Et,!!a,!1,"draggable")),Bt=kt.transform,Ft=T+Ut,ne=k+G,ve=te(i,n,ht({width:Ft,height:ne,offsetWidth:Math.round(j),offsetHeight:Math.round(Q),startRatio:V,boundingWidth:j,boundingHeight:Q,direction:Yt,dist:[Ut,G],delta:Dt,isPinch:!!a,drag:kt},Qc({style:{width:"".concat(Ft,"px"),height:"".concat(ne,"px")},transform:Bt},kt,n)));return!h&&Ht(i,"onResize",ve),ve}}function Y(){var Kt=e.fixedDirection,$t=np(Vt,F,e,n);Ut=$t.distWidth,G=$t.distHeight;var ge=Vt[0]-Kt[0]||F?Math.max(L+Ut,Fe):L,He=Vt[1]-Kt[1]||F?Math.max(Z+G,Fe):Z;return F&&L&&Z&&(q?He=ge/V:ge=He*V),[ge,He]}function vt(){var Kt;Gt&&(Kt=Gt([j,Q]),j=Kt[0],Q=Kt[1]),j=ie(j,At),Q=ie(Q,At)}},dragControlAfter:function(i,n){var t=n.datas;if(t.isResize){var c=i.state,h=c.width-(t.startOffsetWidth+t.prevWidth),v=c.height-(t.startOffsetHeight+t.prevHeight),m=Math.abs(h)>3,S=Math.abs(v)>3;if(m&&(t.startWidth+=h,t.startOffsetWidth+=h,t.prevWidth+=h),S&&(t.startHeight+=v,t.startOffsetHeight+=v,t.prevHeight+=v),m||S)return this.dragControl(i,n)}},dragControlEnd:function(i,n){var t=n.datas,e=n.parentEvent;if(t.isResize){t.isResize=!1;var r=Ye(i,n,{});return!e&&Ht(i,"onResizeEnd",r),r}},dragGroupControlCondition:Ep,dragGroupControlStart:function(i,n){var t=n.datas,e=this.dragControlStart(i,ht(ht({},n),{isGroup:!0}));if(!e)return!1;var r=zn(i,"resizable",n);function a(S,T){var k=t.fixedDirection,E=t.fixedPosition,R=be(T.datas.startPositions||je(S.state),k),B=ke(pi(-i.rotation/180*Math.PI,3),[R[0]-E[0],R[1]-E[1],1],3),L=B[1];return T.datas.originalX=B[0],T.datas.originalY=L,T}var s=t.startOffsetWidth,l=t.startOffsetHeight;function c(){var S=t.minSize;r.forEach(function(T){var k=T.datas,E=k.minSize,P=k.startOffsetWidth,R=k.startOffsetHeight,V=l*(R?E[1]/R:0);S[0]=Math.max(S[0],s*(P?E[0]/P:0)),S[1]=Math.max(S[1],V)})}function d(){var S=t.maxSize;r.forEach(function(T){var k=T.datas,E=k.maxSize,P=k.startOffsetWidth,R=k.startOffsetHeight,V=l*(R?E[1]/R:0);S[0]=Math.min(S[0],s*(P?E[0]/P:0)),S[1]=Math.min(S[1],V)})}var f=Dn(i,this,"dragControlStart",n,function(S,T){return a(S,T)});c(),d();var h=function(S){e.setFixedDirection(S),f.forEach(function(T,k){T.setFixedDirection(S),a(T.moveable,r[k])})};t.setFixedDirection=h;var v=ht(ht({},e),{targets:i.props.targets,events:f.map(function(S){return ht(ht({},S),{setMin:function(T){S.setMin(T),c()},setMax:function(T){S.setMax(T),d()}})}),setFixedDirection:h,setMin:function(S){e.setMin(S),c()},setMax:function(S){e.setMax(S),d()}}),m=Ht(i,"onResizeGroupStart",v);return t.isResize=!1!==m,!!t.isResize&&e},dragGroupControl:function(i,n){var t=n.datas;if(t.isResize){var e=ni(i.props,"resizable");Aa(i,"onBeforeResize",function(m){Ht(i,"onBeforeResizeGroup",te(i,n,ht(ht({},m),{targets:e.targets}),!0))});var r=this.dragControl(i,ht(ht({},n),{isGroup:!0}));if(r){var a=r.boundingWidth,s=r.boundingHeight,l=r.dist,c=e.keepRatio,d=[a/(a-l[0]),s/(s-l[1])],f=t.fixedPosition,h=Dn(i,this,"dragControl",n,function(m,S){var T=ke(pi(i.rotation/180*Math.PI,3),[S.datas.originalX*d[0],S.datas.originalY*d[1],1],3),k=T[0],E=T[1];return ht(ht({},S),{parentDist:null,parentScale:d,dragClient:oe(f,[k,E]),parentKeepRatio:c})}),v=ht({targets:e.targets,events:h},r);return Ht(i,"onResizeGroup",v),v}}},dragGroupControlEnd:function(i,n){var t=n.isDrag;if(n.datas.isResize){this.dragControlEnd(i,n);var r=Dn(i,this,"dragControlEnd",n);return Ht(i,"onResizeGroupEnd",Ye(i,n,{targets:i.props.targets,events:r})),t}},request:function(i){var n={},t=0,e=0,r=i.getRect();return{isControl:!0,requestStart:function(a){var s;return{datas:n,parentDirection:a.direction||[1,1],parentIsWidth:null===(s=null==a?void 0:a.horizontal)||void 0===s||s}},request:function(a){return"offsetWidth"in a?t=a.offsetWidth-r.offsetWidth:"deltaWidth"in a&&(t+=a.deltaWidth),"offsetHeight"in a?e=a.offsetHeight-r.offsetHeight:"deltaHeight"in a&&(e+=a.deltaHeight),{datas:n,parentDist:[t,e],parentKeepRatio:a.keepRatio}},requestEnd:function(){return{datas:n,isDrag:!0}}}},unset:function(i){i.state.gestos.resizable=null}};function Wa(i,n,t,e,r){var s=i.state,l=s.is3d?4:3,c=n.origin,d=Ae(i.state.rootMatrix,qt([c[0],c[1]],i.props.groupable?[0,0]:[s.left,s.top]),l),f=oe([r.left,r.top],d);n.startAbsoluteOrigin=f,n.prevDeg=we(f,[t,e])/Math.PI*180,n.defaultDeg=n.prevDeg,n.prevSnapDeg=0,n.loop=0,n.startDist=on(f,[t,e])}function Vr(i,n,t){var e=t.defaultDeg,r=t.prevDeg,a=r%360,s=Math.floor(r/360);a<0&&(a+=360),a>i&&a>270&&i<90?++s:a<i&&a<90&&i>270&&--s;var l=n*(360*s+i-e);return t.prevDeg=e+l,l}function Va(i,n,t,e){return Vr(we(e.startAbsoluteOrigin,[i,n])/Math.PI*180,t,e)}function ja(i,n,t,e,r,a){var s=i.props.throttleRotate,l=void 0===s?0:s,c=e,d=t.prevSnapDeg;a&&(c=function(i,n,t,e){if(!yi(i,"rotatable"))return e;var c=e*Math.PI/180,d=[n.pos1,n.pos2,n.pos3,n.pos4].map(function(v){return qt(v,t)}),f=d.map(function(v){return Rn(v,c)}),h=Jt(Jt([],function(i,n,t,e,r){if(!i.props.bounds)return[];var a=r*Math.PI/180,s=Lr(i),h=s.left-e[0],v=s.right-e[0],m=s.top-e[1],S=s.bottom-e[1],T={left:h,top:m,right:v,bottom:S};if(!hp(t,T,0))return[];var k=[];return[[h,0],[v,0],[m,1],[S,1]].forEach(function(E){var P=E[0],R=E[1];t.forEach(function(B){var V=we([0,0],B);k.push.apply(k,function(i,n,t){var e=an(i),r=Math.sqrt(e*e-n*n)||0;return[r,-r].sort(function(a,s){return Math.abs(a-i[t?0:1])-Math.abs(s-i[t?0:1])}).map(function(a){return we([0,0],t?[a,n]:[n,a])})}(B,P,R).map(function(L){return a+L-V}).filter(function(L){return!hp(n,T,L)}).map(function(L){return ie(180*L/Math.PI,Fe)}))})}),k}(i,d,f,t,e),!0),function(i,n,t,e,r){var a=i.props.innerBounds,s=r*Math.PI/180;if(!a)return[];var l=a.left,c=a.top,h=l-e[0],v=l+a.width-e[0],m=c-e[1],S=c+a.height-e[1],T=[[h,m],[v,m],[h,S],[v,S]],k=be(t,[0,0]);if(!dp(t,T,k,0))return[];var E=[],P=T.map(function(R){return[an(R),we([0,0],R)]});return[[t[0],t[1]],[t[1],t[3]],[t[3],t[2]],[t[2],t[0]]].forEach(function(R){var B=we([0,0],function(i){var n=i[0],t=i[1],e=t[0]-n[0],r=t[1]-n[1];if(!e)return[n[0],0];if(!r)return[0,n[1]];var a=r/e,s=-a*n[0]+n[1];return[-s/(a+1/a),s/(a*a+1)]}(R)),V=function(i){var n=i[0],t=i[1],e=t[0]-n[0],r=t[1]-n[1];if(!e)return Math.abs(n[0]);if(!r)return Math.abs(n[1]);var a=r/e;return Math.abs((-a*n[0]+n[1])/Math.sqrt(Math.pow(a,2)+1))}(R);E.push.apply(E,P.filter(function(L){var Z=L[0];return Z&&V<=Z}).map(function(L){var Z=L[0],q=L[1],tt=Math.acos(Z?V/Z:0);return[s+(q+tt)-B,s+(q-tt)-B]}).reduce(function(L,Z){return L.push.apply(L,Z),L},[]).filter(function(L){return!dp(n,T,k,L)}).map(function(L){return ie(180*L/Math.PI,Fe)}))}),E}(i,d,f,t,e),!0);return h.sort(function(v,m){return Math.abs(v-e)-Math.abs(m-e)}),h.length?h[0]:e}(i,n,t.origin,c));var f=ie(r+c,l),h=f-r;return t.prevSnapDeg=h,[h-d,c,f]}function Ua(i,n){if(n.isRequest)return"rotatable"===n.requestAble;var t=n.inputEvent.target;if(Te(t,jt("rotation-control"))||Te(t,jt("around-control"))||Te(t,jt("control"))&&Te(t,jt("rotatable")))return!0;var e=i.props.rotationTarget;return!!e&&$c(e,!0).some(function(r){return!!r&&(t===r||t.contains(r))})}var Rx=ma.map(function(i){var n="",t="",e="center",r="center";return i.indexOf("n")>-1&&(n="top: -20px;",r="bottom"),i.indexOf("s")>-1&&(n="top: 0px;",r="top"),i.indexOf("w")>-1&&(t="left: -20px;",e="right"),i.indexOf("e")>-1&&(t="left: 0px;",e="left"),'.around-control[data-direction*="'.concat(i,'"] {\n        ').concat(t).concat(n,"\n        transform-origin: ").concat(e," ").concat(r,";\n    }")}).join("\n"),zx=".rotation {\n    position: absolute;\n    height: 40px;\n    width: 1px;\n    transform-origin: 50% 100%;\n    height: calc(40px * var(--zoom));\n    top: auto;\n    left: 0;\n    bottom: 100%;\n    will-change: transform;\n}\n.rotation .rotation-line {\n    display: block;\n    width: 100%;\n    height: 100%;\n    transform-origin: 50% 50%;\n}\n.rotation .rotation-control {\n    border-color: #4af;\n    border-color: var(--moveable-color);\n    background:#fff;\n    cursor: alias;\n}\n.rotatable.direction.control {\n    cursor: alias;\n}\n.around-control {\n    position: absolute;\n    will-change: transform;\n    width: 20px;\n    height: 20px;\n    left: -10px;\n    top: -10px;\n    box-sizing: border-box;\n    background: transparent;\n    z-index: 8;\n    cursor: alias;\n    transform-origin: center center;\n}\n.rotatable.direction.control.move {\n    cursor: move;\n}\n".concat(Rx,"\n"),Gx={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object,rotateAroundControls:Boolean,edge:Boolean,resolveAblesWithRotatable:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[zx],render:function(i,n){var t=ni(i.props,"rotatable"),a=t.zoom,s=t.renderDirections,l=t.rotateAroundControls,c=t.resolveAblesWithRotatable,d=i.state;if(!t.rotatable)return null;var v=function(i,n,t){var e=n[0],r=n[1],a=n[2],s=n[3];if("none"!==i){var l=(i||"top").split("-"),c=l[0],d=l[1],f=[e,r];"left"===c?f=[a,e]:"right"===c?f=[r,s]:"bottom"===c&&(f=[s,a]);var h=[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2],v=Kc(f,t);if(d){var m="top"===d||"left"===d,S="bottom"===c||"left"===c;h=f[m&&!S||!m&&S?0:1]}return[h,v]}}(t.rotationPosition,d.renderPoses,d.direction),m=[];if(v){var S=v[0],T=v[1];m.push(n.createElement("div",{key:"rotation",className:jt("rotation"),style:{transform:"translate(-50%) translate(".concat(S[0],"px, ").concat(S[1],"px) rotate(").concat(T,"rad)")}},n.createElement("div",{className:jt("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),n.createElement("div",{className:jt("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}if(s){var k=kn(c||{}),E={};k.forEach(function(R){c[R].forEach(function(B){E[B]=R})});var P=[];Cn(s)&&(P=s.map(function(R){var B=E[R];return{data:B?{resolve:B}:{},classNames:B?["move"]:[],dir:R}})),m.push.apply(m,Sp(i,"rotatable",P,n))}return l&&m.push.apply(m,function(i,n){var t=i.renderState;t.renderDirectionMap||(t.renderDirectionMap={});var e=i.state,r=e.renderPoses,a=e.rotation,c=i.props.zoom,d=e.direction>0?1:-1,f=a/Math.PI*180;return kn(t.renderDirectionMap).map(function(h){var v=xa[h];if(!v)return null;var m=(ie(f,15)+d*Pc[h]+720)%180;return n.createElement("div",{className:jt("around-control"),"data-rotation":m,"data-direction":h,key:"direction-around-".concat(h),style:Da.apply(void 0,Jt([a,c],v.map(function(S){return r[S]}),!1))})})}(i,n)),m},dragControlCondition:Ua,dragControlStart:function(i,n){var t,e,r=n.datas,a=n.clientX,s=n.clientY,l=n.parentRotate,c=n.parentFlag,d=n.isPinch,f=n.isRequest,h=i.state,m=h.left,S=h.top,T=h.direction,k=h.beforeDirection,E=h.targetTransform,P=h.moveableClientRect,R=h.offsetMatrix,B=h.targetMatrix,V=h.allMatrix,L=h.width,Z=h.height;if(!f&&!h.target)return!1;var q=i.getRect();r.rect=q,r.transform=E,r.left=m,r.top=S;var tt=function(Vt){r.fixedDirection=Vt,r.fixedPosition=Zc(i,Vt),At&&At.setFixedDirection(Vt)},$=a,ft=s;if(f||d||c){var X=l||0;r.beforeInfo={origin:q.beforeOrigin,prevDeg:X,defaultDeg:X,prevSnapDeg:0,startDist:0},r.afterInfo=ht(ht({},r.beforeInfo),{origin:q.origin}),r.absoluteInfo=ht(ht({},r.beforeInfo),{origin:q.origin,startValue:X})}else{var ct=null===(e=n.inputEvent)||void 0===e?void 0:e.target;if(ct){var yt=ct.getAttribute("data-direction")||"",xt=c1[yt];if(xt){r.isControl=!0,r.isAroundControl=Te(ct,jt("around-control")),r.controlDirection=xt;var Pt=ct.getAttribute("data-resolve");Pt&&(r.resolveAble=Pt);var Ot=function(i,n,t){var r=16===i.length?4:3,a=n.map(function(c){return Ae(i,c,r)}),s=t.left,l=t.top;return a.map(function(c){return[c[0]+s,c[1]+l]})}(h.rootMatrix,h.renderPoses,P);t=be(Ot,xt),$=t[0],ft=t[1]}}r.beforeInfo={origin:q.beforeOrigin},r.afterInfo={origin:q.origin},r.absoluteInfo={origin:q.origin,startValue:q.rotation};var Gt=tt;tt=function(Vt){var Ut=h.is3d?4:3,G=be([[0,0],[L,0],[0,Z],[L,Z]],Vt),F=oe(ic(B,Ut),G),j=ke(R,Kn([F[0],F[1]],Ut)),Q=ke(V,Kn([G[0],G[1]],Ut));Gt(Vt),r.beforeInfo.origin=j,r.afterInfo.origin=Q,r.absoluteInfo.origin=Q,Wa(i,r.beforeInfo,$,ft,P),Wa(i,r.afterInfo,$,ft,P),Wa(i,r.absoluteInfo,$,ft,P)}}r.startClientX=$,r.startClientY=ft,r.direction=T,r.beforeDirection=k,r.startValue=0,r.datas={},Mr(n,"rotate");var Tt=!1,At=!1;r.isControl&&r.resolveAble&&"resizable"===r.resolveAble&&(At=Za.dragControlStart(i,ht(ht({},new fi("resizable").dragStart([0,0],n)),{parentDirection:r.controlDirection,parentFixedDirection:r.fixedDirection}))),At||(Tt=Le.dragStart(i,(new fi).dragStart([0,0],n))),tt(function(i){var n=i.state,r=n.transformOrigin;return[r[0]/(n.width/2)-1,r[1]/(n.height/2)-1]}(i));var Rt=te(i,n,ht(ht({set:function(Vt){r.startValue=Vt*Math.PI/180},setFixedDirection:tt},Er(n)),{dragStart:Tt,resizeStart:At})),Yt=Ht(i,"onRotateStart",Rt);return r.isRotate=!1!==Yt,h.snapRenderInfo={request:n.isRequest},!!r.isRotate&&Rt},dragControl:function(i,n){var t,e,r,a=n.datas,s=n.distX,l=n.distY,c=n.parentRotate,d=n.parentFlag,f=n.isPinch,h=n.groupDelta,v=a.beforeDirection,m=a.beforeInfo,S=a.afterInfo,T=a.absoluteInfo,E=a.startValue,P=a.rect,R=a.startClientX,B=a.startClientY;if(a.isRotate){Tr(n,"rotate");var q,tt,$,ft,X,ct,yt,xt,Pt,V=function(i){return Ir(i.datas.beforeTransform,[50,50],100,100).direction}(n),L=v*V,Z=i.props.parentMoveable,Ot=180/Math.PI*E,Gt=T.startValue,Tt=!1,At=R+s,Nt=B+l;if(!d&&"parentDist"in n){var Rt=n.parentDist;tt=Rt,X=Rt,xt=Rt}else f||d?(tt=Vr(c,v,m),X=Vr(c,L,S),xt=Vr(c,L,T)):(tt=Va(At,Nt,v,m),X=Va(At,Nt,L,S),xt=Va(At,Nt,L,T),Tt=!0);if(Ht(i,"onBeforeRotate",te(i,n,{beforeRotation:Ot+tt,rotation:Ot+X,absoluteRotation:Gt+xt,setRotation:function(lt){tt=X=lt-Ot,xt=X}},!0)),q=(t=ja(i,P,m,tt,Ot,Tt))[0],tt=t[1],$=t[2],ft=(e=ja(i,P,S,X,Ot,Tt))[0],X=e[1],ct=e[2],r=ja(i,P,T,xt,Gt,Tt),xt=r[1],Pt=r[2],(yt=r[0])||ft||q||Z){var Yt=Ar(a,"rotate(".concat(ct,"deg)"),"rotate(".concat(X,"deg)")),Vt=function(i,n,t){var e=t.fixedDirection,r=t.fixedPosition;return Hc(i,"rotate(".concat(n,"deg)"),e,r,t)}(i,X,a),Ut=qt(oe(h||[0,0],Vt),a.prevInverseDist||[0,0]);a.prevInverseDist=Vt,a.requestValue=null;var G=Lc(i,Yt,Ut,f,n),F=G,Y=on([At,Nt],T.startAbsoluteOrigin)-T.startDist,W=void 0;if("resizable"===a.resolveAble){var j=Za.dragControl(i,ht(ht({},Xi(n,i.state,[n.deltaX,n.deltaY],!!f,!1,"resizable")),{resolveMatrix:!0,parentDistance:Y}));j&&(W=j,F=Qc(F,j,n))}var Q=te(i,n,ht(ht({delta:ft,dist:X,rotate:ct,rotation:ct,beforeDist:tt,beforeDelta:q,beforeRotate:$,beforeRotation:$,absoluteDist:xt,absoluteDelta:yt,absoluteRotate:Pt,absoluteRotation:Pt,isPinch:!!f,resize:W},G),F));return Ht(i,"onRotate",Q),Q}}},dragControlAfter:function(i,n){},dragControlEnd:function(i,n){var t=n.datas;if(t.isRotate){t.isRotate=!1;var e=Ye(i,n,{});return Ht(i,"onRotateEnd",e),e}},dragGroupControlCondition:Ua,dragGroupControlStart:function(i,n){var t=n.datas,e=i.state,r=e.left,a=e.top,s=e.beforeOrigin,l=this.dragControlStart(i,n);if(!l)return!1;l.set(t.beforeDirection*i.rotation);var c=Dn(i,this,"dragControlStart",n,function(h,v){var m=h.state,k=m.beforeOrigin,E=oe(qt([m.left,m.top],[r,a]),qt(k,s));return v.datas.groupClient=E,ht(ht({},v),{parentRotate:0})}),f=Ht(i,"onRotateGroupStart",ht(ht({},l),{targets:i.props.targets,events:c}));return t.isRotate=!1!==f,!!t.isRotate&&l},dragGroupControl:function(i,n){var t=n.datas;if(t.isRotate){Aa(i,"onBeforeRotate",function(f){Ht(i,"onBeforeRotateGroup",te(i,n,ht(ht({},f),{targets:i.props.targets}),!0))});var e=this.dragControl(i,n);if(e){var r=t.beforeDirection,a=e.beforeDist,l=e.beforeDelta/180*Math.PI,c=Dn(i,this,"dragControl",n,function(f,h){var v=h.datas.groupClient,m=v[0],S=v[1],T=Rn([m,S],l*r),k=T[0],E=T[1],P=[k-m,E-S];return h.datas.groupClient=[k,E],ht(ht({},h),{parentRotate:a,groupDelta:P})});i.rotation=r*e.beforeRotation;var d=ht({targets:i.props.targets,events:c,set:function(f){i.rotation=f},setGroupRotation:function(f){i.rotation=f}},e);return Ht(i,"onRotateGroup",d),d}}},dragGroupControlEnd:function(i,n){var t=n.isDrag;if(n.datas.isRotate){this.dragControlEnd(i,n);var r=Dn(i,this,"dragControlEnd",n);return Ht(i,"onRotateGroupEnd",Ye(i,n,{targets:i.props.targets,events:r})),t}},request:function(i){var n={},t=0,e=i.getRotation();return{isControl:!0,requestStart:function(){return{datas:n}},request:function(r){return"deltaRotate"in r?t+=r.deltaRotate:"rotate"in r&&(t=r.rotate-e),{datas:n,parentDist:t}},requestEnd:function(){return{datas:n,isDrag:!0}}}}},Mp=Ma("scalable"),Nx={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean,edge:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:Tp("scalable"),dragControlCondition:Mp,dragControlStart:function(i,n){var t=n.datas,e=n.isPinch,s=n.parentDirection||(e?[0,0]:Oa(n.inputEvent.target)),l=i.state,c=l.width,d=l.height,f=l.targetTransform,v=l.pos1,m=l.pos2,S=l.pos4;if(!s||!l.target)return!1;e||ti(i,n),t.datas={},t.transform=f,t.prevDist=[1,1],t.direction=s,t.startOffsetWidth=c,t.startOffsetHeight=d,t.startValue=[1,1];var T=on(v,m),k=on(m,S),E=!s[0]&&!s[1]||s[0]||!s[1];function P(L){t.ratio=L&&isFinite(L)?L:0}function R(L){t.fixedDirection=L,t.fixedPosition=be(t.startPositions,L)}t.scaleWidth=T,t.scaleHeight=k,t.scaleXRatio=T/c,t.scaleYRatio=k/d,Mr(n,"scale"),t.isWidth=E,t.startPositions=je(i.state),t.setFixedDirection=R,P(on(v,m)/on(m,S)),R([-s[0],-s[1]]);var B=te(i,n,ht(ht({direction:s,set:function(L){t.startValue=L},setRatio:P,setFixedDirection:R},Er(n)),{dragStart:Le.dragStart(i,(new fi).dragStart([0,0],n))})),V=Ht(i,"onScaleStart",B);return t.startFixedDirection=t.fixedDirection,!1!==V&&(t.isScale=!0,i.state.snapRenderInfo={request:n.isRequest,direction:s}),!!t.isScale&&B},dragControl:function(i,n){Tr(n,"scale");var t=n.datas,e=n.parentKeepRatio,r=n.parentFlag,a=n.isPinch,s=n.dragClient,l=n.isRequest,c=t.prevDist,d=t.direction,f=t.startOffsetWidth,h=t.startOffsetHeight,m=t.startValue,S=t.isWidth,T=t.ratio;if(!t.isScale)return!1;var k=i.props,E=k.throttleScale,P=k.parentMoveable,R=d;!d[0]&&!d[1]&&(R=[1,1]);var B=T&&(null!=e?e:k.keepRatio)||!1,V=i.state;function L(){var Nt=np(R,B,t,n),Vt=(f+Nt.distWidth)/f,Ut=(h+Nt.distHeight)/h;return 0===(Vt=R[0]||B?Vt*m[0]:m[0])&&(Vt=1e-9*(c[0]>0?1:-1)),0===(Ut=R[1]||B?Ut*m[1]:m[1])&&(Ut=1e-9*(c[1]>0?1:-1)),[Vt,Ut]}var Z=L();if(!a&&i.props.groupable){var tt=(V.snapRenderInfo||{}).direction;Cn(tt)&&(tt[0]||tt[1])&&(V.snapRenderInfo={direction:d,request:n.isRequest})}Ht(i,"onBeforeScale",te(i,n,{scale:Z,setFixedDirection:function(Nt){return t.setFixedDirection(Nt),Z=L()},startFixedDirection:t.startFixedDirection,setScale:function(Nt){Z=Nt}},!0));var $=[Z[0]/m[0],Z[1]/m[1]],ft=s,X=[0,0];if(s||(ft=!r&&a?Wc(i,[0,0]):t.fixedPosition),a||(X=function(i,n,t,e,r){if(!yi(i,"scalable"))return[0,0];var a=r.startOffsetWidth,s=r.startOffsetHeight,l=r.fixedPosition,c=r.fixedDirection,d=r.is3d,f=bp(i,function(h,v){return wp(function(i,n){var t=i.transformOrigin,s=i.is3d?4:3;return Ji(i.offsetMatrix,he(i.targetMatrix,ac(n,s),s),t,s)}(r,oe(n,[h/a,v/s])),a,s,c,l,d)},a,s,t,l,e,r);return[f[0]/a,f[1]/s]}(i,$,d,l,t)),B){R[0]&&R[1]&&X[0]&&X[1]&&(Math.abs(X[0]*f)>Math.abs(X[1]*h)?X[1]=0:X[0]=0);var ct=!X[0]&&!X[1];ct&&(S?$[0]=ie($[0]*m[0],E)/m[0]:$[1]=ie($[1]*m[1],E)/m[1]),R[0]&&!R[1]||X[0]&&!X[1]||ct&&S?($[0]+=X[0],$[1]=f*$[0]*m[0]/T/h/m[1]):(!R[0]&&R[1]||!X[0]&&X[1]||ct&&!S)&&($[1]+=X[1],$[0]=h*$[1]*m[1]*T/f/m[0])}else $[0]+=X[0],$[1]+=X[1],X[0]||($[0]=ie($[0]*m[0],E)/m[0]),X[1]||($[1]=ie($[1]*m[1],E)/m[1]);0===$[0]&&($[0]=1e-9*(c[0]>0?1:-1)),0===$[1]&&($[1]=1e-9*(c[1]>0?1:-1));var Pt=[$[0]/c[0],$[1]/c[1]];Z=function(i,n){return[i[0]*n[0],i[1]*n[1]]}($,m);var Ot=function(i,n,t,e,r){return Hc(i,"scale(".concat(n.join(", "),")"),t,e,r)}(i,$,t.fixedDirection,ft,t),Gt=qt(Ot,t.prevInverseDist||[0,0]);if(t.prevDist=$,t.prevInverseDist=Ot,Z[0]===c[0]&&Z[1]===c[1]&&Gt.every(function(Nt){return!Nt})&&!P)return!1;var Tt=Ar(t,"scale(".concat(Z.join(", "),")"),"scale(".concat($.join(", "),")")),At=te(i,n,ht({offsetWidth:f,offsetHeight:h,direction:d,scale:Z,dist:$,delta:Pt,isPinch:!!a},Lc(i,Tt,Gt,a,n)));return Ht(i,"onScale",At),At},dragControlEnd:function(i,n){var t=n.datas,e=n.isDrag;return!!t.isScale&&(t.isScale=!1,Ht(i,"onScaleEnd",Ye(i,n,{})),e)},dragGroupControlCondition:Mp,dragGroupControlStart:function(i,n){var t=n.datas,e=this.dragControlStart(i,n);if(!e)return!1;var r=zn(i,"resizable",n);function a(f,h){var v=t.fixedDirection,m=t.fixedPosition,T=be(h.datas.startPositions||je(f.state),v),k=ke(pi(-i.rotation/180*Math.PI,3),[T[0]-m[0],T[1]-m[1],1],3),P=k[1];return h.datas.originalX=k[0],h.datas.originalY=P,h}t.moveableScale=i.scale;var s=Dn(i,this,"dragControlStart",n,function(f,h){return a(f,h)}),l=function(f){e.setFixedDirection(f),s.forEach(function(h,v){h.setFixedDirection(f),a(h.moveable,r[v])})};t.setFixedDirection=l;var c=ht(ht({},e),{targets:i.props.targets,events:s,setFixedDirection:l}),d=Ht(i,"onScaleGroupStart",c);return t.isScale=!1!==d,!!t.isScale&&c},dragGroupControl:function(i,n){var t=n.datas;if(t.isScale){Aa(i,"onBeforeScale",function(h){Ht(i,"onBeforeScaleGroup",te(i,n,ht(ht({},h),{targets:i.props.targets}),!0))});var e=this.dragControl(i,n);if(e){var r=t.moveableScale;i.scale=[e.scale[0]*r[0],e.scale[1]*r[1]];var a=i.props.keepRatio,s=e.dist,l=e.scale,c=t.fixedPosition,d=Dn(i,this,"dragControl",n,function(h,v){var m=ke(pi(i.rotation/180*Math.PI,3),[v.datas.originalX*s[0],v.datas.originalY*s[1],1],3),S=m[0],T=m[1];return ht(ht({},v),{parentDist:null,parentScale:l,parentKeepRatio:a,dragClient:oe(c,[S,T])})}),f=ht({targets:i.props.targets,events:d},e);return Ht(i,"onScaleGroup",f),f}}},dragGroupControlEnd:function(i,n){var t=n.isDrag;if(n.datas.isScale){this.dragControlEnd(i,n);var r=Dn(i,this,"dragControlEnd",n);return Ht(i,"onScaleGroupEnd",Ye(i,n,{targets:i.props.targets,events:r})),t}},request:function(){var i={},n=0,t=0;return{isControl:!0,requestStart:function(e){return{datas:i,parentDirection:e.direction||[1,1]}},request:function(e){return{datas:i,parentDist:[n+=e.deltaWidth,t+=e.deltaHeight],parentKeepRatio:e.keepRatio}},requestEnd:function(){return{datas:i,isDrag:!0}}}}};function Fn(i,n){return i.map(function(t,e){return Yn(t,n[e],1,2)})}function Pp(i,n,t){var e=we(i,n),a=we(i,t)-e;return a>=0?a:a+2*Math.PI}var Fx={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array,edge:Boolean},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(i,n){var t=i.props,s=t.zoom;if(t.resizable||t.scalable||!t.warpable)return[];var l=i.state,c=l.pos1,d=l.pos2,f=l.pos3,h=l.pos4,v=Fn(c,d),m=Fn(d,c),S=Fn(c,f),T=Fn(f,c),k=Fn(f,h),E=Fn(h,f),P=Fn(d,h),R=Fn(h,d);return Jt([n.createElement("div",{className:jt("line"),key:"middeLine1",style:Ki(v,k,s)}),n.createElement("div",{className:jt("line"),key:"middeLine2",style:Ki(m,E,s)}),n.createElement("div",{className:jt("line"),key:"middeLine3",style:Ki(S,P,s)}),n.createElement("div",{className:jt("line"),key:"middeLine4",style:Ki(T,R,s)})],Ap(i,"warpable",n),!0)},dragControlCondition:function(i,n){if(n.isRequest)return!1;var t=n.inputEvent.target;return Te(t,jt("direction"))&&Te(t,jt("warpable"))},dragControlStart:function(i,n){var t=n.datas,r=i.props.target,s=Oa(n.inputEvent.target);if(!s||!r)return!1;var l=i.state,c=l.transformOrigin,d=l.is3d,f=l.targetTransform,h=l.targetMatrix,v=l.width,m=l.height,S=l.left,T=l.top;return t.datas={},t.targetTransform=f,t.warpTargetMatrix=d?h:gn(h,3,4),t.targetInverseMatrix=nc(vn(t.warpTargetMatrix,4),3,4),t.direction=s,t.left=S,t.top=T,t.poses=[[0,0],[v,0],[0,m],[v,m]].map(function(P){return qt(P,c)}),t.nextPoses=t.poses.map(function(P){return ke(t.warpTargetMatrix,[P[0],P[1],0,1],4)}),t.startValue=ye(4),t.prevMatrix=ye(4),t.absolutePoses=je(l),t.posIndexes=Gc(s),ti(i,n),Mr(n,"matrix3d"),l.snapRenderInfo={request:n.isRequest,direction:s},!1!==Ht(i,"onWarpStart",te(i,n,ht({set:function(P){t.startValue=P}},Er(n))))&&(t.isWarp=!0),t.isWarp},dragControl:function(i,n){var t=n.datas,e=n.isRequest,r=n.distX,a=n.distY,s=t.targetInverseMatrix,l=t.prevMatrix,d=t.startValue,f=t.poses,h=t.posIndexes,v=t.absolutePoses;if(!t.isWarp)return!1;if(Tr(n,"matrix3d"),yi(i,"warpable")){var m=h.map(function(tt){return v[tt]});m.length>1&&m.push([(m[0][0]+m[1][0])/2,(m[0][1]+m[1][1])/2]);var S=Zr(i,e,{horizontal:m.map(function(tt){return tt[1]+a}),vertical:m.map(function(tt){return tt[0]+r})});a-=S.horizontal.offset,r-=S.vertical.offset}var E=mn({datas:t,distX:r,distY:a},!0),P=t.nextPoses.slice();if(h.forEach(function(tt){P[tt]=oe(P[tt],E)}),!a1.every(function(tt){return function(i,n){var t=Pp(i[0],i[1],i[2]),e=Pp(n[0],n[1],n[2]),r=Math.PI;return!(t>=r&&e<=r||t<=r&&e>=r)}(tt.map(function($){return f[$]}),tt.map(function($){return P[$]}))}))return!1;var R=Jo(f[0],f[2],f[1],f[3],P[0],P[2],P[1],P[3]);if(!R.length)return!1;var V=Rc(t,he(s,R,4),!0),L=he(vn(l,4),V,4);t.prevMatrix=V;var Z=he(d,V,4),q=Ar(t,"matrix3d(".concat(Z.join(", "),")"),"matrix3d(".concat(V.join(", "),")"));return wa(n,q),Ht(i,"onWarp",te(i,n,{delta:L,matrix:Z,dist:V,multiply:he,transform:q})),!0},dragControlEnd:function(i,n){var t=n.datas,e=n.isDrag;return!!t.isWarp&&(t.isWarp=!1,Ht(i,"onWarpEnd",Ye(i,n,{})),e)}},Lx=jt("area-pieces"),jr=jt("area-piece"),kp=jt("avoid");function Ya(i){var n=i.areaElement;if(n){var t=i.state,e=t.width,r=t.height;(function(i,n){if(i.classList)i.classList.remove(n);else{var t=new RegExp("(\\s|^)"+n+"(\\s|$)");i.className=i.className.replace(t," ")}})(n,kp),n.style.cssText+="left: 0px; top: 0px; width: ".concat(e,"px; height: ").concat(r,"px")}}function Ip(i){return i.createElement("div",{key:"area_pieces",className:Lx},i.createElement("div",{className:jr}),i.createElement("div",{className:jr}),i.createElement("div",{className:jr}),i.createElement("div",{className:jr}))}var Rp={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(i,n){var t=i.props,e=t.target,r=t.dragArea,a=t.groupable,l=i.state,c=l.width,d=l.height,f=l.renderPoses,h=t.passDragArea?jt("area","pass"):jt("area");if(a)return[n.createElement("div",{key:"area",ref:fn(i,"areaElement"),className:h}),Ip(n)];if(!e||!r)return[];var v=Jo([0,0],[c,0],[0,d],[c,d],f[0],f[1],f[2],f[3]),m=v.length?kr(v,!0):"none";return[n.createElement("div",{key:"area",ref:fn(i,"areaElement"),className:h,style:{top:"0px",left:"0px",width:"".concat(c,"px"),height:"".concat(d,"px"),transformOrigin:"0 0",transform:m}}),Ip(n)]},dragStart:function(i,n){var e=n.clientX,r=n.clientY;if(!n.inputEvent)return!1;n.datas.isDragArea=!1;var s=i.areaElement,l=i.state,c=l.moveableClientRect,f=l.rootMatrix,h=l.is3d,v=c.left,m=c.top,S=qe(l.renderPoses),T=S.left,k=S.top,E=S.width,P=S.height,B=xi(f,[e-v,r-m],h?4:3),V=B[0],L=B[1],Z=[{left:T,top:k,width:E,height:(L-=k)-10},{left:T,top:k,width:(V-=T)-10,height:P},{left:T,top:k+L+10,width:E,height:P-L-10},{left:T+V+10,top:k,width:E-V-10,height:P}],q=[].slice.call(s.nextElementSibling.children);Z.forEach(function(tt,$){q[$].style.cssText="left: ".concat(tt.left,"px;top: ").concat(tt.top,"px; width: ").concat(tt.width,"px; height: ").concat(tt.height,"px;")}),function(i,n){i.classList?i.classList.add(n):i.className+=" "+n}(s,kp),l.disableNativeEvent=!0},drag:function(i,n){var t=n.datas,e=n.inputEvent;if(this.enableNativeEvent(i),!e)return!1;t.isDragArea||(t.isDragArea=!0,Ya(i))},dragEnd:function(i,n){if(this.enableNativeEvent(i),!n.inputEvent)return!1;n.datas.isDragArea||Ya(i)},dragGroupStart:function(i,n){return this.dragStart(i,n)},dragGroup:function(i,n){return this.drag(i,n)},dragGroupEnd:function(i,n){return this.dragEnd(i,n)},unset:function(i){Ya(i),i.state.disableNativeEvent=!1},enableNativeEvent:function(i){var n=i.state;n.disableNativeEvent&&zl(function(){n.disableNativeEvent=!1})}},Hx=Ui("origin",{render:function(i,n){var t=i.props.zoom,e=i.state,r=e.beforeOrigin,a=e.rotation;return[n.createElement("div",{className:jt("control","origin"),style:Da(a,t,r),key:"beforeOrigin"})]}});function Zx(i){var n=i.scrollContainer;return[n.scrollLeft,n.scrollTop]}var Wx={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(i,n){var e=i.props.scrollContainer,r=void 0===e?i.getContainer():e,a=new Rm,s=$i(r,!0);n.datas.dragScroll=a;var l=n.isControl?"controlGesto":"targetGesto",c=n.targets;a.on("scroll",function(d){var v=te(i,n,{scrollContainer:d.container,direction:d.direction}),m=c?"onScrollGroup":"onScroll";c&&(v.targets=c),Ht(i,m,v)}).on("move",function(d){i[l].scrollBy(d.offsetX,d.offsetY,n.inputEvent,!1)}),a.dragStart(n,{container:s})},checkScroll:function(i,n){var t=n.datas.dragScroll;if(t){var e=i.props,r=e.scrollContainer,a=void 0===r?i.getContainer():r,s=e.scrollThreshold,c=e.getScrollPosition,d=void 0===c?Zx:c;return t.drag(n,{container:a,threshold:void 0===s?0:s,getScrollPosition:function(f){return d({scrollContainer:f.container,direction:f.direction})}}),!0}},drag:function(i,n){return this.checkScroll(i,n)},dragEnd:function(i,n){n.datas.dragScroll.dragEnd(),n.datas.dragScroll=null},dragControlStart:function(i,n){return this.dragStart(i,ht(ht({},n),{isControl:!0}))},dragControl:function(i,n){return this.drag(i,n)},dragControlEnd:function(i,n){return this.dragEnd(i,n)},dragGroupStart:function(i,n){return this.dragStart(i,ht(ht({},n),{targets:i.props.targets}))},dragGroup:function(i,n){return this.drag(i,ht(ht({},n),{targets:i.props.targets}))},dragGroupEnd:function(i,n){return this.dragEnd(i,ht(ht({},n),{targets:i.props.targets}))},dragGroupControlStart:function(i,n){return this.dragStart(i,ht(ht({},n),{targets:i.props.targets,isControl:!0}))},dragGroupContro:function(i,n){return this.drag(i,ht(ht({},n),{targets:i.props.targets}))},dragGroupControEnd:function(i,n){return this.dragEnd(i,ht(ht({},n),{targets:i.props.targets}))}},zp={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Object,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object,flushSync:Function,stopPropagation:Boolean,preventClickEventOnDrag:Boolean,preventClickDefault:Boolean},events:{}},Vx=Ui("padding",{render:function(i,n){var t=i.props;if(t.dragArea)return[];var e=t.padding||{},r=e.left,s=e.top,l=void 0===s?0:s,c=e.right,d=void 0===c?0:c,f=e.bottom,h=void 0===f?0:f,v=i.state,m=v.renderPoses,P=[v.pos1,v.pos2,v.pos3,v.pos4],R=[];return(void 0===r?0:r)>0&&R.push([0,2]),l>0&&R.push([0,1]),d>0&&R.push([1,3]),h>0&&R.push([2,3]),R.map(function(B,V){var L=B[0],Z=B[1],X=Jo([0,0],[100,0],[0,100],[100,100],P[L],P[Z],m[L],m[Z]);if(X.length)return n.createElement("div",{key:"padding".concat(V),className:jt("padding"),style:{transform:kr(X,!0)}})})}}),Gp=["nw","ne","se","sw"];function Ur(i,n){var t=i[0]+i[1],e=t>n?n/t:1;return i[0]*=e,i[1]=n-i[1]*e,i}var jx=[1,2,5,6],Ux=[0,3,4,7],ii=[1,-1,-1,1],ri=[1,1,-1,-1];function Xa(i,n,t,e,r,a,s,l,c){void 0===a&&(a=0),void 0===s&&(s=0),void 0===l&&(l=e),void 0===c&&(c=r);var d=[],f=!1,h=i.map(function(v,m){var S=n[m],T=S.horizontal,k=S.vertical;if(k&&!f&&(f=!0,d.push("/")),f){var E=Math.max(0,1===k?v[1]-s:c-v[1]);return d.push(ln(E,r,t)),E}return E=Math.max(0,1===T?v[0]-a:l-v[0]),d.push(ln(E,e,t)),E});return{styles:d,raws:h}}function Np(i){for(var n=[0,0],t=[0,0],e=i.length,r=0;r<e;++r){var a=i[r];!a.sub||(a.horizontal&&(0===n[1]&&(n[0]=r),n[1]=r-n[0]+1,t[0]=r+1),a.vertical&&(0===t[1]&&(t[0]=r),t[1]=r-t[0]+1))}return{horizontalRange:n,verticalRange:t}}function Bp(i,n,t,e,r,a){var s,l,c,d;void 0===a&&(a=[0,0]);var f=i.indexOf("/"),h=(f>-1?i.slice(0,f):i).length,v=i.slice(0,h),m=i.slice(h+1),S=v[0],T=void 0===S?"0px":S,k=v[1],E=void 0===k?T:k,P=v[2],B=v[3],L=m[0],Z=void 0===L?T:L,q=m[1],tt=void 0===q?Z:q,$=m[2],ft=void 0===$?Z:$,X=m[3],ct=void 0===X?tt:X,yt=[T,E,void 0===P?T:P,void 0===B?E:B].map(function(At){return xe(At,n)}),xt=[Z,tt,ft,ct].map(function(At){return xe(At,t)}),Pt=yt.slice(),Ot=xt.slice();s=Ur([Pt[0],Pt[1]],n),Pt[0]=s[0],Pt[1]=s[1],l=Ur([Pt[3],Pt[2]],n),Pt[3]=l[0],Pt[2]=l[1],c=Ur([Ot[0],Ot[3]],t),Ot[0]=c[0],Ot[3]=c[1],d=Ur([Ot[1],Ot[2]],t),Ot[1]=d[0],Ot[2]=d[1];var Gt=Pt.slice(0,Math.max(a[0],v.length)),Tt=Ot.slice(0,Math.max(a[1],m.length));return Jt(Jt([],Gt.map(function(At,Nt){return{horizontal:ii[Nt],vertical:0,pos:[e+At,r+(-1===ri[Nt]?t:0)],sub:!0,raw:yt[Nt],direction:Gp[Nt]}}),!0),Tt.map(function(At,Nt){return{horizontal:0,vertical:ri[Nt],pos:[e+(-1===ii[Nt]?n:0),r+At],sub:!0,raw:xt[Nt],direction:Gp[Nt]}}),!0)}function Fp(i,n,t,e,r){void 0===r&&(r=n.length);var a=Np(i.slice(e)),s=a.horizontalRange,l=a.verticalRange,c=t-e,d=0;if(0===c)d=r;else if(c>0&&c<s[1])d=s[1]-c;else{if(!(c>=l[0]))return;d=l[0]+l[1]-c}i.splice(t,d),n.splice(t,d)}function Lp(i,n,t,e,r,a,s,l,c,d,f){void 0===d&&(d=0),void 0===f&&(f=0);var h=Np(i.slice(t)),v=h.horizontalRange,m=h.verticalRange;if(e>-1)for(var S=1===ii[e]?a-d:l-a,T=v[1];T<=e;++T){var E=0;if(e===T?E=a:0===T?E=d+S:-1===ii[T]&&(E=l-(n[t][0]-d)),i.splice(t+T,0,{horizontal:ii[T],vertical:0,pos:[E,k=1===ri[T]?f:c]}),n.splice(t+T,0,[E,k]),0===T)break}else if(r>-1){var P=1===ri[r]?s-f:c-s;if(0===v[1]&&0===m[1]){var R=[d+P,f];i.push({horizontal:ii[0],vertical:0,pos:R}),n.push(R)}var B=m[0];for(T=m[1];T<=r;++T){var k=0;if(r===T?k=s:0===T?k=f+P:1===ri[T]?k=n[t+B][1]:-1===ri[T]&&(k=c-(n[t+B][1]-f)),i.push({horizontal:0,vertical:ri[T],pos:[E=1===ii[T]?d:l,k]}),n.push([E,k]),0===T)break}}}function Hp(i,n){return void 0===n&&(n=i.map(function(r){return r.raw})),{horizontals:i.map(function(r,a){return r.horizontal?n[a]:null}).filter(function(r){return null!=r}),verticals:i.map(function(r,a){return r.vertical?n[a]:null}).filter(function(r){return null!=r})}}var Yx=[[0,-1,"n"],[1,0,"e"]],Xx=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Ja(i,n,t){var e=i.props.clipRelative,r=i.state,a=r.width,s=r.height,c=n.type,d=n.poses,f="rect"===c,h="circle"===c;if("polygon"===c)return t.map(function(L){return"".concat(ln(L[0],a,e)," ").concat(ln(L[1],s,e))});if(f||"inset"===c){var v=t[1][1],m=t[3][0],S=t[7][0],T=t[5][1];if(f)return[v,m,T,S].map(function(L){return"".concat(L,"px")});var k=[v,a-m,s-T,S].map(function(L,Z){return ln(L,Z%2?a:s,e)});if(t.length>8){var E=qt(t[4],t[0]),P=E[0],R=E[1];k.push.apply(k,Jt(["round"],Xa(t.slice(8),d.slice(8),e,P,R,S,v,m,T).styles,!1))}return k}if(h||"ellipse"===c){var B=t[0],V=ln(Math.abs(t[1][1]-B[1]),h?Math.sqrt((a*a+s*s)/2):s,e);return(k=h?[V]:[ln(Math.abs(t[2][0]-B[0]),a,e),V]).push("at",ln(B[0],a,e),ln(B[1],s,e)),k}}function Yr(i,n,t,e){var r=[e,(e+n)/2,n],a=[i,(i+t)/2,t];return Xx.map(function(s){var l=s[0],c=s[1],d=s[2],f=r[l+1],h=a[c+1];return{vertical:Math.abs(c),horizontal:Math.abs(l),direction:d,pos:[f,h]}})}function Zp(i){var n=[1/0,-1/0],t=[1/0,-1/0];return i.forEach(function(e){var r=e.pos;n[0]=Math.min(n[0],r[0]),n[1]=Math.max(n[1],r[0]),t[0]=Math.min(t[0],r[1]),t[1]=Math.max(t[1],r[1])}),[Math.abs(n[1]-n[0]),Math.abs(t[1]-t[0])]}function Wp(i,n,t,e,r){var a,s,l,c,d,f,h,v=r;if(!v){var m=sn(i),S=m.clipPath;v="none"!==S?S:m.clip}if(v&&"none"!==v&&"auto"!==v||(v=e)){var T=Eo(v),k=T.prefix,E=void 0===k?v:k,P=T.value,R=void 0===P?"":P,B="circle"===E,V=" ";if("polygon"===E)return V=",",{type:E,clipText:v,poses:Z=(L=Pn(R||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map(function(Et){var kt=Et.split(" "),Ft=kt[1];return{vertical:1,horizontal:1,pos:[xe(kt[0],n),xe(Ft,t)]}}),splitter:V};if(B||"ellipse"===E){var yt,q="",tt="",$=0,ft=0,L=Mn(R);if(B)q=void 0===(s=L[2])?"50%":s,tt=void 0===(l=L[3])?"50%":l,$=xe(void 0===(a=L[0])?"50%":a,Math.sqrt((n*n+t*t)/2)),ft=$;else yt=void 0===(d=L[1])?"50%":d,q=void 0===(f=L[3])?"50%":f,tt=void 0===(h=L[4])?"50%":h,$=xe(void 0===(c=L[0])?"50%":c,n),ft=xe(yt,t);var xt=[xe(q,n),xe(tt,t)],Z=Jt([{vertical:1,horizontal:1,pos:xt,direction:"nesw"}],Yx.slice(0,B?1:2).map(function(Bt){return{vertical:Math.abs(Bt[1]),horizontal:Bt[0],direction:Bt[2],sub:!0,pos:[xt[0]+Bt[0]*$,xt[1]+Bt[1]*ft]}}),!0);return{type:E,clipText:v,radiusX:$,radiusY:ft,left:xt[0]-$,top:xt[1]-ft,poses:Z,splitter:V}}if("inset"===E){var Pt=(L=Mn(R||"0 0 0 0")).indexOf("round"),Ot=(Pt>-1?L.slice(0,Pt):L).length,Gt=L.slice(Ot+1),Tt=L.slice(0,Ot),At=Tt[0],Nt=Tt[1],Rt=void 0===Nt?At:Nt,Yt=Tt[2],Ut=Tt[3],G=void 0===Ut?Rt:Ut,F=[At,void 0===Yt?At:Yt].map(function(Bt){return xe(Bt,t)}),Y=F[0],W=F[1],j=[G,Rt].map(function(Bt){return xe(Bt,n)}),nt=n-(lt=j[1]),vt=t-W,_t=Bp(Gt,nt-(Q=j[0]),vt-Y,Q,Y);return{type:"inset",clipText:v,poses:Z=Jt(Jt([],Yr(Y,nt,vt,Q),!0),_t,!0),top:Y,left:Q,right:nt,bottom:vt,radius:Gt,splitter:V}}if("rect"===E){V=",";var lt,Q,Dt=(L=Pn(R||"0px, ".concat(n,"px, ").concat(t,"px, 0px"))).map(function(Kt){return Ri(Kt).value});return{type:"rect",clipText:v,poses:Z=Yr(Y=Dt[0],lt=Dt[1],W=Dt[2],Q=Dt[3]),top:Y,right:lt,bottom:W,left:Q,values:L,splitter:V}}}}var qx={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,keepRatio:Boolean,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(i,n){var t=i.props,a=t.clipArea,s=t.zoom,l=i.state,c=l.target,d=l.width,f=l.height,h=l.allMatrix,v=l.is3d,m=l.left,S=l.top,T=l.pos1,k=l.pos2,E=l.pos3,P=l.pos4,B=l.snapBoundInfos,V=l.rotation;if(!c)return[];var L=Wp(c,d,f,t.defaultClipPath||"inset",l.clipPathState||t.customClipPath);if(!L)return[];var Z=v?4:3,q=L.type,$=L.poses.map(function(vt){var _t=Ae(h,vt.pos,Z);return[_t[0]-m,_t[1]-S]}),ft=[],X=[],ct="rect"===q,yt="inset"===q,xt="polygon"===q;if(ct||yt||xt){var Pt=yt?$.slice(0,8):$;X=Pt.map(function(vt,_t){var Dt=0===_t?Pt[Pt.length-1]:Pt[_t-1],Et=we(Dt,vt),kt=Xc(Dt,vt);return n.createElement("div",{key:"clipLine".concat(_t),className:jt("line","clip-line","snap-control"),"data-clip-index":_t,style:{width:"".concat(kt,"px"),transform:"translate(".concat(Dt[0],"px, ").concat(Dt[1],"px) rotate(").concat(Et,"rad) scaleY(").concat(s,")")}})})}if(ft=$.map(function(vt,_t){return n.createElement("div",{key:"clipControl".concat(_t),className:jt("control","clip-control","snap-control"),"data-clip-index":_t,style:{transform:"translate(".concat(vt[0],"px, ").concat(vt[1],"px) rotate(").concat(V,"rad) scale(").concat(s,")")}})}),yt&&ft.push.apply(ft,$.slice(8).map(function(vt,_t){return n.createElement("div",{key:"clipRadiusControl".concat(_t),className:jt("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+_t,style:{transform:"translate(".concat(vt[0],"px, ").concat(vt[1],"px) rotate(").concat(V,"rad) scale(").concat(s,")")}})})),"circle"===q||"ellipse"===q){var Tt=L.radiusX,At=L.radiusY,Nt=qt(Ae(h,[L.left,L.top],Z),Ae(h,[0,0],Z)),Rt=Nt[0],Yt=Nt[1],Vt="none";if(!a){for(var Ut=Math.max(10,Tt/5,At/5),G=[],F=0;F<=Ut;++F){var Y=2*Math.PI/Ut*F;G.push([Tt+(Tt-s)*Math.cos(Y),At+(At-s)*Math.sin(Y)])}G.push([Tt,-2]),G.push([-2,-2]),G.push([-2,2*At+2]),G.push([2*Tt+2,2*At+2]),G.push([2*Tt+2,-2]),G.push([Tt,-2]),Vt="polygon(".concat(G.map(function(vt){return"".concat(vt[0],"px ").concat(vt[1],"px")}).join(", "),")")}ft.push(n.createElement("div",{key:"clipEllipse",className:jt("clip-ellipse","snap-control"),style:{width:"".concat(2*Tt,"px"),height:"".concat(2*At,"px"),clipPath:Vt,transform:"translate(".concat(-m+Rt,"px, ").concat(-S+Yt,"px) ").concat(kr(h))}}))}if(a){var W=qe(Jt([T,k,E,P],$,!0)),j=W.width,Q=W.height,lt=W.left,nt=W.top;(xt||ct||yt)&&(G=yt?$.slice(0,8):$,ft.push(n.createElement("div",{key:"clipArea",className:jt("clip-area","snap-control"),style:{width:"".concat(j,"px"),height:"".concat(Q,"px"),transform:"translate(".concat(lt,"px, ").concat(nt,"px)"),clipPath:"polygon(".concat(G.map(function(_t){return"".concat(_t[0]-lt,"px ").concat(_t[1]-nt,"px")}).join(", "),")")}})))}return B&&["vertical","horizontal"].forEach(function(vt){var _t=B[vt],Dt="horizontal"===vt;_t.isSnap&&X.push.apply(X,_t.snap.posInfos.map(function(Et,kt){var Bt=Et.pos,Ft=qt(Ae(h,Dt?[0,Bt]:[Bt,0],Z),[m,S]),ne=qt(Ae(h,Dt?[d,Bt]:[Bt,f],Z),[m,S]);return Wr(n,"",Ft,ne,s,"clip".concat(vt,"snap").concat(kt),"guideline")})),_t.isBound&&X.push.apply(X,_t.bounds.map(function(Et,kt){var Bt=Et.pos,Ft=qt(Ae(h,Dt?[0,Bt]:[Bt,0],Z),[m,S]),ne=qt(Ae(h,Dt?[d,Bt]:[Bt,f],Z),[m,S]);return Wr(n,"",Ft,ne,s,"clip".concat(vt,"bounds").concat(kt),"guideline","bounds","bold")}))}),Jt(Jt([],ft,!0),X,!0)},dragControlCondition:function(i,n){return n.inputEvent&&(n.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(i,n){var e=i.props.dragWithClip;return!(void 0===e||e)&&this.dragControlStart(i,n)},drag:function(i,n){return this.dragControl(i,ht(ht({},n),{isDragTarget:!0}))},dragEnd:function(i,n){return this.dragControlEnd(i,n)},dragControlStart:function(i,n){var t=i.state,e=i.props,r=e.defaultClipPath,a=e.customClipPath,s=t.target,l=t.width,c=t.height,d=n.inputEvent?n.inputEvent.target:null,f=d&&d.getAttribute("class")||"",h=n.datas,v=Wp(s,l,c,r||"inset",a);if(!v)return!1;var m=v.clipText;return!1===Ht(i,"onClipStart",te(i,n,{clipType:v.type,clipStyle:m,poses:v.poses.map(function(E){return E.pos})}))?(h.isClipStart=!1,!1):(h.isControl=f&&f.indexOf("clip-control")>-1,h.isLine=f.indexOf("clip-line")>-1,h.isArea=f.indexOf("clip-area")>-1||f.indexOf("clip-ellipse")>-1,h.clipIndex=d?parseInt(d.getAttribute("data-clip-index"),10):-1,h.clipPath=v,h.isClipStart=!0,t.clipPathState=m,ti(i,n),!0)},dragControl:function(i,n){var t,e=n.datas,r=n.originalDatas,a=n.isDragTarget;if(!e.isClipStart)return!1;var l=e.isControl,c=e.isLine,d=e.isArea,f=e.clipIndex,h=e.clipPath;if(!h)return!1;var v=ni(i.props,"clippable"),m=v.keepRatio,S=0,T=0,k=r.draggable,E=mn(n);a&&k?(S=(t=k.prevBeforeDist)[0],T=t[1]):(S=E[0],T=E[1]);var P=[S,T],R=i.state,B=R.width,V=R.height,L=!d&&!l&&!c,Z=h.type,q=h.poses,tt=h.splitter,$=q.map(function(ue){return ue.pos});L&&(S=-S,T=-T);var ft=!l||"nesw"===q[f].direction,X="inset"===Z||"rect"===Z,ct=q.map(function(){return[0,0]});if(l&&!ft){var yt=q[f],Pt=yt.vertical,Ot=[S*Math.abs(yt.horizontal),T*Math.abs(Pt)];ct=function(i,n,t,e,r){var a=i[n],s=a.direction,l=a.sub,c=i.map(function(){return[0,0]}),d=s?s.split(""):[];if(e&&n<8){var f=d.filter(function(ct){return"w"===ct||"e"===ct}),h=d.filter(function(ct){return"n"===ct||"s"===ct}),v=f[0],m=h[0];c[n]=t;var S=Zp(i),T=S[0],k=S[1],E=T&&k?T/k:0;if(E&&r){var R=i[(n+4)%8].pos,B=[0,0];s.indexOf("w")>-1?B[0]=-1:s.indexOf("e")>-1&&(B[0]=1),s.indexOf("n")>-1?B[1]=-1:s.indexOf("s")>-1&&(B[1]=1);var V=ep([T,k],t,E,B,!0),L=T+V[0],Z=k+V[1],q=R[1],tt=R[1],$=R[0],ft=R[0];-1===B[0]?$=ft-L:1===B[0]?ft=$+L:($-=L/2,ft+=L/2),-1===B[1]?q=tt-Z:(1===B[1]||(q=tt-Z/2),tt=q+Z);var X=Yr(q,ft,tt,$);i.forEach(function(ct,yt){c[yt][0]=X[yt].pos[0]-ct.pos[0],c[yt][1]=X[yt].pos[1]-ct.pos[1]})}else i.forEach(function(ct,yt){var xt=ct.direction;!xt||(xt.indexOf(v)>-1&&(c[yt][0]=t[0]),xt.indexOf(m)>-1&&(c[yt][1]=t[1]))}),v&&(c[1][0]=t[0]/2,c[5][0]=t[0]/2),m&&(c[3][1]=t[1]/2,c[7][1]=t[1]/2)}else s&&!l?d.forEach(function(ct){var yt="n"===ct||"s"===ct;i.forEach(function(xt,Pt){var Ot=xt.direction,Gt=xt.horizontal,Tt=xt.vertical;!Ot||-1===Ot.indexOf(ct)||(c[Pt]=[yt||!Gt?0:t[0],yt&&Tt?t[1]:0])})}):c[n]=t;return c}(q,f,Ot,X,m)}else ft&&(ct=$.map(function(){return[S,T]}));var Gt=$.map(function(ue,De){return oe(ue,ct[De])}),Tt=Jt([],Gt,!0);R.snapBoundInfos=null;var At="circle"===h.type,Nt="ellipse"===h.type;if(At||Nt){var Rt=qe(Gt),Yt=Math.abs(Rt.bottom-Rt.top),Vt=Math.abs(Nt?Rt.right-Rt.left:Yt),Ut=Gt[0][1]+Yt,G=Gt[0][0]-Vt,F=Gt[0][0]+Vt;At&&(Tt.push([F,Rt.bottom]),ct.push([1,0])),Tt.push([Rt.left,Ut]),ct.push([0,1]),Tt.push([G,Rt.bottom]),ct.push([1,0])}var Y=yp((v.clipHorizontalGuidelines||[]).map(function(ue){return xe("".concat(ue),V)}),(v.clipVerticalGuidelines||[]).map(function(ue){return xe("".concat(ue),B)}),B,V),W=[],j=[];if(At||Nt)W=[Tt[4][0],Tt[2][0]],j=[Tt[1][1],Tt[3][1]];else if(X){var lt=[ct[0],ct[2],ct[4],ct[6]];W=(Q=[Tt[0],Tt[2],Tt[4],Tt[6]]).filter(function(ue,De){return lt[De][0]}).map(function(ue){return ue[0]}),j=Q.filter(function(ue,De){return lt[De][1]}).map(function(ue){return ue[1]})}else W=Tt.filter(function(ue,De){return ct[De][0]}).map(function(ue){return ue[0]}),j=Tt.filter(function(ue,De){return ct[De][1]}).map(function(ue){return ue[1]});var nt=[0,0],vt=gp(Y,v.clipTargetBounds&&{left:0,top:0,right:B,bottom:V},W,j,5),_t=vt.horizontal,Dt=vt.vertical,Et=_t.offset,kt=Dt.offset;if(_t.isBound&&(nt[1]+=Et),Dt.isBound&&(nt[0]+=kt),(Nt||At)&&0===ct[0][0]&&0===ct[0][1]){var Bt=(Rt=qe(Gt)).bottom-Rt.top,Ft=Nt?Rt.right-Rt.left:Bt;Ft-=Dt.isBound?Math.abs(kt):0===Dt.snapIndex?-kt:kt,Bt-=_t.isBound?Math.abs(Et):0===_t.snapIndex?-Et:Et,At&&(Ft=Bt=ap(Dt,_t)>0?Bt:Ft);var Kt=Tt[0];Tt[1][1]=Kt[1]-Bt,Tt[2][0]=Kt[0]+Ft,Tt[3][1]=Kt[1]+Bt,Tt[4][0]=Kt[0]-Ft}else if(X&&m&&l){var $t=Zp(q),ge=$t[0],He=$t[1],Ln=ge&&He?ge/He:0,Ie=q[f].direction||"",xn=Tt[1][1];Ut=Tt[5][1],G=Tt[7][0],F=Tt[3][0],Et<=kt?Et=kt/Ln:kt=Et*Ln,Ie.indexOf("w")>-1?G-=kt:Ie.indexOf("e")>-1?F-=kt:(G+=kt/2,F-=kt/2),Ie.indexOf("n")>-1?xn-=Et:Ie.indexOf("s")>-1?Ut-=Et:(xn+=Et/2,Ut-=Et/2);var Re=Yr(xn,F,Ut,G);Tt.forEach(function(Zn,Kr){var tn;Zn[0]=(tn=Re[Kr].pos)[0],Zn[1]=tn[1]})}else Tt.forEach(function(ue,De){var $e=ct[De];$e[0]&&(ue[0]-=kt),$e[1]&&(ue[1]-=Et)});var _i=Ja(i,h,Gt),yn="".concat(Z,"(").concat(_i.join(tt),")");if(R.clipPathState=yn,At||Nt)W=[Tt[4][0],Tt[2][0]],j=[Tt[1][1],Tt[3][1]];else if(X){var Q;W=(Q=[Tt[0],Tt[2],Tt[4],Tt[6]]).map(function(De){return De[0]}),j=Q.map(function(De){return De[1]})}else W=Tt.map(function(ue){return ue[0]}),j=Tt.map(function(ue){return ue[1]});if(R.snapBoundInfos=gp(Y,v.clipTargetBounds&&{left:0,top:0,right:B,bottom:V},W,j,1),k){var or=nt;a&&(or=[P[0]+nt[0]-E[0],P[1]+nt[1]-E[1]]),k.deltaOffset=he(R.allMatrix,[or[0],or[1],0,0],R.is3d?4:3)}return Ht(i,"onClip",te(i,n,{clipEventType:"changed",clipType:Z,poses:Gt,clipStyle:yn,clipStyles:_i,distX:S,distY:T})),!0},dragControlEnd:function(i,n){this.unset(i);var t=n.isDrag,e=n.datas,r=n.isDouble,a=e.isLine,l=e.isControl;return!!e.isClipStart&&(Ht(i,"onClipEnd",Ye(i,n,{})),r&&(l?function(i,n){var t=n.datas,e=t.clipPath,r=t.clipIndex,s=e.type,l=e.poses,c=e.splitter,d=l.map(function(v){return v.pos}),f=d.length;if("polygon"===s)l.splice(r,1),d.splice(r,1);else{if("inset"!==s)return;if(r<8||(Fp(l,d,r,8,f),f===l.length))return}var h=Ja(i,e,d);Ht(i,"onClip",te(i,n,{clipEventType:"removed",clipType:s,poses:d,clipStyles:h,clipStyle:"".concat(s,"(").concat(h.join(c),")"),distX:0,distY:0}))}(i,n):a&&function(i,n){var t=Ic(i,n),e=t[0],r=t[1],a=n.datas,s=a.clipPath,l=a.clipIndex,d=s.type,f=s.poses,h=s.splitter,v=f.map(function(E){return E.pos});if("polygon"===d)v.splice(l,0,[e,r]);else{if("inset"!==d)return;var m=jx.indexOf(l),S=Ux.indexOf(l),T=f.length;if(Lp(f,v,8,m,S,e,r,v[4][0],v[4][1],v[0][0],v[0][1]),T===f.length)return}var k=Ja(i,s,v);Ht(i,"onClip",te(i,n,{clipEventType:"added",clipType:d,poses:v,clipStyles:k,clipStyle:"".concat(d,"(").concat(k.join(h),")"),distX:0,distY:0}))}(i,n)),r||t)},unset:function(i){i.state.clipPathState="",i.state.snapBoundInfos=null}},$x={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(i,n){return n.isRequest?"originDraggable"===n.requestAble:Te(n.inputEvent.target,jt("origin"))},dragControlStart:function(i,n){var t=n.datas;ti(i,n);var e=te(i,n,{dragStart:Le.dragStart(i,(new fi).dragStart([0,0],n))}),r=Ht(i,"onDragOriginStart",e);return t.startOrigin=i.state.transformOrigin,t.startTargetOrigin=i.state.targetOrigin,t.prevOrigin=[0,0],t.isDragOrigin=!0,!1===r?(t.isDragOrigin=!1,!1):e},dragControl:function(i,n){var t=n.datas,e=n.isPinch,r=n.isRequest;if(!t.isDragOrigin)return!1;var a=mn(n),c=i.state,d=c.width,f=c.height,h=c.offsetMatrix,v=c.targetMatrix,S=i.props.originRelative,T=void 0===S||S,k=c.is3d?4:3,E=[a[0],a[1]];if(r){var P=n.distOrigin;(P[0]||P[1])&&(E=P)}var R=oe(t.startOrigin,E),B=oe(t.startTargetOrigin,E),V=qt(E,t.prevOrigin),L=Ji(h,v,R,k),Z=i.getRect(),q=qe(ei(L,d,f,k)),tt=[Z.left-q.left,Z.top-q.top];t.prevOrigin=E;var ft=te(i,n,{width:d,height:f,origin:R,dist:E,delta:V,transformOrigin:[ln(B[0],d,T),ln(B[1],f,T)].join(" "),drag:Le.drag(i,Xi(n,i.state,tt,!!e,!1))});return Ht(i,"onDragOrigin",ft),ft},dragControlEnd:function(i,n){return!!n.datas.isDragOrigin&&(Ht(i,"onDragOriginEnd",Ye(i,n,{})),!0)},dragGroupControlCondition:function(i,n){return this.dragControlCondition(i,n)},dragGroupControlStart:function(i,n){return!!this.dragControlStart(i,n)},dragGroupControl:function(i,n){var t=this.dragControl(i,n);return!!t&&(i.transformOrigin=t.transformOrigin,!0)},request:function(i){var n={},t=i.getRect(),e=0,r=0,a=t.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:n}},request:function(l){return"deltaOrigin"in l?(s[0]+=l.deltaOrigin[0],s[1]+=l.deltaOrigin[1]):"origin"in l?(s[0]=l.origin[0]-a[0],s[1]=l.origin[1]-a[1]):("x"in l?e=l.x-t.left:"deltaX"in l&&(e+=l.deltaX),"y"in l?r=l.y-t.top:"deltaY"in l&&(r+=l.deltaY)),{datas:n,distX:e,distY:r,distOrigin:s}},requestEnd:function(){return{datas:n,isDrag:!0}}}}};function Vp(i,n,t,e,r){var a;if(void 0===e&&(e=[0,0]),r)a=r;else{var l=sn(i);a=l&&l.borderRadius||""}return Bp(!a||!r&&"0px"===a?[]:Mn(a),n,t,0,0,e)}function jp(i,n,t,e,r,a){var s=i.state,l=s.width,c=s.height,d=Xa(a,r,i.props.roundRelative,l,c),h=d.styles,v=Hp(r,d.raws),m=v.horizontals,S=v.verticals,T=h.join(" ");s.borderRadiusState=T,Ht(i,"onRound",te(i,n,{horizontals:m,verticals:S,borderRadius:T,width:l,height:c,delta:e,dist:t}))}var ey={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(i,n){var t=i.state,e=t.target,s=t.allMatrix,c=t.left,d=t.top,h=i.props,v=h.minRoundControls,S=h.maxRoundControls,T=void 0===S?[4,4]:S,k=h.zoom;if(!e)return null;var E=t.is3d?4:3,P=Vp(e,t.width,t.height,void 0===v?[0,0]:v,t.borderRadiusState);if(!P)return null;var R=0,B=0;return P.map(function(V,L){B+=Math.abs(V.horizontal),R+=Math.abs(V.vertical);var Z=qt(Ae(s,V.pos,E),[c,d]),q=V.vertical?R<=T[1]:B<=T[0];return n.createElement("div",{key:"borderRadiusControl".concat(L),className:jt("control","border-radius"),"data-radius-index":L,style:{display:q?"block":"none",transform:"translate(".concat(Z[0],"px, ").concat(Z[1],"px) scale(").concat(k,")")}})})},dragControlCondition:function(i,n){if(!n.inputEvent||n.isRequest)return!1;var t=n.inputEvent.target.getAttribute("class")||"";return t.indexOf("border-radius")>-1||t.indexOf("moveable-line")>-1&&t.indexOf("moveable-direction")>-1},dragControlStart:function(i,n){var e=n.datas,r=n.inputEvent.target,a=r.getAttribute("class")||"",s=a.indexOf("border-radius")>-1,l=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,c=s?parseInt(r.getAttribute("data-radius-index"),10):-1,d=l?parseInt(r.getAttribute("data-line-index"),10):-1;if(!s&&!l)return!1;if(!1===Ht(i,"onRoundStart",te(i,n,{})))return!1;e.lineIndex=d,e.controlIndex=c,e.isControl=s,e.isLine=l,ti(i,n);var h=i.props,v=h.roundRelative,m=h.minRoundControls,S=void 0===m?[0,0]:m,T=i.state,k=T.target,E=T.width,P=T.height;e.isRound=!0,e.prevDist=[0,0];var R=Vp(k,E,P,S)||[];return e.controlPoses=R,T.borderRadiusState=Xa(R.map(function(B){return B.pos}),R,v,E,P).styles.join(" "),!0},dragControl:function(i,n){var t=n.datas;if(!t.isRound||!t.isControl||!t.controlPoses.length)return!1;var e=t.controlIndex,r=t.controlPoses,a=mn(n),s=a[0],l=a[1],c=[s,l],d=qt(c,t.prevDist),f=i.props.maxRoundControls,h=void 0===f?[4,4]:f,v=i.state,m=v.width,S=v.height,T=r[e],k=T.vertical,E=T.horizontal,P=r.map(function(B){var V=B.horizontal,L=B.vertical,Z=[V*E*c[0],L*k*c[1]];if(V){if(1===h[0])return Z;if(h[0]<4&&V!==E)return Z}else{if(0===h[1])return Z[1]=L*E*c[0]/m*S,Z;if(k){if(1===h[1])return Z;if(h[1]<4&&L!==k)return Z}}return[0,0]});P[e]=c;var R=r.map(function(B,V){return oe(B.pos,P[V])});return t.prevDist=[s,l],jp(i,n,c,d,r,R),!0},dragControlEnd:function(i,n){var t=i.state;t.borderRadiusState="";var e=n.datas,r=n.isDouble;if(!e.isRound)return!1;var a=t.width,s=t.height,l=e.isControl,c=e.controlIndex,d=e.isLine,f=e.lineIndex,h=e.controlPoses,v=h.map(function(R){return R.pos}),m=v.length,S=i.props.roundClickable;if(r&&(void 0===S||S)){if(l)Fp(h,v,c,0);else if(d){var k=Ic(i,n);!function(i,n,t,e,r,a,s){var l=Hp(i),f=l.horizontals.length,h=l.verticals.length,v=-1,m=-1;0===t?0===f?v=0:1===f&&(v=1):3===t&&(f<=2?v=2:f<=3&&(v=3)),2===t?0===h?m=0:h<4&&(m=3):1===t&&(h<=1?m=1:h<=2&&(m=2)),Lp(i,n,0,v,m,e,r,a,s)}(h,v,f,k[0],k[1],a,s)}m!==h.length&&jp(i,n,[0,0],[0,0],h,v)}return Ht(i,"onRoundEnd",Ye(i,n,{})),t.borderRadiusState="",!0},unset:function(i){i.state.borderRadiusState=""}},Up={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(i,n){var t=i.state,e=t.is3d,r=t.target,a=t.targetMatrix,s=null==r?void 0:r.style.transform,l=e?"matrix3d(".concat(a.join(","),")"):"matrix(".concat(rc(a,!0),")"),c=s&&"none"!==s?s:l;n.datas.startTransforms=function(i,n){var e=ye(n?4:3);return i==="matrix".concat(n?"3d":"","(").concat(e.join(","),")")||"matrix(1,0,0,1,0,0)"===i}(c,e)?[]:Mn(c)},resetStyle:function(i){var n=i.datas;n.nextStyle={},n.nextTransforms=i.datas.startTransforms,n.nextTransformAppendedIndexes=[]},fillDragStartParams:function(i,n){return te(i,n,{setTransform:function(t){n.datas.startTransforms=Cn(t)?t:Mn(t)},isPinch:!!n.isPinch})},fillDragParams:function(i,n){return te(i,n,{isPinch:!!n.isPinch})},dragStart:function(i,n){this.setTransform(i,n),Ht(i,"onBeforeRenderStart",this.fillDragStartParams(i,n))},drag:function(i,n){this.resetStyle(n),n.datas.nextStyle={},Ht(i,"onBeforeRender",te(i,n,{isPinch:!!n.isPinch}))},dragEnd:function(i,n){Ht(i,"onBeforeRenderEnd",te(i,n,{isPinch:!!n.isPinch,isDrag:n.isDrag}))},dragGroupStart:function(i,n){var t=this;this.dragStart(i,n);var e=zn(i,"beforeRenderable",n),r=i.moveables,a=e.map(function(s,l){var c=r[l];return t.setTransform(c,s),t.fillDragStartParams(c,s)});Ht(i,"onBeforeRenderGroupStart",te(i,n,{isPinch:!!n.isPinch,targets:i.props.targets,setTransform:function(){},events:a}))},dragGroup:function(i,n){var t=this;this.drag(i,n);var e=zn(i,"beforeRenderable",n),r=i.moveables,a=e.map(function(s,l){var c=r[l];return t.resetStyle(s),n.datas.nextStyle={},t.fillDragParams(c,s)});Ht(i,"onBeforeRenderGroup",te(i,n,{isPinch:!!n.isPinch,targets:i.props.targets,events:a}))},dragGroupEnd:function(i,n){this.dragEnd(i,n),Ht(i,"onBeforeRenderGroupEnd",te(i,n,{isPinch:!!n.isPinch,isDrag:n.isDrag,targets:i.props.targets}))},dragControlStart:function(i,n){return this.dragStart(i,n)},dragControl:function(i,n){return this.drag(i,n)},dragControlEnd:function(i,n){return this.dragEnd(i,n)},dragGroupControlStart:function(i,n){return this.dragGroupStart(i,n)},dragGroupControl:function(i,n){return this.dragGroup(i,n)},dragGroupControlEnd:function(i,n){return this.dragGroupEnd(i,n)}},Yp={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(i,n){Ht(i,"onRenderStart",te(i,n,{isPinch:!!n.isPinch}))},drag:function(i,n){Ht(i,"onRender",this.fillDragParams(i,n))},dragAfter:function(i,n){if(n.resultCount)return this.drag(i,n)},dragEnd:function(i,n){Ht(i,"onRenderEnd",this.fillDragEndParams(i,n))},dragGroupStart:function(i,n){Ht(i,"onRenderGroupStart",te(i,n,{isPinch:!!n.isPinch,targets:i.props.targets}))},dragGroup:function(i,n){var t=this,e=zn(i,"beforeRenderable",n),r=i.moveables,a=e.map(function(s,l){return t.fillDragParams(r[l],s)});Ht(i,"onRenderGroup",te(i,n,ht(ht({isPinch:!!n.isPinch,targets:i.props.targets,transform:Bc(n)},qi(Fc(n))),{events:a})))},dragGroupEnd:function(i,n){var t=this,e=zn(i,"beforeRenderable",n),r=i.moveables,a=e.map(function(s,l){return t.fillDragEndParams(r[l],s)});Ht(i,"onRenderGroupEnd",te(i,n,{isPinch:!!n.isPinch,isDrag:n.isDrag,targets:i.props.targets,events:a}))},dragControlStart:function(i,n){return this.dragStart(i,n)},dragControl:function(i,n){return this.drag(i,n)},dragControlAfter:function(i,n){return this.dragAfter(i,n)},dragControlEnd:function(i,n){return this.dragEnd(i,n)},dragGroupControlStart:function(i,n){return this.dragGroupStart(i,n)},dragGroupControl:function(i,n){return this.dragGroup(i,n)},dragGroupControlEnd:function(i,n){return this.dragGroupEnd(i,n)},fillDragParams:function(i,n){return te(i,n,ht({isPinch:!!n.isPinch,transform:Bc(n)},qi(Fc(n))))},fillDragEndParams:function(i,n){return te(i,n,{isPinch:!!n.isPinch,isDrag:n.isDrag})}};function er(i,n,t,e,r,a,s){var l="Start"===r,d=a.isRequest;if(!i.state.target||l&&e.indexOf("Control")>-1&&!d&&i.areaElement===a.inputEvent.target)return!1;var f="".concat(t).concat(e).concat(r),h="".concat(t).concat(e,"Condition"),v="End"===r,m="After"===r,S=l&&(!i.targetGesto||!i.controlGesto||!i.targetGesto.isFlag()||!i.controlGesto.isFlag());S&&i.updateRect(r,!0,!1),""===r&&!d&&qc(i.state,a);var T=Jt([],i[n],!0);if(d){var k=a.requestAble;T.some(function(X){return X.name===k})||T.push.apply(T,i.props.ables.filter(function(X){return X.name===k}))}if(!T.length||T.every(function(X){return X.dragRelation}))return!1;var E=Jt(Jt([Up],T,!0),[Yp],!1).filter(function(X){return X[f]}),P=a.datas;S&&E.forEach(function(X){X.unset&&X.unset(i)});var B,R=a.inputEvent;v&&R&&(B=document.elementFromPoint(a.clientX,a.clientY)||R.target);var V=0,L=!1,Z=function(){var X;L=!0,null===(X=a.stop)||void 0===X||X.call(a)},tt=E.filter(function(X){var ct=X.name,yt=P[ct]||(P[ct]={});if(l&&(yt.isEventStart=!X[h]||X[h](i,a)),yt.isEventStart){var xt=X[f](i,ht(ht({},a),{stop:Z,resultCount:V,datas:yt,originalDatas:P,inputTarget:B}));return i._emitter.off(),l&&!1===xt&&(yt.isEventStart=!1),V+=xt?1:0,xt}return!1}).length,$=!1;return l&&(L||E.length&&!tt)&&($=L||E.filter(function(X){return!!P[X.name].isEventStart&&"strong"!==X.dragRelation}).length),(v||$)&&(i.state.gestos={},i.moveables&&i.moveables.forEach(function(X){X.state.gestos={}})),S&&$&&E.forEach(function(X){X.unset&&X.unset(i)}),l&&!$&&!d&&tt&&(null==a||a.preventDefault()),!i.isUnmounted&&!$&&((!l&&tt&&!s||v)&&(i.props.flushSync||Vc)(function(){i.updateRect(v?r:"",!0,!1),i.forceUpdate()}),!l&&!v&&!m&&tt&&!s&&er(i,n,t,e,r+"After",a),!0)}function Xp(i,n,t){var e=i.controlBox.getElement(),r=[];r.push(e),(!i.props.dragArea||i.props.dragTarget)&&r.push(n);var a=function(s){var l=s.inputEvent.target;return l===i.areaElement||!i.isMoveableElement(l)&&!i.controlBox.getElement().contains(l)||Te(l,"moveable-area")||Te(l,"moveable-padding")};return Ka(i,r,"targetAbles",t,{dragStart:a,pinchStart:a})}function Ka(i,n,t,e,r){void 0===r&&(r={});var a="targetAbles"===t,s=i.props,v={preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,container:window,pinchThreshold:s.pinchThreshold,pinchOutside:s.pinchOutside,preventClickEventOnDrag:!!a&&s.preventClickEventOnDrag,preventClickEventOnDragStart:!!a&&s.preventClickDefault,preventClickEventByCondition:a?null:function(T){return i.controlBox.getElement().contains(T.target)},checkInput:!!a&&s.checkInput},m=new Hm(n,v),S="Control"===e;return["drag","pinch"].forEach(function(T){["Start","","End"].forEach(function(k){m.on("".concat(T).concat(k),function(E){var P,R=E.eventType;(!r[R]||r[R](E))&&er(i,t,T,e,k,E)?(i.props.stopPropagation||"Start"===k&&S)&&(null===(P=null==E?void 0:E.inputEvent)||void 0===P||P.stopPropagation()):E.stop()})})}),m}var iy=function(){function i(t,e,r){var a=this;this.target=t,this.moveable=e,this.eventName=r,this.ables=[],this._onEvent=function(s){var l=a.eventName,c=a.moveable;c.state.disableNativeEvent||a.ables.forEach(function(d){d[l](c,{inputEvent:s})})},t.addEventListener(r.toLowerCase(),this._onEvent)}var n=i.prototype;return n.setAbles=function(t){this.ables=t},n.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},i}();function ry(i){if(i&&i.getRootNode){var n=i.getRootNode();if(11===n.nodeType)return n}}function Jp(i,n,t){for(var d,f,h,e=i,r=[],a=!t&&i===n||i===document.body,s=a,l=!1,c=3,v=!1,m=Pr(n,n,!0).offsetParent;e&&!s;){s=a;var S=getComputedStyle(e),T=S.position,E=Ug(C1(jc(e,S))),P="fixed"===T,R={hasTransform:!1,fixedContainer:null};P&&(v=!0,m=(R=A1(e)).fixedContainer);var B=E.length;!l&&16===B&&(l=!0,c=4,Ca(r),h&&(h=gn(h,3,4))),l&&9===B&&(E=gn(E,3,4));var V=O1(e,i,S),Z=V.hasOffset,q=V.isSVG,tt=V.origin,$=V.targetOrigin,ft=V.offset,X=ft[0],ct=ft[1];"svg"===V.tagName&&h&&(r.push({type:"target",target:e,matrix:E1(e,c)}),r.push({type:"offset",target:e,matrix:ye(c)}));var yt=void 0,xt=!1,Pt=!1;if(P)yt=R.fixedContainer,xt=!0;else{var Ot=Pr(e,n);if(yt=Ot.offsetParent,xt=Ot.isEnd,Pt=Ot.isStatic,i1&&Ot.parentSlotElement){for(var Tt=yt,At=0,Nt=0;Tt&&ry(Tt);)At+=Tt.offsetLeft,Nt+=Tt.offsetTop,Tt=Tt.offsetParent;X-=At,ct-=Nt}}Ac&&!r1&&Z&&!q&&Pt&&("relative"===T||"static"===T)&&(X-=yt.offsetLeft,ct-=yt.offsetTop,a=a||xt);var Rt=0,Yt=0,Vt=0,Ut=0;if(P)Z&&R.hasTransform&&(Vt=yt.clientLeft,Ut=yt.clientTop);else if(Z&&m!==yt&&(Rt=yt.clientLeft,Yt=yt.clientTop),Z&&yt===document.body){var G=Uc(e,!1,S);X+=G[0],ct+=G[1]}if(r.push({type:"target",target:e,matrix:ba(E,c,tt)}),r.push(Z?{type:"offset",target:e,matrix:Li([X-e.scrollLeft+Rt-Vt,ct-e.scrollTop+Yt-Ut],c)}:{type:"offset",target:e,origin:tt}),h||(h=E),d||(d=tt),f||(f=$),s||P)break;e=yt,a=xt,(!t||e===document.body)&&(s=a)}return h||(h=ye(c)),d||(d=[0,0]),f||(f=[0,0]),{offsetContainer:m,matrixes:r,targetMatrix:h,transformOrigin:d,targetOrigin:f,is3d:l,hasFixed:v}}function Kp(i,n,t,e){void 0===t&&(t=n);var r=0,a=0,s=0,l={},c=Jc(i);if(i&&(r=c.offsetWidth,a=c.offsetHeight),i){var d=function(i,n,t,e){var r;void 0===t&&(t=n);var a=Jp(i,n),s=a.matrixes,l=a.is3d,c=a.targetMatrix,d=a.transformOrigin,f=a.targetOrigin,h=a.offsetContainer,v=a.hasFixed,m=Jp(h,t,!0),S=m.matrixes,T=m.is3d,k=m.offsetContainer,E=e||T||l,P=E?4:3,R="svg"!==i.tagName.toLowerCase()&&"ownerSVGElement"in i,B=c,V=ye(P),L=ye(P),Z=ye(P),q=ye(P),tt=s.length;S.reverse(),s.reverse(),!l&&E&&(B=gn(B,3,4),Ca(s)),!T&&E&&Ca(S),S.forEach(function(xt){L=he(L,xt.matrix,P)});var $=t||document.body,ft=(null===(r=S[0])||void 0===r?void 0:r.target)||Pr($,$,!0).offsetParent,X=S.slice(1).reduce(function(xt,Pt){return he(xt,Pt.matrix,P)},ye(P));s.forEach(function(xt,Pt){if(tt-2===Pt&&(Z=V.slice()),tt-1===Pt&&(q=V.slice()),!xt.matrix){var Gt=function(i,n,t,e,r){var a,s=i.target,l=i.origin,c=n.matrix,d=Jc(s),f=d.offsetWidth,h=d.offsetHeight,v=t.getBoundingClientRect(),m=[0,0];t===document.body&&(m=Uc(s,!0));for(var S=s.getBoundingClientRect(),T=S.left-v.left+t.scrollLeft-(t.clientLeft||0)+m[0],k=S.top-v.top+t.scrollTop-(t.clientTop||0)+m[1],E=S.width,P=S.height,R=Yo(e,r,c),B=Yc(R,f,h,e),V=B.left,L=B.top,Z=B.width,q=B.height,tt=Ae(R,l,e),$=qt(tt,[V,L]),ft=[T+$[0]*E/Z,k+$[1]*P/q],X=[0,0],ct=0;++ct<10;){var yt=vn(r,e);a=qt(Ae(yt,ft,e),Ae(yt,tt,e)),X[0]=a[0],X[1]=a[1];var Pt=Yc(Yo(e,r,Li(X,e),c),f,h,e),Tt=Pt.left-T,At=Pt.top-k;if(Math.abs(Tt)<2&&Math.abs(At)<2)break;ft[0]-=Tt,ft[1]-=At}return X.map(function(Nt){return Math.round(Nt)})}(xt,s[Pt+1],ft,P,he(X,V,P));xt.matrix=Li(Gt,P)}V=he(V,xt.matrix,P)});var ct=!R&&l;B||(B=ye(ct?4:3));var yt=kr(R&&16===B.length?gn(B,4,3):B,ct);return{hasFixed:v,rootMatrix:L=nc(L,P,P),beforeMatrix:Z,offsetMatrix:q,allMatrix:V,targetMatrix:B,targetTransform:yt,transformOrigin:d,targetOrigin:f,is3d:E,offsetContainer:h,offsetRootContainer:k}}(i,n,t,e),f=Ir(d.allMatrix,d.transformOrigin,r,a);l=ht(ht({},d),f);var h=Ir(d.allMatrix,[50,50],100,100);s=Kc([h.pos1,h.pos2],h.direction)}var v=e?4:3;return ht(ht(ht({width:r,height:a,rotation:s},c),{rootMatrix:ye(v),beforeMatrix:ye(v),offsetMatrix:ye(v),allMatrix:ye(v),targetMatrix:ye(v),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!e,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null}),l)}function Qa(i,n,t,e,r){var a=1,s=[0,0],l={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},c={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},d={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},f={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},h=Kp(n,t,r,!0);if(n){var m=Ir(h.offsetMatrix,oe(h.transformOrigin,ic(h.targetMatrix,h.is3d?4:3)),h.width,h.height);a=m.direction,s=oe(m.origin,[m.left-h.left,m.top-h.top]),l=Qi(n),d=Qi(Pr(e,e,!0).offsetParent||h.offsetRootContainer,!0),f=Qi(h.offsetRootContainer),i&&(c=Qi(i))}return ht({targetClientRect:l,containerClientRect:d,moveableClientRect:c,rootContainerClientRect:f,beforeDirection:a,beforeOrigin:s,originalBeforeOrigin:s,target:n},h)}var wi=function(i){function n(){var e=null!==i&&i.apply(this,arguments)||this;return e.state=ht({container:null,gestos:{},renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1},Qa(null)),e.renderState={},e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e._emitter=new ia,e._prevTarget=null,e._prevDragArea=!1,e._isPropTargetChanged=!1,e._observer=null,e._observerId=0,e.checkUpdateRect=function(){if(!e.isDragging()){var r=e.props.parentMoveable;if(r)return void r.checkUpdateRect();fg(e._observerId),e._observerId=zl(function(){e.isDragging()||e.updateRect()})}},e._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},e}hi(n,i);var t=n.prototype;return t.render=function(){var e=this.props,r=this.state,a=e.parentPosition,s=e.className,l=e.target,c=e.zoom,d=e.cspNonce,f=e.translateZ,h=e.cssStyled,v=e.portalContainer;this.checkUpdate(),this.updateRenderPoses();var m=a||{left:0,top:0},S=m.left,T=m.top,k=r.left,E=r.top,R=r.direction,B=r.hasFixed,V=e.targets,L=(V&&V.length||l)&&r.target,Z=this.isDragging(),q={};return this.getEnabledAbles().forEach(function(tt){q["data-able-".concat(tt.name.toLowerCase())]=!0}),Qe(h,ht({cspNonce:d,ref:fn(this,"controlBox"),className:"".concat(jt("control-box",-1===R?"reverse":"",Z?"dragging":"")," ").concat(s)},q,{onClick:this._onPreventClick,portalContainer:v,style:{position:B?"fixed":"absolute",display:L?"block":"none",transform:"translate3d(".concat(k-S,"px, ").concat(E-T,"px, ").concat(f,")"),"--zoom":c,"--zoompx":"".concat(c,"px")}}),this.renderAbles(),this._renderLines())},t.componentDidMount=function(){this.isUnmounted=!1,this.controlBox.getElement();var e=this.props,r=e.parentMoveable,a=e.container,s=e.wrapperMoveable;this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),!a&&!r&&!s&&this.updateRect("",!1,!0),this.updateCheckInput(),this._updateObserver(this.props)},t.componentDidUpdate=function(e){this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(e)},t.componentWillUnmount=function(){this.isUnmounted=!0,this._emitter.off(),gi(this,"targetGesto"),gi(this,"controlGesto");var e=this.events;for(var r in e){var a=e[r];a&&a.destroy()}},t.getAble=function(e){return Xn(this.props.ables||[],function(a){return a.name===e})},t.getContainer=function(){var e=this.props,r=e.parentMoveable,a=e.wrapperMoveable;return e.container||a&&a.getContainer()||r&&r.getContainer()||this.controlBox.getElement().parentElement},t.isMoveableElement=function(e){var r;return e&&((null===(r=e.getAttribute)||void 0===r?void 0:r.call(e,"class"))||"").indexOf(ga)>-1},t.dragStart=function(e){var r=this.targetGesto;return r&&!r.isFlag()&&r.triggerDragStart(e),this},t.hitTest=function(e){var h,r=this.state,s=r.pos1,l=r.pos2,c=r.pos3,d=r.pos4,f=r.targetClientRect;if(!r.target)return 0;if(e instanceof Element){var v=e.getBoundingClientRect();h={left:v.left,top:v.top,width:v.width,height:v.height}}else h=ht({width:0,height:0},e);var m=h.left,S=h.top,T=h.width,k=h.height,E=dc([s,l,d,c],f),P=lm(E,[[m,S],[m+T,S],[m+T,S+k],[m,S+k]]),R=pc(E);return P&&R?Math.min(100,P/R*100):0},t.isInside=function(e,r){var a=this.state;return!!a.target&&Qo([e,r],dc([a.pos1,a.pos2,a.pos4,a.pos3],a.targetClientRect))},t.updateRect=function(e,r,a){void 0===a&&(a=!0);var s=this.props,l=s.parentMoveable,d=this.state.target||this.props.target,f=this.getContainer(),h=l?l.props.rootContainer:s.rootContainer;this.updateState(Qa(this.controlBox&&this.controlBox.getElement(),d,f,f,h||f),!l&&a)},t.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},t.updateTarget=function(e){this.updateRect(e,!0)},t.getRect=function(){var e=this.state,r=je(this.state),a=r[0],s=r[1],l=r[2],c=r[3],d=qe(r),f=e.width,h=e.height,v=d.width,m=d.height,S=d.left,T=d.top,k=[e.left,e.top],E=oe(k,e.origin);return{width:v,height:m,left:S,top:T,pos1:a,pos2:s,pos3:l,pos4:c,offsetWidth:f,offsetHeight:h,beforeOrigin:oe(k,e.beforeOrigin),origin:E,transformOrigin:e.transformOrigin,rotation:this.getRotation()}},t.getManager=function(){return this},t.getRotation=function(){var e=this.state;return function(i,n,t){var e=we(i,n)/Math.PI*180;return(e=t>=0?e:180-e)>=0?e:360+e}(e.pos1,e.pos2,e.direction)},t.request=function(e,r,a){void 0===r&&(r={});var s=this.props,c=s.groupable,d=s.ables.filter(function(k){return k.name===e})[0];if(this.isDragging()||!d||!d.request)return{request:function(){return this},requestEnd:function(){return this}};var f=this,h=d.request(this),v=a||r.isInstant,m=h.isControl?"controlAbles":"targetAbles",S="".concat(c?"Group":"").concat(h.isControl?"Control":""),T={request:function(k){return er(f,m,"drag",S,"",ht(ht({},h.request(k)),{requestAble:e,isRequest:!0}),v),this},requestEnd:function(){return er(f,m,"drag",S,"End",ht(ht({},h.requestEnd()),{requestAble:e,isRequest:!0}),v),this}};return er(f,m,"drag",S,"Start",ht(ht({},h.requestStart(r)),{requestAble:e,isRequest:!0}),v),v?T.request(r).requestEnd():T},t.destroy=function(){this.componentWillUnmount()},t.updateRenderPoses=function(){var e=this.state,r=this.props,a=e.originalBeforeOrigin,s=e.transformOrigin,l=e.allMatrix,d=e.pos1,f=e.pos2,h=e.pos3,v=e.pos4,T=r.padding||{},k=T.left,E=void 0===k?0:k,P=T.top,R=void 0===P?0:P,B=T.bottom,V=void 0===B?0:B,L=T.right,Z=void 0===L?0:L,q=e.is3d?4:3,tt=r.groupable?a:oe(a,[e.left,e.top]);e.renderPoses=[oe(d,Gr(l,[-E,-R],s,tt,q)),oe(f,Gr(l,[Z,-R],s,tt,q)),oe(h,Gr(l,[-E,V],s,tt,q)),oe(v,Gr(l,[Z,V],s,tt,q))]},t.checkUpdate=function(){this._isPropTargetChanged=!1;var e=this.props,r=e.target,a=e.container,s=e.parentMoveable,l=this.state,c=l.target,d=l.container;if(c||r){this.updateAbles();var f=!Ea(c,r);if(f||!Ea(d,a)){var v=a||this.controlBox;v&&this.unsetAbles(),this.updateState({target:r,container:a}),!s&&v&&this.updateRect("End",!1,!1),this._isPropTargetChanged=f}}},t.waitToChangeTarget=function(){return new Promise(function(){})},t.triggerEvent=function(e,r){this._emitter.trigger(e,r);var a=this.props[e];return a&&a(r)},t.useCSS=function(e,r){var a=this.props.customStyledMap,s=e+r;return a[s]||(a[s]=Tc(e,r)),a[s]},t.unsetAbles=function(){var e=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(e)})},t.updateAbles=function(e,r){void 0===e&&(e=this.props.ables),void 0===r&&(r="");var a=this.props,s=a.triggerAblesSimultaneously,l=e.filter(function(m){return m&&(m.always&&!1!==a[m.name]||a[m.name])}),c="drag".concat(r,"Start"),d="pinch".concat(r,"Start"),f="drag".concat(r,"ControlStart"),h=zr(l,[c,d],s),v=zr(l,[f],s);this.enabledAbles=l,this.targetAbles=h,this.controlAbles=v},t.updateState=function(e,r){if(r){if(this.isUnmounted)return;this.setState(e)}else{var a=this.state;for(var s in e)a[s]=e[s]}},t.getEnabledAbles=function(){var e=this.props;return e.ables.filter(function(a){return a&&e[a.name]})},t.renderAbles=function(){var e=this,a=this.props.triggerAblesSimultaneously,s={createElement:Qe};return this.renderState={},function(i,n){var t=[],e={};return i.forEach(function(r,a){var s=function(l){return l.key}(r),l=e[s];l||(e[s]=l=[],t.push(l)),l.push(r)}),t}(function(i){return i.reduce(function(n,t){return n.concat(t)},[])}(zr(this.getEnabledAbles(),["render"],a).map(function(l){return(0,l.render)(e,s)||[]})).filter(function(l){return l})).map(function(l){return l[0]})},t.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},t._updateObserver=function(e){var r,a=this.props,s=a.target;if(window.ResizeObserver&&s&&a.useResizeObserver){if(e.target!==s||!this._observer){var l=new ResizeObserver(this.checkUpdateRect);l.observe(s,{box:"border-box"}),this._observer=l}}else null===(r=this._observer)||void 0===r||r.disconnect()},t._updateEvents=function(){var e=this.controlBox.getElement(),r=this.targetAbles.length,a=this.controlAbles.length,s=this.props,l=s.dragTarget||s.target;(!r&&this.targetGesto||this._isTargetChanged(!0))&&(gi(this,"targetGesto"),this.updateState({gesto:null})),a||gi(this,"controlGesto"),l&&r&&!this.targetGesto&&(this.targetGesto=Xp(this,l,"")),!this.controlGesto&&a&&(this.controlGesto=Ka(this,e,"controlAbles","Control"))},t._updateTargets=function(){var e=this.props;this._prevTarget=e.dragTarget||e.target,this._prevDragArea=e.dragArea},t._renderLines=function(){var e=this.props,a=e.zoom;if(e.hideDefaultLines||e.parentMoveable&&e.hideChildMoveableDefaultLines)return[];var d=this.state.renderPoses,f={createElement:Qe};return[[0,1],[1,3],[3,2],[2,0]].map(function(h,v){return Wr(f,"",d[h[0]],d[h[1]],a,v)})},t._isTargetChanged=function(e){var r=this.props,c=r.dragArea;return!c&&this._prevTarget!==(r.dragTarget||r.target)||(e||c)&&this._prevDragArea!==c},t._updateNativeEvents=function(){var e=this,a=this.props.dragArea?this.areaElement:this.state.target,s=this.events,l=kn(s);if(this._isTargetChanged())for(var c in s){var d=s[c];d&&d.destroy(),s[c]=null}if(a){var f=this.enabledAbles;l.forEach(function(h){var v=zr(f,[h]),S=s[h];v.length>0?(S||(S=new iy(a,e,h),s[h]=S),S.setAbles(v)):S&&(S.destroy(),s[h]=null)})}},n.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,useResizeObserver:!1,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:Vc},n}(Lo),qa={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean,hideChildMoveableDefaultLines:Boolean},events:{},render:function(i,n){var t=i.props.targets||[];i.moveables=[];var e=i.state,s={left:e.left,top:e.top},l=i.props;return t.map(function(c,d){return n.createElement(wi,{key:"moveable"+d,ref:Sl(i,"moveables",d),target:c,origin:!1,cssStyled:l.cssStyled,customStyledMap:l.customStyledMap,useResizeObserver:l.useResizeObserver,hideChildMoveableDefaultLines:l.hideChildMoveableDefaultLines,parentMoveable:i,parentPosition:s})})}},ay=Ui("clickable",{props:{clickable:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){this.dragStart()},dragGroupStart:function(i,n){n.datas.inputTarget=n.inputEvent&&n.inputEvent.target},dragEnd:function(i,n){var t=i.state.target,e=n.inputEvent,r=n.inputTarget,s=!i.isMoveableElement(r)&&i.controlBox.getElement().contains(r);if(e&&r&&!n.isDrag&&!i.isMoveableElement(r)&&!s){var l=t.contains(r);Ht(i,"onClick",te(i,n,{isDouble:n.isDouble,inputTarget:r,isTarget:t===r,containsTarget:l}))}},dragGroupEnd:function(i,n){var e=n.inputTarget;if(n.inputEvent&&e&&!n.isDrag&&!i.isMoveableElement(e)&&n.datas.inputTarget!==e){var r=i.props.targets,a=r.indexOf(e),s=a>-1,l=!1;-1===a&&(l=(a=Sn(r,function(c){return c.contains(e)}))>-1),Ht(i,"onClickGroup",te(i,n,{isDouble:n.isDouble,targets:r,inputTarget:e,targetIndex:a,isTarget:s,containsTarget:l}))}},dragControlEnd:function(i,n){this.dragEnd(i,n)},dragGroupControlEnd:function(i,n){this.dragEnd(i,n)}});function bi(i){var n=i.originalDatas.draggable;return n||(i.originalDatas.draggable={},n=i.originalDatas.draggable),ht(ht({},i),{datas:n})}var sy=Ui("edgeDraggable",{css:[".edge.edgeDraggable.line {\n    cursor: move;\n}"],render:function(i,n){var t=i.props,e=t.edgeDraggable;return e?Op(n,"edgeDraggable",e,i.state.renderPoses,t.zoom):[]},dragControlCondition:function(i,n){if(!i.props.edgeDraggable||!n.inputEvent)return!1;var t=n.inputEvent.target;return Te(t,jt("direction"))&&Te(t,jt("edge"))&&Te(t,jt("edgeDraggable"))},dragControlStart:function(i,n){return i.state.snapRenderInfo={request:n.isRequest,snap:!0,center:!0},Le.dragStart(i,bi(n))},dragControl:function(i,n){return Le.drag(i,bi(n))},dragControlEnd:function(i,n){return Le.dragEnd(i,bi(n))},dragGroupControlCondition:function(i,n){if(!i.props.edgeDraggable||!n.inputEvent)return!1;var t=n.inputEvent.target;return Te(t,jt("direction"))&&Te(t,jt("line"))},dragGroupControlStart:function(i,n){return Le.dragGroupStart(i,bi(n))},dragGroupControl:function(i,n){return Le.dragGroup(i,bi(n))},dragGroupControlEnd:function(i,n){return Le.dragGroupEnd(i,bi(n))},unset:function(i){return Le.unset(i)}}),Qp={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},$a=[Up,zp,Mx,W1,Le,sy,Za,Nx,Fx,Gx,Wx,Vx,Hx,$x,qx,ey,qa,Qp,ay,Rp,Yp],ly=$a.reduce(function(i,n){return ht(ht({},i),"events"in n?n.events:{})},{}),qp=$a.reduce(function(i,n){return ht(ht({},i),n.props)},{}),py=Object.keys(B1(ly)),dy=Object.keys(qp);function Xr(i,n){return Math.max.apply(Math,i.map(function(t){return Math.max(t[0][n],t[1][n],t[2][n],t[3][n])}))}function Jr(i,n){return Math.min.apply(Math,i.map(function(t){return Math.min(t[0][n],t[1][n],t[2][n],t[3][n])}))}var hy=function(i){function n(){var e=null!==i&&i.apply(this,arguments)||this;return e.differ=new cc,e.moveables=[],e.transformOrigin="50% 50%",e}hi(n,i);var t=n.prototype;return t.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},t.updateRect=function(e,r,a){if(void 0===a&&(a=!0),this.controlBox){this.moveables.forEach(function(ct){ct.updateRect(e,!1,!1)});var s=this.state,l=this.props,c=s.target||l.target;(!r||""!==e&&l.updateGroup)&&(this.rotation=l.defaultGroupRotate,this.transformOrigin=l.defaultGroupOrigin||"50% 50%",this.scale=[1,1]);var d=this.rotation,f=this.scale,h=function(i,n){if(!i.length)return[0,0,0,0];var t=i.map(function(T){return je(T.state)}),e=Yi,r=Yi,a=0,s=0,l=ie(n,Fe);if(l%90){var c=l/180*Math.PI,d=Math.tan(c),f=-1/d,h=[Mc,Yi],v=[Mc,Yi];t.forEach(function(T){T.forEach(function(k){var E=k[1]-d*k[0],P=k[1]-f*k[0];h[0]=Math.max(h[0],E),h[1]=Math.min(h[1],E),v[0]=Math.max(v[0],P),v[1]=Math.min(v[1],P)})}),h.forEach(function(T){v.forEach(function(k){var E=(k-T)/(d-f),P=d*E+T;e=Math.min(e,E),r=Math.min(r,P)})});var m=t.map(function(T){var E=T[1],P=T[2],R=T[3];return[Rn(T[0],-c),Rn(E,-c),Rn(P,-c),Rn(R,-c)]});a=Xr(m,0)-Jr(m,0),s=Xr(m,1)-Jr(m,1)}else if(e=Jr(t,0),r=Jr(t,1),a=Xr(t,0)-e,s=Xr(t,1)-r,l%180){var S=a;a=s,s=S}return[e,r,a,s]}(this.moveables,d),v=h[0],m=h[1],S=h[2],T=h[3],k="rotate(".concat(d,"deg) scale(").concat(f[0]>=0?1:-1,", ").concat(f[1]>=0?1:-1,")");c.style.cssText+="left:0px;top:0px; transform-origin: ".concat(this.transformOrigin,"; width:").concat(S,"px; height:").concat(T,"px;")+"transform:".concat(k),s.width=S,s.height=T;var E=this.getContainer(),P=Qa(this.controlBox.getElement(),c,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||E),R=[P.left,P.top],B=je(P),V=B[0],L=B[1],Z=B[2],q=B[3],tt=wr([V,L,Z,q]),$=[tt.minX,tt.minY];P.pos1=qt(V,$),P.pos2=qt(L,$),P.pos3=qt(Z,$),P.pos4=qt(q,$),P.left=v-P.left+$[0],P.top=m-P.top+$[1],P.origin=qt(oe(R,P.origin),$),P.beforeOrigin=qt(oe(R,P.beforeOrigin),$),P.originalBeforeOrigin=oe(R,P.originalBeforeOrigin);var ft=P.targetClientRect,X=f[0]*f[1]>0?1:-1;ft.top+=P.top-s.top,ft.left+=P.left-s.left,c.style.transform="translate(".concat(-$[0],"px, ").concat(-$[1],"px) ").concat(k),this.updateState(ht(ht({},P),{direction:X,beforeDirection:X}),a)}},t.getRect=function(){return ht(ht({},i.prototype.getRect.call(this)),{children:this.moveables.map(function(e){return e.getRect()})})},t.triggerEvent=function(e,r,a){if(a||e.indexOf("Group")>-1)return i.prototype.triggerEvent.call(this,e,r);this._emitter.trigger(e,r)},t.updateAbles=function(){i.prototype.updateAbles.call(this,Jt(Jt([],this.props.ables,!0),[qa],!1),"Group")},t._updateTargets=function(){i.prototype._updateTargets.call(this),this._prevTarget=this.props.dragTarget||this.areaElement},t._updateEvents=function(){var e=this.state,r=this.props,s=r.dragTarget||this.areaElement;this._prevTarget!==s&&(gi(this,"targetGesto"),gi(this,"controlGesto"),e.target=null),e.target||(e.target=this.areaElement,this.controlBox.getElement().style.display="block"),e.target&&(this.targetGesto||(this.targetGesto=Xp(this,s,"Group")),this.controlGesto||(this.controlGesto=Ka(this,this.controlBox.getElement(),"controlAbles","GroupControl")));var l=!Ea(e.container,r.container);l&&(e.container=r.container);var c=this.differ.update(r.targets),v=c.added.length||c.removed.length;(l||v||c.changed.length)&&this.updateRect(),this._isPropTargetChanged=!!v},t._updateObserver=function(){},n.defaultProps=ht(ht({},wi.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),n}(wi),fy=function(i){function n(){var e=null!==i&&i.apply(this,arguments)||this;return e.moveables=[],e}hi(n,i);var t=n.prototype;return t.render=function(){var e=this,r=this.props,l=r.targets;return Qe(r.cssStyled,{cspNonce:r.cspNonce,ref:fn(this,"controlBox"),className:jt("control-box")},l.map(function(c,d){return Qe(wi,ht({key:"moveable"+d,ref:Sl(e,"moveables",d)},e.props,{target:c,wrapperMoveable:e}))}))},t.componentDidUpdate=function(){},t.updateRect=function(e,r,a){void 0===a&&(a=!0),this.moveables.forEach(function(s){s.updateRect(e,r,a)})},t.getRect=function(){return ht(ht({},i.prototype.getRect.call(this)),{children:this.moveables.map(function(e){return e.getRect()})})},t.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},t.dragStart=function(){return this},t.hitTest=function(){return 0},t.isInside=function(){return!1},t.isDragging=function(){return!1},t.updateRenderPoses=function(){},t.checkUpdate=function(){},t.triggerEvent=function(){},t.updateAbles=function(){},t._updateEvents=function(){},t._updateObserver=function(){},n}(wi),$p=function(i){function n(){var e=null!==i&&i.apply(this,arguments)||this;return e.refTargets=[],e.selectorMap={},e._differ=new cc,e._elementTargets=[],e._onChangetarget=null,e}hi(n,i);var t=n.prototype;return n.makeStyled=function(){var e={};this.getTotalAbles().forEach(function(s){var l=s.css;!l||l.forEach(function(c){e[c]=!0})});var a=kn(e).join("\n");this.defaultStyled=Tc("div",function(i,n){return n.replace(/([^}{]*){/gm,function(t,e){return e.replace(/\.([^{,\s\d.]+)/g,".moveable-$1")+"{"})}(0,o1+a))},n.getTotalAbles=function(){return Jt([zp,qa,Qp,Rp],this.defaultAbles,!0)},t.render=function(){var e=this.constructor;e.defaultStyled||e.makeStyled();var r=this.props,a=r.ables,s=r.props,l=function(i,n){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&n.indexOf(e)<0&&(t[e]=i[e]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(e=Object.getOwnPropertySymbols(i);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(i,e[r])&&(t[e[r]]=i[e[r]])}return t}(r,["ables","props"]),d=function(i,n){var t=[];return i.forEach(function(e){if(e){if(Ke(e))return void(n[e]&&t.push.apply(t,n[e]));t.push(e)}}),t}(this._updateRefs(!0),this.selectorMap),f=d.length>1,v=Jt(Jt([],e.getTotalAbles(),!0),a||[],!0),m=ht(ht(ht({},l),s||{}),{ables:v,cssStyled:e.defaultStyled,customStyledMap:e.customStyledMap});return this._elementTargets=d,f?l.individualGroupable?Qe(fy,ht({key:"individual-group",ref:fn(this,"moveable")},m,{target:null,targets:d})):Qe(hy,ht({key:"group",ref:fn(this,"moveable")},m,{target:null,targets:d})):Qe(wi,ht({key:"single",ref:fn(this,"moveable")},m,{target:d[0]}))},t.componentDidMount=function(){this._updateRefs()},t.componentDidUpdate=function(){var e=this._differ.update(this._elementTargets);(e.added.length||e.removed.length)&&this._onChangetarget&&this._onChangetarget(),this._updateRefs()},t.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},t.waitToChangeTarget=function(){var r,e=this;return this._onChangetarget=function(){e._onChangetarget=null,r()},new Promise(function(a){r=a})},t.getManager=function(){return this.moveable},t._updateRefs=function(e){var r=this.refTargets,a=$c(this.props.target||this.props.targets),s="undefined"!=typeof document,l=r.length!==a.length||r.some(function(f,h){var v=a[h];return!(!f&&!v)&&f!==v}),c=this.selectorMap,d={};return this.refTargets.forEach(function(f){Ke(f)&&(c[f]?d[f]=c[f]:s&&(l=!0,d[f]=[].slice.call(document.querySelectorAll(f))))}),this.refTargets=a,this.selectorMap=d,!e&&l&&this.forceUpdate(),a},n.defaultAbles=[],n.customStyledMap={},n.defaultStyled=null,function(i,n,t,e){var s,r=arguments.length,a=r<3?n:null===e?e=Object.getOwnPropertyDescriptor(n,t):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(i,n,t,e);else for(var l=i.length-1;l>=0;l--)(s=i[l])&&(a=(r<3?s(a):r>3?s(n,t,a):s(n,t))||a);r>3&&a&&Object.defineProperty(n,t,a)}([Ol(kc)],n.prototype,"moveable",void 0),n}(Lo),vy=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return hi(n,i),n.defaultAbles=$a,n}($p),gy=vy,ts=function(i,n){return(ts=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(i,n)};function es(i,n){function t(){this.constructor=i}ts(i,n),i.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}var nr=function(){return nr=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var a in t=arguments[e])Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n},nr.apply(this,arguments)},xy=function(i){function n(e){var r=i.call(this,e)||this;return r.state={},r.state=r.props,r}return es(n,i),n.prototype.render=function(){return function(i,n){return Qe(kg,{element:i,container:n})}(Qe(gy,nr({ref:fn(this,"moveable")},this.state)),this.state.parentElement)},n}(Fo),td=dy,ed=kc,ns=py,is=function(){return is=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var a in t=arguments[e])Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n},is.apply(this,arguments)},wy=function(){function i(){this._events={}}var n=i.prototype;return n.on=function(t,e){if(rn(t))for(var r in t)this.on(r,t[r]);else this._addEvent(t,e,{});return this},n.off=function(t,e){if(t)if(rn(t))for(var r in t)this.off(r);else if(e){var a=this._events[t];if(a){var s=Sn(a,function(l){return l.listener===e});s>-1&&a.splice(s,1)}}else this._events[t]=[];else this._events={};return this},n.once=function(t,e){var r=this;return e&&this._addEvent(t,e,{once:!0}),new Promise(function(a){r._addEvent(t,a,{once:!0})})},n.emit=function(t,e){var r=this;void 0===e&&(e={});var a=this._events[t];if(!t||!a)return!0;var s=!1;return e.eventType=t,e.stop=function(){s=!0},e.currentTarget=this,function(){for(var i=0,n=0,t=arguments.length;n<t;n++)i+=arguments[n].length;var e=Array(i),r=0;for(n=0;n<t;n++)for(var a=arguments[n],s=0,l=a.length;s<l;s++,r++)e[r]=a[s];return e}(a).forEach(function(l){l.listener(e),l.once&&r.off(t,l.listener)}),!s},n.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},n._addEvent=function(t,e,r){var a=this._events;a[t]=a[t]||[],a[t].push(is({listener:e},r))},i}(),_y=function(i){function n(e,r){void 0===r&&(r={});var a=i.call(this)||this;a.tempElement=document.createElement("div");var s=nr({},r),l={};ns.forEach(function(d){l[function(i){return i.replace(/[\s-_]([a-z])/g,function(n,t){return t.toUpperCase()})}("on ".concat(d))]=function(f){return a.trigger(d,f)}}),Ul(Qe(xy,nr({ref:fn(a,"innerMoveable"),parentElement:e},s,l)),a.tempElement);var c=s.target;return Cn(c)&&c.length>1&&a.updateRect(),a}es(n,i);var t=n.prototype;return t.setState=function(e,r){this.innerMoveable.setState(e,r)},t.forceUpdate=function(e){this.innerMoveable.forceUpdate(e)},t.dragStart=function(e){this.innerMoveable.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(e)},t.destroy=function(){Ul(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},t.getMoveable=function(){return this.innerMoveable.moveable},n=function(i,n,t,e){var s,r=arguments.length,a=r<3?n:null===e?e=Object.getOwnPropertyDescriptor(n,t):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(i,n,t,e);else for(var l=i.length-1;l>=0;l--)(s=i[l])&&(a=(r<3?s(a):r>3?s(n,t,a):s(n,t))||a);return r>3&&a&&Object.defineProperty(n,t,a),a}([Dl(ed,function(e,r){e[r]||(e[r]=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var l=this.getMoveable();if(l&&l[r])return l[r].apply(l,a)})}),Dl(td,function(e,r){Object.defineProperty(e,r,{get:function(){return this.getMoveable().props[r]},set:function(a){var s;this.setState(((s={})[r]=a,s))},enumerable:!0,configurable:!0})})],n),n}(wy),nd=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return es(n,i),n}(_y);let Cy=(()=>{class i{}return(0,ci.gn)([Ol(ed,{dragStart:"ngDragStart"}),(0,ci.w6)("design:type",nd)],i.prototype,"moveable",void 0),i})(),Sy=(()=>{class i extends Cy{constructor(t){super(),this._elementRef=t,ns.forEach(e=>{this[e]=new o.vpe})}ngOnInit(){const t={},e={};td.forEach(a=>{t[a]=this[a]}),ns.forEach(a=>{e[a]=s=>{this[a].emit(s)}});const r=this._elementRef.nativeElement;this.moveable=new nd(r,Object.assign(Object.assign({},t),{portalContainer:r})),this.moveable.on(e)}ngOnChanges(t){const e=this.moveable;if(e)for(const r in t){const{previousValue:a,currentValue:s}=t[r];a!==s&&(e[r]=s)}}ngOnDestroy(){this.moveable.destroy()}}return i.\u0275fac=function(t){return new(t||i)(o.Y36(o.SBq))},i.\u0275cmp=o.Xpm({type:i,selectors:[["ngx-moveable"]],inputs:{target:"target",dragTarget:"dragTarget",container:"container",portalContainer:"portalContainer",rootContainer:"rootContainer",useResizeObserver:"useResizeObserver",zoom:"zoom",transformOrigin:"transformOrigin",edge:"edge",ables:"ables",className:"className",pinchThreshold:"pinchThreshold",pinchOutside:"pinchOutside",triggerAblesSimultaneously:"triggerAblesSimultaneously",checkInput:"checkInput",cspNonce:"cspNonce",translateZ:"translateZ",hideDefaultLines:"hideDefaultLines",props:"props",flushSync:"flushSync",stopPropagation:"stopPropagation",preventClickEventOnDrag:"preventClickEventOnDrag",preventClickDefault:"preventClickDefault",snappable:"snappable",snapContainer:"snapContainer",snapDirections:"snapDirections",elementSnapDirections:"elementSnapDirections",snapGap:"snapGap",snapGridWidth:"snapGridWidth",snapGridHeight:"snapGridHeight",isDisplaySnapDigit:"isDisplaySnapDigit",isDisplayInnerSnapDigit:"isDisplayInnerSnapDigit",snapDigit:"snapDigit",snapThreshold:"snapThreshold",horizontalGuidelines:"horizontalGuidelines",verticalGuidelines:"verticalGuidelines",elementGuidelines:"elementGuidelines",bounds:"bounds",innerBounds:"innerBounds",snapDistFormat:"snapDistFormat",maxSnapElementGuidelineDistance:"maxSnapElementGuidelineDistance",maxSnapElementGapDistance:"maxSnapElementGapDistance",pinchable:"pinchable",draggable:"draggable",throttleDrag:"throttleDrag",throttleDragRotate:"throttleDragRotate",startDragRotate:"startDragRotate",edgeDraggable:"edgeDraggable",resizable:"resizable",throttleResize:"throttleResize",renderDirections:"renderDirections",keepRatio:"keepRatio",resizeFormat:"resizeFormat",keepRatioFinally:"keepRatioFinally",scalable:"scalable",throttleScale:"throttleScale",warpable:"warpable",rotatable:"rotatable",rotationPosition:"rotationPosition",throttleRotate:"throttleRotate",rotationTarget:"rotationTarget",rotateAroundControls:"rotateAroundControls",resolveAblesWithRotatable:"resolveAblesWithRotatable",scrollable:"scrollable",scrollContainer:"scrollContainer",scrollThreshold:"scrollThreshold",getScrollPosition:"getScrollPosition",padding:"padding",origin:"origin",originDraggable:"originDraggable",originRelative:"originRelative",clippable:"clippable",defaultClipPath:"defaultClipPath",customClipPath:"customClipPath",clipRelative:"clipRelative",clipArea:"clipArea",dragWithClip:"dragWithClip",clipTargetBounds:"clipTargetBounds",clipVerticalGuidelines:"clipVerticalGuidelines",clipHorizontalGuidelines:"clipHorizontalGuidelines",clipSnapThreshold:"clipSnapThreshold",roundable:"roundable",roundRelative:"roundRelative",minRoundControls:"minRoundControls",maxRoundControls:"maxRoundControls",roundClickable:"roundClickable",defaultGroupRotate:"defaultGroupRotate",defaultGroupOrigin:"defaultGroupOrigin",groupable:"groupable",hideChildMoveableDefaultLines:"hideChildMoveableDefaultLines",individualGroupable:"individualGroupable",clickable:"clickable",dragArea:"dragArea",passDragArea:"passDragArea"},outputs:{beforeRenderStart:"beforeRenderStart",beforeRender:"beforeRender",beforeRenderEnd:"beforeRenderEnd",beforeRenderGroupStart:"beforeRenderGroupStart",beforeRenderGroup:"beforeRenderGroup",beforeRenderGroupEnd:"beforeRenderGroupEnd",snap:"snap",pinchStart:"pinchStart",pinch:"pinch",pinchEnd:"pinchEnd",pinchGroupStart:"pinchGroupStart",pinchGroup:"pinchGroup",pinchGroupEnd:"pinchGroupEnd",dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd",dragGroupStart:"dragGroupStart",dragGroup:"dragGroup",dragGroupEnd:"dragGroupEnd",resizeStart:"resizeStart",beforeResize:"beforeResize",resize:"resize",resizeEnd:"resizeEnd",resizeGroupStart:"resizeGroupStart",beforeResizeGroup:"beforeResizeGroup",resizeGroup:"resizeGroup",resizeGroupEnd:"resizeGroupEnd",scaleStart:"scaleStart",beforeScale:"beforeScale",scale:"scale",scaleEnd:"scaleEnd",scaleGroupStart:"scaleGroupStart",beforeScaleGroup:"beforeScaleGroup",scaleGroup:"scaleGroup",scaleGroupEnd:"scaleGroupEnd",warpStart:"warpStart",warp:"warp",warpEnd:"warpEnd",rotateStart:"rotateStart",beforeRotate:"beforeRotate",rotate:"rotate",rotateEnd:"rotateEnd",rotateGroupStart:"rotateGroupStart",beforeRotateGroup:"beforeRotateGroup",rotateGroup:"rotateGroup",rotateGroupEnd:"rotateGroupEnd",scroll:"scroll",scrollGroup:"scrollGroup",dragOriginStart:"dragOriginStart",dragOrigin:"dragOrigin",dragOriginEnd:"dragOriginEnd",clipStart:"clipStart",clip:"clip",clipEnd:"clipEnd",roundStart:"roundStart",round:"round",roundEnd:"roundEnd",click:"click",clickGroup:"clickGroup",renderStart:"renderStart",render:"render",renderEnd:"renderEnd",renderGroupStart:"renderGroupStart",renderGroup:"renderGroup",renderGroupEnd:"renderGroupEnd"},features:[o.qOj,o.TTD],decls:0,vars:0,template:function(t,e){},encapsulation:2}),i})(),Dy=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[[]]}),i})();var Oy=p(57564),Ty=p(90343);let Ay=(()=>{class i{constructor(){this.scene={},this.changeSetting=new o.vpe}ngOnInit(){}sceneOnchange(){this.changeSetting.emit({scene:this.scene})}onchangeOption(t,e){this.scene[t]=e}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-scene-set"]],inputs:{scene:"scene"},outputs:{changeSetting:"changeSetting"},decls:12,vars:16,consts:[[1,"scene-info"],[3,"ngModel","nzSize","nzMin","nzStep","ngModelChange"],[2,"width","90px",3,"value","cpAlphaChannel","cpOutputFormat","colorPicker","cpPosition","cpWidth","colorPickerChange"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"span"),o._uU(2,"\u5bbd\u5ea6"),o.qZA(),o.TgZ(3,"nz-input-number",1),o.NdJ("ngModelChange",function(a){return e.scene.width=a}),o.qZA(),o.qZA(),o.TgZ(4,"div",0),o.TgZ(5,"span"),o._uU(6,"\u9ad8\u5ea6"),o.qZA(),o.TgZ(7,"nz-input-number",1),o.NdJ("ngModelChange",function(a){return e.scene.height=a}),o.qZA(),o.qZA(),o.TgZ(8,"div",0),o.TgZ(9,"span"),o._uU(10,"\u80cc\u666f\u8272"),o.qZA(),o.TgZ(11,"input",2),o.NdJ("colorPickerChange",function(a){return e.onchangeOption("bgColor",a)}),o.qZA(),o.qZA()),2&t&&(o.xp6(3),o.Q6J("ngModel",e.scene.width)("nzSize","small")("nzMin",1)("nzStep",1),o.xp6(4),o.Q6J("ngModel",e.scene.height)("nzSize","small")("nzMin",1)("nzStep",1),o.xp6(4),o.Udp("background",e.scene.bgColor),o.Q6J("value",e.scene.bgColor)("cpAlphaChannel","always")("cpOutputFormat","hex")("colorPicker",e.scene.bgColor)("cpPosition","bottom")("cpWidth","180px"))},directives:[Ty._,g.JJ,g.On,Tn],styles:[".scene-info[_ngcontent-%COMP%]{margin-left:10px}.scene-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:60px;margin-top:10px}"]}),i})();var id=p(84828);const Ey=["textareaOptions"],My=["textareaMockData"],Py=["textareaPosition"];let ky=(()=>{class i{constructor(){this.options={},this.comData={},this.position={},this.changeSetting=new o.vpe}ngOnInit(){this.loadOptons()}ngOnChanges(){this.loadOptons()}loadOptons(){this.textareaPosition&&(this.textareaPosition.nativeElement.value=JSON.stringify(this.position,null,2)),this.textareaOptions&&(this.textareaOptions.nativeElement.value=JSON.stringify(this.options||{},null,2)),this.textareaMockData&&(this.textareaMockData.nativeElement.value=JSON.stringify(this.comData||{},null,2))}positionOnchange(){this.position=JSON.parse(this.textareaPosition.nativeElement.value),this.changeSetting.emit({position:this.position})}optionsOnchange(){this.options=JSON.parse(this.textareaOptions.nativeElement.value),this.changeSetting.emit({options:this.options})}demoDataOnchange(){this.comData=JSON.parse(this.textareaMockData.nativeElement.value),this.changeSetting.emit({comData:this.comData})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-setting"]],viewQuery:function(t,e){if(1&t&&(o.Gf(Ey,5),o.Gf(My,5),o.Gf(Py,5)),2&t){let r;o.iGM(r=o.CRH())&&(e.textareaOptions=r.first),o.iGM(r=o.CRH())&&(e.textareaMockData=r.first),o.iGM(r=o.CRH())&&(e.textareaPosition=r.first)}},inputs:{options:"options",comData:"comData",position:"position"},outputs:{changeSetting:"changeSetting"},features:[o.TTD],decls:14,vars:0,consts:[["nzTitle","position"],["cols","30","rows","7",1,"area",3,"change"],["textareaPosition",""],["nzTitle","options"],["cols","30","rows","10",1,"area",3,"change"],["textareaOptions",""],["nzTitle","mockdata"],["textareaMockData",""]],template:function(t,e){1&t&&(o.TgZ(0,"div"),o.TgZ(1,"nz-tabset"),o.TgZ(2,"nz-tab",0),o.TgZ(3,"textarea",1,2),o.NdJ("change",function(){return e.positionOnchange()}),o._uU(5," "),o.qZA(),o.qZA(),o.TgZ(6,"nz-tab",3),o.TgZ(7,"textarea",4,5),o.NdJ("change",function(){return e.optionsOnchange()}),o._uU(9," "),o.qZA(),o.qZA(),o.TgZ(10,"nz-tab",6),o.TgZ(11,"textarea",4,7),o.NdJ("change",function(){return e.demoDataOnchange()}),o._uU(13," "),o.qZA(),o.qZA(),o.qZA(),o.qZA())},directives:[id.xH,id.xw],styles:["nz-tabset[_ngcontent-%COMP%]{min-height:520px;padding:0 10px}textarea[_ngcontent-%COMP%]{background-color:#000}"]}),i})();var rs=p(83730);const Iy=["target"],Ry=["moveable"],zy=["senceCon"],Gy=["mainbody"],Ny=["senceContainer"],os=function(i){return{active:i}};function By(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"li",10),o.NdJ("click",function(){const r=o.CHM(t),a=r.$implicit,s=r.index,l=o.oxw();return l.categoryClick(a,s),l.catIndex=s}),o._uU(1),o.qZA()}if(2&i){const t=n.$implicit,e=n.index,r=o.oxw();o.Q6J("ngClass",o.VKq(2,os,r.catIndex===e)),o.xp6(1),o.Oqu(t.title)}}function Fy(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"span",47),o.NdJ("click",function(){return o.CHM(t),o.oxw(3).deleteComponent()}),o.qZA()}}function Ly(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"li",10),o.NdJ("click",function(){const r=o.CHM(t),a=r.$implicit,s=r.index,l=o.oxw(2);return l.appWidgetClick(a,1),l.layerIndex=s}),o.TgZ(1,"span",45),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return a.lock=!a.lock}),o.qZA(),o.TgZ(2,"span"),o._uU(3),o.qZA(),o.YNc(4,Fy,1,0,"span",46),o.qZA()}if(2&i){const t=n.$implicit,e=n.index,r=o.oxw(2);o.Q6J("ngClass",o.VKq(4,os,r.layerIndex===e)),o.xp6(1),o.Q6J("nzType",t.lock?"lock":"unlock"),o.xp6(2),o.Oqu(t.title),o.xp6(1),o.Q6J("ngIf",r.layerIndex===e)}}function Hy(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"div",42),o.TgZ(1,"span",43),o.TgZ(2,"a",44),o.NdJ("click",function(){return o.CHM(t),o.oxw().clearScene()}),o._uU(3,"\u6e05\u7a7a\u753b\u5e03"),o.qZA(),o.qZA(),o.TgZ(4,"ul"),o.YNc(5,Ly,5,6,"li",11),o.qZA(),o.qZA()}if(2&i){const t=o.oxw();o.xp6(5),o.Q6J("ngForOf",t.sceneAllData.components)}}const Zy=function(i){return{"background-image":i,"background-size":"100% 100%"}};function Wy(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"div",49),o.TgZ(1,"div",50),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw(2).wlistclick(a)}),o.qZA(),o.TgZ(2,"div",51),o._uU(3),o.qZA(),o.qZA()}if(2&i){const t=n.$implicit;o.xp6(1),o.Q6J("ngStyle",o.VKq(2,Zy,"url(./assets/thumbnails/"+t.icon+".png)")),o.xp6(2),o.Oqu(t.title)}}function Vy(i,n){if(1&i&&(o.TgZ(0,"div",42),o.YNc(1,Wy,4,4,"div",48),o.qZA()),2&i){const t=o.oxw();o.xp6(1),o.Q6J("ngForOf",t.catWidget.children)}}const jy=function(i){return{transform:i}};function Uy(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"app-widget",54),o.NdJ("click",function(){o.CHM(t);const r=o.oxw(),a=r.$implicit,s=r.index,l=o.oxw();return l.appWidgetClick(a,2),l.layerIndex=s})("eventEmit",function(r){return o.CHM(t),o.oxw(2).onGetInstance(r)}),o.qZA()}if(2&i){const t=o.oxw().$implicit;o.Akn(o.VKq(11,jy,"rotate("+t.position.rotate+"deg)")),o.Udp("top",t.position.top,"px")("left",t.position.left,"px")("width",t.position.width,"px")("height",t.position.height,"px"),o.Q6J("widgetConfig",t)}}const Yy=function(i){return{"z-index":i}};function Xy(i,n){if(1&i&&(o.TgZ(0,"div",52),o.YNc(1,Uy,1,13,"app-widget",53),o.qZA()),2&i){const t=n.$implicit;o.Q6J("ngStyle",o.VKq(2,Yy,t.position.zIndex||0)),o.xp6(1),o.Q6J("ngIf","mulcoms"!=t.type)}}function Jy(i,n){1&i&&(o.TgZ(0,"span"),o._uU(1,"\u9501\u5b9a"),o.qZA())}function Ky(i,n){1&i&&(o.TgZ(0,"span"),o._uU(1,"\u89e3\u9501"),o.qZA())}const Qy=function(){return["/editer"]},qy=function(i){return["/editer/preview",i]},$y=function(i,n,t,e){return{transform:i,width:n,height:t,background:e}},t2=[{path:"list",component:ds},{path:"edit/:id",component:(()=>{class i{constructor(t,e,r,a,s){this.route=t,this.router=e,this.editService=r,this.apiService=a,this.nzContextMenuService=s,this.isCollapsed=!1,this.scaleK=.5,this.cwidgets=Pi,this.nowwidget=null,this.sceneAllData={components:[],options:{width:1920,height:1080,backgroundColor:"#fff"},id:nn(8),name:"\u65b0\u5efa\u573a\u666f"},this.position={left:100,top:100,width:400,height:400,rotate:0},this.options={},this.optionsData={},this.widgetInstances={},this.scalable=!0,this.resizable=!0,this.warpable=!1,this.showRight=!1,this.showLeft=!0,this.catWidget={},this.panelType="layers",this.catIndex=-1,this.layerIndex=-1,this.localScene=!1,localStorage.setItem("drawingBuffer","true"),this.apiRoot=window.webworker.apiRoot,this.urlRoot=window.webworker.urlRoot}ngOnInit(){this.route.paramMap.subscribe(t=>{const e=t.get("id");this.sceneId=e,e&&10===e.length?(this.localScene=!0,this.editService.getScene(e).subscribe(r=>{const a=r;this.sceneAllData=a,(a.components||[]).forEach(s=>{s.uuid||(s.uuid=nn())})})):this.apiService.getScene(e).subscribe(r=>{200===r.code&&(r.data.components=JSON.parse(r.data.components),r.data.options=JSON.parse(r.data.options),this.sceneAllData=r.data,(this.sceneAllData.components||[]).forEach(a=>{a.uuid||(a.uuid=nn())}))})}),document.addEventListener("keydown",t=>{navigator.platform.toUpperCase().indexOf("MAC")>=0&&8===t.keyCode&&(t.metaKey||t.ctrlKey)&&this.deleteComponent(),navigator.platform.toUpperCase().indexOf("WIN")>=0&&46===t.keyCode&&this.deleteComponent()})}contextMenu(t,e){this.nzContextMenuService.create(t,e)}closeMenu(){this.nzContextMenuService.close()}ngAfterViewInit(){setTimeout(()=>{this.setScaleK(.5)},10),window.onresize=()=>{this.setScaleK()}}setScaleK(t=.1){let r=(this.senceContainer.nativeElement.offsetWidth-50)/(this.sceneAllData.options.width||1920);r=Math.round(100*r)/100,r<=1&&r>=t&&(this.scaleK=r)}wlistclick(t){this.options=null;let e={};e={title:t.title,selector:t.selector,position:Object.assign(JSON.parse(JSON.stringify(this.position)),t.position||{}),uuid:nn()};const r=this.getZindexMax();e.position.zIndex=r+1,this.sceneAllData.components.push(e),this.nowwidget=e;const{width:a,height:s,left:l,top:c,rotate:d}=e.position;this.setTargetPosition(a,s,l,c,d),setTimeout(()=>{var f,h;this.nowwidget.options=JSON.parse(JSON.stringify((null===(f=this.widgetInstances[e.uuid])||void 0===f?void 0:f.options)||{})),this.nowwidget.comData=JSON.parse(JSON.stringify((null===(h=this.widgetInstances[e.uuid])||void 0===h?void 0:h.comData)||{}))},10),this.appWidgetClick(e,null)}onMoving(t,e){}onMoveEnd(t,e){}onResizeStart(t,e){this._width=e.size.width}onResizing(t,e){t.position.width=this._width+2*(e.size.width-this._width)}onResizeStop(t,e){var r,a;let s=e.size.width;t.position.top=e.position.top,t.position.left=e.position.left,t.position.width=this._width+2*(s-this._width),t.position.height=e.size.height,this._width=e.size.width,this.widgetInstances[t.uuid]&&(null===(a=(r=this.widgetInstances[t.uuid]).onResize)||void 0===a||a.call(r))}clearScene(){this.sceneAllData.components=[],this.clearSomething()}saveScene(){this.localScene?this.editService.saveScene(this.sceneId,this.sceneAllData):this.saveSceneJson(this.sceneAllData)}saveSceneJson(t){this.apiService.changeScene(t).subscribe(e=>{})}innerContentClick(t){t.preventDefault(),t.stopPropagation(),this.closeMenu(),["sence-container","sence-inner-content","sence-con-canvas scroll"].includes(t.target.className)&&this.clearSomething()}clearSomething(){this.nowwidget=null,this.options=null,this.closeMenu(),this.layerIndex=-1,this.targetdiv.nativeElement.style.display="none",this.targetdiv.nativeElement.style.width="0px",this.targetdiv.nativeElement.style.height="0px",this.moveable.updateTarget()}setTargetPosition(t,e,r,a,s=0){this.targetdiv.nativeElement&&(this.targetdiv.nativeElement.style.width=t+"px",this.targetdiv.nativeElement.style.height=e+"px",this.targetdiv.nativeElement.style.left=r+"px",this.targetdiv.nativeElement.style.top=a+"px",this.targetdiv.nativeElement.style.transform=`rotate(${s}deg)`),this.nowwidget&&(this.nowwidget.position.width=t,this.nowwidget.position.height=e,this.nowwidget.position.left=r,this.nowwidget.position.top=a,this.nowwidget.position.rotate=s,this.nowwidget.position=JSON.parse(JSON.stringify(this.nowwidget.position)))}appWidgetClick(t,e){if((2===e||t.lock)&&this.clearSomething(),t.selector&&(1===e||!t.lock)){this.nowwidget=t,this.targetdiv.nativeElement&&(this.targetdiv.nativeElement.style.display="block");const{width:r,height:a,left:s,top:l,rotate:c}=t.position;this.setTargetPosition(r,a,s,l,c),setTimeout(()=>{this.moveable.updateTarget()},10)}}deleteComponent(){!this.nowwidget||(this.sceneAllData.components=this.sceneAllData.components.filter(t=>t.uuid!==this.nowwidget.uuid),this.clearSomething())}lockComponent(){!this.nowwidget||(this.nowwidget.lock=!this.nowwidget.lock)}getZindexMax(){return Math.max(...this.sceneAllData.components.map(t=>+t.position.zIndex||0))}getZindexMin(){return Math.min(...this.sceneAllData.components.map(t=>+t.position.zIndex||0))}moveZindexTop(){!this.nowwidget||(this.nowwidget.position.zIndex=this.getZindexMax()+1)}moveZindexBottom(){!this.nowwidget||(this.nowwidget.position.zIndex=this.getZindexMin()-1,this.nowwidget.position.zIndex<0&&(this.nowwidget.position.zIndex=0,this.sceneAllData.components.forEach(t=>{t.uuid!==this.nowwidget.uuid&&(t.position.zIndex=+t.position.zIndex+1)})))}moveZindexUp(){if(!this.nowwidget)return;const t=new Set(this.sceneAllData.components.map(s=>+s.position.zIndex||0)),e=Array.from(t).sort((s,l)=>s-l),r=e.indexOf(this.nowwidget.position.zIndex);if(r===e.length-1)return;const a=e[r+1];this.sceneAllData.components.forEach(s=>{s.position.zIndex===a&&(s.position.zIndex=this.nowwidget.position.zIndex)}),this.nowwidget.position.zIndex=a}moveZindexDown(){if(!this.nowwidget)return;const t=new Set(this.sceneAllData.components.map(s=>+s.position.zIndex||0)),e=Array.from(t).sort((s,l)=>s-l),r=e.indexOf(this.nowwidget.position.zIndex);if(0===r)return;const a=e[r-1];this.sceneAllData.components.forEach(s=>{s.position.zIndex===a&&(s.position.zIndex=this.nowwidget.position.zIndex)}),this.nowwidget.position.zIndex=a}onChangeSetting(t){var e,r,a,s;t.options&&this.widgetInstances[this.nowwidget.uuid]&&(null===(r=(e=this.widgetInstances[this.nowwidget.uuid]).onchangeOption)||void 0===r||r.call(e,t.options),this.widgetInstances[this.nowwidget.uuid].options=t.options,this.nowwidget.options=t.options),t.comData&&this.widgetInstances[this.nowwidget.uuid]&&(null===(s=(a=this.widgetInstances[this.nowwidget.uuid]).onchangeDemoData)||void 0===s||s.call(a,t.comData),this.widgetInstances[this.nowwidget.uuid].comData=t.comData,this.nowwidget.comData=t.comData),t.position&&this.widgetInstances[this.nowwidget.uuid]&&(this.widgetInstances[this.nowwidget.uuid].position=t.position,this.nowwidget.position=t.position),t.scene&&(this.sceneAllData.options=t.scene)}onGetInstance(t){t.uuid&&(this.widgetInstances[t.uuid]=t.comInstance)}onPinch({}){}onDrag({target:t,top:a,left:s}){t.style.left=`${s}px`,t.style.top=`${a}px`,this.nowwidget&&(this.nowwidget.position.left=s,this.nowwidget.position.top=a,this.closeMenu())}onScale({target:t,delta:e}){t.style.transform=`scale(${e})`}onRotate({target:t,beforeRotate:s}){t.style.transform=`rotate(${s}deg)`,this.nowwidget&&(this.nowwidget.position.rotate=s,this.nowwidget.position=JSON.parse(JSON.stringify(this.nowwidget.position)),this.closeMenu())}onResize({target:t,width:a,height:s,drag:l}){t.style.width=`${a}px`,t.style.height=`${s}px`,t.style.left=l.beforeTranslate[0]+"px",t.style.top=l.beforeTranslate[1]+"px",this.setTargetPosition(a,s,l.beforeTranslate[0],l.beforeTranslate[1],this.nowwidget.position.rotate),this.moveable.updateTarget(),this.closeMenu()}onWarp({}){}onEnd(){var t,e;this.nowwidget&&(null===(e=null===(t=this.widgetInstances[this.nowwidget.uuid])||void 0===t?void 0:t.onResize)||void 0===e||e.call(t))}layersClick(){this.panelType="layers"}categoryClick(t){this.panelType="category",this.catWidget=t}toggleRight(){let t=this.senceCon.nativeElement.className;t.indexOf("sence-con-right")>0?t=t.replace("sence-con-right",""):t+=" sence-con-right",this.senceCon.nativeElement.className=t,setTimeout(()=>{this.setScaleK()},320)}toggleLeft(){let t=this.senceCon.nativeElement.className;t.indexOf("sence-con-left")>0?t=t.replace("sence-con-left",""):t+=" sence-con-left",this.senceCon.nativeElement.className=t,setTimeout(()=>{this.setScaleK()},320)}downloadSceneImg(t){const e=this.sceneId.toLocaleLowerCase();_l().toPng(t,{width:t.offsetWidth,height:t.offsetHeight,style:{transform:"scale(1)"}}).then(function(r){(new Image).src=r;const s=document.createElement("a");s.href=r,s.download=e+".png",s.click()}).catch(function(r){console.error("oops, something went wrong!",r)})}saveCover(t){if(this.localScene||(t||(t=this.mainbody.nativeElement),!t))return;const e=this.sceneId.toLocaleLowerCase(),r=this;_l().toJpeg(t,{quality:.85,width:t.offsetWidth,height:t.offsetHeight,backgroundColor:"#fff",style:{transform:"scale(1)"}}).then(function(a){const s=new FormData;s.append("file",a),s.append("id",e),r.apiService.saveCover(s).subscribe(l=>{})}).catch(function(a){console.error("oops, something went wrong!",a)})}ngOnDestroy(){}}return i.\u0275fac=function(t){return new(t||i)(o.Y36(Je.gz),o.Y36(Je.F0),o.Y36(ai),o.Y36(oi),o.Y36(Cl.Iw))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-edit"]],viewQuery:function(t,e){if(1&t&&(o.Gf(Iy,5),o.Gf(Ry,5),o.Gf(zy,5),o.Gf(Gy,5),o.Gf(Ny,5)),2&t){let r;o.iGM(r=o.CRH())&&(e.targetdiv=r.first),o.iGM(r=o.CRH())&&(e.moveable=r.first),o.iGM(r=o.CRH())&&(e.senceCon=r.first),o.iGM(r=o.CRH())&&(e.mainbody=r.first),o.iGM(r=o.CRH())&&(e.senceContainer=r.first)}},decls:63,vars:49,consts:[[1,"header"],[1,"header-con"],["nz-icon","","nzType","home",3,"routerLink"],["nz-icon","","nzType","save",3,"click"],[1,"right"],["nz-icon","","nzType","desktop","target","_blank",3,"routerLink"],[1,"right",3,"click"],["nz-icon","","nzType","download"],[1,"sence-left"],[1,"left-category","scroll"],[3,"ngClass","click"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","left-list scroll",4,"ngIf"],[1,"sence-con","sence-con-right"],["senceCon",""],[1,"sence-container"],["senceContainer",""],[1,"sence-arrow-wrap","left",3,"click"],["nz-icon","",2,"color","#909090","transform","translateY(-2px)",3,"nzType"],[1,"sence-arrow-wrap","right",3,"click"],[1,"sence-con-main"],[1,"sence-con-canvas","scroll"],[1,"sence-inner-content",3,"click"],["mainbody",""],["style","position: absolute;",3,"ngStyle",4,"ngFor","ngForOf"],[1,"moveable",2,"position","absolute","left","-10000px","width","0px","height","0px","z-index","99","background-color","rgba(127, 255, 212, 0.108)",3,"contextmenu"],["target",""],[3,"target","draggable","origin","rotatable","pinchable","scalable","resizable","warpable","keepRatio","throttleDrag","throttleScale","throttleRotate","throttleResize","drag","resize","scale","warp","rotate","pinch","resizeEnd"],["moveable",""],[1,"sence-con-scale"],[1,"scale-txt"],[2,"position","absolute","width","200px","top","-8px",3,"ngModel","nzMin","nzMax","nzStep","nzDefaultValue","ngModelChange"],[1,"sence-right"],[1,"setting",3,"scene","changeSetting"],[1,"com-title"],[1,"setting",3,"options","comData","position","changeSetting"],["menu","nzDropdownMenu"],["nz-menu","",1,"menuul"],["nz-menu-item","",3,"click"],[4,"ngIf"],["nz-submenu","","nzTitle","\u5c42\u7ea7"],[1,"menuul"],[1,"left-list","scroll"],[2,"margin-left","10px"],[3,"click"],["nz-icon","",2,"padding-right","5px",3,"nzType","click"],["class","float-right","nz-icon","","nzType","delete",3,"click",4,"ngIf"],["nz-icon","","nzType","delete",1,"float-right",3,"click"],["class","list-box",4,"ngFor","ngForOf"],[1,"list-box"],[1,"list-img",3,"ngStyle","click"],[1,"list-name"],[2,"position","absolute",3,"ngStyle"],["style","position: absolute;",3,"widgetConfig","style","top","left","width","height","click","eventEmit",4,"ngIf"],[2,"position","absolute",3,"widgetConfig","click","eventEmit"]],template:function(t,e){if(1&t){const r=o.EpF();o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"span"),o._UZ(3,"a",2),o.qZA(),o.TgZ(4,"span"),o.TgZ(5,"a",3),o.NdJ("click",function(){o.CHM(r);const s=o.MAs(29);return e.saveScene(),e.saveCover(s)}),o.qZA(),o.qZA(),o.TgZ(6,"span",4),o._UZ(7,"a",5),o.qZA(),o.TgZ(8,"span",6),o.NdJ("click",function(){o.CHM(r);const s=o.MAs(29);return e.downloadSceneImg(s)}),o._UZ(9,"a",7),o.qZA(),o.qZA(),o.qZA(),o.TgZ(10,"div",8),o.TgZ(11,"div",9),o.TgZ(12,"ul"),o.TgZ(13,"li",10),o.NdJ("click",function(){return e.layersClick(),e.catIndex=-1}),o._uU(14,"\u56fe\u5c42\u7ba1\u7406"),o.qZA(),o.YNc(15,By,2,4,"li",11),o.qZA(),o.qZA(),o.YNc(16,Hy,6,1,"div",12),o.YNc(17,Vy,2,1,"div",12),o.qZA(),o.TgZ(18,"div",13,14),o.TgZ(20,"div",15,16),o.TgZ(22,"span",17),o.NdJ("click",function(){return e.showLeft=!e.showLeft,e.toggleLeft()}),o._UZ(23,"span",18),o.qZA(),o.TgZ(24,"span",19),o.NdJ("click",function(){return e.showRight=!e.showRight,e.toggleRight()}),o._UZ(25,"span",18),o.qZA(),o.TgZ(26,"div",20),o.TgZ(27,"div",21),o.TgZ(28,"div",22,23),o.NdJ("click",function(s){return e.innerContentClick(s)}),o.YNc(30,Xy,2,4,"div",24),o.TgZ(31,"div",25,26),o.NdJ("contextmenu",function(s){o.CHM(r);const l=o.MAs(46);return e.contextMenu(s,l)}),o.qZA(),o.TgZ(33,"ngx-moveable",27,28),o.NdJ("drag",function(s){return e.onDrag(s)})("resize",function(s){return e.onResize(s)})("scale",function(s){return e.onScale(s)})("warp",function(s){return e.onWarp(s)})("rotate",function(s){return e.onRotate(s)})("pinch",function(s){return e.onPinch(s)})("resizeEnd",function(){return e.onEnd()}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(35,"div",29),o.TgZ(36,"span",30),o._uU(37),o.qZA(),o.TgZ(38,"span"),o.TgZ(39,"nz-slider",31),o.NdJ("ngModelChange",function(s){return e.scaleK=s}),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(40,"div",32),o.TgZ(41,"app-scene-set",33),o.NdJ("changeSetting",function(s){return e.onChangeSetting(s)}),o.qZA(),o.TgZ(42,"div",34),o._uU(43),o.qZA(),o.TgZ(44,"app-setting",35),o.NdJ("changeSetting",function(s){return e.onChangeSetting(s)}),o.qZA(),o.qZA(),o.TgZ(45,"nz-dropdown-menu",null,36),o.TgZ(47,"ul",37),o.TgZ(48,"li",38),o.NdJ("click",function(){return e.deleteComponent()}),o._uU(49,"\u5220\u9664"),o.qZA(),o.TgZ(50,"li",38),o.NdJ("click",function(){return e.lockComponent()}),o.YNc(51,Jy,2,0,"span",39),o.YNc(52,Ky,2,0,"span",39),o.qZA(),o.TgZ(53,"li",40),o.TgZ(54,"ul",41),o.TgZ(55,"li",38),o.NdJ("click",function(){return e.moveZindexTop()}),o._uU(56,"\u7f6e\u9876"),o.qZA(),o.TgZ(57,"li",38),o.NdJ("click",function(){return e.moveZindexBottom()}),o._uU(58,"\u7f6e\u5e95"),o.qZA(),o.TgZ(59,"li",38),o.NdJ("click",function(){return e.moveZindexUp()}),o._uU(60,"\u4e0a\u4e00\u5c42"),o.qZA(),o.TgZ(61,"li",38),o.NdJ("click",function(){return e.moveZindexDown()}),o._uU(62,"\u4e0b\u4e00\u5c42"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&t){const r=o.MAs(32);o.xp6(3),o.Q6J("routerLink",o.DdM(39,Qy)),o.xp6(4),o.Q6J("routerLink",o.VKq(40,qy,e.sceneId)),o.xp6(6),o.Q6J("ngClass",o.VKq(42,os,-1===e.catIndex)),o.xp6(2),o.Q6J("ngForOf",e.cwidgets),o.xp6(1),o.Q6J("ngIf","layers"==e.panelType),o.xp6(1),o.Q6J("ngIf","category"==e.panelType),o.xp6(6),o.Q6J("nzType",e.showLeft?"left":"right"),o.xp6(2),o.Q6J("nzType",e.showRight?"right":"left"),o.xp6(3),o.Akn(o.l5B(44,$y,"scale("+e.scaleK+")",e.sceneAllData.options.width+"px",e.sceneAllData.options.height+"px",e.sceneAllData.options.bgColor)),o.xp6(2),o.Q6J("ngForOf",e.sceneAllData.components),o.xp6(3),o.Udp("opacity",null===e.nowwidget?0:1),o.Q6J("target",r)("draggable",!0)("origin",!1)("rotatable",!0)("pinchable",!0)("scalable",e.scalable)("resizable",e.resizable)("warpable",e.warpable)("keepRatio",!1)("throttleDrag",1)("throttleScale",.01)("throttleRotate",.2)("throttleResize",1),o.xp6(4),o.hij("\u7f29\u653e\u6bd4\u4f8b:",e.scaleK,""),o.xp6(2),o.Q6J("ngModel",e.scaleK)("nzMin",.1)("nzMax",3)("nzStep",.01)("nzDefaultValue",.5),o.xp6(2),o.Q6J("scene",e.sceneAllData.options),o.xp6(2),o.hij(" ",null==e.nowwidget?null:e.nowwidget.selector.replace("Component","").toLowerCase()," "),o.xp6(1),o.Q6J("options",null==e.nowwidget?null:e.nowwidget.options)("comData",null==e.nowwidget?null:e.nowwidget.comData)("position",null==e.nowwidget?null:e.nowwidget.position),o.xp6(7),o.Q6J("ngIf",!(null!=e.nowwidget&&e.nowwidget.lock)),o.xp6(1),o.Q6J("ngIf",null==e.nowwidget?null:e.nowwidget.lock)}},directives:[Je.yS,dn.w,Yv.Ls,w.mk,w.sg,w.O5,Sy,Oy.jS,g.JJ,g.On,Ay,ky,Cl.RR,rs.wO,rs.r9,rs.rY,w.PC,bl],styles:["ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{margin:0;padding:0}li[_ngcontent-%COMP%]{list-style:none}.header[_ngcontent-%COMP%]{color:#fff;height:60px;background-color:#000;box-shadow:0 -1px 4px #949494 inset}.header[_ngcontent-%COMP%]   .header-con[_ngcontent-%COMP%]{padding:20px}.header[_ngcontent-%COMP%]   .header-con[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:20px}.header[_ngcontent-%COMP%]   .header-con[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{float:right}.sence-left[_ngcontent-%COMP%]{width:320px;height:calc(100% - 60px);height:-o-calc(100% - 60px);background:#191919;border-right:1px solid #333;position:absolute;left:0;top:60px;z-index:100}.sence-left[_ngcontent-%COMP%]   .left-category[_ngcontent-%COMP%]{float:left;height:100%;width:100px;overflow:auto;box-shadow:2px 0 #848484}.sence-left[_ngcontent-%COMP%]   .left-category[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 0 5px 10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;cursor:pointer}.sence-left[_ngcontent-%COMP%]   .left-category[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#177ddc!important}.sence-left[_ngcontent-%COMP%]   .left-category[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#333}.sence-left[_ngcontent-%COMP%]   .left-list[_ngcontent-%COMP%]{font-size:12px;float:right;height:100%;width:218px;overflow:auto}.sence-left[_ngcontent-%COMP%]   .left-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:4px 10px;cursor:pointer;font-size:12px;line-height:1.8}.sence-left[_ngcontent-%COMP%]   .left-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .float-right[_ngcontent-%COMP%]{float:right;transform:translateY(4px)}.sence-left[_ngcontent-%COMP%]   .left-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#333}.sence-left[_ngcontent-%COMP%]   .left-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#177ddc!important}.sence-left[_ngcontent-%COMP%]   .left-list[_ngcontent-%COMP%]   .list-box[_ngcontent-%COMP%]{float:left;width:90px;height:70px;box-shadow:0 0 4px #999;margin:6px 0 6px 12px}.sence-left[_ngcontent-%COMP%]   .left-list[_ngcontent-%COMP%]   .list-box[_ngcontent-%COMP%]   .list-img[_ngcontent-%COMP%]{width:100%;height:50px;background-color:#dddfe2;cursor:pointer}.sence-left[_ngcontent-%COMP%]   .left-list[_ngcontent-%COMP%]   .list-box[_ngcontent-%COMP%]   .list-name[_ngcontent-%COMP%]{font-size:12px;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;pointer-events:none}.sence-right[_ngcontent-%COMP%]{width:260px;height:calc(100% - 60px);height:-o-calc(100% - 60px);background:#191919;border-left:1px solid #333;position:absolute;right:0;top:60px;z-index:100}.sence-right[_ngcontent-%COMP%]   .com-title[_ngcontent-%COMP%]{height:22px;width:100%;color:#888;text-align:center;margin-top:8px;font-size:12px}.sence-con[_ngcontent-%COMP%]{padding:0 260px 0 320px;height:calc(100% - 60px);height:-o-calc(100% - 60px);transition:padding .3s linear;-moz-transition:padding .3s linear;-webkit-transition:padding .3s linear;-o-transition:padding .3s linear}.sence-con[_ngcontent-%COMP%]   .sence-container[_ngcontent-%COMP%]{padding:10px 20px 50px;height:100%;background:#1e1e1e;position:relative;overflow:hidden;z-index:101}.sence-con[_ngcontent-%COMP%]   .sence-container[_ngcontent-%COMP%]   .sence-arrow-wrap[_ngcontent-%COMP%]{width:19px;height:20px;border:1px solid #dddfe2;border-radius:2px;text-align:center;cursor:pointer;position:absolute;top:12px;z-index:100;background:#303135;border:1px solid rgba(255,255,255,.1)}.sence-con[_ngcontent-%COMP%]   .sence-container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{border-left:0;border-radius:0 2px 2px 0;left:0}.sence-con[_ngcontent-%COMP%]   .sence-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{border-right:0;border-radius:2px 0 0 2px;right:0}.sence-con[_ngcontent-%COMP%]   .sence-container[_ngcontent-%COMP%]   .sence-con-main[_ngcontent-%COMP%]{color:#fff;font-size:12px;height:100%}.sence-con[_ngcontent-%COMP%]   .sence-container[_ngcontent-%COMP%]   .sence-con-main[_ngcontent-%COMP%]   .sence-con-canvas[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto;position:relative}.sence-con[_ngcontent-%COMP%]   .sence-container[_ngcontent-%COMP%]   .sence-con-main[_ngcontent-%COMP%]   .sence-con-canvas[_ngcontent-%COMP%]   .sence-inner-content[_ngcontent-%COMP%]{color:#fff;min-height:600px;background-color:#000;position:absolute;width:1920px;height:1080px;transform:scale(.5);transform-origin:top left;top:5px;left:5px;box-shadow:0 0 4px #999}.sence-con[_ngcontent-%COMP%]   .sence-container[_ngcontent-%COMP%]   .sence-con-main[_ngcontent-%COMP%]   .sence-con-scale[_ngcontent-%COMP%]{width:300px;position:absolute;bottom:10px;right:-30px;z-index:100}.sence-con-left[_ngcontent-%COMP%]{padding-left:0!important;z-index:101;transition:padding .3s linear;-moz-transition:padding .3s linear;-webkit-transition:padding .3s linear;-o-transition:padding .3s linear}.sence-con-right[_ngcontent-%COMP%]{padding-right:0!important;z-index:101;transition:padding .3s linear;-moz-transition:padding .3s linear;-webkit-transition:padding .3s linear;-o-transition:padding .3s linear}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:6px}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:3px;background-color:#606060}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar-corner{background:transparent;display:none}.menuul[_ngcontent-%COMP%]{padding:8px!important}"]}),i})()},{path:"preview/:id",component:jv},{path:"",component:ds}];let e2=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[[Je.Bz.forChild(t2)],Je.Bz]}),i})();var n2=p(8383),i2=p(61840);let r2=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[[w.ez]]}),i})(),o2=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[[w.ez]]}),i})(),a2=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[[w.ez]]}),i})(),s2=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[[w.ez]]}),i})(),l2=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[[w.ez,g.u5,_.YY,e2,n2.b,i2.s,r2,o2,a2,s2,Dy,Qr]]}),i})()}}]);