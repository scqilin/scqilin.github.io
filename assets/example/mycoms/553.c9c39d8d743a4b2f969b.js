"use strict";(self.webpackChunkcomponent_library=self.webpackChunkcomponent_library||[]).push([[553],{1553:(Hd,za,F)=>{F.r(za),F.d(za,{EditerModule:()=>Id});var ie=F(8583),Ve=F(665),wu=F(3928),or=F(9838),g=F(7716);const Et=[];for(let t=0;t<256;t++)Et[t]=(t<16?"0":"")+t.toString(16);let Ze=(t=21)=>{let r="",e=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let n=63&e[t];r+=n<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():n<63?"_":"-"}return r};var Aa=F(5917),Ou=F(8002),je=F(1841);let qe=(()=>{class t{constructor(e){this.http=e,this.localScenes={scene:[]},this.getLocalScenes()}getLocalScenes(){const e=localStorage.getItem("localScenes");this.localScenes=e?JSON.parse(e):this.localScenes}getScenes(){return(0,Aa.of)(this.localScenes)}getScene(e){return(0,Aa.of)(this.localScenes.scene).pipe((0,Ou.U)(n=>n.find(a=>a.id===e)))}saveScene(e,n){this.localScenes.scene.map(a=>{a.id===e&&(a.data=n)}),this.saveScenes()}createNewScene(e){this.localScenes.scene.length<10?this.localScenes.scene.unshift({id:Ze(6),name:e,data:[]}):window.alert("Stop , A'zu, Ten is enough !")}deleteScene(e){this.localScenes.scene=this.localScenes.scene.filter(n=>n.id!==e)}saveScenes(){localStorage.setItem("localScenes",JSON.stringify(this.localScenes))}loadJsonScenesList(){return this.http.get("./assets/scenedata/scenes-list.json")}loadJsonScene(e){return this.http.get(`./assets/scenedata/${e}.json`)}}return t.\u0275fac=function(e){return new(e||t)(g.LFG(je.eN))},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Ru=F(3385),Ga=F(6704),Tu=F(4453),Pu=F(9374),Ba=F(4514);const zu=function(t){return["/editer/edit",t]},Au=function(t){return["/editer/preview",t]};function Gu(t,r){if(1&t){const e=g.EpF();g.TgZ(0,"div",4),g.TgZ(1,"div",5),g.TgZ(2,"span"),g._uU(3),g.qZA(),g.TgZ(4,"span"),g.TgZ(5,"a",9),g._uU(6,"Edit"),g.qZA(),g.qZA(),g.TgZ(7,"span"),g.TgZ(8,"a",10),g._uU(9,"Preview"),g.qZA(),g.qZA(),g.TgZ(10,"span"),g.TgZ(11,"a",11),g.NdJ("click",function(){const i=g.CHM(e).$implicit;return g.oxw().deleteScene(i.id)}),g._uU(12,"Delete"),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&t){const e=r.$implicit,n=g.oxw();g.Q6J("nzSpan",24/n.count),g.xp6(3),g.Oqu(e.sid),g.xp6(2),g.Q6J("routerLink",g.VKq(4,zu,e.id)),g.xp6(3),g.Q6J("routerLink",g.VKq(6,Au,e.id))}}function Bu(t,r){if(1&t&&(g.TgZ(0,"div",4),g.TgZ(1,"div",5),g.TgZ(2,"span"),g._uU(3),g.qZA(),g.TgZ(4,"span"),g.TgZ(5,"a",9),g._uU(6,"Edit"),g.qZA(),g.qZA(),g.TgZ(7,"span"),g.TgZ(8,"a",10),g._uU(9,"Preview"),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&t){const e=r.$implicit,n=g.oxw();g.Q6J("nzSpan",24/n.count),g.xp6(3),g.Oqu(e.id),g.xp6(2),g.MGl("routerLink","/editer/edit/",e.id,""),g.xp6(3),g.MGl("routerLink","/editer/preview/",e.id,"")}}const Ia=function(t,r){return[t,r]};let ka=(()=>{class t{constructor(e,n){this.editService=e,this.http=n,this.hGutter=16,this.vGutter=16,this.count=6,this.localArray=[],this.jsonArray=[]}ngOnInit(){this.getSceneList(),this.editService.loadJsonScenesList().subscribe(e=>{this.jsonArray=e.scene||[]})}createNewScene(){this.editService.createNewScene("\u5927\u5c4f"),setTimeout(()=>{this.saveScenes(),this.getSceneList()},10)}deleteScene(e){this.editService.deleteScene(e),this.getSceneList()}getSceneList(){this.editService.getScenes().subscribe(e=>{this.localArray=JSON.parse(JSON.stringify(e.scene||[]));let n=this.localArray.length;for(let a=0;a<n;a++)this.localArray[a].sid=n-a})}saveScenes(){this.editService.saveScenes()}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(qe),g.Y36(je.eN))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-list"]],decls:12,vars:11,consts:[[1,"com-but"],[1,"gutter-example"],["nzText","List1"],["nz-row","",3,"nzGutter"],["nz-col","",1,"gutter-row",3,"nzSpan"],[1,"grid-config"],["nz-button","","nzType","primary",3,"click"],["nz-col","","class","gutter-row",3,"nzSpan",4,"ngFor","ngForOf"],["nzText","List2"],[3,"routerLink"],["target","_blank",3,"routerLink"],[3,"click"]],template:function(e,n){1&e&&(g._UZ(0,"div",0),g.TgZ(1,"div",1),g._UZ(2,"nz-divider",2),g.TgZ(3,"div",3),g.TgZ(4,"div",4),g.TgZ(5,"div",5),g.TgZ(6,"button",6),g.NdJ("click",function(){return n.createNewScene()}),g._uU(7," + "),g.qZA(),g.qZA(),g.qZA(),g.YNc(8,Gu,13,8,"div",7),g.qZA(),g._UZ(9,"nz-divider",8),g.TgZ(10,"div",3),g.YNc(11,Bu,10,4,"div",7),g.qZA(),g.qZA()),2&e&&(g.xp6(3),g.Q6J("nzGutter",g.WLB(5,Ia,n.hGutter,n.vGutter)),g.xp6(1),g.Q6J("nzSpan",24/n.count),g.xp6(4),g.Q6J("ngForOf",n.localArray),g.xp6(2),g.Q6J("nzGutter",g.WLB(8,Ia,n.hGutter,n.vGutter)),g.xp6(1),g.Q6J("ngForOf",n.jsonArray))},directives:[Ru.g,Ga.SK,Ga.t3,Tu.ix,Pu.dQ,Ba.w,ie.sg,or.yS],styles:[".com-but[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px}.gutter-example[_ngcontent-%COMP%]{padding:15px;text-align:center}.grid-config[_ngcontent-%COMP%]{height:120px;font-size:14px;line-height:120px;background:#bddde8;border-radius:4px;overflow:auto}.grid-config[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-right:10px}"]}),t})();var Fa=F(2855);let Na=(()=>{class t{constructor(){}ngOnInit(){}onResize(e){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-colorbar"]],decls:2,vars:0,consts:[[1,"bar"]],template:function(e,n){1&e&&(g.TgZ(0,"p",0),g._uU(1,"colorbar works!"),g.qZA())},styles:[".bar[_ngcontent-%COMP%]{background-color:#509a80;width:max-content}"]}),t})();var La=F(47),Wa=F(4266),Ya=F(2412),Ha=F(2026);let Xa=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-head2"]],decls:2,vars:0,template:function(e,n){1&e&&(g.TgZ(0,"p"),g._uU(1,"head2 works!"),g.qZA())},encapsulation:2}),t})();var Va=F(2004),Za=F(8845),ja=F(4335),qa=F(7947);let Ua=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-minibar"]],decls:2,vars:0,template:function(e,n){1&e&&(g.TgZ(0,"p"),g._uU(1,"minibar works!"),g.qZA())},styles:[""]}),t})();var Ja=F(5543),$a=F(8968),Ka=F(7610),Qa=F(7186),ti=F(2815),ri=F(4823),ei=F(1109),ni=F(8075),ai=F(2957),ii=F(4282),oi=F(8503),si=F(4184),ui=F(1259),li=F(5076),fi=F(1335),ci=F(5815),pi=F(6803);let di=(()=>{class t{constructor(){}ngOnInit(){}ngAfterViewInit(){}ngOnChanges(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-turnbook3d"]],features:[g.TTD],decls:1,vars:0,template:function(e,n){1&e&&g._uU(0,"turnbook3d")},styles:[""]}),t})();var vi=F(3371),hi=F(1566),gi=F(66),mi=F(3265),bi=F(9313),xi=F(7266),Si=F(1052),Ci=F(7120),_i=F(4681),Ei=F(9827),Mi=F(1786),yi=F(8466),Di=F(9676),wi=F(6310),Oi=F(9554),Ri=F(6665),Ti=F(4170),Pi=F(2726),zi=F(4288),Ai=F(7974);const Iu=["container"];let Gi=(()=>{class t{constructor(){this.width=100,this.height=100,this.backcolor="#1d48c4",this.points="40, 0 5, 0 0, 5 0, 16 3, 19 3, 7 7, 3 35, 3"}ngOnInit(){}ngAfterViewInit(){let e=this.container.nativeElement;setTimeout(()=>{this.width=e.offsetWidth,this.height=e.offsetHeight},100)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-borderbox01"]],viewQuery:function(e,n){if(1&e&&g.Gf(Iu,5),2&e){let a;g.iGM(a=g.CRH())&&(n.container=a.first)}},decls:11,vars:6,consts:[[2,"width","100%","height","100%"],["container",""],[1,"dv-border-box-10"],["width","150px","height","150px",1,"left-top","dv-border-svg-container"],["fill","#d3e1f8"],["width","150px","height","150px",1,"right-top","dv-border-svg-container"],["width","150px","height","150px",1,"left-bottom","dv-border-svg-container"],["width","150px","height","150px",1,"right-bottom","dv-border-svg-container"]],template:function(e,n){1&e&&(g.TgZ(0,"div",0,1),g.TgZ(2,"div",2),g.O4$(),g.TgZ(3,"svg",3),g._UZ(4,"polygon",4),g.qZA(),g.TgZ(5,"svg",5),g._UZ(6,"polygon",4),g.qZA(),g.TgZ(7,"svg",6),g._UZ(8,"polygon",4),g.qZA(),g.TgZ(9,"svg",7),g._UZ(10,"polygon",4),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.xp6(2),g.Udp("box-shadow",n.backcolor+" 0px 0px 25px 3px inset"),g.xp6(2),g.uIk("points",n.points),g.xp6(2),g.uIk("points",n.points),g.xp6(2),g.uIk("points",n.points),g.xp6(2),g.uIk("points",n.points))},styles:[".dv-border-box-10[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;border-radius:6px}.dv-border-box-10[_ngcontent-%COMP%]   .dv-border-svg-container[_ngcontent-%COMP%]{position:absolute;display:block}.dv-border-box-10[_ngcontent-%COMP%]   .right-top[_ngcontent-%COMP%]{right:0px;transform:rotateY(180deg)}.dv-border-box-10[_ngcontent-%COMP%]   .left-bottom[_ngcontent-%COMP%]{bottom:0px;transform:rotateX(180deg)}.dv-border-box-10[_ngcontent-%COMP%]   .right-bottom[_ngcontent-%COMP%]{right:0px;bottom:0px;transform:rotateX(180deg) rotateY(180deg)}"]}),t})(),Bi=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-borderbox02"]],decls:2,vars:0,template:function(e,n){1&e&&(g.TgZ(0,"p"),g._uU(1,"borderbox02 works!"),g.qZA())},encapsulation:2}),t})();const Ii=[Fa.P,Na,La.i,Wa.B,Ha.J,Xa,Ya.F,Va._,Za.t,ja.K,qa.X,Ua,Ja.b,$a.d,Ka.Z,Qa.J,ti.O,ri.g,ei.T,ni.e,ai.o,ii.F,yi.R,Di.x,wi.d,oi.p,si.$,Ci.L,Oi.s,Ri.N,_i.Q,Ei.c,Mi.i,ui.r,li.X,fi.J,ci.f,pi.m,di,vi.P,hi.r,gi.$,mi.B,xi.z,bi.Y,Ti.G,Pi.g,Si.Y,zi.T,Ai.v,Gi,Bi],ku=["BasicbarComponent","ColorbarComponent","BarStackComponent","BarStacksBendComponent","Head1Component","Head2Component","ClockComponent","Chinamap1Component","Worldmap1Component","MapsvgComponent","EarthComponent","MinibarComponent","MiniarealineComponent","MimipiesComponent","ChinamapComponent","MapChina4Component","D3lineareaComponent","TitleareaComponent","Chinamap2Component","Chinamapthree1Component","MulpiesComponent","YuanhuanComponent","TopolineComponent","Topoline2Component","D3polylineComponent","AlarmlistComponent","NoiseSphereComponent","UsertreeComponent","Topo25Component","Topo253dComponent","TreeAndTopoComponent","D3hierarchyComponent","D3hierarchy2Component","VideosphereComponent","CenterraderComponent","LineschartComponent","LinechartComponent","AmmojsComponent","Turnbook3dComponent","Book3dbaseComponent","Book3dbasehtmlComponent","SphereComponent","PlaneComponent","SuperSportsCarComponent","RingComponent","Pie3dComponent","PieSingleComponent","Ring2Component","P5testComponent","P5barComponent","Borderbox01Component","Borderbox02Component"],Fu=[{title:"\u62d3\u6251\u7c7b",children:[{name:"flow-chart",title:"\u6d41\u7a0b\u56fe",selector:"D3hierarchy2Component",component:Mi.i,position:{width:1e3,height:400}},{name:"Topo253d",title:"\u673a\u623f\u5173\u7cfb\u56fe",selector:"Topo253dComponent",component:Ri.N,position:{width:1e3,height:680}},{name:"Topo25",title:"2.5D\u62d3\u6251\u56fe",selector:"Topo25Component",component:Oi.s,position:{width:750,height:600}},{name:"Usertree",title:"\u81ea\u5b9a\u4e49\u5c42\u7ea7\u6811",selector:"UsertreeComponent",component:Ci.L,position:{width:700,height:300}},{name:"Hierarchytree",title:"\u5c42\u7ea7\u6811\u62d3\u6251",selector:"TreeAndTopoComponent",component:_i.Q,position:{width:1100,height:700}},{name:"Topod3",title:"\u5c42\u7ea7\u6811",selector:"D3hierarchyComponent",component:Ei.c},{name:"Topoline",title:"\u73af\u5f62\u62d3\u6251",selector:"TopolineComponent",component:yi.R,position:{width:1200,height:600}},{name:"Topoline2",title:"\u73af\u5f62\u5c42\u7ea7\u62d3\u6251",selector:"Topoline2Component",component:Di.x,position:{width:800,height:400}},{name:"Polyline",title:"\u6d41\u7a0b\u56fe\u6298\u7ebf",selector:"D3polylineComponent",component:wi.d,position:{width:1100,height:700}}]},{title:"\u57fa\u7840\u56fe\u8868",children:[{name:"BarStackBand",title:"\u5f2f\u66f2\u5806\u53e0\u6761\u5f62\u56fe",selector:"BarStacksBendComponent",component:Wa.B,position:{width:250,height:250}},{name:"BarStack",title:"\u5806\u53e0\u6761\u5f62\u56fe",selector:"BarStackComponent",component:La.i,position:{width:300,height:300}},{name:"Pie3d",title:"\u997c\u56fe3D",selector:"Pie3dComponent",component:Ti.G},{name:"PieSingle",title:"\u997c\u56fe",selector:"PieSingleComponent",component:Pi.g},{name:"Basicbar",title:"\u57fa\u672c\u67f1\u72b6\u56fe",selector:"BasicbarComponent",component:Fa.P},{name:"Colorbar",title:"\u5f69\u8272\u67f1\u72b6\u56fe",selector:"ColorbarComponent",component:Na},{name:"Minibar",title:"\u8ff7\u4f60\u67f1\u72b6\u56fe",component:Ua,selector:"MinibarComponent"},{name:"Miniarealine",title:"\u8ff7\u4f60\u9762\u79ef\u56fe",selector:"MiniarealineComponent",component:Ja.b,icon:"miniarealineicon.png"},{name:"Mimipies",title:"\u8ff7\u4f60\u997c\u56fe",selector:"MimipiesComponent",component:$a.d,icon:"minipiesicon.png"},{name:"D3linearea",title:"\u6298\u7ebf\u9762\u79ef\u56fe",selector:"D3lineareaComponent",component:ti.O,icon:"d3lineareaicon.png"},{name:"Titlearea",title:"\u6807\u9898\u9762\u79ef\u56fe",selector:"TitleareaComponent",component:ri.g,icon:"titleareaicon.png"},{name:"Lineschart",title:"\u8f6e\u64ad\u6298\u7ebf\u56fe",selector:"LineschartComponent",component:fi.J},{name:"Linechart",title:"\u6298\u7ebf\u56fe",selector:"LinechartComponent",component:ci.f}]},{title:"\u6df7\u5408\u56fe\u8868",children:[{name:"Alarmlist",title:"\u544a\u8b66\u6536\u655b",selector:"AlarmlistComponent",component:oi.p},{name:"Mulpies",title:"\u6df7\u5408\u997c\u56fe",selector:"MulpiesComponent",component:ai.o}]},{title:"\u57fa\u7840\u88c5\u9970",children:[{name:"Head1",title:"\u5934\u90e81",selector:"Head1Component",component:Ha.J,position:{width:1200,height:60}},{name:"Head2",title:"\u5934\u90e82",selector:"Head2Component",component:Xa},{name:"Clock",title:"\u65f6\u949f",selector:"ClockComponent",component:Ya.F}]},{title:"\u7279\u6548\u7c7b",children:[{name:"ring",title:"Siri\u6548\u679c",selector:"RingComponent",component:bi.Y},{name:"plane",title:"\u6d77\u9762\u98ce\u8f66\u5c0f\u8239",selector:"PlaneComponent",component:mi.B},{name:"supersportscar",title:"\u672a\u6765\u8d85\u7ea7\u8dd1\u8f66",selector:"SuperSportsCarComponent",component:xi.z}]},{title:"\u88c5\u9970\u7c7b",children:[{name:"Ring2",title:"\u88c5\u9970\u5706\u73af",selector:"Ring2Component",component:Si.Y},{name:"Yuanhuan",title:"\u88c5\u9970\u5706\u73af",selector:"YuanhuanComponent",component:ii.F},{name:"Videosphere",title:"\u89c6\u9891\u7eb9\u7406",selector:"VideosphereComponent",component:ui.r},{name:"Centerrader",title:"\u4e2d\u592e\u96f7\u8fbe",selector:"CenterraderComponent",component:li.X}]},{title:"\u5730\u56fe\u7c7b",children:[{name:"Worldmap1",title:"\u4e16\u754c\u5730\u56fe",selector:"Worldmap1Component",component:Za.t},{name:"Chinamap1",title:"\u4e2d\u56fd\u5730\u56fe1",selector:"Chinamap1Component",component:Va._},{name:"Mapsvg",title:"svg\u5730\u56fe",selector:"MapsvgComponent",component:ja.K},{name:"Chinamap2",title:"\u5730\u56fed3js",selector:"Chinamap2Component",component:ei.T,icon:"chinamap2icon.png"},{name:"Chinamapthree1",title:"\u5730\u56fethree1",selector:"Chinamapthree1Component",component:ni.e,icon:"chinamap2icon.png"},{name:"Chinamap",title:"\u4e2d\u56fd\u5730\u56febar",selector:"ChinamapComponent",component:Ka.Z,icon:"chinamapicon.png"},{name:"Chinamap",title:"\u4e2d\u56fd\u5730\u56feline",selector:"MapChina4Component",component:Qa.J,icon:"chinamapicon.png"}]},{title:"\u5706\u7403\u7c7b",children:[{name:"Noisesphere",title:"\u566a\u58f0\u7403",selector:"NoiseSphereComponent",component:si.$},{name:"Earth",title:"\u88c5\u9970\u5730\u7403",selector:"EarthComponent",component:qa.X,icon:"earthicon.png"},{name:"Sphere",title:"\u7403\u4f53",selector:"SphereComponent",component:gi.$}]},{title:"\u5176\u4ed6\u7c7b",children:[{name:"p5test",title:"p5test",selector:"P5testComponent",component:zi.T},{name:"p5bar",title:"p5bar",selector:"P5barComponent",component:Ai.v},{name:"Ammojs",title:"Ammojs",selector:"AmmojsComponent",component:pi.m},{name:"Turnbook3d",title:"Turnbook3d",selector:"Turnbook3dComponent",component:di},{name:"Book3d",title:"\u62d3\u6251\u673a\u7bb1",selector:"Book3dbasehtmlComponent",component:hi.r},{name:"Book3dbase",title:"\u65e0\u5b57\u5929\u4e66",selector:"Book3dbaseComponent",component:vi.P}]},{title:"\u8fb9\u6846",children:[{name:"borderbox01",title:"borderbox01",selector:"Borderbox01Component",component:Gi},{name:"borderbox02",title:"borderbox02",selector:"Borderbox02Component",component:Bi}]}];let ki=(()=>{class t{constructor(e){this.viewContainerRef=e}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(g.s_b))},t.\u0275dir=g.lG2({type:t,selectors:[["","comHost",""]]}),t})();function Nu(t,r){}let Fi=(()=>{class t{constructor(e){this.componentFactoryResolver=e,this.eventEmit=new g.vpe}findComponent(e){let n=null;for(let a=0;a<Ii.length;a++)if(ku[a]===e){n=Ii[a];break}return n}ngOnChanges(e){if(this.widgetConfig&&this.widgetConfig.selector){let n=this.findComponent(this.widgetConfig.selector);n&&this.loadComponent(n)}}ngOnInit(){if(this.widgetConfig&&this.widgetConfig.selector){let e=this.findComponent(this.widgetConfig.selector);e&&this.loadComponent(e)}}loadComponent(e){if(!e)return;const n=this.componentFactoryResolver.resolveComponentFactory(e),a=this.comHost.viewContainerRef;a.clear(),this.componentRef=a.createComponent(n),this.componentRef.instance.factorydata=this.widgetConfig,this.eventEmit.emit({uuid:this.widgetConfig.uuid,comInstance:this.componentRef.instance})}onResize(){var e,n;this.componentRef&&(null===(n=(e=this.componentRef.instance).ngOnChanges)||void 0===n||n.call(e,{resize:!0}))}onChangeSetting(){var e,n;this.componentRef&&(null===(n=(e=this.componentRef.instance).ngOnChanges)||void 0===n||n.call(e,{config:this.widgetConfig}))}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(g._Vd))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-widget"]],viewQuery:function(e,n){if(1&e&&g.Gf(ki,7),2&e){let a;g.iGM(a=g.CRH())&&(n.comHost=a.first)}},inputs:{widgetConfig:"widgetConfig"},outputs:{eventEmit:"eventEmit"},features:[g.TTD],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["comHost",""]],template:function(e,n){1&e&&(g.TgZ(0,"div",0),g.YNc(1,Nu,0,0,"ng-template",1),g.qZA())},directives:[ki],encapsulation:2}),t})();const Lu=function(t){return{transform:t}};function Wu(t,r){if(1&t&&g._UZ(0,"app-widget",2,3),2&t){const e=r.$implicit;g.Akn(g.VKq(11,Lu,"rotate("+e.position.rotate+"deg)")),g.Udp("top",e.position.top,"px")("left",e.position.left,"px")("width",e.position.width,"px")("height",e.position.height,"px"),g.Q6J("widgetConfig",e)}}let Yu=(()=>{class t{constructor(e,n,a){this.route=e,this.http=n,this.editService=a,this.senseWidgets=[],this.scene=[]}ngOnInit(){this.route.paramMap.subscribe(e=>{const n=e.get("id");n.toString().length<6?this.editService.loadJsonScene(n).subscribe(a=>{this.senseWidgets=a.components}):this.editService.getScene(n).subscribe(a=>{this.senseWidgets=a.data||[]})})}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(or.gz),g.Y36(je.eN),g.Y36(qe))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-preview"]],decls:2,vars:1,consts:[[1,"prevoew-content"],["style","position: absolute;",3,"style","widgetConfig","top","left","width","height",4,"ngFor","ngForOf"],[2,"position","absolute",3,"widgetConfig"],["appwidget",""]],template:function(e,n){1&e&&(g.TgZ(0,"div",0),g.YNc(1,Wu,2,13,"app-widget",1),g.qZA()),2&e&&(g.xp6(1),g.Q6J("ngForOf",n.senseWidgets))},directives:[ie.sg,Fi],styles:[".prevoew-content[_ngcontent-%COMP%]{position:absolute;background-color:#000;width:1920px;height:1080px}.sc-list[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:10px}.sc-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:20px;height:20px;color:#000;display:inline-block;background-color:#faebd7;border-radius:10px;margin-right:10px;text-align:center;line-height:20px}"]}),t})();var oe=F(2746),Hu=F(3599),Ue=F(3730),Xu=F(7564);function Vu(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return r.map(function(n){return n.split(" ").map(function(a){return a?""+t+a:""}).join(" ")}).join(" ")}function Ht(t,r){return function(e){e&&(t[r]=e)}}function Ni(t,r,e){return function(n){n&&(t[r][e]=n)}}function Li(t,r){return function(e){var n=e.prototype;t.forEach(function(a){r(n,a)})}}function Wi(t,r){return void 0===r&&(r={}),function(e,n){t.forEach(function(a){var i=r[a]||a;i in e||(e[i]=function(){for(var o,s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];var l=(o=this[n])[a].apply(o,s);return l===this[n]?this:l})})}}var ju=function(){function t(){this.keys=[],this.values=[]}var r=t.prototype;return r.get=function(e){return this.values[this.keys.indexOf(e)]},r.set=function(e,n){var a=this.keys,i=this.values,o=a.indexOf(e),s=-1===o?a.length:o;a[s]=e,i[s]=n},t}(),qu=function(){function t(){this.object={}}var r=t.prototype;return r.get=function(e){return this.object[e]},r.set=function(e,n){this.object[e]=n},t}(),Uu="function"==typeof Map,Ju=function(){function t(){}var r=t.prototype;return r.connect=function(e,n){this.prev=e,this.next=n,e&&(e.next=this),n&&(n.prev=this)},r.disconnect=function(){var e=this.prev,n=this.next;e&&(e.next=n),n&&(n.prev=e)},r.getIndex=function(){for(var e=this,n=-1;e;)e=e.prev,++n;return n},t}(),Ku=function(){function t(e,n,a,i,o,s,u,l){this.prevList=e,this.list=n,this.added=a,this.removed=i,this.changed=o,this.maintained=s,this.changedBeforeAdded=u,this.fixed=l}var r=t.prototype;return Object.defineProperty(r,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(r,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),r.caculateOrdered=function(){var e=function(t,r){var e=[],n=[];return t.forEach(function(a){var i=a[0],o=a[1],s=new Ju;e[i]=s,n[o]=s}),e.forEach(function(a,i){a.connect(e[i-1])}),t.filter(function(a,i){return!r[i]}).map(function(a,i){var o=a[0],s=a[1];if(o===s)return[0,0];var u=e[o],l=n[s-1],p=u.getIndex();return u.disconnect(),l?u.connect(l,l.next):u.connect(void 0,e[0]),[p,u.getIndex()]})}(this.changedBeforeAdded,this.fixed),n=this.changed,a=[];this.cacheOrdered=e.filter(function(i,o){var l=n[o];if(i[0]!==i[1])return a.push([l[0],l[1]]),!0}),this.cachePureChanged=a},t}();function se(t,r,e){var n=Uu?Map:e?qu:ju,a=e||function(x){return x},i=[],o=[],s=[],u=t.map(a),l=r.map(a),p=new n,c=new n,f=[],d=[],v={},h=[],m=0,b=0;return u.forEach(function(x,S){p.set(x,S)}),l.forEach(function(x,S){c.set(x,S)}),u.forEach(function(x,S){var C=c.get(x);void 0===C?(++b,o.push(S)):v[C]=b}),l.forEach(function(x,S){var C=p.get(x);void 0===C?(i.push(S),++m):(s.push([C,S]),f.push([C-(b=v[S]||0),S-m]),d.push(S===C),C!==S&&h.push([C,S]))}),o.reverse(),new Ku(t,r,i,o,h,s,f,d)}const tl=function(){function t(e,n){void 0===e&&(e=[]),this.findKeyCallback=n,this.list=[].slice.call(e)}return t.prototype.update=function(e){var n=[].slice.call(e),a=se(this.list,n,this.findKeyCallback);return this.list=n,a},t}();var Gr="undefined",Zi=typeof window!==Gr,il=(typeof document!==Gr&&document,[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}]),bt=1e-7,ue={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,r){return t*r/100},vw:function(t,r){return void 0===r&&(r=window.innerWidth),t/100*r},vh:function(t,r){return void 0===r&&(r=window.innerHeight),t/100*r},vmax:function(t,r){return void 0===r&&(r=Math.max(window.innerWidth,window.innerHeight)),t/100*r},vmin:function(t,r){return void 0===r&&(r=Math.min(window.innerWidth,window.innerHeight)),t/100*r}};function sr(t,r,e,n){return(t*n+r*e)/(e+n)}function le(t){return typeof t===Gr}function kt(t){return t&&"object"==typeof t}function Ut(t){return Array.isArray(t)}function At(t){return"string"==typeof t}function Je(t){return"number"==typeof t}function qi(t){return"function"==typeof t}function Ui(t,r,e,n,a){return $e(t,r,e)?e:function(t,r,e,n,a){for(var o,i=function(l){var p=r[l].trim();if(p===t.close&&!$e(t,r,l))return{value:l};var c=l,f=ur(a,function(d){return d.open===p});if(f&&(c=Ui(f,r,l,n,a)),-1===c)return o=l,"break";o=l=c},s=e;s<n;++s){var u=i(s);if(s=o,"object"==typeof u)return u.value;if("break"===u)break}return-1}(t,r,e+1,n,a)}function $e(t,r,e){if(!t.ignore)return null;var n=r.slice(Math.max(e-3,0),e+3).join("");return new RegExp(t.ignore).exec(n)}function Ji(t,r){var e=At(r)?{separator:r}:r,n=e.separator,a=void 0===n?",":n,i=e.isSeparateFirst,o=e.isSeparateOnlyOpenClose,s=e.isSeparateOpenClose,u=void 0===s?o:s,l=e.openCloseCharacters,p=void 0===l?il:l,c=p.map(function(_){var w=_.open,y=_.close;return w===y?w:w+"|"+y}).join("|"),d=new RegExp("(\\s*"+a+"\\s*|"+c+"|\\s+)","g"),v=t.split(d).filter(Boolean),h=v.length,m=[],b=[];function x(){return!!b.length&&(m.push(b.join("")),b=[],!0)}for(var C,S=function(_){var w=v[_].trim(),y=_,D=ur(p,function(O){return O.open===w}),P=ur(p,function(O){return O.close===w});if(D){if(-1!==(y=Ui(D,v,_,h,p))&&u)return x()&&i||(m.push(v.slice(_,y+1).join("")),_=y,i)?(C=_,"break"):(C=_,"continue")}else{if(P&&!$e(P,v,_))throw new Error("invalid format: "+P.close);if(function(t,r){return(""===r||" "==r)&&(""===t||" "==t)||t===r}(w,a)&&!o)return x(),i?(C=_,"break"):(C=_,"continue")}-1===y&&(y=h-1),b.push(v.slice(_,y+1).join("")),C=_=y},M=0;M<h;++M){var E=S(M);if(M=C,"break"===E)break}return b.length&&m.push(b.join("")),m}function Jt(t){return Ji(t,"")}function $t(t){return Ji(t,",")}function Ke(t){var r=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!r||r.length<4?{}:{prefix:r[1],value:r[2],suffix:r[3]}}function Ir(t){var r=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);return r?{prefix:r[1],unit:r[3],value:parseFloat(r[2])}:{prefix:"",unit:"",value:NaN}}function Qe(t,r){return void 0===r&&(r="-"),t.replace(/([a-z])([A-Z])/g,function(e,n,a){return""+n+r+a.toLowerCase()})}function fe(){return Date.now?Date.now():(new Date).getTime()}function jt(t,r,e){void 0===e&&(e=-1);for(var n=t.length,a=0;a<n;++a)if(r(t[a],a,t))return a;return e}function ur(t,r,e){var n=jt(t,r);return n>-1?t[n]:e}var $i=function(){var t=fe(),r=Zi&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return r?r.bind(window):function(e){var n=fe();return window.setTimeout(function(){e(n-t)},1e3/60)}}(),fl=function(){var t=Zi&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(r){clearTimeout(r)}}();function xr(t){if(Object.keys)return Object.keys(t);var r=[];for(var e in r)r.push(e);return r}function ct(t,r){var e=Ir(t),n=e.value,a=e.unit;if(kt(r)){var i=r[a];if(i){if(qi(i))return i(n);if(ue[a])return ue[a](n,i)}}else if("%"===a)return n*r/100;return ue[a]?ue[a](n):n}function tn(t,r,e){return Math.max(r,Math.min(t,e))}function Ki(t,r,e,n){return void 0===n&&(n=t[0]/t[1]),[[J(r[0],bt),J(r[0]/n,bt)],[J(r[1]*n,bt),J(r[1],bt)]].filter(function(a){return a.every(function(i,o){var s=r[o],u=J(s,bt);return e?i<=s||i<=u:i>=s||i>=u})})[0]||t}function rn(t){for(var r=t.length,e=0,n=r-1;n>=0;--n)e+=t[n];return r?e/r:0}function ht(t,r){var a=Math.atan2(r[1]-t[1],r[0]-t[0]);return a>=0?a:a+2*Math.PI}function en(t){var r=function(t){return[0,1].map(function(r){return rn(t.map(function(e){return e[r]}))})}(t),e=ht(r,t[0]),n=ht(r,t[1]);return e<n&&n-e<Math.PI||e>n&&n-e<-Math.PI?1:-1}function Ft(t,r){return Math.sqrt(Math.pow((r?r[0]:0)-t[0],2)+Math.pow((r?r[1]:0)-t[1],2))}function J(t,r){if(!r)return t;var e=1/r;return Math.round(t/r)/e}function ce(t,r){return t.forEach(function(e,n){t[n]=J(t[n],r)}),t}function Ct(t,r){return t.classList?t.classList.contains(r):!!t.className.match(new RegExp("(\\s|^)"+r+"(\\s|$)"))}function Nt(t,r,e,n){t.addEventListener(r,e,n)}function Pt(t,r,e,n){t.removeEventListener(r,e,n)}var nn=function(t,r){return(nn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])})(t,r)};function lr(t,r){function e(){this.constructor=t}nn(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}var Kt=function(){return(Kt=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r}).apply(this,arguments)};function to(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]])}return e}function an(t,r){if(t===r)return!1;for(var e in t)if(!(e in r))return!0;for(var e in r)if(t[e]!==r[e])return!0;return!1}function on(t,r){var e=Object.keys(t),n=Object.keys(r),a=se(e,n,function(u){return u}),i={},o={},s={};return a.added.forEach(function(u){var l=n[u];i[l]=r[l]}),a.removed.forEach(function(u){var l=e[u];o[l]=t[l]}),a.maintained.forEach(function(u){var p=e[u[0]];t[p]!==r[p]&&(s[p]=[t[p],r[p]])}),{added:i,removed:o,changed:s}}function ro(t){t.forEach(function(r){r()})}function eo(t){var r=0;return t.map(function(e){return null==e?"$compat"+ ++r:""+e})}function no(t,r,e,n){return At(t)||Je(t)?new El("text_"+t,r,e,n,null,{}):new("string"==typeof t.type?Ml:t.type.prototype.render?Dl:yl)(t.type,r,e,n,t.ref,t.props)}function ao(t){var r=[];return t.forEach(function(e){r=r.concat(Ut(e)?ao(e):e)}),r}function io(t){var r=t.className,e=to(t,["className"]);return null!=r&&(e.class=r),delete e.style,delete e.children,e}function sn(t,r){if(!r)return t;for(var e in r)le(t[e])&&(t[e]=r[e]);return t}function Gt(t,r){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var a=r||{},i=a.key,o=a.ref,s=to(a,["key","ref"]);return{type:t,key:i,ref:o,props:Kt(Kt({},s),{children:ao(e).filter(function(u){return null!=u&&!1!==u})})}}var kr=function(){function t(e,n,a,i,o,s){void 0===s&&(s={}),this.type=e,this.key=n,this.index=a,this.container=i,this.ref=o,this.props=s,this._providers=[]}var r=t.prototype;return r._should=function(e,n){return!0},r._update=function(e,n,a,i){if(this.base&&!At(n)&&!i&&!this._should(n.props,a))return!1;this.original=n,this._setState(a);var o=this.props;return At(n)||(this.props=n.props,this.ref=n.ref),this._render(e,this.base?o:{},a),!0},r._mounted=function(){var e=this.ref;e&&e(this.base)},r._setState=function(e){},r._updated=function(){var e=this.ref;e&&e(this.base)},r._destroy=function(){var e=this.ref;e&&e(null)},t}();function oo(t){var r={},e={};for(var n in t)0===n.indexOf("on")?e[n.replace("on","").toLowerCase()]=t[n]:r[n]=t[n];return{attributes:r,events:e}}var El=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}lr(r,t);var e=r.prototype;return e._render=function(n){var a=this,i=!this.base;return i&&(this.base=document.createTextNode(this.type.replace("text_",""))),n.push(function(){i?a._mounted():a._updated()}),!0},e._unmount=function(){this.base.parentNode.removeChild(this.base)},r}(kr),Ml=function(t){function r(){var n=null!==t&&t.apply(this,arguments)||this;return n.events={},n._isSVG=!1,n}lr(r,t);var e=r.prototype;return e.addEventListener=function(n,a){var i=this.events;i[n]=function(o){o.nativeEvent=o,a(o)},this.base.addEventListener(n,i[n])},e.removeEventListener=function(n){var a=this.events;this.base.removeEventListener(n,a[n]),delete a[n]},e._should=function(n){return an(this.props,n)},e._render=function(n,a){var i=this,o=!this.base;if(o){var s=this._hasSVG();this._isSVG=s;var u=this.props.portalContainer;if(!u){var l=this.type;u=s?document.createElementNS("http://www.w3.org/2000/svg",l):document.createElement(l)}this.base=u}Nr(this,this._providers,this.props.children,n,null);var p=this.base,c=oo(a),f=c.attributes,d=c.events,v=oo(this.props),h=v.attributes,m=v.events;return function(t,r,e){var n=on(t,r),a=n.added,i=n.removed,o=n.changed;for(var s in a)e.setAttribute(s,a[s]);for(var s in o)e.setAttribute(s,o[s][1]);for(var s in i)e.removeAttribute(s)}(io(f),io(h),p),function(t,r,e){var n=on(t,r),a=n.added,i=n.removed,o=n.changed;for(var s in i)e.removeEventListener(s);for(var s in a)e.addEventListener(s,a[s]);for(var s in o)e.removeEventListener(s),e.addEventListener(s,o[s][1]);for(var s in i)e.removeEventListener(s)}(d,m,this),function(t,r,e){var n=e.style,a=on(t,r),i=a.added,o=a.removed,s=a.changed;for(var u in i){var l=Qe(u,"-");n.setProperty?n.setProperty(l,i[u]):n[l]=i[u]}for(var u in s)l=Qe(u,"-"),n.setProperty?n.setProperty(l,s[u][1]):n[l]=s[u][1];for(var u in o)l=Qe(u,"-"),n.removeProperty?n.removeProperty(l):n[l]=""}(a.style||{},this.props.style||{},p),n.push(function(){o?i._mounted():i._updated()}),!0},e._unmount=function(){var n=this.events,a=this.base;for(var i in n)a.removeEventListener(i,n[i]);this._providers.forEach(function(o){o._unmount()}),this.events={},this.props.portalContainer||a.parentNode.removeChild(a)},e._hasSVG=function(){if(this._isSVG||"svg"===this.type)return!0;var n=un(this.container);return n&&"ownerSVGElement"in n},r}(kr);function un(t){if(!t)return null;var r=t.base;return r instanceof Node?r:un(t.container)}function Fr(t){if(!t)return null;if(t instanceof Node)return t;var r=t.$_provider._providers;return r.length?Fr(r[0].base):null}var yl=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}lr(r,t);var e=r.prototype;return e._render=function(n){var a=this.type(this.props);return Nr(this,this._providers,a?[a]:[],n),!0},e._unmount=function(){this._providers.forEach(function(n){n._unmount()})},r}(kr),so=function(t){function r(n){var a=t.call(this,"container","container",0,null)||this;return a.base=n,a}lr(r,t);var e=r.prototype;return e._render=function(){return!0},e._unmount=function(){},r}(kr),Dl=function(t){function r(n,a,i,o,s,u){return void 0===u&&(u={}),t.call(this,n,a,i,o,s,sn(u,n.defaultProps))||this}lr(r,t);var e=r.prototype;return e._should=function(n,a){return this.base.shouldComponentUpdate(sn(n,this.type.defaultProps),a||this.base.state)},e._render=function(n,a){var i=this;this.props=sn(this.props,this.type.defaultProps);var o=!this.base;o?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props;var s=this.base,u=s.state,l=s.render();l&&l.props&&!l.props.children.length&&(l.props.children=this.props.children),Nr(this,this._providers,l?[l]:[],n),n.push(function(){o?(i._mounted(),s.componentDidMount()):(i._updated(),s.componentDidUpdate(a,u))})},e._setState=function(n){var a=this.base;!a||!n||(a.state=n)},e._unmount=function(){this._providers.forEach(function(n){n._unmount()}),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},r}(kr),ln=function(){function t(e){void 0===e&&(e={}),this.props=e,this.state={},this.$_timer=0,this.$_state={}}var r=t.prototype;return r.shouldComponentUpdate=function(e,n){return!0},r.render=function(){return null},r.setState=function(e,n,a){var i=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=Kt(Kt({},this.$_state),e),a?this.$_setState(n,a):this.$_timer=setTimeout(function(){i.$_timer=0,i.$_setState(n,a)})},r.forceUpdate=function(e){this.setState({},e,!0)},r.componentDidMount=function(){},r.componentDidUpdate=function(e,n){},r.componentWillUnmount=function(){},r.$_setState=function(e,n){var a=[],i=this.$_provider;Nr(i.container,[i],[i.original],a,Kt(Kt({},this.state),this.$_state),n)&&(e&&a.push(e),ro(a))},t}(),fn=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return lr(r,t),r.prototype.shouldComponentUpdate=function(n,a){return an(this.props,n)||an(this.state,a)},r}(ln),wl=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}lr(r,t);var e=r.prototype;return e.componentDidMount=function(){var n=this.props,a=n.element,i=n.container;this._portalProvider=new so(i),pe(a,i,this._portalProvider)},e.componentDidUpdate=function(){var n=this.props;pe(n.element,n.container,this._portalProvider)},e.componentWillUnmount=function(){pe(null,this.props.container,this._portalProvider),this._portalProvider=null},r}(fn);function Nr(t,r,e,n,a,i){var o=function(t,r,e){var n=e.map(function(u){return At(u)?null:u.key}),o=se(eo(r.map(function(u){return u.key})),eo(n),function(u){return u});o.removed.forEach(function(u){r.splice(u,1)[0]._unmount()}),o.ordered.forEach(function(u){var p=u[1],c=r.splice(u[0],1)[0];r.splice(p,0,c);var f=Fr(c.base),d=Fr(r[p+1]&&r[p+1].base);f&&f.parentNode.insertBefore(f,d)}),o.added.forEach(function(u){r.splice(u,0,no(e[u],n[u],u,t))});var s=o.maintained.filter(function(u){var p=u[1],c=e[p],f=r[p];return(At(c)?"text_"+c:c.type)!==f.type?(f._unmount(),r.splice(p,1,no(c,n[p],p,t)),!0):(f.index=p,!1)});return function(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;var n=Array(t),a=0;for(r=0;r<e;r++)for(var i=arguments[r],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}(o.added,s.map(function(u){return u[1]}))}(t,r,e),s=r.filter(function(l,p){return l._update(n,e[p],a,i)}),u=un(t);return u&&o.reverse().forEach(function(l){var p=r[l],c=Fr(p.base);if(c&&u!==c&&!c.parentNode){var f=function(t,r){for(var e=t._providers,n=e.length,a=r.index+1;a<n;++a){var i=Fr(e[a].base);if(i)return i}return null}(t,p);u.insertBefore(c,f)}}),s.length>0}function pe(t,r,e){void 0===e&&(e=r.__REACT_COMPAT__);var n=!!e;return e||(e=new so(r)),function(t,r,e){var n=[];Nr(t,t._providers,r,n,void 0),ro(n)}(e,t?[t]:[]),n||(r.__REACT_COMPAT__=e),e}function uo(t,r,e){var n=r.__REACT_COMPAT__;t&&!n&&(r.innerHTML=""),pe(t,r,n),e&&e()}function cn(t,r){for(var e=t.length,n=0;n<e;++n)if(r(t[n],n))return!0;return!1}function lo(t,r){for(var e=t.length,n=0;n<e;++n)if(r(t[n],n))return t[n];return null}function fo(t){var r=t;if(void 0===r){if("undefined"==typeof navigator||!navigator)return"";r=navigator.userAgent||""}return r.toLowerCase()}function pn(t,r){try{return new RegExp(t,"g").exec(r)}catch(e){return null}}function dn(t){return t.replace(/_/g,".")}function Lr(t,r){var e=null,n="-1";return cn(t,function(a){var i=pn("("+a.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",r);return!(!i||a.brand||(e=a,n=i[3]||"-1",a.versionAlias?n=a.versionAlias:a.versionTest&&(n=function(t,r){var e=pn("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",r);return e?e[3]:""}(a.versionTest.toLowerCase(),r)||n),n=dn(n),0))}),{preset:e,version:n}}function Wr(t,r){var e={brand:"",version:"-1"};return cn(t,function(n){var a=po(r,n);return!!a&&(e.brand=n.id,e.version=n.versionAlias||a.version,"-1"!==e.version)}),e}function po(t,r){return lo(t,function(e){return pn(""+r.test,e.brand.toLowerCase())})}var vn=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],vo=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],hn=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],ho=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],go=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function mo(t){return!!Lr(ho,t).preset}const Bl=function(t){return void 0===t&&function(){if("undefined"==typeof navigator||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,r=t.brands||t.uaList;return!(!r||!r.length)}()?function(t){var r=navigator.userAgentData,e=(r.uaList||r.brands).slice(),n=t&&t.fullVersionList,a=r.mobile||!1,i=e[0],o=(t&&t.platform||r.platform||navigator.platform).toLowerCase(),s={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Wr(ho,e).brand||mo(fo())},u={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&cn(hn,function(v){return po(e,v)});var l=Wr(vo,e);if(s.chromium=!!l.brand,s.chromiumVersion=l.version,!s.chromium){var p=Wr(hn,e);s.webkit=!!p.brand,s.webkitVersion=p.version}var c=lo(go,function(v){return new RegExp(""+v.test,"g").exec(o)});if(u.name=c?c.id:"",t&&(u.version=t.platformVersion),n&&n.length){var f=Wr(vn,n);s.name=f.brand||s.name,s.version=f.version||s.version}else{var d=Wr(vn,e);s.name=d.brand||s.name,s.version=d.brand&&t?t.uaFullVersion:d.version}return s.webkit&&(u.name=a?"ios":"mac"),"ios"===u.name&&s.webview&&(s.version="-1"),u.version=dn(u.version),s.version=dn(s.version),u.majorVersion=parseInt(u.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:u,isMobile:a,isHints:!0}}():function(t){var r=fo(t),e=!!/mobi/g.exec(r),n={name:"unknown",version:"-1",majorVersion:-1,webview:mo(r),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},a={name:"unknown",version:"-1",majorVersion:-1},i=Lr(vn,r),o=i.preset,s=i.version,u=Lr(go,r),l=u.preset,p=u.version,c=Lr(vo,r);if(n.chromium=!!c.preset,n.chromiumVersion=c.version,!n.chromium){var f=Lr(hn,r);n.webkit=!!f.preset,n.webkitVersion=f.version}return l&&(a.name=l.id,a.version=p,a.majorVersion=parseInt(p,10)),o&&(n.name=o.id,n.version=s,n.webview&&"ios"===a.name&&"safari"!==n.name&&(n.webview=!1)),n.majorVersion=parseInt(n.version,10),{browser:n,os:a,isMobile:e,isHints:!1}}(t)};function Il(t,r,e,n,a,i){for(var o=0;o<a;++o){var s=e+o*a,u=n+o*a;t[s]+=t[u]*i,r[s]+=r[u]*i}}function kl(t,r,e,n,a){for(var i=0;i<a;++i){var o=e+i*a,s=n+i*a,u=t[o],l=r[o];t[o]=t[s],t[s]=u,r[o]=r[s],r[s]=l}}function Fl(t,r,e,n,a){for(var i=0;i<n;++i){var o=e+i*n;t[o]/=a,r[o]/=a}}function xo(t,r,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=t.slice(),a=0;a<e;++a)n[a*e+r-1]=0,n[(r-1)*e+a]=0;return n[(r-1)*(e+1)]=1,n}function Xt(t,r){void 0===r&&(r=Math.sqrt(t.length));for(var e=t.slice(),n=pt(r),a=0;a<r;++a){var i=r*a+a;if(!J(e[i],bt))for(var o=a+1;o<r;++o)if(e[r*a+o]){kl(e,n,a,o,r);break}if(!J(e[i],bt))return[];for(Fl(e,n,a,r,e[i]),o=0;o<r;++o){var s=o,l=e[o+a*r];!J(l,bt)||a===o||Il(e,n,s,a,r,-l)}}return n}function So(t,r){void 0===r&&(r=Math.sqrt(t.length));for(var e=[],n=t[r*r-1],a=0;a<r-1;++a)e[a]=t[r*(r-1)+a]/n;return e[r-1]=0,e}function fr(t,r){for(var e=t.slice(),n=t.length;n<r-1;++n)e[n]=0;return e[r-1]=1,e}function Vt(t,r,e){if(void 0===r&&(r=Math.sqrt(t.length)),r===e)return t;for(var n=pt(e),a=Math.min(r,e),i=0;i<a-1;++i){for(var o=0;o<a-1;++o)n[i*e+o]=t[i*r+o];n[(i+1)*e-1]=t[(i+1)*r-1],n[(e-1)*e+i]=t[(r-1)*r+i]}return n[e*e-1]=t[r*r-1],n}function mn(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];var n=pt(t);return r.forEach(function(a){n=st(n,a,t)}),n}function st(t,r,e){void 0===e&&(e=Math.sqrt(t.length));var n=[],a=t.length/e,i=r.length/a;if(!a)return r;if(!i)return t;for(var o=0;o<e;++o)for(var s=0;s<i;++s){n[s*e+o]=0;for(var u=0;u<a;++u)n[s*e+o]+=t[u*e+o]*r[s*a+u]}return n}function K(t,r){for(var e=Math.min(t.length,r.length),n=t.slice(),a=0;a<e;++a)n[a]=n[a]+r[a];return n}function j(t,r){for(var e=Math.min(t.length,r.length),n=t.slice(),a=0;a<e;++a)n[a]=n[a]-r[a];return n}function Wl(t,r){return void 0===r&&(r=6===t.length),r?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function Co(t,r){return void 0===r&&(r=9===t.length),r?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function Mt(t,r,e){void 0===e&&(e=r.length);var n=st(t,r,e),a=n[e-1];return n.map(function(i){return i/a})}function Yl(t,r){return st(t,[1,0,0,0,0,Math.cos(r),Math.sin(r),0,0,-Math.sin(r),Math.cos(r),0,0,0,0,1],4)}function Hl(t,r){return st(t,[Math.cos(r),0,-Math.sin(r),0,0,1,0,0,Math.sin(r),0,Math.cos(r),0,0,0,0,1],4)}function Xl(t,r){return st(t,Sr(r,4))}function de(t,r){var e=r[0],a=r[1],o=r[2];return st(t,[void 0===e?1:e,0,0,0,0,void 0===a?1:a,0,0,0,0,void 0===o?1:o,0,0,0,0,1],4)}function Qt(t,r){return Mt(Sr(r,3),fr(t,3))}function bn(t,r){var e=r[0],a=r[1],o=r[2];return st(t,[1,0,0,0,0,1,0,0,0,0,1,0,void 0===e?0:e,void 0===a?0:a,void 0===o?0:o,1],4)}function _o(t,r){return st(t,r,4)}function Sr(t,r){var e=Math.cos(t),n=Math.sin(t),a=pt(r);return a[0]=e,a[1]=n,a[r]=-n,a[r+1]=e,a}function pt(t){for(var r=t*t,e=[],n=0;n<r;++n)e[n]=n%(t+1)?0:1;return e}function Eo(t,r){for(var e=pt(r),n=Math.min(t.length,r-1),a=0;a<n;++a)e[(r+1)*a]=t[a];return e}function Yr(t,r){for(var e=pt(r),n=Math.min(t.length,r-1),a=0;a<n;++a)e[r*(r-1)+a]=t[a];return e}function xn(t,r,e,n,a,i,o,s){var u=t[0],l=t[1],p=r[0],c=r[1],f=e[0],d=e[1],v=n[0],h=n[1],m=a[0],b=a[1],x=i[0],S=i[1],C=o[0],M=o[1],E=s[0],_=s[1],y=Xt([u,0,p,0,f,0,v,0,l,0,c,0,d,0,h,0,1,0,1,0,1,0,1,0,0,u,0,p,0,f,0,v,0,l,0,c,0,d,0,h,0,1,0,1,0,1,0,1,-m*u,-b*u,-x*p,-S*p,-C*f,-M*f,-E*v,-_*v,-m*l,-b*l,-x*c,-S*c,-C*d,-M*d,-E*h,-_*h],8);if(!y.length)return[];var D=st(y,[m,b,x,S,C,M,E,_],8);return D[8]=1,Vt(function(t,r){void 0===r&&(r=Math.sqrt(t.length));for(var e=[],n=0;n<r;++n)for(var a=0;a<r;++a)e[a*r+n]=t[r*n+a];return e}(D),3,4)}function Hr(t){return Cr(cr(t))}function Cr(t){var r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach(function(e){var n=e.matrixFunction;!n||(r=n(r,e.functionValue))}),r}function cr(t){return(Ut(t)?t:Jt(t)).map(function(e){var n=Ke(e),a=n.prefix,i=n.value,o=null,s=a,u="";if("translate"===a||"translateX"===a||"translate3d"===a){var l=$t(i).map(function(D){return parseFloat(D)}),c=l[1],d=l[2];o=bn,u=[l[0],void 0===c?0:c,void 0===d?0:d]}else if("translateY"===a)o=bn,u=[0,parseFloat(i),0];else if("translateZ"===a)o=bn,u=[0,0,parseFloat(i)];else if("scale"===a||"scale3d"===a){var h=$t(i).map(function(D){return parseFloat(D)}),b=h[1],S=h[2];o=de,u=[m=h[0],void 0===b?m:b,void 0===S?1:S]}else if("scaleX"===a){var m;o=de,u=[m=parseFloat(i),1,1]}else if("scaleY"===a)o=de,u=[1,parseFloat(i),1];else if("scaleZ"===a)o=de,u=[1,1,parseFloat(i)];else if("rotate"===a||"rotateZ"===a||"rotateX"===a||"rotateY"===a){var M=Ir(i),_=M.value;"rotate"===a||"rotateZ"===a?(s="rotateZ",o=Xl):"rotateX"===a?o=Yl:"rotateY"===a&&(o=Hl),u="rad"===M.unit?_:_*Math.PI/180}else if("matrix3d"===a)o=_o,u=$t(i).map(function(D){return parseFloat(D)});else if("matrix"===a){var y=$t(i).map(function(D){return parseFloat(D)});o=_o,u=[y[0],y[1],0,0,y[2],y[3],0,0,0,0,1,0,y[4],y[5],0,1]}else s="";return{name:a,functionName:s,value:i,matrixFunction:o,functionValue:u}})}var t,Sn=function(t,r){return(Sn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])})(t,r)},yo="function"==typeof Map?void 0:(t=0,function(r){return r.__DIFF_KEY__||(r.__DIFF_KEY__=++t)});const Ul=function(t){function r(e){return void 0===e&&(e=[]),t.call(this,e,yo)||this}return function(t,r){function e(){this.constructor=t}Sn(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}(r,t),r}(tl);function yt(t){return J(t,bt)}function Do(t){return t.length<3?0:Math.abs(function(t){for(var e=0,n=t.length-1;n>=0;--n)e+=t[n];return e}(t.map(function(r,e){var n=t[e+1]||t[0];return r[0]*n[1]-n[0]*r[1]})))/2}function wo(t,r){var e=r.width,n=r.height,a=r.left,i=r.top,o=ve(t),s=o.minX,u=o.minY,c=e/(o.maxX-s),f=n/(o.maxY-u);return t.map(function(d){return[a+(d[0]-s)*c,i+(d[1]-u)*f]})}function ve(t){var r=t.map(function(n){return n[0]}),e=t.map(function(n){return n[1]});return{minX:Math.min.apply(Math,r),minY:Math.min.apply(Math,e),maxX:Math.max.apply(Math,r),maxY:Math.max.apply(Math,e)}}function Cn(t,r,e){var n=t[0],a=t[1],i=ve(r),u=[[i.minX,a],[i.maxX,a]],l=dr(u[0],u[1]),p=Mn(r),c=[];if(p.forEach(function(v){var h=dr(v[0],v[1]),m=v[0];!function(t,r){return t.every(function(e,n){return 0===yt(e-r[n])})}(l,h)?En(_n(l,h),[u,v]).forEach(function(x){v.some(function(S){return function(t,r){return!yt(t[0]-r[0])&&!yt(t[1]-r[1])}(S,x)})?c.push({pos:x,line:v,type:"point"}):0!==yt(m[1]-a)&&c.push({pos:x,line:v,type:"intersection"})}):c.push({pos:t,line:v,type:"line"})}),!e&&ur(c,function(v){return v[0]===n}))return!0;var f=0,d={};return c.forEach(function(v){var h=v.pos,m=v.type;if(!(h[0]>n))if("intersection"===m)++f;else{if("line"===m)return;if("point"===m){var x=ur(v.line,function(M){return M[1]!==a}),S=d[h[0]],C=x[1]>a?1:-1;S?S!==C&&++f:d[h[0]]=C}}}),f%2==1}function dr(t,r){var e=t[0],n=t[1],o=r[0]-e,s=r[1]-n;Math.abs(o)<bt&&(o=0),Math.abs(s)<bt&&(s=0);var u=0,l=0,p=0;return o?s?(l=1,p=-(u=-s/o)*e-n):(l=1,p=-n):s&&(u=-1,p=e),[u,l,p]}function _n(t,r){var e=t[0],n=t[1],a=t[2],i=r[0],o=r[1],s=r[2],u=0===e&&0===i,l=0===n&&0===o,p=[];if(u&&l)return[];if(u){var c=-a/n;return c!==-s/o?[]:[[-1/0,c],[1/0,c]]}if(l){var d=-a/e;return d!==-s/i?[]:[[d,-1/0],[d,1/0]]}if(0===e)p=[[m=-(o*(h=-a/n)+s)/i,h]];else if(0===i)p=[[m=-(n*(h=-s/o)+a)/e,h]];else if(0===n)p=[[m=-a/e,h=-(i*m+s)/o]];else if(0===o)p=[[m=-s/i,h=-(e*m+a)/n]];else{var m,h;p=[[m=(n*s-o*a)/(o*e-n*i),h=-(e*m+a)/n]]}return p.map(function(b){return[b[0],b[1]]})}function En(t,r){var e=r.map(function(c){return[0,1].map(function(f){return[Math.min(c[0][f],c[1][f]),Math.max(c[0][f],c[1][f])]})}),n=[];if(2===t.length){var a=t[0],i=a[0],o=a[1];if(yt(i-t[1][0])){if(!yt(o-t[1][1])){var l=Math.max.apply(Math,e.map(function(c){return c[0][0]})),p=Math.min.apply(Math,e.map(function(c){return c[0][1]}));if(yt(l-p)>0)return[];n=[[l,o],[p,o]]}}else{var s=Math.max.apply(Math,e.map(function(c){return c[1][0]})),u=Math.min.apply(Math,e.map(function(c){return c[1][1]}));if(yt(s-u)>0)return[];n=[[i,s],[i,u]]}}return n.length||(n=t.filter(function(c){var f=c[0],d=c[1];return e.every(function(v){return 0<=yt(f-v[0][0])&&0<=yt(v[0][1]-f)&&0<=yt(d-v[1][0])&&0<=yt(v[1][1]-d)})})),n.map(function(c){return[yt(c[0]),yt(c[1])]})}function Mn(t){return function(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;var n=Array(t),a=0;for(r=0;r<e;r++)for(var i=arguments[r],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}(t.slice(1),[t[0]]).map(function(r,e){return[t[e],r]})}function af(t,r){return Do(function(t,r){return function(t,r){var e=t.slice(),n=r.slice();-1===en(e)&&e.reverse(),-1===en(n)&&n.reverse();var a=Mn(e),i=Mn(n),o=a.map(function(p){return dr(p[0],p[1])}),s=i.map(function(p){return dr(p[0],p[1])}),u=[];o.forEach(function(p,c){var f=a[c],d=[];s.forEach(function(v,h){var b=En(_n(p,v),[f,i[h]]);d.push.apply(d,b.map(function(x){return{index1:c,index2:h,pos:x,type:"intersection"}}))}),d.sort(function(v,h){return Ft(f[0],v.pos)-Ft(f[0],h.pos)}),u.push.apply(u,d),Cn(f[1],n)&&u.push({index1:c,index2:-1,pos:f[1],type:"inside"})}),i.forEach(function(p,c){if(Cn(p[1],e)){var f=!1,d=jt(u,function(v){return v.index2===c?(f=!0,!1):!!f});-1===d&&(f=!1,d=jt(u,function(v){return-1===v.index1&&v.index2+1===c?(f=!0,!1):!!f})),-1===d?u.push({index1:-1,index2:c,pos:p[1],type:"inside"}):u.splice(d,0,{index1:-1,index2:c,pos:p[1],type:"inside"})}});var l={};return u.filter(function(p){var c=p.pos,f=c[0]+"x"+c[1];return!l[f]&&(l[f]=!0,!0)})}(t,r).map(function(n){return n.pos})}(t,r))}var Dn=function(){return(Dn=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r}).apply(this,arguments)};const wn=function(){function t(){this._events={}}var r=t.prototype;return r.on=function(e,n){if(kt(e))for(var a in e)this.on(a,e[a]);else this._addEvent(e,n,{});return this},r.off=function(e,n){if(e)if(kt(e))for(var a in e)this.off(a);else if(n){var i=this._events[e];if(i){var o=jt(i,function(s){return s.listener===n});o>-1&&i.splice(o,1)}}else this._events[e]=[];else this._events={};return this},r.once=function(e,n){var a=this;return n&&this._addEvent(e,n,{once:!0}),new Promise(function(i){a._addEvent(e,i,{once:!0})})},r.emit=function(e,n){var a=this;void 0===n&&(n={});var i=this._events[e];if(!e||!i)return!0;var o=!1;return n.eventType=e,n.stop=function(){o=!0},n.currentTarget=this,function(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;var n=Array(t),a=0;for(r=0;r<e;r++)for(var i=arguments[r],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}(i).forEach(function(s){s.listener(n),s.once&&a.off(e,s.listener)}),!o},r.trigger=function(e,n){return void 0===n&&(n={}),this.emit(e,n)},r._addEvent=function(e,n,a){var i=this._events;i[e]=i[e]||[],i[e].push(Dn({listener:n},a))},t}();"undefined"!=typeof document&&document;var Pn=function(t,r){return(Pn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])})(t,r)},_r=function(){return(_r=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r}).apply(this,arguments)};function Rf(t){var r=t.container;return r===document.body?[r.scrollLeft||document.documentElement.scrollLeft,r.scrollTop||document.documentElement.scrollTop]:[r.scrollLeft,r.scrollTop]}function zn(t){return t?function(t){return"string"==typeof t}(t)?document.querySelector(t):function(t){return"function"==typeof t}(t)?t():t instanceof Element?t:"current"in t?t.current:"value"in t?t.value:void 0:null}const Pf=function(t){function r(){var n=null!==t&&t.apply(this,arguments)||this;return n._startRect=null,n._startPos=[],n._prevTime=0,n._timer=0,n._prevScrollPos=[0,0],n._isWait=!1,n._flag=!1,n}!function(t,r){function e(){this.constructor=t}Pn(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}(r,t);var e=r.prototype;return e.dragStart=function(n,a){var i=zn(a.container);if(i){var o=0,s=0,u=0,l=0;if(i===document.body)u=window.innerWidth,l=window.innerHeight;else{var p=i.getBoundingClientRect();o=p.top,s=p.left,u=p.width,l=p.height}this._flag=!0,this._startPos=[n.clientX,n.clientY],this._startRect={top:o,left:s,width:u,height:l},this._prevScrollPos=this._getScrollPosition([0,0],a)}else this._flag=!1},e.drag=function(n,a){if(this._flag){var i=n.clientX,o=n.clientY,s=a.threshold,u=void 0===s?0:s,p=this._startRect,c=this._startPos,f=[0,0];return p.top>o-u?(c[1]>p.top||o<c[1])&&(f[1]=-1):p.top+p.height<o+u&&(c[1]<p.top+p.height||o>c[1])&&(f[1]=1),p.left>i-u?(c[0]>p.left||i<c[0])&&(f[0]=-1):p.left+p.width<i+u&&(c[0]<p.left+p.width||i>c[0])&&(f[0]=1),clearTimeout(this._timer),!(!f[0]&&!f[1])&&this._continueDrag(_r(_r({},a),{direction:f,inputEvent:n,isDrag:!0}))}},e.checkScroll=function(n){var a=this;if(this._isWait)return!1;var i=n.prevScrollPos,o=void 0===i?this._prevScrollPos:i,s=n.direction,u=n.throttleTime,l=void 0===u?0:u,p=n.inputEvent,c=n.isDrag,f=this._getScrollPosition(s||[0,0],n),d=f[0]-o[0],v=f[1]-o[1],h=s||[d?Math.abs(d)/d:0,v?Math.abs(v)/v:0];return this._prevScrollPos=f,!(!d&&!v||(this.trigger("move",{offsetX:h[0]?d:0,offsetY:h[1]?v:0,inputEvent:p}),l&&c&&(this._timer=window.setTimeout(function(){a._continueDrag(n)},l)),0))},e.dragEnd=function(){clearTimeout(this._timer)},e._getScrollPosition=function(n,a){var o=a.getScrollPosition;return(void 0===o?Rf:o)({container:zn(a.container),direction:n})},e._continueDrag=function(n){var a=this,i=n.container,o=n.direction,s=n.throttleTime,u=n.useScroll,l=n.isDrag,p=n.inputEvent;if(!l||!this._isWait){var c=Date.now?Date.now():(new Date).getTime(),f=Math.max(s+this._prevTime-c,0);if(f>0)return this._timer=window.setTimeout(function(){a._continueDrag(n)},f),!1;this._prevTime=c;var d=this._getScrollPosition(o,n);return this._prevScrollPos=d,l&&(this._isWait=!0),this.trigger("scroll",{container:zn(i),direction:o,inputEvent:p}),this._isWait=!1,u||this.checkScroll(_r(_r({},n),{prevScrollPos:d,direction:o,inputEvent:p}))}},r}(wn);var An=function(t,r){return(An=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])})(t,r)},xt=function(){return(xt=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r}).apply(this,arguments)};function Gn(t){return function(t,r){var a=Math.atan2(r[1]-t[1],r[0]-t[0]);return a>=0?a:a+2*Math.PI}([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function be(t){return t?t.touches?function(t){for(var r=Math.min(t.length,2),e=[],n=0;n<r;++n)e.push(Lo(t[n]));return e}(t.touches):[Lo(t)]:[]}function No(t,r,e){var n=e.length,a=jr(t,n),i=a.clientX,o=a.clientY,s=a.originalClientX,u=a.originalClientY,l=jr(r,n),p=l.clientX,c=l.clientY,f=jr(e,n);return{clientX:s,clientY:u,deltaX:i-p,deltaY:o-c,distX:i-f.clientX,distY:o-f.clientY}}function Bn(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Lo(t){return{clientX:t.clientX,clientY:t.clientY}}function jr(t,r){void 0===r&&(r=t.length);for(var e={clientX:0,clientY:0,originalClientX:0,originalClientY:0},n=0;n<r;++n){var a=t[n];e.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,e.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,e.clientX+=a.clientX,e.clientY+=a.clientY}return r?{clientX:e.clientX/r,clientY:e.clientY/r,originalClientX:e.originalClientX/r,originalClientY:e.originalClientY/r}:e}var In=function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}var r=t.prototype;return r.getAngle=function(e){return void 0===e&&(e=this.prevClients),Gn(e)},r.getRotation=function(e){return void 0===e&&(e=this.prevClients),Gn(e)-Gn(this.startClients)},r.getPosition=function(e,n){void 0===e&&(e=this.prevClients);var a=No(e||this.prevClients,this.prevClients,this.startClients),i=a.deltaX,o=a.deltaY;return this.movement+=Math.sqrt(i*i+o*o),this.prevClients=e,a},r.getPositions=function(e){void 0===e&&(e=this.prevClients);var n=this.prevClients;return this.startClients.map(function(a,i){return No([e[i]],[n[i]],[a])})},r.getMovement=function(e){var n=this.movement;if(!e)return n;var a=jr(e,this.length),i=jr(this.prevClients,this.length),o=a.clientX-i.clientX,s=a.clientY-i.clientY;return Math.sqrt(o*o+s*s)+n},r.getDistance=function(e){return void 0===e&&(e=this.prevClients),Bn(e)},r.getScale=function(e){return void 0===e&&(e=this.prevClients),Bn(e)/Bn(this.startClients)},r.move=function(e,n){this.startClients.forEach(function(a){a.clientX-=e,a.clientY-=n})},t}(),Wo=["textarea","input"];const Ff=function(t){function r(n,a){void 0===a&&(a={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.datas={},i.isDrag=!1,i.isPinch=!1,i.isMouse=!1,i.isTouch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._dragFlag=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i.onDragStart=function(f,d){if(void 0===d&&(d=!0),i.flag||!1!==f.cancelable){var v=i.options,h=v.container,m=v.pinchOutside,b=v.preventWheelClick,x=v.preventRightClick,S=v.preventDefault,C=v.checkInput,M=v.preventClickEventOnDragStart,E=v.preventClickEventOnDrag,_=v.preventClickEventByCondition,w=i.isTouch,y=!i.flag;if(i._isSecondaryButton=3===f.which||2===f.button,b&&(2===f.which||1===f.button)||x&&(3===f.which||2===f.button))return i.initDrag(),!1;if(y){var D=document.activeElement,P=f.target,O=P.tagName.toLowerCase(),T=Wo.indexOf(O)>-1,A=P.isContentEditable;if(T||A){if(C||D===P||D&&A&&D.isContentEditable&&D.contains(P))return!1}else(S||"touchstart"===f.type)&&D&&(D.isContentEditable||Wo.indexOf(D.tagName)>-1)&&D.blur();(M||E||_)&&Nt(window,"click",i._onClick,!0),i.clientStores=[new In(be(f))],i.flag=!0,i.isDrag=!1,i._dragFlag=!0,i.datas={},i.doubleFlag=fe()-i.prevTime<200,i._isMouseEvent=function(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}(f),!i._isMouseEvent&&i._preventMouseEvent&&(i._preventMouseEvent=!1),!1===(i._preventMouseEvent||i.emit("dragStart",xt(xt({datas:i.datas,inputEvent:f,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:d,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){f.preventDefault()},preventDrag:function(){i._dragFlag=!1}})))&&i.initDrag(),i._isMouseEvent&&i.flag&&S&&f.preventDefault()}if(!i.flag)return!1;var k=0;if(y&&w&&m&&(k=setTimeout(function(){Nt(h,"touchstart",i.onDragStart,{passive:!1})})),!y&&w&&m&&Pt(h,"touchstart",i.onDragStart),i.flag&&function(t){return t.touches&&t.touches.length>=2}(f)){if(clearTimeout(k),y&&f.touches.length!==f.changedTouches.length)return;i.pinchFlag||i.onPinchStart(f)}}},i.onDrag=function(f,d){if(i.flag){!i._isMouseEvent&&i.options.preventDefault&&f.preventDefault();var h=be(f),m=i.moveClients(h,f,!1);if(i._dragFlag){if((i.pinchFlag||m.deltaX||m.deltaY)&&!1===(i._preventMouseEvent||i.emit("drag",xt(xt({},m),{isScroll:!!d,inputEvent:f}))))return void i.stop();i.pinchFlag&&i.onPinch(f,h)}i.getCurrentStore().getPosition(h,!0)}},i.onDragEnd=function(f){if(i.flag){var d=i.options,v=d.pinchOutside,h=d.container,m=d.preventClickEventOnDrag,b=d.preventClickEventOnDragStart,x=d.preventClickEventByCondition,S=i.isDrag;(m||b||x)&&requestAnimationFrame(function(){i._allowClickEvent()}),!x&&!b&&m&&!S&&i._allowClickEvent(),i.isTouch&&v&&Pt(h,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(f);var C=(null==f?void 0:f.touches)?be(f):[];0!==C.length&&i.options.keepDragging?i._addStore(new In(C)):i.flag=!1;var E=i._getPosition(),_=fe(),w=!S&&i.doubleFlag;i.prevTime=S||w?0:_,i.flag||(i._preventMouseEvent||i.emit("dragEnd",xt({datas:i.datas,isDouble:w,isDrag:S,isClick:!S,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:f},E)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,requestAnimationFrame(function(){requestAnimationFrame(function(){i._preventMouseEvent=!1})})))}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){Pt(window,"click",i._onClick,!0)},i._onClick=function(f){i._preventMouseEvent=!1;var d=i.options.preventClickEventByCondition;(null==d?void 0:d(f))||(f.stopPropagation(),f.preventDefault())},i._onContextMenu=function(f){i.options.preventRightClick?i.onDragEnd(f):f.preventDefault()};var o=[].concat(n);i.options=xt({checkInput:!1,container:o.length>1?window:o[0],preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},a);var s=i.options,u=s.container,l=s.events,p=s.checkWindowBlur;if(i.isTouch=l.indexOf("touch")>-1,i.isMouse=l.indexOf("mouse")>-1,i.targets=o,i.isMouse&&(o.forEach(function(f){Nt(f,"mousedown",i.onDragStart)}),Nt(u,"mousemove",i.onDrag),Nt(u,"mouseup",i.onDragEnd),Nt(u,"contextmenu",i._onContextMenu)),p&&Nt(window,"blur",i.onBlur),i.isTouch){var c={passive:!1};o.forEach(function(f){Nt(f,"touchstart",i.onDragStart,c)}),Nt(u,"touchmove",i.onDrag,c),Nt(u,"touchend",i.onDragEnd,c),Nt(u,"touchcancel",i.onDragEnd,c)}return i}!function(t,r){function e(){this.constructor=t}An(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}(r,t);var e=r.prototype;return e.stop=function(){this.isDrag=!1,this.flag=!1,this.clientStores=[],this.datas={}},e.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(a,i){return a+i.movement},0)},e.isDragging=function(){return this.isDrag},e.isFlag=function(){return this.flag},e.isPinchFlag=function(){return this.pinchFlag},e.isDoubleFlag=function(){return this.doubleFlag},e.isPinching=function(){return this.isPinch},e.scrollBy=function(n,a,i,o){void 0===o&&(o=!0),this.flag&&(this.clientStores[0].move(n,a),o&&this.onDrag(i,!0))},e.move=function(n,a){var i=n[0],o=n[1],s=this.getCurrentStore();return this.moveClients(s.prevClients.map(function(l){var p=l.clientX,c=l.clientY;return{clientX:p+i,clientY:c+o,originalClientX:p,originalClientY:c}}),a,!0)},e.triggerDragStart=function(n){this.onDragStart(n,!1)},e.setEventDatas=function(n){var a=this.datas;for(var i in n)a[i]=n[i];return this},e.getCurrentEvent=function(n){return xt(xt({datas:this.datas},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.getEventDatas=function(){return this.datas},e.unset=function(){var n=this,a=this.targets,i=this.options.container;this.off(),Pt(window,"blur",this.onBlur),this.isMouse&&(a.forEach(function(o){Pt(o,"mousedown",n.onDragStart)}),Pt(i,"mousemove",this.onDrag),Pt(i,"mouseup",this.onDragEnd),Pt(i,"contextmenu",this._onContextMenu)),this.isTouch&&(a.forEach(function(o){Pt(o,"touchstart",n.onDragStart)}),Pt(i,"touchstart",this.onDragStart),Pt(i,"touchmove",this.onDrag),Pt(i,"touchend",this.onDragEnd),Pt(i,"touchcancel",this.onDragEnd))},e.onPinchStart=function(n){var a=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>a)){var i=new In(be(n));this.pinchFlag=!0,this._addStore(i),!1===this.emit("pinchStart",xt(xt({datas:this.datas,angle:i.getAngle(),touches:this.getCurrentStore().getPositions()},i.getPosition()),{inputEvent:n}))&&(this.pinchFlag=!1)}},e.onPinch=function(n,a){if(this.flag&&this.pinchFlag&&!(a.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",xt(xt({datas:this.datas,movement:this.getMovement(a),angle:i.getAngle(a),rotation:i.getRotation(a),touches:i.getPositions(a),scale:i.getScale(a),distance:i.getDistance(a)},i.getPosition(a)),{inputEvent:n}))}},e.onPinchEnd=function(n){if(this.pinchFlag){var a=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",xt(xt({datas:this.datas,isPinch:a,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.initDrag=function(){this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._allowClickEvent()},e.getCurrentStore=function(){return this.clientStores[0]},e.moveClients=function(n,a,i){var o=this._getPosition(n,i);return(o.deltaX||o.deltaY)&&(this.isDrag=!0),xt(xt({datas:this.datas},o),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:a})},e._addStore=function(n){this.clientStores.splice(0,0,n)},e._getPosition=function(n,a){var o=this.getCurrentStore().getPosition(n,a),s=this.clientStores.slice(1).reduce(function(p,c){var f=c.getPosition();return p.distX+=f.distX,p.distY+=f.distY,p},o),u=s.distX,l=s.distY;return xt(xt({},o),{distX:u,distY:l})},r}(wn);const Zf=function(t){var n,r="rCS"+function(t){return function(t){for(var r=5381,e=t.length;e;)r=33*r^t.charCodeAt(--e);return r>>>0}(t).toString(36)}(t),e=0;return{className:r,inject:function(a,i){void 0===i&&(i={});var u,o=function(t){if(t&&t.getRootNode){var r=t.getRootNode();if(11===r.nodeType)return r}}(a),s=0===e;return(o||s)&&(u=function(t,r,e,n){var a=document.createElement("style");return a.setAttribute("type","text/css"),a.setAttribute("data-styled-id",t),e.nonce&&a.setAttribute("nonce",e.nonce),a.innerHTML=function(t,r,e){return e.original?r:r.replace(/([^};{\s}][^};{]*|^\s*){/gm,function(n,a){var i=a.trim();return(i?$t(i):[""]).map(function(o){var s=o.trim();return 0===s.indexOf("@")?s:s.indexOf(":global")>-1?s.replace(/\:global/g,""):s.indexOf(":host")>-1?""+s.replace(/\:host/g,"."+t):s?"."+t+" "+s:"."+t}).join(", ")+" {"})}(t,r,e),(n||document.head||document.body).appendChild(a),a}(r,t,i,o)),s&&(n=u),o||++e,{destroy:function(){o?(a.removeChild(u),u=null):(e>0&&--e,0===e&&n&&(n.parentNode.removeChild(n),n=null))}}}}};var kn=function(t,r){return(kn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])})(t,r)};function Yo(t,r){function e(){this.constructor=t}kn(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}var Fn=function(){return(Fn=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r}).apply(this,arguments)},qf=function(t){function r(){var n=null!==t&&t.apply(this,arguments)||this;return n.injectResult=null,n.tag="div",n}Yo(r,t);var e=r.prototype;return e.render=function(){var n=this.props,a=n.className,i=void 0===a?"":a,s=n.portalContainer,u=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]])}return e}(n,["className","cspNonce","portalContainer"]),l=this.injector.className,p=this.tag,c={};return"simple-1.1.0".indexOf("simple")>-1&&s&&(c={portalContainer:s}),Gt(p,Fn({ref:Ht(this,"element"),"data-styled-id":l,className:i+" "+l},c,u))},e.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},e.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},e.getElement=function(){return this.element},r}(ln);const Ho=function(t,r){var e=Zf(r);return function(n){function a(){var i=null!==n&&n.apply(this,arguments)||this;return i.injector=e,i.tag=t,i}return Yo(a,n),a}(qf)};var Nn=function(t,r){return(Nn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])})(t,r)};function Er(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=t}Nn(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}var R=function(){return(R=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r}).apply(this,arguments)};function X(t,r,e){if(e||2===arguments.length)for(var i,n=0,a=r.length;n<a;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return t.concat(i||Array.prototype.slice.call(r))}function qr(t,r){var e;return R({events:{},props:(e={},e[t]=Boolean,e),name:t},r)}var Ln=Bl(),Xo=Ln.browser.webkit,Vo=Xo&&function(){var t="undefined"==typeof window?{userAgent:""}:window.navigator,r=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return!!r&&parseFloat(r[1])<605}(),tc=parseInt(Ln.browser.webkitVersion,10)>=612||parseInt(Ln.browser.version,10)>=15,Wn="moveable-",rc="\n{\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --moveable-color: #4af;\n    --zoom: 1;\n    --zoompx: 1px;\n    will-change: transform;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n    position: absolute;\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n    background: #4af;\n    background: var(--moveable-color);\n\tmargin-top: -7px;\n    margin-left: -7px;\n    border: 2px solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\twidth: 1px;\n    height: 1px;\n    background: #4af;\n    background: var(--moveable-color);\n\ttransform-origin: 0px 50%;\n}\n.line.edge {\n    z-index: 1;\n    background: transparent;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top-color: #4af;\n    border-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left-color: #4af;\n    border-left-color: var(--moveable-color);\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n}\n.line.horizontal.bold {\n    height: 2px;\n}\n\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n\tpointer-events: none;\n}\n".concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return'\n.direction[data-rotation="'.concat(t,'"] {\n\t').concat(function(t){var r=function(t,r){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32,'px" height="').concat(32,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(r,'deg);transform-origin: 16px 16px"></path></svg>')}(0,t),e=45*Math.round(t/45)%180,n="ns-resize";return 135===e?n="nwse-resize":45===e?n="nesw-resize":90===e&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(r,"') 16 16, ").concat(n,";")}(t),"\n}\n")}).join("\n"),"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n").concat(Vo?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"","\n"),ec=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Dt=1e-7,Ur=Math.pow(10,10),Zo=-Ur,ac=["n","w","s","e"],Yn=["n","w","s","e","nw","ne","sw","se"],ic={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Hn={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},jo={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},qo=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget"];function Jr(t,r,e,n,a,i){void 0===i&&(i="draggable");var o=r.gestos[i].move(e,t.inputEvent),s=o.originalDatas||o.datas,u=s[i]||(s[i]={});return R(R({},a?hs(r,o):o),{isPinch:!!n,parentEvent:!0,datas:u,originalDatas:t.originalDatas})}var Mr=function(){function t(e){var n;void 0===e&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=((n={})[e]={},n)}var r=t.prototype;return r.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var a=n.originalDatas;return this.datas=a,a[this.ableName]||(a[this.ableName]={}),R(R({},this.move(e,n.inputEvent)),{type:"dragstart"})},r.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},r.move=function(e,n){var a,i;return this.isFlag?(a=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0)):(this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],a=e[0],i=e[1],this.isFlag=!0),this.prevX=a,this.prevY=i,{type:"drag",clientX:a,clientY:i,inputEvent:n,isDrag:this.isDrag,distX:a-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function Uo(t,r){var a=r.datas,i=t.state,o=i.moveableClientRect,l=i.pos1,d=j(Or(i.rootMatrix,[r.clientX-o.left,r.clientY-o.top],i.is3d?4:3),l),m=Zt({datas:a,distX:d[0],distY:d[1]});return[m[0],m[1]]}function vr(t,r){var e=r.datas,n=t.state,a=n.allMatrix,i=n.beforeMatrix,o=n.is3d,s=n.left,u=n.top,l=n.origin,p=n.offsetMatrix,c=n.targetMatrix,f=n.transformOrigin,d=o?4:3;e.is3d=o,e.matrix=a,e.targetMatrix=c,e.beforeMatrix=i,e.offsetMatrix=p,e.transformOrigin=f,e.inverseMatrix=Xt(a,d),e.inverseBeforeMatrix=Xt(i,d),e.absoluteOrigin=fr(K([s,u],l),d),e.startDragBeforeDist=Mt(e.inverseBeforeMatrix,e.absoluteOrigin,d),e.startDragDist=Mt(e.inverseMatrix,e.absoluteOrigin,d)}function Se(t,r){var e=t.datas,n=t.originalDatas.beforeRenderable,a=e.transformIndex,i=n.nextTransforms,o=i.length,s=n.nextTransformAppendedIndexes,u=0;-1===a?e.transformIndex=u=i.length:u=ur(s,function(f){return f.index===a&&f.functionName===r})?a:a+s.filter(function(f){return f.index<a}).length;var l=function(t,r){var e=t.slice(0,r<0?void 0:r),n=t.slice(0,r<0?void 0:r+1),a=t[r]||"",i=r<0?[]:t.slice(r),o=r<0?[]:t.slice(r+1),s=cr(e),u=cr(n),l=cr([a]),p=cr(i),c=cr(o),f=Cr(s),d=Cr(u),v=Cr(p),h=Cr(c),m=st(f,v,4);return{transforms:t,beforeFunctionMatrix:f,beforeFunctionMatrix2:d,targetFunctionMatrix:Cr(l),afterFunctionMatrix:v,afterFunctionMatrix2:h,allFunctionMatrix:m,beforeFunctions:s,beforeFunctions2:u,targetFunction:l[0],afterFunctions:p,afterFunctions2:c,beforeFunctionTexts:e,beforeFunctionTexts2:n,targetFunctionText:a,afterFunctionTexts:i,afterFunctionTexts2:o}}(i,u),p=l.targetFunction,c="rotate"===r?"rotateZ":r;e.beforeFunctionTexts=l.beforeFunctionTexts,e.afterFunctionTexts=l.afterFunctionTexts,e.beforeTransform=l.beforeFunctionMatrix,e.beforeTransform2=l.beforeFunctionMatrix2,e.targetTansform=l.targetFunctionMatrix,e.afterTransform=l.afterFunctionMatrix,e.afterTransform2=l.afterFunctionMatrix2,e.targetAllTransform=l.allFunctionMatrix,p.functionName===c?(e.afterFunctionTexts.splice(0,1),e.isAppendTransform=!1):o>u&&(e.isAppendTransform=!0,n.nextTransformAppendedIndexes=X(X([],s,!0),[{functionName:r,index:u,isAppend:!0}],!1))}function Ce(t,r,e){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?e:r," ").concat(t.afterFunctionTexts.join(" "))}function Jo(t,r,e){var n=t.beforeTransform,a=t.afterTransform,i=t.beforeTransform2,o=t.afterTransform2,s=t.targetAllTransform,u=e?st(s,r,4):st(r,s,4),l=st(Xt(e?i:n,4),u,4);return st(l,Xt(e?o:a,4),4)}function $o(t){var r=t.datas,o=r.startDragBeforeDist,u=r.is3d?4:3;return j(Mt(r.inverseBeforeMatrix,K(r.absoluteOrigin,[t.distX,t.distY]),u),o)}function Zt(t,r){var e=t.datas,u=e.startDragBeforeDist,l=e.startDragDist,c=e.is3d?4:3;return j(Mt(r?e.inverseBeforeMatrix:e.inverseMatrix,K(e.absoluteOrigin,[t.distX,t.distY]),c),r?u:l)}function Ko(t){var r=[];return t[1]>=0&&(t[0]>=0&&r.push(3),t[0]<=0&&r.push(2)),t[1]<=0&&(t[0]>=0&&r.push(1),t[0]<=0&&r.push(0)),r}function gt(t,r){var e=(r[0]+1)/2,n=(r[1]+1)/2,a=[sr(t[0][0],t[1][0],e,1-e),sr(t[0][1],t[1][1],e,1-e)],i=[sr(t[2][0],t[3][0],e,1-e),sr(t[2][1],t[3][1],e,1-e)];return[sr(a[0],i[0],n,1-n),sr(a[1],i[1],n,1-n)]}function $r(t,r,e,n){return st(t,Zn(r,n,e),n)}function _e(t){var r=yr(t);return{setTransform:function(e,n){void 0===n&&(n=-1),r.startTransforms=Ut(e)?e:Jt(e),Xn(t,n)},setTransformIndex:function(e){Xn(t,e)}}}function Ee(t,r){Xn(t,jt(yr(t).startTransforms,function(a){return 0===a.indexOf("".concat(r,"("))}))}function Xn(t,r){var e=yr(t),n=t.datas;if(n.transformIndex=r,-1!==r){var a=e.startTransforms[r];if(a){var i=cr([a]);n.startValue=i[0].functionValue}}}function Vn(t,r){yr(t).nextTransforms=Jt(r)}function yr(t){return t.originalDatas.beforeRenderable}function Qo(t){return t.originalDatas.beforeRenderable.nextTransforms}function ts(t){return Qo(t).join(" ")}function rs(t){return yr(t).nextStyle}function es(t,r,e,n,a){Vn(a,r);var i=wt.drag(t,Jr(a,t.state,e,n,!1)),o=i?i.transform:r;return R(R({transform:r,drag:i},te({transform:o},a)),{afterTransform:o})}function ns(t,r,e,n,a){var i=t.state,u=t.props.groupable,p=u?i.left:0,c=u?i.top:0,d=j(n,as(t,e,function(t,r,e){var n=t.transformOrigin,s=r.afterTransform,u=t.is3d?4:3;return $r(t.offsetMatrix,Vt(st(st(r.beforeTransform,Hr([e]),4),s,4),4,u),n,u)}(t.state,a,r)));return j(d,[p,c])}function as(t,r,e){void 0===e&&(e=t.state.allMatrix);var n=t.state;return _t(e,[n.width/2*(1+r[0]),n.height/2*(1+r[1])],n.is3d?4:3)}function is(t,r){return gt(Rt(t.state),r)}function Y(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Vu.apply(void 0,X([Wn],t,!1))}function os(t){t()}function xc(t){return t&&"none"!==t?kt(t)?t:Hr(t):[1,0,0,1,0,0]}function Zn(t,r,e){return mn(r,Yr(e,r),t,Yr(e.map(function(n){return-n}),r))}function jn(t){var r=t.transformOrigin;return r?r.split(" "):["0","0"]}function ss(t,r){void 0===r&&(r=It(t));var e=r.transform;if(e&&"none"!==e)return r.transform;if("transform"in t){var a=t.transform.baseVal;if(!a)return"";var i=a.length;if(!i)return"";for(var o=[],s=function(l){var p=a[l].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(c){return p[c]}).join(", "),")"))},u=0;u<i;++u)s(u);return o.join(" ")}return""}function Me(t,r,e){for(var n,a=document.body,i=!t||e?t:(null===(n=null==t?void 0:t.assignedSlot)||void 0===n?void 0:n.parentElement)||t.parentElement,o=!1,s=t===r||i===r,u="relative";i&&i!==a;){r===i&&(s=!0);var l=It(i),p=i.tagName.toLowerCase(),c=ss(i,l);if(u=l.position,"svg"===p||"static"!==u||c&&"none"!==c||"transform"===l.willChange)break;var d=i.parentNode;if(d&&11===d.nodeType){i=d.host,o=!0;break}i=d,u="relative"}return{isCustomElement:o,isStatic:"static"===u,isEnd:s||!i||i===a,offsetParent:i||a}}function _c(t,r){var e,u,l,n=t.tagName.toLowerCase(),a=t.offsetLeft,i=t.offsetTop,o=le(a),s=!o;return s||"svg"===n?l=(u=jn(r).map(function(p){return parseFloat(p)})).slice():(l=(u=Vo?function(t){return jn(It(t,":before")).map(function(e,n){var a=Ir(e);return a.value*function(t,r,e){return"%"===r?Un(t.ownerSVGElement)[e?"width":"height"]/100:1}(t,a.unit,0===n)})}(t):jn(r).map(function(p){return parseFloat(p)})).slice(),s=!0,a=(e=function(t,r){if(!t.getBBox||"g"===t.tagName.toLowerCase())return[0,0,0,0];var e=t.getBBox(),n=Un(t.ownerSVGElement),a=e.x-n.x,i=e.y-n.y;return[a,i,r[0]-a,r[1]-i]}(t,u))[0],i=e[1],u[0]=e[2],u[1]=e[3]),{tagName:n,isSVG:o,hasOffset:s,offset:[a||0,i||0],origin:u,targetOrigin:l}}function us(t,r,e){void 0===e&&(e=It(t));var n=It(document.body),a=n.position;if(!(r||a&&"static"!==a))return[0,0];var i=parseInt(n.marginLeft,10),o=parseInt(n.marginTop,10);return"absolute"===e.position&&(("auto"!==e.top||"auto"!==e.bottom)&&(o=0),("auto"!==e.left||"auto"!==e.right)&&(i=0)),[i,o]}function qn(t){t.forEach(function(r){var e=r.matrix;e&&(r.matrix=Vt(e,3,4))})}function Mc(t){for(var r=t.parentElement,e=!1;r;){var n=It(r).transform;if(n&&"none"!==n){e=!0;break}if(r===document.body)break;r=r.parentElement}return{fixedContainer:r||document.body,hasTransform:e}}function ls(t,r,e){for(var l,p,c,n=t,a=[],i=!e&&t===r||t===document.body,o=i,s=!1,u=3,f=!1,d=Me(r,r,!0).offsetParent;n&&!o;){o=i;var v=It(n),h=v.position,b=Wl(xc(ss(n,v))),x="fixed"===h,S={hasTransform:!1,fixedContainer:null};x&&(f=!0,d=(S=Mc(n)).fixedContainer);var C=b.length;!s&&16===C&&(s=!0,u=4,qn(a),c&&(c=Vt(c,3,4))),s&&9===C&&(b=Vt(b,3,4));var M=_c(n,v),E=M.tagName,_=M.hasOffset,w=M.isSVG,y=M.origin,D=M.targetOrigin,P=M.offset,O=P[0],T=P[1];"svg"===E&&c?(a.push({type:"target",target:n,matrix:yc(n,u)}),a.push({type:"offset",target:n,matrix:pt(u)})):"g"===E&&t!==n&&(O=0,T=0);var A=void 0,z=!1,B=!1;if(x)A=S.fixedContainer,z=!0;else{var k=Me(n,r);A=k.offsetParent,z=k.isEnd,B=k.isStatic}Xo&&!tc&&_&&!w&&B&&("relative"===h||"static"===h)&&(O-=A.offsetLeft,T-=A.offsetTop,i=i||z);var W=0,G=0,I=0,L=0;if(x)_&&S.hasTransform&&(I=A.clientLeft,L=A.clientTop);else if(_&&d!==A&&(W=A.clientLeft,G=A.clientTop),_&&A===document.body){var V=us(n,!1,v);O+=V[0],T+=V[1]}if(a.push({type:"target",target:n,matrix:Zn(b,u,y)}),a.push(_?{type:"offset",target:n,matrix:Yr([O-n.scrollLeft+W-I,T-n.scrollTop+G-L],u)}:{type:"offset",target:n,origin:y}),c||(c=b),l||(l=y),p||(p=D),o||x)break;n=A,i=z,(!e||n===document.body)&&(o=i)}return c||(c=pt(u)),l||(l=[0,0]),p||(p=[0,0]),{offsetContainer:d,matrixes:a,targetMatrix:c,transformOrigin:l,targetOrigin:p,is3d:s,hasFixed:f}}function ye(t,r){return void 0===r&&(r=t.length>9),"".concat(r?"matrix3d":"matrix","(").concat(Co(t,!r).join(","),")")}function Un(t){var r=t.clientWidth,e=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:r,clientHeight:e};var n=t.viewBox,a=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:a.x,y:a.y,width:a.width||r,height:a.height||e,clientWidth:r,clientHeight:e}}function yc(t,r){var e=Un(t),n=e.width,a=e.height,i=e.clientWidth,o=e.clientHeight,s=i/n,u=o/a,l=t.preserveAspectRatio.baseVal,p=l.align,c=l.meetOrSlice,f=[0,0],d=[s,u],v=[0,0];if(1!==p){var h=(p-2)%3,m=Math.floor((p-2)/3);f[0]=n*h/2,f[1]=a*m/2;var b=2===c?Math.max(u,s):Math.min(s,u);d[0]=b,d[1]=b,v[0]=(i-n)/2*h,v[1]=(o-a)/2*m}var x=Eo(d,r);return x[r*(r-1)]=v[0],x[r*(r-1)+1]=v[1],Zn(x,r,f)}function _t(t,r,e){return Mt(t,fr(r,e),e)}function hr(t,r,e,n){return[[0,0],[r,0],[0,e],[r,e]].map(function(a){return _t(t,a,n)})}function Bt(t){var r=t.map(function(l){return l[0]}),e=t.map(function(l){return l[1]}),n=Math.min.apply(Math,r),a=Math.min.apply(Math,e),i=Math.max.apply(Math,r),o=Math.max.apply(Math,e);return{left:n,top:a,right:i,bottom:o,width:i-n,height:o-a}}function fs(t,r,e,n){return Bt(hr(t,r,e,n))}function De(t,r,e,n){var i=16===t.length?4:3,o=hr(t,e,n,i),s=o[0],u=s[0],l=s[1],p=o[1],c=p[0],f=p[1],d=o[2],v=d[0],h=d[1],m=o[3],b=m[0],x=m[1],S=_t(t,r,i),C=S[0],M=S[1],E=Math.min(u,c,v,b),_=Math.min(l,f,h,x),w=Math.max(u,c,v,b);return u=u-E||0,{left:E,top:_,right:w,bottom:Math.max(l,f,h,x),origin:[C=C-E||0,M=M-_||0],pos1:[u,l=l-_||0],pos2:[c=c-E||0,f=f-_||0],pos3:[v=v-E||0,h=h-_||0],pos4:[b=b-E||0,x=x-_||0],direction:en(o)}}function Lt(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function cs(t,r){return Lt([r[0]-t[0],r[1]-t[1]])}function Kr(t,r,e,n){void 0===e&&(e=1),void 0===n&&(n=ht(t,r));var a=cs(t,r);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(n,"rad) scaleY(").concat(e,")"),width:"".concat(a,"px")}}function Jn(t,r){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var a=e.length,i=e.reduce(function(s,u){return s+u[0]},0)/a,o=e.reduce(function(s,u){return s+u[1]},0)/a;return{transform:"translateZ(0px) translate(".concat(i,"px, ").concat(o,"px) rotate(").concat(t,"rad) scale(").concat(r,")")}}function gr(t,r){var e=t[r];return kt(e)?R(R({},t),e):t}function ps(t,r){void 0===r&&(r=t?It(t):null);var e=t&&!le(t.offsetWidth),n=0,a=0,i=0,o=0,s=0,u=0,l=0,p=0,c=0,f=0,d=0,v=0,h=1/0,m=1/0,b=1/0,x=1/0,S=!1;if(t)if(e||"svg"===t.tagName.toLowerCase()){var M=t.style,E="border-box"===r.boxSizing,_=parseFloat(r.borderLeftWidth)||0,w=parseFloat(r.borderRightWidth)||0,y=parseFloat(r.borderTopWidth)||0,D=parseFloat(r.borderBottomWidth)||0,z=(parseFloat(r.paddingLeft)||0)+(parseFloat(r.paddingRight)||0),B=(parseFloat(r.paddingTop)||0)+(parseFloat(r.paddingBottom)||0),G=z+(_+w),I=B+(y+D);c=Math.max(z,ct(r.minWidth,0)||0),f=Math.max(B,ct(r.minHeight,0)||0),h=ct(r.maxWidth,0),m=ct(r.maxHeight,0),isNaN(h)&&(h=1/0,m=1/0);var L=ct(M.width,0)||0,V=ct(M.height,0)||0,nt=parseFloat(r.width)||0,U=parseFloat(r.height)||0;s=parseFloat(r.width),u=parseFloat(r.height),n=l=Math.abs(nt-L)<1?tn(c,L||s,h):nt,a=p=Math.abs(U-V)<1?tn(f,V||u,m):U,i=l,o=p,E?(b=h,x=m,d=c,v=f,l=n-G,p=a-I):(b=h+G,x=m+I,d=c+G,v=f+I,n=l+G,a=p+I),i=l+z,o=p+B}else{var C=t.getBBox();S=!0,s=n=C.width,u=a=C.height,l=n,p=a,i=n,o=a}return{svg:S,offsetWidth:n,offsetHeight:a,clientWidth:i,clientHeight:o,contentWidth:l,contentHeight:p,cssWidth:s,cssHeight:u,minWidth:c,minHeight:f,maxWidth:h,maxHeight:m,minOffsetWidth:d,minOffsetHeight:v,maxOffsetWidth:b,maxOffsetHeight:x}}function ds(t,r){return ht(r>0?t[0]:t[1],r>0?t[1]:t[0])}function Qr(t,r){var e,n=0,a=0,i=0,o=0;if(t)if(t===document.body||t===document.documentElement){i=window.innerWidth,o=window.innerHeight;var s=[document.documentElement.scrollLeft||document.body.scrollLeft,document.documentElement.scrollTop||document.body.scrollTop];n=(e=[-s[0],-s[1]])[0],a=e[1]}else{var u=t.getBoundingClientRect();n=u.left,a=u.top,i=u.width,o=u.height}var l={left:n,top:a,width:i,height:o,right:n+i,bottom:a+o};return t&&r&&(l.clientLeft=t.clientLeft,l.clientTop=t.clientTop,l.clientWidth=t.clientWidth,l.clientHeight=t.clientHeight,l.scrollWidth=t.scrollWidth,l.scrollHeight=t.scrollHeight,l.overflow="visible"!==It(t).overflow),l}function $n(t){if(t){var r=t.getAttribute("data-direction");if(r){var e=[0,0];return r.indexOf("w")>-1&&(e[0]=-1),r.indexOf("e")>-1&&(e[0]=1),r.indexOf("n")>-1&&(e[1]=-1),r.indexOf("s")>-1&&(e[1]=1),e}}}function Kn(t,r){return[K(r,t[0]),K(r,t[1]),K(r,t[2]),K(r,t[3])]}function Rt(t){return Kn([t.pos1,t.pos2,t.pos3,t.pos4],[t.left,t.top])}function Dr(t,r){var e;null===(e=t[r])||void 0===e||e.unset(),t[r]=null}function te(t,r){if(r){var e=yr(r);e.nextStyle=R(R({},e.nextStyle),t)}return{style:t,cssText:xr(t).map(function(n){return"".concat(n,": ").concat(t[n],";")}).join("")}}function vs(t,r,e){var n=r.afterTransform||r.transform;return R(R({},te(R(R(R({},t.style),r.style),{transform:n}),e)),{afterTransform:n,transform:t.transform})}function q(t,r,e,n){var a=r.datas;a.datas||(a.datas={});var i=R(R({},e),{target:t.state.target,clientX:r.clientX,clientY:r.clientY,inputEvent:r.inputEvent,currentTarget:t,moveable:t,datas:a.datas,stopDrag:function(){var o;null===(o=r.stop)||void 0===o||o.call(r)}});return a.isStartEvent?n||(a.lastEvent=i):a.isStartEvent=!0,i}function zt(t,r,e){var n=r.datas,a="isDrag"in e?e.isDrag:r.isDrag;return n.datas||(n.datas={}),R(R({isDrag:a},e),{moveable:t,target:t.state.target,clientX:r.clientX,clientY:r.clientY,inputEvent:r.inputEvent,currentTarget:t,lastEvent:n.lastEvent,isDouble:r.isDouble,datas:n.datas})}function Qn(t,r,e){t._emitter.on(r,e)}function N(t,r,e,n){return t.triggerEvent(r,e,n)}function It(t,r){return window.getComputedStyle(t,r)}function Oe(t,r,e){var n={},a={};return t.filter(function(i){var o=i.name;if(n[o]||!r.some(function(s){return i[s]}))return!1;if(!e&&i.ableGroup){if(a[i.ableGroup])return!1;a[i.ableGroup]=!0}return n[o]=!0,!0})}function ta(t,r){return t===r||null==t&&null==r}function wr(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.sort(function(e,n){return Math.abs(n)-Math.abs(e)}),t[0]}function Or(t,r,e){return Mt(Xt(t,e),fr(r,e),e)}function hs(t,r){var e;return e=Or(t.rootMatrix,[r.distX,r.distY],t.is3d?4:3),r.distX=e[0],r.distY=e[1],r}function Re(t,r,e,n,a){return j(_t(t,K(e,r),a),n)}function Wt(t,r,e){return e?"".concat(t/r*100,"%"):"".concat(t,"px")}function Te(t){return Math.abs(t)<=Dt?0:t}function ra(t,r){return void 0===r&&(r=[t]),function(e,n){if(n.isRequest)return!!r.some(function(i){return n.requestAble===i})&&n.parentDirection;var a=n.inputEvent.target;return Ct(a,Y("direction"))&&(!t||Ct(a,Y(t)))}}function Gc(t){var r={};for(var e in t)r[t[e]]=e;return r}function re(t,r){return t?t instanceof Element?t:At(t)?r?document.querySelector(t):t:qi(t)?t():"current"in t?t.current:t:null}function gs(t,r){return t?(function(t){return!(!t||!kt(t)||t instanceof Element)&&(Ut(t)||"length"in t)}(t)?[].slice.call(t):[t]).reduce(function(n,a){return At(a)&&r?X(X([],n,!0),[].slice.call(document.querySelectorAll(a)),!0):(n.push(re(a,r)),n)},[]):[]}function ms(t,r){var n=t.is3d,i=Xt(t.rootMatrix,n?4:3);return n||(i=Vt(i,3,4)),i[12]=0,i[13]=0,i[14]=0,function(t,r){var e=Mt(t,[r[0],r[1]||0,r[2]||0,1],4),n=e[3]||1;return[e[0]/n,e[1]/n,e[2]/n]}(i,r)}function bs(t,r,e,n,a){var i=t[0],o=t[1],s=0,u=0;if(a&&i&&o){var l=ht([0,0],r),p=ht([0,0],n),c=Lt(r),f=Math.cos(l-p)*c;if(n[0])if(n[1]){var d=2*n[0]*i,v=2*n[1]*o,h=Lt([d+r[0],v+r[1]])-Lt([d,v]),m=ht([0,0],[e,1]);s=Math.cos(m)*h,u=Math.sin(m)*h}else u=(s=f)/e;else s=(u=f)*e}else s=n[0]*r[0],u=n[1]*r[1];return[s,u]}function xs(t,r,e,n){var a,i=e.ratio,o=e.startOffsetWidth,s=e.startOffsetHeight,u=0,l=0,p=n.distX,c=n.distY,f=n.parentDistance,d=n.parentDist,v=n.parentScale,h=e.fixedDirection,m=[0,1].map(function(E){return Math.abs(t[E]-h[E])}),b=[0,1].map(function(E){var _=m[E];return 0!==_&&(_=2/_),_});if(d)u=d[0],l=d[1],r&&(u?l||(l=u/i):u=l*i);else if(v)u=(v[0]-1)*o,l=(v[1]-1)*s;else if(f){var x=o*m[0],S=s*m[1],C=Lt([x,S]);u=f/C*x*b[0],l=f/C*S*b[1]}else{var M=Zt({datas:e,distX:p,distY:c});u=(a=bs([o,s],M=b.map(function(E,_){return M[_]*E}),i,t,r))[0],l=a[1]}return{distWidth:u,distHeight:l}}var Nc=qr("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(t,r){var e=r.datas,n=r.targets,a=r.angle,i=r.originalDatas,o=t.props,s=o.pinchable,u=o.ables;if(!s)return!1;var l="onPinch".concat(n?"Group":"","Start"),p="drag".concat(n?"Group":"","ControlStart"),c=(!0===s?t.controlAbles:u.filter(function(h){return s.indexOf(h.name)>-1})).filter(function(h){return h.canPinch&&h[p]}),f=q(t,r,{});n&&(f.targets=n);var d=N(t,l,f);e.isPinch=!1!==d,e.ables=c;var v=e.isPinch;return!!v&&(c.forEach(function(h){if(i[h.name]=i[h.name]||{},h[p]){var m=R(R({},r),{datas:i[h.name],parentRotate:a,isPinch:!0});h[p](t,m)}}),t.state.snapRenderInfo={request:r.isRequest,direction:[0,0]},v)},pinch:function(t,r){var e=r.datas,i=r.originalDatas,o=r.inputEvent,s=r.targets,u=r.angle;if(e.isPinch){var l=r.distance*(1-1/r.scale),p=q(t,r,{});s&&(p.targets=s);var c="onPinch".concat(s?"Group":"");N(t,c,p);var f=e.ables,d="drag".concat(s?"Group":"","Control");return f.forEach(function(v){!v[d]||v[d](t,R(R({},r),{datas:i[v.name],inputEvent:o,parentDistance:l,parentRotate:u,isPinch:!0}))}),p}},pinchEnd:function(t,r){var e=r.datas,n=r.isPinch,a=r.inputEvent,i=r.targets,o=r.originalDatas;if(e.isPinch){var s="onPinch".concat(i?"Group":"","End"),u=zt(t,r,{isDrag:n});i&&(u.targets=i),N(t,s,u);var l=e.ables,p="drag".concat(i?"Group":"","ControlEnd");return l.forEach(function(c){!c[p]||c[p](t,R(R({},r),{isDrag:n,datas:o[c.name],inputEvent:a,isPinch:!0}))}),n}},pinchGroupStart:function(t,r){return this.pinchStart(t,R(R({},r),{targets:t.props.targets}))},pinchGroup:function(t,r){return this.pinch(t,R(R({},r),{targets:t.props.targets}))},pinchGroupEnd:function(t,r){return this.pinchEnd(t,R(R({},r),{targets:t.props.targets}))}});function tr(t,r,e){var n=e.originalDatas;n.groupable=n.groupable||{};var a=n.groupable;a.childDatas=a.childDatas||[];var i=a.childDatas;return t.moveables.map(function(o,s){return i[s]=i[s]||{},i[s][r]=i[s][r]||{},R(R({},e),{datas:i[s][r],originalDatas:i[s]})})}function ea(t,r,e,n,a,i,o){var s=!!e.match(/Start$/g),u=!!e.match(/End$/g),l=a.isPinch,p=a.datas,c=tr(t,r.name,a),f=t.moveables,d=c.map(function(v,h){var m=f[h],b=m.state,x=b.gestos,S=v;if(s)S=new Mr(o).dragStart(n,v);else{if(x[o]||(x[o]=p.childGestos[h]),!x[o])return;S=Jr(v,b,n,l,i,o)}var C=r[e](m,R(R({},S),{parentFlag:!0}));return u&&(x[o]=null),C});return s&&(p.childGestos=f.map(function(v){return v.state.gestos[o]})),d}function qt(t,r,e,n,a,i){void 0===a&&(a=function(p,c){return c});var o=!!e.match(/End$/g),s=tr(t,r.name,n),u=t.moveables;return s.map(function(p,c){var d,f=u[c];d=a(f,p);var v=r[e](f,R(R({},d),{parentFlag:!0}));return v&&i&&i(f,p,v,c),o&&(f.state.gestos={}),v})}var Lc=["left","right","center"],Wc=["top","bottom","middle"],rr={start:"left",end:"right",center:"center"},er={start:"top",end:"bottom",center:"middle"};function Rr(t,r){var e=t.props,n=e.snappable,a=e.bounds,i=e.innerBounds,o=e.verticalGuidelines,s=e.horizontalGuidelines,u=e.snapGridWidth,l=e.snapGridHeight,p=t.state,c=p.guidelines;return!(!n||!p.enableSnap||r&&!0!==n&&n.indexOf(r)<0||!(u||l||a||i||c&&c.length||o&&o.length||s&&s.length))}function na(t){return!1===t?{}:!0!==t&&t?t:{left:!0,right:!0,top:!0,bottom:!0}}function aa(t,r){var e=function(t,r){var e=na(t),n={};for(var a in e)a in r&&e[a]&&(n[a]=r[a]);return n}(t,r),n=Wc.filter(function(i){return i in e}),a=Lc.filter(function(i){return i in e});return{horizontal:n.map(function(i){return e[i]}),vertical:a.map(function(i){return e[i]})}}function Pe(t,r,e,n){var i=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=t.length-1,n=0;n<e;++n){var a=t[n];if(!le(a))return a}return t[e]}(n,t.props.snapThreshold,5);return Ss(t.state.guidelines,r,e,i)}function Ss(t,r,e,n){return{vertical:_s(t,"vertical",r,n),horizontal:_s(t,"horizontal",e,n)}}function Cs(t,r,e){var n=aa(t.props.snapDirections,r);return Pe(t,n.vertical,n.horizontal,e)}function ia(t){var r=t.isSnap;if(!r)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var e=t.posInfos[0],n=e.guidelineInfos[0];return{isSnap:r,offset:n.offset,dist:n.dist,pos:e.pos,guideline:n.guideline}}function _s(t,r,e,n){if(!t||!t.length)return{isSnap:!1,index:-1,posInfos:[]};var i="vertical"===r?0:1,o=e.map(function(u,l){var p=t.map(function(c){var d=u-c.pos[i];return{offset:d,dist:Math.abs(d),guideline:c}}).filter(function(c){return!(c.guideline.type!==r||c.dist>n)}).sort(function(c,f){return c.dist-f.dist});return{pos:u,index:l,guidelineInfos:p}}).filter(function(u){return u.guidelineInfos.length>0}).sort(function(u,l){return u.guidelineInfos[0].dist-l.guidelineInfos[0].dist}),s=o.length>0;return{isSnap:s,index:s?o[0].index:-1,posInfos:o}}function Es(t,r){var e=Math.abs(t.offset),n=Math.abs(r.offset);return t.isBound&&r.isBound?n-e:t.isBound?-1:r.isBound?1:t.isSnap&&r.isSnap?n-e:t.isSnap?-1:r.isSnap||e<Dt?1:n<Dt?-1:e-n}function ze(t,r){return t.slice().sort(function(e,n){return e.sign[r]?n.sign[r]?Es({isBound:e.isBound,isSnap:e.isSnap,offset:e.offset[r]},{isBound:n.isBound,isSnap:n.isSnap,offset:n.offset[r]}):-1:1})[0]}function Ms(t,r){var e=rn([r[0][0],r[1][0]]),n=rn([r[0][1],r[1][1]]);return{vertical:e<=t[0],horizontal:n<=t[1]}}function oa(t,r){var o,s,e=r[0],n=r[1],a=n[0]-e[0],i=n[1]-e[1];return Math.abs(a)<Dt&&(a=0),Math.abs(i)<Dt&&(i=0),a?i?(o=i/a*(t[0]-e[0])+e[1],s=t[1]):(o=e[1],s=t[1]):(o=e[0],s=t[0]),o-s}function ys(t,r,e,n){return void 0===n&&(n=Dt),t.every(function(a){var i=oa(a,r);return i<=0===e||Math.abs(i)<=n})}function Ds(t,r,e,n,a){return void 0===a&&(a=0),n&&r-a<=t||!n&&t<=e+a?{isBound:!0,offset:n?r-t:e-t}:{isBound:!1,offset:0}}function nr(t,r,e,n,a,i){var o=r[0],s=r[1],u=t[0],l=e[0],p=e[1],c=Te(p[1]-l[1]),d=s,v=o,h=-o/s;if(!Te(p[0]-l[0]))return i&&!v?{isBound:!1,offset:0}:d?Ds(h*(l[0]-u[0])+u[1],l[1],p[1],n,a):(b=l[0]-u[0],{isBound:x=Math.abs(b)<=(a||0),offset:x?b:0});if(!c){if(i&&!d)return{isBound:!1,offset:0};if(v)return Ds((l[1]-u[1])/h+u[0],l[0],p[0],n,a);var x,b=l[1]-u[1];return{isBound:x=Math.abs(b)<=(a||0),offset:x?b:0}}return{isBound:!1,offset:0}}function ws(t,r,e){return r.map(function(n){var a=function(t,r){var e=r.line,a=r.verticalSign,i=r.horizontalSign,o=r.lineConstants,s=t.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=s.left,l=s.top,p=s.width,c=s.height,f=[[u,l],[u,l+c]],d=[[u,l],[u+p,l]],v=[[u+p,l],[u+p,l+c]],h=[[u,l+c],[u+p,l+c]];if(ys([[u,l],[u+p,l],[u,l+c],[u+p,l+c]],e,r.centerSign))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var m=nr(e,o,d,a),b=nr(e,o,h,a),x=nr(e,o,f,i),S=nr(e,o,v,i),C=m.isBound&&b.isBound,M=m.isBound||b.isBound,E=x.isBound&&S.isBound,_=x.isBound||S.isBound,w=wr(m.offset,b.offset),y=wr(x.offset,S.offset),D=[0,0],P=!1,O=!1;return Math.abs(y)<Math.abs(w)?(D=[w,0],P=M,O=C):(D=[0,y],P=_,O=E),{isAllBound:O,isVerticalBound:M,isHorizontalBound:_,isBound:P,offset:D}}(t,n),i=a.isBound,o=a.offset,s=a.isVerticalBound,u=a.isHorizontalBound,l=n.multiple,p=Zt({datas:e,distX:o[0],distY:o[1]}).map(function(c,f){return c*(l[f]?2/l[f]:0)});return{sign:l,isBound:i,isVerticalBound:s,isHorizontalBound:u,isSnap:!1,offset:p}})}function sa(t,r,e,n){var a=t.state,s=hr(a.allMatrix,100,100,a.is3d?4:3),u=gt(s,[0,0]);return function(t,r){var e=[],n=t[0],a=t[1];return n&&a?e.push([[0,2*a],t,[-n,a]],[[2*n,0],t,[n,-a]]):n?(e.push([[2*n,0],[n,1],[n,-1]]),r&&e.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):a?(e.push([[0,2*a],[1,a],[-1,a]]),r&&e.push([[-1,0],[-1,a],[-1,-a]],[[1,0],[1,a],[1,-a]])):e.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),e}(e,n).map(function(l){var p=l[0],c=l[1],f=l[2],d=[gt(s,c),gt(s,f)],v=function(t){var r=t[0],e=t[1],n=e[0]-r[0],a=e[1]-r[1];Math.abs(n)<bt&&(n=0),Math.abs(a)<bt&&(a=0);var i=0,o=0,s=0;return n?a?(o=1,s=(i=-a/n)*r[0]-r[1]):(o=1,s=-r[1]):(i=-1,s=r[0]),[i,o,s].map(function(u){return J(u,bt)})}(d),h=Ms(u,d),m=h.vertical,b=h.horizontal;return{multiple:p,centerSign:oa(u,d)<=0,verticalSign:m,horizontalSign:b,lineConstants:v,line:[gt(r,c),gt(r,f)]}})}function Os(t,r,e,n){var a=n?t.map(function(i){return Qt(i,n)}):t;return[[a[0],a[1]],[a[1],a[3]],[a[3],a[2]],[a[2],a[0]]].some(function(i){var o=oa(e,i)<=0;return!ys(r,i,o)})}function ua(t,r,e){var n=t||{},a=n.position,o=n.left,u=n.top,p=n.right,f=n.bottom,v={position:void 0===a?"client":a,left:void 0===o?-1/0:o,top:void 0===u?-1/0:u,right:void 0===p?1/0:p,bottom:void 0===f?1/0:f};return{vertical:Rs(v,r,!0),horizontal:Rs(v,e,!1)}}function Ae(t,r){var e=t.state,n=e.containerClientRect,o=n.clientLeft,s=n.clientTop,u=e.snapOffset,l=u.left,p=u.top,d=r||t.props.bounds||{},h="css"===(d.position||"client"),m=d.left,x=d.top,C=d.right,M=void 0===C?h?-1/0:1/0:C,E=d.bottom,_=void 0===E?h?-1/0:1/0:E;return h&&(M=n.clientWidth+u.right-l-M,_=n.clientHeight+u.bottom-p-_),{left:(void 0===m?-1/0:m)+l-o,right:M+l-o,top:(void 0===x?-1/0:x)+p-s,bottom:_+p-s}}function Rs(t,r,e){var n=t[e?"left":"top"],a=t[e?"right":"bottom"],i=Math.min.apply(Math,r),o=Math.max.apply(Math,r),s=[];return n+1>i&&s.push({isBound:!0,offset:i-n,pos:n}),a-1<o&&s.push({isBound:!0,offset:o-a,pos:a}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(u,l){return Math.abs(l.offset)-Math.abs(u.offset)})}function Ts(t,r,e){return(e?t.map(function(a){return Qt(a,e)}):t).some(function(a){return a[0]<r.left&&Math.abs(a[0]-r.left)>.1||a[0]>r.right&&Math.abs(a[0]-r.right)>.1||a[1]<r.top&&Math.abs(a[1]-r.top)>.1||a[1]>r.bottom&&Math.abs(a[1]-r.bottom)>.1})}function la(t,r){return function(t,r){var e,i=t.size,o=t.pos,s=t.zoom,l="horizontal"===t.direction,p=l?"Y":"X";return r.createElement("div",{key:t.key,className:t.classNames.join(" "),style:(e={},e[l?"width":"height"]="".concat(i),e.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(p,"(-50%) scale").concat(p,"(").concat(s,")"),e)})}(R(R({},t),{classNames:X([Y("line","guideline",t.direction)],t.classNames,!0).filter(function(e){return e}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(e){return"".concat(J(e,.1),"px")})}),r)}function Ps(t,r,e,n,a,i,o,s){var u=t.props.zoom;return e.map(function(l,p){var c=l.type,f=l.pos,d=[0,0];return d[o]=n,d[o?0:1]=-a+f,la({key:"".concat(r,"TargetGuideline").concat(p),classNames:[Y("target","bold",c)],posValue:d,sizeValue:i,zoom:u,direction:r},s)})}function zs(t,r,e,n,a,i){var o=t.props,s=o.zoom,u=o.isDisplayInnerSnapDigit,l="horizontal"===r?rr:er,p=a[l.start],c=a[l.end];return e.filter(function(f){var v=f.elementRect;if(f.hide)return!1;if(u&&v){var h=v.rect;if(h[l.start]<=p&&c<=h[l.end])return!1}return!0}).map(function(f,d){var v=f.pos,h=f.size,m=f.element,b=f.className,x=[-n[0]+v[0],-n[1]+v[1]];return la({key:"".concat(r,"-default-guideline-").concat(d),classNames:m?[Y("bold"),b]:[Y("normal"),b],direction:r,posValue:x,sizeValue:h,zoom:s},i)})}function ee(t,r,e,n,a,i,o,s){var u,l=t.props,p=l.snapDigit,c=void 0===p?0:p,f=l.isDisplaySnapDigit,d=void 0===f||f,v=l.snapDistFormat,h=void 0===v?function(M,E){return M}:v,m=l.zoom,b="horizontal"===r?"X":"Y",x="vertical"===r?"height":"width",S=Math.abs(a),C=d?parseFloat(S.toFixed(c)):0;return s.createElement("div",{key:"".concat(r,"-").concat(e,"-guideline-").concat(n),className:Y("guideline-group",r),style:(u={left:"".concat(i[0],"px"),top:"".concat(i[1],"px")},u[x]="".concat(S,"px"),u)},la({direction:r,classNames:[Y(e),o],size:"100%",posValue:[0,0],sizeValue:S,zoom:m},s),s.createElement("div",{className:Y("size-value","gap"),style:{transform:"translate".concat(b,"(-50%) scale(").concat(m,")")}},C>0?h(C,r):""))}function fa(t,r,e,n,a){var i=function(t,r,e,n){var a=r[0]-t[0],i=r[1]-t[1];if(Math.abs(a)<bt&&(a=0),Math.abs(i)<bt&&(i=0),!a)return n?[0,0]:[0,e];if(!i)return n?[e,0]:[0,0];var o=i/a,s=t[1]-o*t[0];return n?[e,o*(r[0]+e)+s-r[1]]:[(r[1]+e-s)/o-r[0],e]}(t,r,e,n);if(!i)return{isOutside:!1,offset:[0,0]};var o=Ft(t,r),s=Ft(i,t),u=Ft(i,r),l=s>o||u>o,p=Zt({datas:a,distX:i[0],distY:i[1]});return{offset:[p[0],p[1]],isOutside:l}}function Ge(t,r){return t.isBound?t.offset:r.isSnap?ia(r).offset:0}function fp(t,r,e,n,a,i){if(!Rr(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=Kn(i.absolutePoses,[r,e]),s=Bt(o),u=s.left,l=s.right,p=s.top,c=s.bottom,f={horizontal:o.map(function(A){return A[1]}),vertical:o.map(function(A){return A[0]})},h=Be(t,a,aa(na(t.props.snapDirections),{left:u,right:l,top:p,bottom:c,center:(u+l)/2,middle:(p+c)/2}),f),m=h.vertical,b=h.horizontal,x=function(t,r,e){var n,i=ws(t,sa(t,r,[0,0],!1).map(function(f){return R(R({},f),{multiple:f.multiple.map(function(d){return 2*Math.abs(d)})})}),e),o=ze(i,0),s=ze(i,1),u=0,l=0,p=o.isVerticalBound||s.isVerticalBound,c=o.isHorizontalBound||s.isHorizontalBound;return(p||c)&&(u=(n=function(t,r){var e=t.datas,p=e.absoluteOrigin,c=e.is3d?4:3;return j(Mt(e.matrix,K(e.startDragDist,[t.distX,t.distY]),c),p)}({datas:e,distX:-o.offset[0],distY:-s.offset[1]}))[0],l=n[1]),{vertical:{isBound:p,offset:u},horizontal:{isBound:c,offset:l}}}(t,o,i),S=x.vertical,C=x.horizontal,M=m.isSnap,E=b.isSnap,_=m.isBound||S.isBound,w=b.isBound||C.isBound,P=function(t,r,e,n,a){var i=r[0],o=r[1],s=e[0],u=e[1],l=n[0],p=n[1],c=a[0],f=a[1],d=-c,v=-f;if(t&&i&&o){d=0,v=0;var h=[];if(s&&u?h.push([0,f],[c,0]):s?h.push([c,0]):u?h.push([0,f]):l&&p?h.push([0,f],[c,0]):l?h.push([c,0]):p&&h.push([0,f]),h.length){h.sort(function(S,C){return Lt(j([i,o],S))-Lt(j([i,o],C))});var m=h[0];if(m[0]&&Math.abs(i)>bt)d=-m[0],v=o*Math.abs(i+d)/Math.abs(i)-o;else if(m[1]&&Math.abs(o)>bt){var b=o;v=-m[1],d=i*Math.abs(o+v)/Math.abs(b)-i}if(t&&u&&s)if(Math.abs(d)>bt&&Math.abs(d)<Math.abs(c))d*=x=Math.abs(c)/Math.abs(d),v*=x;else if(Math.abs(v)>bt&&Math.abs(v)<Math.abs(f)){var x;d*=x=Math.abs(f)/Math.abs(v),v*=x}else d=wr(-c,d),v=wr(-f,v)}}else d=i||s?-c:0,v=o||u?-f:0;return[d,v]}(n,[r,e],[_,w],[M,E],[wr(m.offset,S.offset),wr(b.offset,C.offset)]);return[{isBound:_,isSnap:M,offset:P[0]},{isBound:w,isSnap:E,offset:P[1]}]}function Be(t,r,e,n){void 0===n&&(n=e);var a=ua(Ae(t),n.vertical,n.horizontal),i=a.horizontal,o=a.vertical,s=r?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Pe(t,e.vertical,e.horizontal),u=s.horizontal,l=s.vertical,p=Ge(i[0],u),c=Ge(o[0],l),f=Math.abs(p),d=Math.abs(c);return{horizontal:{isBound:i[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:p,dist:f,bounds:i,snap:u},vertical:{isBound:o[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:c,dist:d,bounds:o,snap:l}}}function As(t,r,e,n,a){var i=ua(r,e,n),o=i.horizontal,s=i.vertical,u=Ss(t,e,n,a),l=u.horizontal,p=u.vertical,c=Ge(o[0],l),f=Ge(s[0],p),d=Math.abs(c),v=Math.abs(f);return{horizontal:{isBound:o[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:c,dist:d,bounds:o,snap:l},vertical:{isBound:s[0].isBound,isSnap:p.isSnap,snapIndex:p.index,offset:f,dist:v,bounds:s,snap:p}}}function Gs(t,r){return t.isBound?t.offset:r.isSnap?r.offset:0}function ca(t){var r=t.state,e=r.snapOffset,n=r.containerClientRect,a=n.overflow,i=n.scrollHeight,o=n.scrollWidth,s=n.clientHeight,u=n.clientWidth,l=n.clientLeft,p=n.clientTop,c=t.props,f=c.snapGap,d=void 0===f||f,v=c.verticalGuidelines,h=c.horizontalGuidelines,m=c.snapThreshold,b=void 0===m?5:m,x=c.snapGridWidth,S=void 0===x?0:x,C=c.snapGridHeight,M=void 0===C?0:C,E=c.maxSnapElementGuidelineDistance,_=void 0===E?1/0:E,w=Bt(Rt(t.state)),y=w.top,D=w.left,P=w.bottom,O=w.right,T={top:y,left:D,bottom:P,right:O,center:(D+O)/2,middle:(y+P)/2},z=X([],function(t){var r=t.state,e=t.props.elementGuidelines,n=void 0===e?[]:e;if(!n.length)return r.elementRects=[],[];var a=(r.elementRects||[]).filter(function(f){return!f.refresh}),i=n.map(function(f){return kt(f)&&"element"in f?R(R({},f),{element:re(f.element,!0)}):{element:re(f,!0)}}).filter(function(f){return f.element}),o=function(t,r){return se(t,r,yo)}(a.map(function(f){return f.element}),i.map(function(f){return f.element})),u=o.added,l=[];o.maintained.forEach(function(f){l[f[1]]=a[f[0]]}),function(t,r){if(!r.length)return[];var e=t.state,a=e.targetClientRect,i=a.top,o=a.left,s=e.rootMatrix,l=e.is3d?4:3,p=function(t,r,e){var n=_t(t,[r.clientLeft,r.clientTop],e);return[r.left+n[0],r.top+n[1]]}(s,e.containerClientRect,l),c=p[0],f=p[1],v=ve(Rt(e)),b=j([v.minX,v.minY],Or(s,[o-c,i-f],l)).map(function(C){return function(t){return Math.round(t%1==-.5?t-1:t)}(C)}),x=b[0],S=b[1];return r.map(function(C){var M=C.element.getBoundingClientRect(),E=M.left-c,_=M.top-f,w=_+M.height,y=E+M.width,D=Or(s,[E,_],l),P=D[0],O=D[1],T=Or(s,[y,w],l),A=T[0],z=T[1];return R(R({},C),{rect:{left:P+x,right:A+x,top:O+S,bottom:z+S,center:(P+A)/2+x,middle:(O+z)/2+S}})})}(t,u.map(function(f){return i[f]})).map(function(f,d){l[u[d]]=f}),r.elementRects=l;var p=na(t.props.elementSnapDirections),c=[];return l.forEach(function(f){var d=f.element,v=f.top,m=f.left,x=f.right,C=f.bottom,E=f.center,w=f.middle,D=f.className,P=f.rect,O=aa({top:void 0===v?p.top:v,right:void 0===x?p.right:x,left:void 0===m?p.left:m,bottom:void 0===C?p.bottom:C,center:void 0===E?p.center:E,middle:void 0===w?p.middle:w},P),T=O.horizontal,z=P.top,B=P.left,k=P.right-B,W=P.bottom-z,G=[k,W];O.vertical.forEach(function(I){c.push({type:"vertical",element:d,pos:[J(I,.1),z],size:W,sizes:G,className:D,elementRect:f})}),T.forEach(function(I){c.push({type:"horizontal",element:d,pos:[B,J(I,.1)],size:k,sizes:G,className:D,elementRect:f})})}),c}(t),!0);return d&&z.push.apply(z,function(t,r,e){var n=t.props,a=n.maxSnapElementGuidelineDistance,i=void 0===a?1/0:a,o=n.maxSnapElementGapDistance,s=void 0===o?1/0:o,u=t.state.elementRects,l=[];return[["vertical",rr,er],["horizontal",er,rr]].forEach(function(p){var c=p[0],f=p[1],d=p[2],v=r[f.start],h=r[f.end],m=r[f.center],b=r[d.start],x=r[d.end];function S(E){var _=E.rect;return _[f.end]<v+e?v-_[f.end]:h-e<_[f.start]?_[f.start]-h:-1}var C=u.filter(function(E){var _=E.rect;return!(_[d.start]>x||_[d.end]<b)&&S(E)>0}).sort(function(E,_){return S(E)-S(_)}),M=[];C.forEach(function(E){C.forEach(function(_){if(E!==_){var w=E.rect,y=_.rect;w[d.start]>y[d.end]||y[d.start]>w[d.end]||M.push([E,_])}})}),M.forEach(function(E){var _=E[0],w=E[1],y=_.rect,D=w.rect,P=y[f.start],O=y[f.end],T=D[f.start],A=D[f.end],z=0,B=0,k=!1,W=!1,G=!1;if(O<=v&&h<=T){if(W=!0,B=O+(z=(T-O-(h-v))/2)+(h-v)/2,Math.abs(B-m)>e)return}else if(O<T&&A<v+e){if(k=!0,B=A+(z=T-O),Math.abs(B-v)>e)return}else{if(!(O<T&&h-e<P))return;if(G=!0,B=P-(z=T-O),Math.abs(B-h)>e)return}!z||!Bs(r,D,c,i)||z>s||l.push({type:c,pos:"vertical"===c?[B,0]:[0,B],element:w.element,size:0,className:w.className,isStart:k,isCenter:W,isEnd:G,gap:z,hide:!0,gapRects:[_,w]})})}),l}(t,T,b)),z.push.apply(z,function(t,r,e,n,a,i){void 0===a&&(a=0),void 0===i&&(i=0);var o=[];if(r)for(var s=0;s<=n;s+=r)o.push({type:"horizontal",pos:[0,J(s-i,.1)],size:e,hide:!0});if(t)for(s=0;s<=e;s+=t)o.push({type:"vertical",pos:[J(s-a,.1),0],size:n,hide:!0});return o}(S,M,a?o:u,a?i:s,l,p)),z.push.apply(z,Is(h||!1,v||!1,a?o:u,a?i:s,l,p,e)),z.filter(function(B){var W=B.elementRect;return!B.element||!W||Bs(T,W.rect,B.type,_)})}function Bs(t,r,e,n){return"horizontal"===e?Math.abs(t.right-r.left)<=n||Math.abs(t.left-r.right)<=n||t.left<=r.right&&r.left<=t.right:"vertical"!==e||Math.abs(t.bottom-r.top)<=n||Math.abs(t.top-r.bottom)<=n||t.top<=r.bottom&&r.top<=t.bottom}function Is(t,r,e,n,a,i,o){void 0===a&&(a=0),void 0===i&&(i=0),void 0===o&&(o={left:0,top:0,right:0,bottom:0});var s=[],u=o.left,l=o.top,f=e+o.right-u,d=n+o.bottom-l;return t&&t.forEach(function(v){var h=kt(v)?v:{pos:v};s.push({type:"horizontal",pos:[u,J(h.pos-i+l,.1)],size:f,className:h.className})}),r&&r.forEach(function(v){var h=kt(v)?v:{pos:v};s.push({type:"vertical",pos:[J(h.pos-a+u,.1),l],size:d,className:h.className})}),s}function pa(t){var r=t.state;if(!r.guidelines||!r.guidelines.length){var e=t.state.container,n=t.props.snapContainer||e,a=r.containerClientRect,i={left:0,top:0,bottom:0,right:0};if(e!==n){var o=re(n,!0);if(o){var s=Qr(o),u=ms(r,[s.left-a.left,s.top-a.top]),l=ms(r,[s.right-a.right,s.bottom-a.bottom]);i.left=J(u[0],1e-5),i.top=J(u[1],1e-5),i.right=J(l[0],1e-5),i.bottom=J(l[1],1e-5)}}r.snapOffset=i,r.guidelines=ca(t),r.enableSnap=!0}}function ks(t,r,e,n,a,i){var o=hr(t,r,e,i?4:3);return Kn(o,j(a,gt(o,n)))}function xp(t,r,e,n,a,i){var s=function(t,r,e){var n=[];if(e)1!==Math.abs(r[0])||1!==Math.abs(r[1])?n.push([r,[-1,-1]],[r,[-1,1]],[r,[1,-1]],[r,[1,1]]):n.push([r,[t[0],-t[1]]],[r,[-t[0],t[1]]]),n.push([r,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var a=t[0]?t:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(s){var u=[o*a[0],s*a[1]];r[0]===u[0]&&r[1]===u[1]||n.push([r,u])})})}else t[0]?(1===Math.abs(r[0])?[1]:[1,-1]).forEach(function(o){n.push([[r[0],-1],[o*t[0],-1]],[[r[0],0],[o*t[0],0]],[[r[0],1],[o*t[0],1]])}):t[1]&&(1===Math.abs(r[1])?[1]:[1,-1]).forEach(function(s){n.push([[-1,r[1]],[-1,s*t[1]]],[[0,r[1]],[0,s*t[1]]],[[1,r[1]],[1,s*t[1]]])});return n}(e,i.fixedDirection,n),u=sa(t,r,e,n),l=X(X([],function(t,r,e,n,a,i){return e.map(function(o){var s=o[0],u=o[1],l=gt(r,s),p=gt(r,u),c=n?function(t,r,e,n){var a=function(t,r,e){var n=Ae(t),a=n.left,i=n.top,o=n.right,s=n.bottom,u=e[0],l=e[1],p=j(e,r),c=p[0],f=p[1];Math.abs(c)<Dt&&(c=0),Math.abs(f)<Dt&&(f=0);var d=f>0,v=c>0,h={isBound:!1,offset:0,pos:0},m={isBound:!1,offset:0,pos:0};if(0===c&&0===f)return{vertical:h,horizontal:m};if(0===c)d?s<l&&(m.pos=s,m.offset=l-s):i>l&&(m.pos=i,m.offset=l-i);else if(0===f)v?o<u&&(h.pos=o,h.offset=u-o):a>u&&(h.pos=a,h.offset=u-a);else{var b=f/c,x=e[1]-b*u,S=0,C=0,M=!1;v&&o<=u?(S=b*o+x,C=o,M=!0):!v&&u<=a&&(S=b*a+x,C=a,M=!0),M&&(S<i||S>s)&&(M=!1),M||(d&&s<=l?(C=((S=s)-x)/b,M=!0):!d&&l<=i&&(C=((S=i)-x)/b,M=!0)),M&&(h.isBound=!0,h.pos=C,h.offset=u-C,m.isBound=!0,m.pos=S,m.offset=l-S)}return{vertical:h,horizontal:m}}(t,r,e),i=a.horizontal,o=a.vertical,s=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,r,e){var n=e[0],a=e[1],i=r[0],o=r[1],s=j(e,r),u=s[0],l=s[1],p=l>0,c=u>0;u=Te(u),l=Te(l);var f={isSnap:!1,offset:0,pos:0},d={isSnap:!1,offset:0,pos:0};if(0===u&&0===l)return{vertical:f,horizontal:d};var v=Pe(t,u?[n]:[],l?[a]:[]),h=v.vertical,m=v.horizontal;h.posInfos.filter(function(A){var z=A.pos;return c?z>=i:z<=i}),m.posInfos.filter(function(A){var z=A.pos;return p?z>=o:z<=o}),h.isSnap=h.posInfos.length>0,m.isSnap=m.posInfos.length>0;var b=ia(h),x=b.isSnap,S=b.guideline,C=ia(m),M=C.isSnap,E=C.guideline,_=M?E.pos[1]:0,w=x?S.pos[0]:0;if(0===u)M&&(d.isSnap=!0,d.pos=E.pos[1],d.offset=a-d.pos);else if(0===l)x&&(f.isSnap=!0,f.pos=w,f.offset=n-w);else{var y=l/u,D=e[1]-y*n,P=0,O=0,T=!1;x?(P=y*(O=w)+D,T=!0):M&&(O=((P=_)-D)/y,T=!0),T&&(f.isSnap=!0,f.pos=O,f.offset=n-O,d.isSnap=!0,d.pos=P,d.offset=a-P)}return{vertical:f,horizontal:d}}(t,r,e),u=s.horizontal,l=s.vertical,p=Gs(i,u),c=Gs(o,l),f=Math.abs(p),d=Math.abs(c);return{horizontal:{isBound:i.isBound,isSnap:u.isSnap,offset:p,dist:f},vertical:{isBound:o.isBound,isSnap:l.isSnap,offset:c,dist:d}}}(t,l,p,a):Be(t,a,{vertical:[p[0]],horizontal:[p[1]]}),f=c.horizontal,d=f.offset,v=f.isBound,h=f.isSnap,m=c.vertical,b=m.offset,x=m.isBound,S=m.isSnap,C=j(u,s);if(!b&&!d)return{isBound:x||v,isSnap:S||h,sign:C,offset:[0,0]};var M=function(t,r,e,n){var a=ht(t,r)/Math.PI*180,i=e.vertical,l=e.horizontal,d=a%180,v=d<3||d>177,h=d>87&&d<93;return l.dist<i.dist&&(i.isBound||i.isSnap&&!h&&(!n||!v))?"vertical":!l.isBound&&(!l.isSnap||v||n&&h)?"":"horizontal"}(l,p,c,n);if(!M)return{sign:C,isBound:!1,isSnap:!1,offset:[0,0]};var E="vertical"===M,_=[0,0];return _=(_=n||1!==Math.abs(u[0])||1!==Math.abs(u[1])||s[0]===u[0]||s[1]===u[1]?fa(l,p,-(E?b:d),E,i).offset:Zt({datas:i,distX:-b,distY:-d})).map(function(w,y){return w*(C[y]?2/C[y]:0)}),{sign:C,isBound:E?x:v,isSnap:E?S:h,offset:_}})}(t,r,s,n,a,i),!0),ws(t,u,i),!0),p=ze(l,0),c=ze(l,1);return{width:{isBound:p.isBound,offset:p.offset[0]},height:{isBound:c.isBound,offset:c.offset[1]}}}function Fs(t,r,e,n,a,i,o,s){for(var u=Rt(t.state),l=t.props.keepRatio,p=0,c=0,f=0;f<2;++f){var v=xp(t,r(p,c),a,l,o,s),h=v.width,m=v.height,b=h.isBound,x=m.isBound,S=h.offset,C=m.offset;if(1===f&&(b||(S=0),x||(C=0)),0===f&&o&&!b&&!x)return[0,0];if(l){var M=Math.abs(S)*(e?1/e:1),E=Math.abs(C)*(n?1/n:1);(b&&x?M<E:x||!b&&M<E)?S=e*C/n:C=n*S/e}p+=S,c+=C}if(a[0]&&a[1]){var w=function(t,r,e,n,a){var i=[-e[0],-e[1]],o=t.state,s=o.width,u=o.height,l=t.props.bounds,p=1/0,c=1/0;if(l){var d=l.left,v=void 0===d?-1/0:d,h=l.top,m=void 0===h?-1/0:h,b=l.right,x=void 0===b?1/0:b,S=l.bottom,C=void 0===S?1/0:S;[[e[0],-e[1]],[-e[0],e[1]]].forEach(function(M){var E=M[0]!==i[0],_=M[1]!==i[1],w=gt(r,M),y=360*ht(n,w)/Math.PI;if(_){var D=w.slice();(Math.abs(y-360)<2||Math.abs(y-180)<2)&&(D[1]=n[1]);var P=fa(n,D,(n[1]<w[1]?C:m)-w[1],!1,a),T=P.offset[1],A=P.isOutside;isNaN(T)||(c=u+(A?1:-1)*Math.abs(T))}if(E){D=w.slice(),(Math.abs(y-90)<2||Math.abs(y-270)<2)&&(D[0]=n[0]);var z=fa(n,D,(n[0]<w[0]?x:v)-w[0],!0,a),B=z.offset[0],k=z.isOutside;isNaN(B)||(p=s+(k?1:-1)*Math.abs(B))}})}return{maxWidth:p,maxHeight:c}}(t,u,a,i,s),y=w.maxWidth,D=w.maxHeight,P=function(t,r,e,n,a,i,o,s,u){var l=gt(r,o),p=Be(t,s,{vertical:[l[0]],horizontal:[l[1]]}),c=p.horizontal.offset,f=p.vertical.offset;if(f||c){var d=Zt({datas:u,distX:-f,distY:-c}),h=d[1];return[Math.min(a||1/0,e+o[0]*d[0])-e,Math.min(i||1/0,n+o[1]*h)-n]}return[0,0]}(t,r(p,c).map(function(A){return A.map(function(z){return J(z,1e-4)})}),e+p,n+c,y,D,a,o,s);p+=S=P[0],c+=C=P[1]}return[p,c]}function Ns(t){var r=[];return t.forEach(function(e){e.guidelineInfos.forEach(function(n){var a=n.guideline;r.indexOf(a)>-1||r.push(a)})}),r}function Ls(t,r,e,n,a,i){var o=ua(Ae(t,i),r,e),u=o.horizontal;o.vertical.forEach(function(f){f.isBound&&n.push({type:"bounds",pos:f.pos})}),u.forEach(function(f){f.isBound&&a.push({type:"bounds",pos:f.pos})});var l=function(t){var r=t.props.innerBounds;if(!r)return{vertical:[],horizontal:[]};var e=t.getRect(),s=[e.pos1,e.pos2,e.pos3,e.pos4],u=gt(s,[0,0]),l=r.left,p=r.top,c=r.width,f=r.height,d=[[l,p],[l,p+f]],v=[[l,p],[l+c,p]],h=[[l+c,p],[l+c,p+f]],m=[[l,p+f],[l+c,p+f]],b=sa(t,s,[0,0],!1),x=[],S=[],C={top:!1,bottom:!1,left:!1,right:!1};return b.forEach(function(M){var E=M.line,_=M.lineConstants,w=Ms(u,E),y=w.horizontal,D=w.vertical,P=nr(E,_,v,D,1,!0),O=nr(E,_,m,D,1,!0),T=nr(E,_,d,y,1,!0),A=nr(E,_,h,y,1,!0);P.isBound&&!C.top&&(x.push(p),C.top=!0),O.isBound&&!C.bottom&&(x.push(p+f),C.bottom=!0),T.isBound&&!C.left&&(S.push(l),C.left=!0),A.isBound&&!C.right&&(S.push(l+c),C.right=!0)}),{horizontal:x,vertical:S}}(t),c=l.horizontal;l.vertical.forEach(function(f){jt(n,function(d){return"bounds"===d.type&&d.pos===f})>=0||n.push({type:"bounds",pos:f})}),c.forEach(function(f){jt(a,function(d){return"bounds"===d.type&&d.pos===f})>=0||a.push({type:"bounds",pos:f})})}var yp=ra("",["resizable","scalable"]),Dp={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function,maxSnapElementGuidelineDistance:Number,maxSnapElementGapDistance:Number},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(t,r){var e=t.state,n=e.top,a=e.left,i=e.pos1,o=e.pos2,s=e.pos3,u=e.pos4,l=e.snapRenderInfo;if(!l||!Rr(t,""))return[];e.guidelines=ca(t);var p=Math.min(i[0],o[0],s[0],u[0]),c=Math.min(i[1],o[1],s[1],u[1]),f=l.externalPoses||[],d=Rt(t.state),v=[],h=[],m=[],b=[],x=[],S=Bt(d),C=S.width,M=S.height,E=S.top,_=S.left,w=S.bottom,y=S.right,D={left:_,right:y,top:E,bottom:w,center:(_+y)/2,middle:(E+w)/2},P=f.length>0,O=P?Bt(f):{};if(!l.request){if(l.direction&&x.push(function(t,r,e){var n=[];if(e[0]&&e[1])n=[e,[-e[0],e[1]],[e[0],-e[1]]].map(function(o){return gt(r,o)});else if(e[0]||e[1])t.props.keepRatio?n=[[-1,-1],[-1,1],[1,-1],[1,1],e].map(function(o){return gt(r,o)}):(n=function(t,r){return Ko(r).map(function(e){return t[e]})}(r,e)).length>1&&n.push([(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]);else for(var a=[r[0],r[1],r[3],r[2],r[0]],i=0;i<4;++i)n.push(a[i]),n.push([(a[i][0]+a[i+1][0])/2,(a[i][1]+a[i+1][1])/2]);return Pe(t,n.map(function(o){return o[0]}),n.map(function(o){return o[1]}),1)}(t,d,l.direction)),l.snap){var T=Bt(d);l.center&&(T.middle=(T.top+T.bottom)/2,T.center=(T.left+T.right)/2),x.push(Cs(t,T,1))}P&&(l.center&&(O.middle=(O.top+O.bottom)/2,O.center=(O.left+O.right)/2),x.push(Cs(t,O,1))),x.forEach(function(k){var W=k.vertical.posInfos,G=k.horizontal.posInfos;v.push.apply(v,W.filter(function(I){return I.guidelineInfos.some(function(V){return!V.guideline.hide})}).map(function(I){return{type:"snap",pos:I.pos}})),h.push.apply(h,G.filter(function(I){return I.guidelineInfos.some(function(V){return!V.guideline.hide})}).map(function(I){return{type:"snap",pos:I.pos}})),m.push.apply(m,Ns(W)),b.push.apply(b,Ns(G))})}Ls(t,[_,y],[E,w],v,h),P&&Ls(t,[O.left,O.right],[O.top,O.bottom],v,h,l.externalBounds);var A=X(X([],m,!0),b,!0),z=A.filter(function(k){return k.element&&!k.gapRects}),B=A.filter(function(k){return k.gapRects}).sort(function(k,W){return k.gap-W.gap});return N(t,"onSnap",{guidelines:A.filter(function(k){return!k.element}),elements:z,gaps:B},!0),X(X(X(X(X(X([],function(t,r,e,n,a){var i=t.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(s){var u=r.filter(function(m){return m.type===s}),l="vertical"===s?1:0,p=l?0:1,c=function(t,r,e,n){var a="vertical"===t?0:1,i="vertical"===t?1:0,o=a?rr:er,s=e[o.start],u=e[o.end];return function(t,r){var e=[],n=[];return t.forEach(function(a,i){var o=r(a),s=n.indexOf(o),u=e[s]||[];-1===s&&(n.push(o),e.push(u)),u.push(a)}),e}(r,function(l){return l.pos[a]}).map(function(l){var p=[],c=[];return l.forEach(function(d){var v,h,m=d.element,b=d.elementRect.rect;if(b[o.end]<s)p.push(d);else if(u<b[o.start])c.push(d);else if(b[o.start]<=s&&u<=b[o.end]&&n){var x=d.pos,S={element:m,rect:R(R({},b),(v={},v[o.end]=b[o.start],v))},C={element:m,rect:R(R({},b),(h={},h[o.start]=b[o.end],h))},M=[0,0],E=[0,0];M[a]=x[a],M[i]=x[i],E[a]=x[a],E[i]=x[i]+d.size,p.push({type:t,pos:M,size:0,elementRect:S}),c.push({type:t,pos:E,size:0,elementRect:C})}}),p.sort(function(d,v){return v.pos[i]-d.pos[i]}),c.sort(function(d,v){return d.pos[i]-v.pos[i]}),{total:l,start:p,end:c,inner:[]}})}(s,u,n,i),f=l?er:rr,d=l?rr:er,v=n[f.start],h=n[f.end];c.forEach(function(m){var S=m.end,C=m.inner,M=e[p]+m.total[0].pos[p]-n[d.start],E=n;m.start.forEach(function(_){var w=_.elementRect.rect,y=E[f.start]-w[f.end];if(y>0){var D=[0,0];D[l]=e[l]+E[f.start]-v-y,D[p]=M,o.push(ee(t,s,"dashed",o.length,y,D,_.className,a))}E=w}),E=n,S.forEach(function(_){var w=_.elementRect.rect,y=w[f.start]-E[f.end];if(y>0){var D=[0,0];D[l]=e[l]+E[f.end]-v,D[p]=M,o.push(ee(t,s,"dashed",o.length,y,D,_.className,a))}E=w}),C.forEach(function(_){var w=_.elementRect.rect,y=v-w[f.start],D=w[f.end]-h,P=[0,0],O=[0,0];P[l]=e[l]-y,P[p]=M,O[l]=e[l]+h-v,O[p]=M,o.push(ee(t,s,"dashed",o.length,y,P,_.className,a)),o.push(ee(t,s,"dashed",o.length,D,O,_.className,a))})})}),o}(t,z,[p,c],D,r),!0),function(t,r,e,n,a){var i=[];return["horizontal","vertical"].forEach(function(o){var s=r.filter(function(m){return m.type===o}).slice(0,1),u="vertical"===o?0:1,l=u?0:1,p=u?er:rr,c=u?rr:er,f=n[p.start],d=n[p.end],v=n[c.start],h=n[c.end];s.forEach(function(m){var b=m.gap,x=m.gapRects,S=Math.max.apply(Math,X([v],x.map(function(E){return E.rect[c.start]}),!1)),C=Math.min.apply(Math,X([h],x.map(function(E){return E.rect[c.end]}),!1)),M=(S+C)/2;S===C||M===(v+h)/2||x.forEach(function(E){var _=E.rect,w=E.className,y=[e[0],e[1]];if(_[p.end]<f)y[u]+=_[p.end]-f;else{if(!(d<_[p.start]))return;y[u]+=_[p.start]-f-b}y[l]+=M-v,i.push(ee(t,u?"vertical":"horizontal","gap",i.length,b,y,w,a))})})}),i}(t,B,[p,c],D,r),!0),zs(t,"horizontal",b,[a,n],D,r),!0),zs(t,"vertical",m,[a,n],D,r),!0),Ps(t,"horizontal",h,p,n,C,0,r),!0),Ps(t,"vertical",v,c,a,M,1,r),!0)},dragStart:function(t,r){t.state.snapRenderInfo={request:r.isRequest,snap:!0,center:!0},pa(t)},drag:function(t){t.state.guidelines=ca(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,r){return!(!yp(t,r)&&!ma(t,r))||(!r.isRequest&&r.inputEvent?Ct(r.inputEvent.target,Y("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,pa(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,r){this.dragStart(t,r)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,pa(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var r=t.state;r.enableSnap=!1,r.guidelines=[],r.snapRenderInfo=null,r.elementRects=[]}};function Ws(t,r,e,n){var a=t.state,i=a.renderPoses,o=a.rotation,s=a.direction,u=gr(t.props,r).zoom,l=s>0?1:-1,p=o/Math.PI*180,c={},f=t.renderState;f.renderDirectionMap||(f.renderDirectionMap={});var d=f.renderDirectionMap;return e.forEach(function(v){c[v.dir]=!0}),e.map(function(v){var h=v.data,m=v.classNames,b=v.dir,x=Hn[b];if(!x||!c[b])return null;d[b]=!0;var S=(J(p,15)+l*jo[b]+720)%180,C={};return xr(h).forEach(function(M){C["data-".concat(M)]=h[M]}),n.createElement("div",R({className:Y.apply(void 0,X(["control","direction",b,r],m,!1)),"data-rotation":S,"data-direction":b},C,{key:"direction-".concat(b),style:Jn.apply(void 0,X([o,u],x.map(function(M){return i[M]}),!1))}))})}function Ys(t,r,e,n){var a=gr(t.props,e).renderDirections,i=void 0===a?r:a;return i?Ws(t,e,(!0===i?Yn:i).map(function(s){return{data:{},classNames:[],dir:s}}),n):[]}function Ie(t,r,e,n,a,i){for(var o=[],s=6;s<arguments.length;s++)o[s-6]=arguments[s];var u=ht(e,n),l=r?J(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line".concat(i),className:Y.apply(void 0,X(["line","direction",r?"edge":"",r],o,!1)),"data-rotation":l,"data-line-index":i,"data-direction":r,style:Kr(e,n,a,u)})}function Hs(t,r,e,n,a){return(!0===e?ac:e).map(function(o,s){var u=Hn[o],p=u[1];if(null!=p)return Ie(t,o,n[u[0]],n[p],a,"".concat(r,"Edge").concat(s),r)}).filter(Boolean)}function Xs(t){return function(r,e){var n=gr(r.props,t).edge;return n&&(!0===n||n.length)?X(X([],Hs(e,t,n,r.state.renderPoses,r.props.zoom),!0),function(t,r,e){return Ys(t,["nw","ne","sw","se"],r,e)}(r,t,e),!0):Vs(r,t,e)}}function Vs(t,r,e){return Ys(t,Yn,r,e)}var wt={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,r){var e=t.props,a=e.zoom,i=t.state,o=i.dragInfo,s=i.beforeOrigin;if(!e.throttleDragRotate||!o)return[];var u=o.dist;if(!u[0]&&!u[1])return[];var l=Lt(u),p=ht(u,[0,0]);return[r.createElement("div",{className:Y("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(l,"px"),transform:"translate(".concat(s[0],"px, ").concat(s[1],"px) rotate(").concat(p,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,r){var e=r.datas,n=r.parentEvent,i=t.state,o=i.target,s=i.gestos;if(s.draggable)return!1;s.draggable=r.parentGesto||t.targetGesto;var u=It(o);e.datas={},e.left=parseFloat(u.left||"")||0,e.top=parseFloat(u.top||"")||0,e.bottom=parseFloat(u.bottom||"")||0,e.right=parseFloat(u.right||"")||0,e.startValue=[0,0],vr(t,r),Ee(r,"translate"),function(t,r){r.absolutePoses=Rt(t.state)}(t,e),e.prevDist=[0,0],e.prevBeforeDist=[0,0],e.isDrag=!1,e.deltaOffset=[0,0];var l=q(t,r,R({set:function(c){e.startValue=c}},_e(r)));return!1!==(n||N(t,"onDragStart",l))?(e.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,e.isPinch=!1),!!e.isDrag&&l},drag:function(t,r){if(r){Se(r,"translate");var e=r.datas,n=r.parentEvent,a=r.parentFlag,i=r.isPinch,o=r.isRequest,s=r.deltaOffset,u=r.distX,l=r.distY,c=e.prevDist,f=e.prevBeforeDist,d=e.startValue;if(e.isDrag){s&&(u+=s[0],l+=s[1]);var v=t.props,h=v.parentMoveable,m=n?0:v.throttleDrag||0,b=n?0:v.throttleDragRotate||0,x=!1,S=0;if(!n&&b>0&&(u||l)){var C=v.startDragRotate||0,M=J(C+180*ht([0,0],[u,l])/Math.PI,b)-C,E=l*Math.abs(Math.cos((M-90)/180*Math.PI)),w=Lt([u*Math.abs(Math.cos(M/180*Math.PI)),E]);S=M*Math.PI/180,u=w*Math.cos(S),l=w*Math.sin(S)}if(!i&&!n&&!a&&(!b||u||l)){var y=fp(t,u,l,b,o||s,e),D=y[0],P=y[1];x=D.isSnap||P.isSnap||D.isBound||P.isBound,u+=D.offset,l+=P.offset}var W=K($o({datas:e,distX:u,distY:l}),d),G=K(function(t){var r=t.datas,a=$o({datas:r,distX:t.distX,distY:t.distY});return Mt(Jo(r,function(t,r){for(var e=pt(4),n=0;n<3;++n)e[12+n]=t[n]||0;return e}([a[0],a[1]])),fr([0,0,0],4),4)}({datas:e,distX:u,distY:l}),d);!b&&!x&&(ce(G,m),ce(W,m)),ce(G,Dt),ce(W,Dt);var I=j(W,d),L=j(G,d),V=j(L,c),nt=j(I,f);e.prevDist=L,e.prevBeforeDist=I,e.passDelta=V,e.passDist=L;var U=e.left+I[0],tt=e.top+I[1],Q=e.right-I[0],at=e.bottom-I[1],ft=Ce(e,"translate(".concat(G[0],"px, ").concat(G[1],"px)"),"translate(".concat(L[0],"px, ").concat(L[1],"px)"));if(Vn(r,ft),t.state.dragInfo.dist=n?[0,0]:L,n||h||!V.every(function($){return!$})||!nt.some(function($){return!$})){var it=t.state,St=q(t,r,R({transform:ft,dist:L,delta:V,translate:G,beforeDist:I,beforeDelta:nt,beforeTranslate:W,left:U,top:tt,right:Q,bottom:at,width:it.width,height:it.height,isPinch:i},te({transform:ft},r)));return!n&&N(t,"onDrag",St),St}}}},dragAfter:function(t,r){var e=r.datas,n=e.deltaOffset;return!(!n[0]&&!n[1])&&(e.deltaOffset=[0,0],this.drag(t,R(R({},r),{deltaOffset:n})))},dragEnd:function(t,r){var e=r.parentEvent,n=r.datas;if(t.state.dragInfo=null,n.isDrag){n.isDrag=!1;var a=zt(t,r,{});return!e&&N(t,"onDragEnd",a),a}},dragGroupStart:function(t,r){var e=r.datas,n=r.clientX,a=r.clientY,i=this.dragStart(t,r);if(!i)return!1;var o=ea(t,this,"dragStart",[n||0,a||0],r,!1,"draggable"),u=N(t,"onDragGroupStart",R(R({},i),{targets:t.props.targets,events:o}));return e.isDrag=!1!==u,!!e.isDrag&&i},dragGroup:function(t,r){if(r.datas.isDrag){var n=this.drag(t,r),i=ea(t,this,"drag",r.datas.passDelta,r,!1,"draggable");if(n){var o=R({targets:t.props.targets,events:i},n);return N(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,r){var e=r.isDrag;if(r.datas.isDrag){this.dragEnd(t,r);var a=ea(t,this,"dragEnd",[0,0],r,!1,"draggable");return N(t,"onDragGroupEnd",zt(t,r,{targets:t.props.targets,events:a})),e}},request:function(t){var r={},e=t.getRect(),n=0,a=0;return{isControl:!1,requestStart:function(){return{datas:r}},request:function(i){return"x"in i?n=i.x-e.left:"deltaX"in i&&(n+=i.deltaX),"y"in i?a=i.y-e.top:"deltaY"in i&&(a+=i.deltaY),{datas:r,distX:n,distY:a}},requestEnd:function(){return{datas:r,isDrag:!0}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}},Zs=ra("resizable"),da={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function,keepRatioFinally:Boolean,edge:Boolean},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:Xs("resizable"),dragControlCondition:Zs,dragControlStart:function(t,r){var e,a=r.isPinch,i=r.isGroup,s=r.parentGesto,u=r.datas,l=r.parentFixedDirection,p=r.parentEvent,c=r.parentDirection||(a?[0,0]:$n(r.inputEvent.target)),f=t.state,v=f.width,h=f.height,m=f.gestos;if(!c||!f.target||m.resizable)return!1;m.resizable=s||t.controlGesto,!a&&vr(t,r),u.datas={},u.direction=c,u.startOffsetWidth=v,u.startOffsetHeight=h,u.prevWidth=0,u.prevHeight=0,u.minSize=[0,0],u.startWidth=f.cssWidth,u.startHeight=f.cssHeight,u.maxSize=[1/0,1/0],i||(u.minSize=[f.minOffsetWidth,f.minOffsetHeight],u.maxSize=[f.maxOffsetWidth,f.maxOffsetHeight]);var b=t.props.transformOrigin||"% %";function x(w){u.ratio=w&&isFinite(w)?w:0}function S(w){u.fixedDirection=w,u.fixedPosition=gt(u.startPositions,w)}function C(w){u.minSize=[ct("".concat(w[0]),0)||0,ct("".concat(w[1]),0)||0]}function M(w){var y=[w[0]||1/0,w[1]||1/0];(!Je(y[0])||isFinite(y[0]))&&(y[0]=ct("".concat(y[0]),0)||1/0),(!Je(y[1])||isFinite(y[1]))&&(y[1]=ct("".concat(y[1]),0)||1/0),u.maxSize=y}u.transformOrigin=b&&At(b)?b.split(" "):b,u.startOffsetMatrix=f.offsetMatrix,u.startTransformOrigin=f.transformOrigin,u.isWidth=null!==(e=null==r?void 0:r.parentIsWidth)&&void 0!==e?e:!c[0]&&!c[1]||c[0]||!c[1],u.startPositions=Rt(t.state),x(v/h),S(l||[-c[0],-c[1]]),u.setFixedDirection=S,u.setMin=C,u.setMax=M;var E=q(t,r,{direction:c,startRatio:u.ratio,set:function(w){var D=w[1];u.startWidth=w[0],u.startHeight=D},setMin:C,setMax:M,setRatio:x,setFixedDirection:S,setOrigin:function(w){u.transformOrigin=w},dragStart:wt.dragStart(t,(new Mr).dragStart([0,0],r))}),_=p||N(t,"onResizeStart",E);return u.startFixedDirection=u.fixedDirection,!1!==_&&(u.isResize=!0,t.state.snapRenderInfo={request:r.isRequest,direction:c}),!!u.isResize&&E},dragControl:function(t,r){var e,n=r.datas,a=r.parentFlag,i=r.isPinch,o=r.parentKeepRatio,s=r.dragClient,u=r.parentDist,l=r.isRequest,p=r.isGroup,c=r.parentEvent,v=n.transformOrigin,h=n.startWidth,m=n.startHeight,b=n.prevWidth,x=n.prevHeight,S=n.minSize,C=n.maxSize,M=n.ratio,E=n.startOffsetWidth,_=n.startOffsetHeight,w=n.isWidth;if(n.isResize){if(r.resolveMatrix){var D=n.startOffsetMatrix,P=n.startTransformOrigin,O=t.state.is3d?4:3,T=Hr(Qo(r)),A=Math.sqrt(T.length);O!==A&&(T=Vt(T,A,O));var z=$r(D,T,P,O),B=hr(z,E,_,O);n.startPositions=B,n.nextTargetMatrix=T,n.nextAllMatrix=z}var k=gr(t.props,"resizable"),W=k.resizeFormat,G=k.throttleResize,I=void 0===G?a?0:1:G,L=k.parentMoveable,V=k.keepRatioFinally,nt=n.direction,U=nt,tt=0,Q=0;!nt[0]&&!nt[1]&&(U=[1,1]);var at=M&&(null!=o?o:k.keepRatio)||!1,it=ft(),Z=it[0],H=it[1];c||(n.setFixedDirection(n.fixedDirection),N(t,"onBeforeResize",q(t,r,{startFixedDirection:n.startFixedDirection,setFixedDirection:function(mt){var Yt;return n.setFixedDirection(mt),Yt=ft(),[Z=Yt[0],H=Yt[1]]},boundingWidth:Z,boundingHeight:H,setSize:function(mt){Z=mt[0],H=mt[1]}},!0)));var St=s;s||(St=!a&&i?is(t,[0,0]):n.fixedPosition);var $=[0,0];if(i||($=function(t,r,e,n,a,i,o){if(!Rr(t,"resizable"))return[0,0];var s=o.fixedDirection,u=o.nextAllMatrix,l=t.state,p=l.allMatrix,c=l.is3d;return Fs(t,function(f,d){return ks(u||p,r+f,e+d,s,a,c)},r,e,n,a,i,o)}(t,Z,H,nt,St,l,n)),u&&(!u[0]&&($[0]=0),!u[1]&&($[1]=0)),at){U[0]&&U[1]&&$[0]&&$[1]&&(Math.abs($[0])>Math.abs($[1])?$[1]=0:$[0]=0);var rt=!$[0]&&!$[1];rt&&ot(),U[0]&&!U[1]||$[0]&&!$[1]||rt&&w?H=(Z+=$[0])/M:(!U[0]&&U[1]||!$[0]&&$[1]||rt&&!w)&&(Z=(H+=$[1])*M)}else Z+=$[0],H+=$[1],Z=Math.max(0,Z),H=Math.max(0,H);e=function(t,r,e,n){if(!n)return t.map(function(d,v){return tn(d,r[v],e[v])});var a=t[0],i=t[1],o=!0===n?a/i:n,s=Ki(t,r,!1,o),u=s[0],l=s[1],p=Ki(t,e,!0,o),c=p[0],f=p[1];return a<u||i<l?(a=u,i=l):(a>c||i>f)&&(a=c,i=f),[a,i]}([Z,H],S,C,!!at&&M),Z=e[0],H=e[1],ot(),at&&(p||V)&&(w?H=Z/M:Z=H*M);var dt=[(tt=Z-E)-b,(Q=H-_)-x];n.prevWidth=tt,n.prevHeight=Q;var vt=function(t,r,e,n,a,i){var o=t.props.groupable,s=t.state,l=s.offsetMatrix,d=s.left,v=s.top,h=i.fixedDirection,m=i.nextTargetMatrix||s.targetMatrix,b=s.is3d?4:3,x=function(t,r,e,n,a,i){return void 0===n&&(n=r),void 0===a&&(a=e),void 0===i&&(i=[0,0]),t?t.map(function(o,s){var u=Ir(o),l=u.value,p=u.unit,c=s?a:n,f=s?e:r;return"%"===o||isNaN(l)?f*(c?i[s]/c:0):"%"!==p?l:f*l/100}):i}(a,r,e,s.width,s.height,s.transformOrigin),S=o?d:0,C=o?v:0;return j(function(t,r,e,n,a,i){var s=gt(hr(r,e,n,a),i);return[t[0]-s[0],t[1]-s[1]]}(n,$r(l,m,x,b),r,e,b,h),[S,C])}(t,Z,H,St,v,n);if(L||!dt.every(function(mt){return!mt})||!vt.every(function(mt){return!mt})){var lt=wt.drag(t,Jr(r,t.state,vt,!!i,!1,"draggable")),et=lt.transform,Tt=h+tt,ir=m+Q,He=q(t,r,R({width:Tt,height:ir,offsetWidth:Math.round(Z),offsetHeight:Math.round(H),startRatio:M,boundingWidth:Z,boundingHeight:H,direction:nt,dist:[tt,Q],delta:dt,isPinch:!!i,drag:lt},vs({style:{width:"".concat(Tt,"px"),height:"".concat(ir,"px")},transform:et},lt,r)));return!c&&N(t,"onResize",He),He}}function ft(){var mt=n.fixedDirection,Yt=xs(U,at,n,r);tt=Yt.distWidth,Q=Yt.distHeight;var zr=U[0]-mt[0]||at?Math.max(E+tt,Dt):E,Ar=U[1]-mt[1]||at?Math.max(_+Q,Dt):_;return at&&E&&_&&(w?Ar=zr/M:zr=Ar*M),[zr,Ar]}function ot(){var mt;W&&(mt=W([Z,H]),Z=mt[0],H=mt[1]),Z=J(Z,I),H=J(H,I)}},dragControlAfter:function(t,r){var e=r.datas;if(e.isResize){var u=t.state,c=u.width-(e.startOffsetWidth+e.prevWidth),f=u.height-(e.startOffsetHeight+e.prevHeight),d=Math.abs(c)>3,v=Math.abs(f)>3;if(d&&(e.startWidth+=c,e.startOffsetWidth+=c,e.prevWidth+=c),v&&(e.startHeight+=f,e.startOffsetHeight+=f,e.prevHeight+=f),d||v)return this.dragControl(t,r)}},dragControlEnd:function(t,r){var e=r.datas,n=r.parentEvent;if(e.isResize){e.isResize=!1;var a=zt(t,r,{});return!n&&N(t,"onResizeEnd",a),a}},dragGroupControlCondition:Zs,dragGroupControlStart:function(t,r){var e=r.datas,n=this.dragControlStart(t,R(R({},r),{isGroup:!0}));if(!n)return!1;var a=tr(t,"resizable",r);function i(v,h){var m=e.fixedDirection,b=e.fixedPosition,S=gt(h.datas.startPositions||Rt(v.state),m),C=Mt(Sr(-t.rotation/180*Math.PI,3),[S[0]-b[0],S[1]-b[1],1],3),E=C[1];return h.datas.originalX=C[0],h.datas.originalY=E,h}var o=e.startOffsetWidth,s=e.startOffsetHeight;function u(){var v=e.minSize;a.forEach(function(h){var m=h.datas,b=m.minSize,x=m.startOffsetWidth,S=m.startOffsetHeight,M=s*(S?b[1]/S:0);v[0]=Math.max(v[0],o*(x?b[0]/x:0)),v[1]=Math.max(v[1],M)})}function l(){var v=e.maxSize;a.forEach(function(h){var m=h.datas,b=m.maxSize,x=m.startOffsetWidth,S=m.startOffsetHeight,M=s*(S?b[1]/S:0);v[0]=Math.min(v[0],o*(x?b[0]/x:0)),v[1]=Math.min(v[1],M)})}var p=qt(t,this,"dragControlStart",r,function(v,h){return i(v,h)});u(),l();var c=function(v){n.setFixedDirection(v),p.forEach(function(h,m){h.setFixedDirection(v),i(h.moveable,a[m])})};e.setFixedDirection=c;var f=R(R({},n),{targets:t.props.targets,events:p.map(function(v){return R(R({},v),{setMin:function(h){v.setMin(h),u()},setMax:function(h){v.setMax(h),l()}})}),setFixedDirection:c,setMin:function(v){n.setMin(v),u()},setMax:function(v){n.setMax(v),l()}}),d=N(t,"onResizeGroupStart",f);return e.isResize=!1!==d,!!e.isResize&&n},dragGroupControl:function(t,r){var e=r.datas;if(e.isResize){var n=gr(t.props,"resizable");Qn(t,"onBeforeResize",function(d){N(t,"onBeforeResizeGroup",q(t,r,R(R({},d),{targets:n.targets}),!0))});var a=this.dragControl(t,R(R({},r),{isGroup:!0}));if(a){var i=a.boundingWidth,o=a.boundingHeight,s=a.dist,u=n.keepRatio,l=[i/(i-s[0]),o/(o-s[1])],p=e.fixedPosition,c=qt(t,this,"dragControl",r,function(d,v){var h=Mt(Sr(t.rotation/180*Math.PI,3),[v.datas.originalX*l[0],v.datas.originalY*l[1],1],3),m=h[0],b=h[1];return R(R({},v),{parentDist:null,parentScale:l,dragClient:K(p,[m,b]),parentKeepRatio:u})}),f=R({targets:n.targets,events:c},a);return N(t,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,r){var e=r.isDrag;if(r.datas.isResize){this.dragControlEnd(t,r);var a=qt(t,this,"dragControlEnd",r);return N(t,"onResizeGroupEnd",zt(t,r,{targets:t.props.targets,events:a})),e}},request:function(t){var r={},e=0,n=0,a=t.getRect();return{isControl:!0,requestStart:function(i){var o;return{datas:r,parentDirection:i.direction||[1,1],parentIsWidth:null===(o=null==i?void 0:i.horizontal)||void 0===o||o}},request:function(i){return"offsetWidth"in i?e=i.offsetWidth-a.offsetWidth:"deltaWidth"in i&&(e+=i.deltaWidth),"offsetHeight"in i?n=i.offsetHeight-a.offsetHeight:"deltaHeight"in i&&(n+=i.deltaHeight),{datas:r,parentDist:[e,n],parentKeepRatio:i.keepRatio}},requestEnd:function(){return{datas:r,isDrag:!0}}}},unset:function(t){t.state.gestos.resizable=null}};function va(t,r,e,n,a){var o=t.state,s=o.is3d?4:3,u=r.origin,l=_t(t.state.rootMatrix,j([u[0],u[1]],t.props.groupable?[0,0]:[o.left,o.top]),s),p=K([a.left,a.top],l);r.startAbsoluteOrigin=p,r.prevDeg=ht(p,[e,n])/Math.PI*180,r.defaultDeg=r.prevDeg,r.prevSnapDeg=0,r.loop=0,r.startDist=Ft(p,[e,n])}function ke(t,r,e){var n=e.defaultDeg,a=e.prevDeg,i=a%360,o=Math.floor(a/360);i<0&&(i+=360),i>t&&i>270&&t<90?++o:i<t&&i<90&&t>270&&--o;var s=r*(360*o+t-n);return e.prevDeg=n+s,s}function ha(t,r,e,n){return ke(ht(n.startAbsoluteOrigin,[t,r])/Math.PI*180,e,n)}function ga(t,r,e,n,a,i){var o=t.props.throttleRotate,s=void 0===o?0:o,u=n,l=e.prevSnapDeg;i&&(u=function(t,r,e,n){if(!Rr(t,"rotatable"))return n;var u=n*Math.PI/180,l=[r.pos1,r.pos2,r.pos3,r.pos4].map(function(f){return j(f,e)}),p=l.map(function(f){return Qt(f,u)}),c=X(X([],function(t,r,e,n,a){if(!t.props.bounds)return[];var i=a*Math.PI/180,o=Ae(t),c=o.left-n[0],f=o.right-n[0],d=o.top-n[1],v=o.bottom-n[1],h={left:c,top:d,right:f,bottom:v};if(!Ts(e,h,0))return[];var m=[];return[[c,0],[f,0],[d,1],[v,1]].forEach(function(b){var x=b[0],S=b[1];e.forEach(function(C){var M=ht([0,0],C);m.push.apply(m,function(t,r,e){var n=Lt(t),a=Math.sqrt(n*n-r*r)||0;return[a,-a].sort(function(i,o){return Math.abs(i-t[e?0:1])-Math.abs(o-t[e?0:1])}).map(function(i){return ht([0,0],e?[i,r]:[r,i])})}(C,x,S).map(function(E){return i+E-M}).filter(function(E){return!Ts(r,h,E)}).map(function(E){return J(180*E/Math.PI,Dt)}))})}),m}(t,l,p,e,n),!0),function(t,r,e,n,a){var i=t.props.innerBounds,o=a*Math.PI/180;if(!i)return[];var s=i.left,u=i.top,c=s-n[0],f=s+i.width-n[0],d=u-n[1],v=u+i.height-n[1],h=[[c,d],[f,d],[c,v],[f,v]],m=gt(e,[0,0]);if(!Os(e,h,m,0))return[];var b=[],x=h.map(function(S){return[Lt(S),ht([0,0],S)]});return[[e[0],e[1]],[e[1],e[3]],[e[3],e[2]],[e[2],e[0]]].forEach(function(S){var C=ht([0,0],function(t){var r=t[0],e=t[1],n=e[0]-r[0],a=e[1]-r[1];if(!n)return[r[0],0];if(!a)return[0,r[1]];var i=a/n,o=-i*r[0]+r[1];return[-o/(i+1/i),o/(i*i+1)]}(S)),M=function(t){var r=t[0],e=t[1],n=e[0]-r[0],a=e[1]-r[1];if(!n)return Math.abs(r[0]);if(!a)return Math.abs(r[1]);var i=a/n;return Math.abs((-i*r[0]+r[1])/Math.sqrt(Math.pow(i,2)+1))}(S);b.push.apply(b,x.filter(function(E){var _=E[0];return _&&M<=_}).map(function(E){var _=E[0],w=E[1],y=Math.acos(_?M/_:0);return[o+(w+y)-C,o+(w-y)-C]}).reduce(function(E,_){return E.push.apply(E,_),E},[]).filter(function(E){return!Os(r,h,m,E)}).map(function(E){return J(180*E/Math.PI,Dt)}))}),b}(t,l,p,e,n),!0);return c.sort(function(f,d){return Math.abs(f-n)-Math.abs(d-n)}),c.length?c[0]:n}(t,r,e.origin,u));var p=J(a+u,s),c=p-a;return e.prevSnapDeg=c,[c-l,u,p]}function ma(t,r){if(r.isRequest)return"rotatable"===r.requestAble;var e=r.inputEvent.target;if(Ct(e,Y("rotation-control"))||Ct(e,Y("around-control"))||Ct(e,Y("control"))&&Ct(e,Y("rotatable")))return!0;var n=t.props.rotationTarget;return!!n&&gs(n,!0).some(function(a){return!!a&&(e===a||e.contains(a))})}var Tp=Yn.map(function(t){var r="",e="",n="center",a="center";return t.indexOf("n")>-1&&(r="top: -20px;",a="bottom"),t.indexOf("s")>-1&&(r="top: 0px;",a="top"),t.indexOf("w")>-1&&(e="left: -20px;",n="right"),t.indexOf("e")>-1&&(e="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(t,'"] {\n        ').concat(e).concat(r,"\n        transform-origin: ").concat(n," ").concat(a,";\n    }")}).join("\n"),Pp=".rotation {\n    position: absolute;\n    height: 40px;\n    width: 1px;\n    transform-origin: 50% 100%;\n    height: calc(40px * var(--zoom));\n    top: auto;\n    left: 0;\n    bottom: 100%;\n    will-change: transform;\n}\n.rotation .rotation-line {\n    display: block;\n    width: 100%;\n    height: 100%;\n    transform-origin: 50% 50%;\n}\n.rotation .rotation-control {\n    border-color: #4af;\n    border-color: var(--moveable-color);\n    background:#fff;\n    cursor: alias;\n}\n.rotatable.direction.control {\n    cursor: alias;\n}\n.around-control {\n    position: absolute;\n    will-change: transform;\n    width: 20px;\n    height: 20px;\n    left: -10px;\n    top: -10px;\n    box-sizing: border-box;\n    background: transparent;\n    z-index: 8;\n    cursor: alias;\n    transform-origin: center center;\n}\n.rotatable.direction.control.move {\n    cursor: move;\n}\n".concat(Tp,"\n"),zp={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object,rotateAroundControls:Boolean,edge:Boolean,resolveAblesWithRotatable:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[Pp],render:function(t,r){var e=gr(t.props,"rotatable"),i=e.zoom,o=e.renderDirections,s=e.rotateAroundControls,u=e.resolveAblesWithRotatable,l=t.state;if(!e.rotatable)return null;var f=function(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3];if("none"!==t){var s=(t||"top").split("-"),u=s[0],l=s[1],p=[n,a];"left"===u?p=[i,n]:"right"===u?p=[a,o]:"bottom"===u&&(p=[o,i]);var c=[(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2],f=ds(p,e);if(l){var d="top"===l||"left"===l,v="bottom"===u||"left"===u;c=p[d&&!v||!d&&v?0:1]}return[c,f]}}(e.rotationPosition,l.renderPoses,l.direction),d=[];if(f){var v=f[0],h=f[1];d.push(r.createElement("div",{key:"rotation",className:Y("rotation"),style:{transform:"translate(-50%) translate(".concat(v[0],"px, ").concat(v[1],"px) rotate(").concat(h,"rad)")}},r.createElement("div",{className:Y("line rotation-line"),style:{transform:"scaleX(".concat(i,")")}}),r.createElement("div",{className:Y("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(i,")")}})))}if(o){var m=xr(u||{}),b={};m.forEach(function(S){u[S].forEach(function(C){b[C]=S})});var x=[];Ut(o)&&(x=o.map(function(S){var C=b[S];return{data:C?{resolve:C}:{},classNames:C?["move"]:[],dir:S}})),d.push.apply(d,Ws(t,"rotatable",x,r))}return s&&d.push.apply(d,function(t,r){var e=t.renderState;e.renderDirectionMap||(e.renderDirectionMap={});var n=t.state,a=n.renderPoses,i=n.rotation,u=t.props.zoom,l=n.direction>0?1:-1,p=i/Math.PI*180;return xr(e.renderDirectionMap).map(function(c){var f=Hn[c];if(!f)return null;var d=(J(p,15)+l*jo[c]+720)%180;return r.createElement("div",{className:Y("around-control"),"data-rotation":d,"data-direction":c,key:"direction-around-".concat(c),style:Jn.apply(void 0,X([i,u],f.map(function(v){return a[v]}),!1))})})}(t,r)),d},dragControlCondition:ma,dragControlStart:function(t,r){var e,n,a=r.datas,i=r.clientX,o=r.clientY,s=r.parentRotate,u=r.parentFlag,l=r.isPinch,p=r.isRequest,c=t.state,d=c.left,v=c.top,h=c.direction,m=c.beforeDirection,b=c.targetTransform,x=c.moveableClientRect,S=c.offsetMatrix,C=c.targetMatrix,M=c.allMatrix,E=c.width,_=c.height;if(!p&&!c.target)return!1;var w=t.getRect();a.rect=w,a.transform=b,a.left=d,a.top=v;var y=function(U){a.fixedDirection=U,a.fixedPosition=as(t,U),I&&I.setFixedDirection(U)},D=i,P=o;if(p||l||u){var O=s||0;a.beforeInfo={origin:w.beforeOrigin,prevDeg:O,defaultDeg:O,prevSnapDeg:0,startDist:0},a.afterInfo=R(R({},a.beforeInfo),{origin:w.origin}),a.absoluteInfo=R(R({},a.beforeInfo),{origin:w.origin,startValue:O})}else{var T=null===(n=r.inputEvent)||void 0===n?void 0:n.target;if(T){var A=T.getAttribute("data-direction")||"",z=ic[A];if(z){a.isControl=!0,a.isAroundControl=Ct(T,Y("around-control")),a.controlDirection=z;var B=T.getAttribute("data-resolve");B&&(a.resolveAble=B),e=gt(function(t,r,e){var a=16===t.length?4:3,i=r.map(function(u){return _t(t,u,a)}),o=e.left,s=e.top;return i.map(function(u){return[u[0]+o,u[1]+s]})}(c.rootMatrix,c.renderPoses,x),z),D=e[0],P=e[1]}}a.beforeInfo={origin:w.beforeOrigin},a.afterInfo={origin:w.origin},a.absoluteInfo={origin:w.origin,startValue:w.rotation};var W=y;y=function(U){var tt=c.is3d?4:3,Q=gt([[0,0],[E,0],[0,_],[E,_]],U),at=K(So(C,tt),Q),Z=Mt(S,fr([at[0],at[1]],tt)),H=Mt(M,fr([Q[0],Q[1]],tt));W(U),a.beforeInfo.origin=Z,a.afterInfo.origin=H,a.absoluteInfo.origin=H,va(t,a.beforeInfo,D,P,x),va(t,a.afterInfo,D,P,x),va(t,a.absoluteInfo,D,P,x)}}a.startClientX=D,a.startClientY=P,a.direction=h,a.beforeDirection=m,a.startValue=0,a.datas={},Ee(r,"rotate");var G=!1,I=!1;a.isControl&&a.resolveAble&&"resizable"===a.resolveAble&&(I=da.dragControlStart(t,R(R({},new Mr("resizable").dragStart([0,0],r)),{parentDirection:a.controlDirection,parentFixedDirection:a.fixedDirection}))),I||(G=wt.dragStart(t,(new Mr).dragStart([0,0],r))),y(function(t){var r=t.state,a=r.transformOrigin;return[a[0]/(r.width/2)-1,a[1]/(r.height/2)-1]}(t));var V=q(t,r,R(R({set:function(U){a.startValue=U*Math.PI/180},setFixedDirection:y},_e(r)),{dragStart:G,resizeStart:I})),nt=N(t,"onRotateStart",V);return a.isRotate=!1!==nt,c.snapRenderInfo={request:r.isRequest},!!a.isRotate&&V},dragControl:function(t,r){var e,n,a,i=r.datas,o=r.distX,s=r.distY,u=r.parentRotate,l=r.parentFlag,p=r.isPinch,c=r.groupDelta,f=i.beforeDirection,d=i.beforeInfo,v=i.afterInfo,h=i.absoluteInfo,b=i.startValue,x=i.rect,S=i.startClientX,C=i.startClientY;if(i.isRotate){Se(r,"rotate");var w,y,D,P,O,T,A,z,B,E=f*function(t){return De(t.datas.beforeTransform,[50,50],100,100).direction}(r),_=t.props.parentMoveable,k=180/Math.PI*b,W=h.startValue,G=!1,I=S+o,L=C+s;if(!l&&"parentDist"in r){var V=r.parentDist;y=V,O=V,z=V}else p||l?(y=ke(u,f,d),O=ke(u,E,v),z=ke(u,E,h)):(y=ha(I,L,f,d),O=ha(I,L,E,v),z=ha(I,L,E,h),G=!0);if(N(t,"onBeforeRotate",q(t,r,{beforeRotation:k+y,rotation:k+O,absoluteRotation:W+z,setRotation:function(St){y=O=St-k,z=O}},!0)),w=(e=ga(t,x,d,y,k,G))[0],y=e[1],D=e[2],P=(n=ga(t,x,v,O,k,G))[0],O=n[1],T=n[2],a=ga(t,x,h,z,W,G),z=a[1],B=a[2],(A=a[0])||P||w||_){var nt=Ce(i,"rotate(".concat(T,"deg)"),"rotate(".concat(O,"deg)")),U=function(t,r,e){var n=e.fixedDirection,a=e.fixedPosition;return ns(t,"rotate(".concat(r,"deg)"),n,a,e)}(t,O,i),tt=j(K(c||[0,0],U),i.prevInverseDist||[0,0]);i.prevInverseDist=U,i.requestValue=null;var Q=es(t,nt,tt,p,r),at=Q,ft=Ft([I,L],h.startAbsoluteOrigin)-h.startDist,it=void 0;if("resizable"===i.resolveAble){var Z=da.dragControl(t,R(R({},Jr(r,t.state,[r.deltaX,r.deltaY],!!p,!1,"resizable")),{resolveMatrix:!0,parentDistance:ft}));Z&&(it=Z,at=vs(at,Z,r))}var H=q(t,r,R(R({delta:P,dist:O,rotate:T,rotation:T,beforeDist:y,beforeDelta:w,beforeRotate:D,beforeRotation:D,absoluteDist:z,absoluteDelta:A,absoluteRotate:B,absoluteRotation:B,isPinch:!!p,resize:it},Q),at));return N(t,"onRotate",H),H}}},dragControlAfter:function(t,r){},dragControlEnd:function(t,r){var e=r.datas;if(e.isRotate){e.isRotate=!1;var n=zt(t,r,{});return N(t,"onRotateEnd",n),n}},dragGroupControlCondition:ma,dragGroupControlStart:function(t,r){var e=r.datas,n=t.state,a=n.left,i=n.top,o=n.beforeOrigin,s=this.dragControlStart(t,r);if(!s)return!1;s.set(e.beforeDirection*t.rotation);var u=qt(t,this,"dragControlStart",r,function(c,f){var d=c.state,m=d.beforeOrigin,b=K(j([d.left,d.top],[a,i]),j(m,o));return f.datas.groupClient=b,R(R({},f),{parentRotate:0})}),p=N(t,"onRotateGroupStart",R(R({},s),{targets:t.props.targets,events:u}));return e.isRotate=!1!==p,!!e.isRotate&&s},dragGroupControl:function(t,r){var e=r.datas;if(e.isRotate){Qn(t,"onBeforeRotate",function(p){N(t,"onBeforeRotateGroup",q(t,r,R(R({},p),{targets:t.props.targets}),!0))});var n=this.dragControl(t,r);if(n){var a=e.beforeDirection,i=n.beforeDist,s=n.beforeDelta/180*Math.PI,u=qt(t,this,"dragControl",r,function(p,c){var f=c.datas.groupClient,d=f[0],v=f[1],h=Qt([d,v],s*a),m=h[0],b=h[1],x=[m-d,b-v];return c.datas.groupClient=[m,b],R(R({},c),{parentRotate:i,groupDelta:x})});t.rotation=a*n.beforeRotation;var l=R({targets:t.props.targets,events:u,set:function(p){t.rotation=p},setGroupRotation:function(p){t.rotation=p}},n);return N(t,"onRotateGroup",l),l}}},dragGroupControlEnd:function(t,r){var e=r.isDrag;if(r.datas.isRotate){this.dragControlEnd(t,r);var a=qt(t,this,"dragControlEnd",r);return N(t,"onRotateGroupEnd",zt(t,r,{targets:t.props.targets,events:a})),e}},request:function(t){var r={},e=0,n=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:r}},request:function(a){return"deltaRotate"in a?e+=a.deltaRotate:"rotate"in a&&(e=a.rotate-n),{datas:r,parentDist:e}},requestEnd:function(){return{datas:r,isDrag:!0}}}}},js=ra("scalable"),Ap={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean,edge:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:Xs("scalable"),dragControlCondition:js,dragControlStart:function(t,r){var e=r.datas,n=r.isPinch,o=r.parentDirection||(n?[0,0]:$n(r.inputEvent.target)),s=t.state,u=s.width,l=s.height,p=s.targetTransform,f=s.pos1,d=s.pos2,v=s.pos4;if(!o||!s.target)return!1;n||vr(t,r),e.datas={},e.transform=p,e.prevDist=[1,1],e.direction=o,e.startOffsetWidth=u,e.startOffsetHeight=l,e.startValue=[1,1];var h=Ft(f,d),m=Ft(d,v),b=!o[0]&&!o[1]||o[0]||!o[1];function x(E){e.ratio=E&&isFinite(E)?E:0}function S(E){e.fixedDirection=E,e.fixedPosition=gt(e.startPositions,E)}e.scaleWidth=h,e.scaleHeight=m,e.scaleXRatio=h/u,e.scaleYRatio=m/l,Ee(r,"scale"),e.isWidth=b,e.startPositions=Rt(t.state),e.setFixedDirection=S,x(Ft(f,d)/Ft(d,v)),S([-o[0],-o[1]]);var C=q(t,r,R(R({direction:o,set:function(E){e.startValue=E},setRatio:x,setFixedDirection:S},_e(r)),{dragStart:wt.dragStart(t,(new Mr).dragStart([0,0],r))})),M=N(t,"onScaleStart",C);return e.startFixedDirection=e.fixedDirection,!1!==M&&(e.isScale=!0,t.state.snapRenderInfo={request:r.isRequest,direction:o}),!!e.isScale&&C},dragControl:function(t,r){Se(r,"scale");var e=r.datas,n=r.parentKeepRatio,a=r.parentFlag,i=r.isPinch,o=r.dragClient,s=r.isRequest,u=e.prevDist,l=e.direction,p=e.startOffsetWidth,c=e.startOffsetHeight,d=e.startValue,v=e.isWidth,h=e.ratio;if(!e.isScale)return!1;var m=t.props,b=m.throttleScale,x=m.parentMoveable,S=l;!l[0]&&!l[1]&&(S=[1,1]);var C=h&&(null!=n?n:m.keepRatio)||!1,M=t.state;function E(){var L=xs(S,C,e,r),U=(p+L.distWidth)/p,tt=(c+L.distHeight)/c;return 0===(U=S[0]||C?U*d[0]:d[0])&&(U=1e-9*(u[0]>0?1:-1)),0===(tt=S[1]||C?tt*d[1]:d[1])&&(tt=1e-9*(u[1]>0?1:-1)),[U,tt]}var _=E();if(!i&&t.props.groupable){var y=(M.snapRenderInfo||{}).direction;Ut(y)&&(y[0]||y[1])&&(M.snapRenderInfo={direction:l,request:r.isRequest})}N(t,"onBeforeScale",q(t,r,{scale:_,setFixedDirection:function(L){return e.setFixedDirection(L),_=E()},startFixedDirection:e.startFixedDirection,setScale:function(L){_=L}},!0));var D=[_[0]/d[0],_[1]/d[1]],P=o,O=[0,0];if(o||(P=!a&&i?is(t,[0,0]):e.fixedPosition),i||(O=function(t,r,e,n,a){if(!Rr(t,"scalable"))return[0,0];var i=a.startOffsetWidth,o=a.startOffsetHeight,s=a.fixedPosition,u=a.fixedDirection,l=a.is3d,p=Fs(t,function(c,f){return ks(function(t,r){var e=t.transformOrigin,o=t.is3d?4:3;return $r(t.offsetMatrix,st(t.targetMatrix,Eo(r,o),o),e,o)}(a,K(r,[c/i,f/o])),i,o,u,s,l)},i,o,e,s,n,a);return[p[0]/i,p[1]/o]}(t,D,l,s,e)),C){S[0]&&S[1]&&O[0]&&O[1]&&(Math.abs(O[0]*p)>Math.abs(O[1]*c)?O[1]=0:O[0]=0);var T=!O[0]&&!O[1];T&&(v?D[0]=J(D[0]*d[0],b)/d[0]:D[1]=J(D[1]*d[1],b)/d[1]),S[0]&&!S[1]||O[0]&&!O[1]||T&&v?(D[0]+=O[0],D[1]=p*D[0]*d[0]/h/c/d[1]):(!S[0]&&S[1]||!O[0]&&O[1]||T&&!v)&&(D[1]+=O[1],D[0]=c*D[1]*d[1]*h/p/d[0])}else D[0]+=O[0],D[1]+=O[1],O[0]||(D[0]=J(D[0]*d[0],b)/d[0]),O[1]||(D[1]=J(D[1]*d[1],b)/d[1]);0===D[0]&&(D[0]=1e-9*(u[0]>0?1:-1)),0===D[1]&&(D[1]=1e-9*(u[1]>0?1:-1));var B=[D[0]/u[0],D[1]/u[1]];_=function(t,r){return[t[0]*r[0],t[1]*r[1]]}(D,d);var k=function(t,r,e,n,a){return ns(t,"scale(".concat(r.join(", "),")"),e,n,a)}(t,D,e.fixedDirection,P,e),W=j(k,e.prevInverseDist||[0,0]);if(e.prevDist=D,e.prevInverseDist=k,_[0]===u[0]&&_[1]===u[1]&&W.every(function(L){return!L})&&!x)return!1;var G=Ce(e,"scale(".concat(_.join(", "),")"),"scale(".concat(D.join(", "),")")),I=q(t,r,R({offsetWidth:p,offsetHeight:c,direction:l,scale:_,dist:D,delta:B,isPinch:!!i},es(t,G,W,i,r)));return N(t,"onScale",I),I},dragControlEnd:function(t,r){var e=r.datas,n=r.isDrag;return!!e.isScale&&(e.isScale=!1,N(t,"onScaleEnd",zt(t,r,{})),n)},dragGroupControlCondition:js,dragGroupControlStart:function(t,r){var e=r.datas,n=this.dragControlStart(t,r);if(!n)return!1;var a=tr(t,"resizable",r);function i(p,c){var f=e.fixedDirection,d=e.fixedPosition,h=gt(c.datas.startPositions||Rt(p.state),f),m=Mt(Sr(-t.rotation/180*Math.PI,3),[h[0]-d[0],h[1]-d[1],1],3),x=m[1];return c.datas.originalX=m[0],c.datas.originalY=x,c}e.moveableScale=t.scale;var o=qt(t,this,"dragControlStart",r,function(p,c){return i(p,c)}),s=function(p){n.setFixedDirection(p),o.forEach(function(c,f){c.setFixedDirection(p),i(c.moveable,a[f])})};e.setFixedDirection=s;var u=R(R({},n),{targets:t.props.targets,events:o,setFixedDirection:s}),l=N(t,"onScaleGroupStart",u);return e.isScale=!1!==l,!!e.isScale&&u},dragGroupControl:function(t,r){var e=r.datas;if(e.isScale){Qn(t,"onBeforeScale",function(c){N(t,"onBeforeScaleGroup",q(t,r,R(R({},c),{targets:t.props.targets}),!0))});var n=this.dragControl(t,r);if(n){var a=e.moveableScale;t.scale=[n.scale[0]*a[0],n.scale[1]*a[1]];var i=t.props.keepRatio,o=n.dist,s=n.scale,u=e.fixedPosition,l=qt(t,this,"dragControl",r,function(c,f){var d=Mt(Sr(t.rotation/180*Math.PI,3),[f.datas.originalX*o[0],f.datas.originalY*o[1],1],3),v=d[0],h=d[1];return R(R({},f),{parentDist:null,parentScale:s,parentKeepRatio:i,dragClient:K(u,[v,h])})}),p=R({targets:t.props.targets,events:l},n);return N(t,"onScaleGroup",p),p}}},dragGroupControlEnd:function(t,r){var e=r.isDrag;if(r.datas.isScale){this.dragControlEnd(t,r);var a=qt(t,this,"dragControlEnd",r);return N(t,"onScaleGroupEnd",zt(t,r,{targets:t.props.targets,events:a})),e}},request:function(){var t={},r=0,e=0;return{isControl:!0,requestStart:function(n){return{datas:t,parentDirection:n.direction||[1,1]}},request:function(n){return{datas:t,parentDist:[r+=n.deltaWidth,e+=n.deltaHeight],parentKeepRatio:n.keepRatio}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function ar(t,r){return t.map(function(e,n){return sr(e,r[n],1,2)})}function qs(t,r,e){var n=ht(t,r),i=ht(t,e)-n;return i>=0?i:i+2*Math.PI}var Bp={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array,edge:Boolean},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,r){var e=t.props,o=e.zoom;if(e.resizable||e.scalable||!e.warpable)return[];var s=t.state,u=s.pos1,l=s.pos2,p=s.pos3,c=s.pos4,f=ar(u,l),d=ar(l,u),v=ar(u,p),h=ar(p,u),m=ar(p,c),b=ar(c,p),x=ar(l,c),S=ar(c,l);return X([r.createElement("div",{className:Y("line"),key:"middeLine1",style:Kr(f,m,o)}),r.createElement("div",{className:Y("line"),key:"middeLine2",style:Kr(d,b,o)}),r.createElement("div",{className:Y("line"),key:"middeLine3",style:Kr(v,x,o)}),r.createElement("div",{className:Y("line"),key:"middeLine4",style:Kr(h,S,o)})],Vs(t,"warpable",r),!0)},dragControlCondition:function(t,r){if(r.isRequest)return!1;var e=r.inputEvent.target;return Ct(e,Y("direction"))&&Ct(e,Y("warpable"))},dragControlStart:function(t,r){var e=r.datas,a=t.props.target,o=$n(r.inputEvent.target);if(!o||!a)return!1;var s=t.state,u=s.transformOrigin,l=s.is3d,p=s.targetTransform,c=s.targetMatrix,f=s.width,d=s.height,v=s.left,h=s.top;return e.datas={},e.targetTransform=p,e.warpTargetMatrix=l?c:Vt(c,3,4),e.targetInverseMatrix=xo(Xt(e.warpTargetMatrix,4),3,4),e.direction=o,e.left=v,e.top=h,e.poses=[[0,0],[f,0],[0,d],[f,d]].map(function(x){return j(x,u)}),e.nextPoses=e.poses.map(function(x){return Mt(e.warpTargetMatrix,[x[0],x[1],0,1],4)}),e.startValue=pt(4),e.prevMatrix=pt(4),e.absolutePoses=Rt(s),e.posIndexes=Ko(o),vr(t,r),Ee(r,"matrix3d"),s.snapRenderInfo={request:r.isRequest,direction:o},!1!==N(t,"onWarpStart",q(t,r,R({set:function(x){e.startValue=x}},_e(r))))&&(e.isWarp=!0),e.isWarp},dragControl:function(t,r){var e=r.datas,n=r.isRequest,a=r.distX,i=r.distY,o=e.targetInverseMatrix,s=e.prevMatrix,l=e.startValue,p=e.poses,c=e.posIndexes,f=e.absolutePoses;if(!e.isWarp)return!1;if(Se(r,"matrix3d"),Rr(t,"warpable")){var d=c.map(function(y){return f[y]});d.length>1&&d.push([(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2]);var v=Be(t,n,{horizontal:d.map(function(y){return y[1]+i}),vertical:d.map(function(y){return y[0]+a})});i-=v.horizontal.offset,a-=v.vertical.offset}var b=Zt({datas:e,distX:a,distY:i},!0),x=e.nextPoses.slice();if(c.forEach(function(y){x[y]=K(x[y],b)}),!ec.every(function(y){return function(t,r){var e=qs(t[0],t[1],t[2]),n=qs(r[0],r[1],r[2]),a=Math.PI;return!(e>=a&&n<=a||e<=a&&n>=a)}(y.map(function(D){return p[D]}),y.map(function(D){return x[D]}))}))return!1;var S=xn(p[0],p[2],p[1],p[3],x[0],x[2],x[1],x[3]);if(!S.length)return!1;var M=Jo(e,st(o,S,4),!0),E=st(Xt(s,4),M,4);e.prevMatrix=M;var _=st(l,M,4),w=Ce(e,"matrix3d(".concat(_.join(", "),")"),"matrix3d(".concat(M.join(", "),")"));return Vn(r,w),N(t,"onWarp",q(t,r,{delta:E,matrix:_,dist:M,multiply:st,transform:w})),!0},dragControlEnd:function(t,r){var e=r.datas,n=r.isDrag;return!!e.isWarp&&(e.isWarp=!1,N(t,"onWarpEnd",zt(t,r,{})),n)}},Ip=Y("area-pieces"),Fe=Y("area-piece"),Us=Y("avoid");function ba(t){var r=t.areaElement;if(r){var e=t.state,n=e.width,a=e.height;(function(t,r){if(t.classList)t.classList.remove(r);else{var e=new RegExp("(\\s|^)"+r+"(\\s|$)");t.className=t.className.replace(e," ")}})(r,Us),r.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(a,"px")}}function Js(t){return t.createElement("div",{key:"area_pieces",className:Ip},t.createElement("div",{className:Fe}),t.createElement("div",{className:Fe}),t.createElement("div",{className:Fe}),t.createElement("div",{className:Fe}))}var $s={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,r){var e=t.props,n=e.target,a=e.dragArea,i=e.groupable,s=t.state,u=s.width,l=s.height,p=s.renderPoses,c=e.passDragArea?Y("area","pass"):Y("area");if(i)return[r.createElement("div",{key:"area",ref:Ht(t,"areaElement"),className:c}),Js(r)];if(!n||!a)return[];var f=xn([0,0],[u,0],[0,l],[u,l],p[0],p[1],p[2],p[3]),d=f.length?ye(f,!0):"none";return[r.createElement("div",{key:"area",ref:Ht(t,"areaElement"),className:c,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(l,"px"),transformOrigin:"0 0",transform:d}}),Js(r)]},dragStart:function(t,r){var n=r.clientX,a=r.clientY;if(!r.inputEvent)return!1;r.datas.isDragArea=!1;var o=t.areaElement,s=t.state,u=s.moveableClientRect,p=s.rootMatrix,c=s.is3d,f=u.left,d=u.top,v=Bt(s.renderPoses),h=v.left,m=v.top,b=v.width,x=v.height,C=Or(p,[n-f,a-d],c?4:3),M=C[0],E=C[1],_=[{left:h,top:m,width:b,height:(E-=m)-10},{left:h,top:m,width:(M-=h)-10,height:x},{left:h,top:m+E+10,width:b,height:x-E-10},{left:h+M+10,top:m,width:b-M-10,height:x}],w=[].slice.call(o.nextElementSibling.children);_.forEach(function(y,D){w[D].style.cssText="left: ".concat(y.left,"px;top: ").concat(y.top,"px; width: ").concat(y.width,"px; height: ").concat(y.height,"px;")}),function(t,r){t.classList?t.classList.add(r):t.className+=" "+r}(o,Us),s.disableNativeEvent=!0},drag:function(t,r){var e=r.datas,n=r.inputEvent;if(this.enableNativeEvent(t),!n)return!1;e.isDragArea||(e.isDragArea=!0,ba(t))},dragEnd:function(t,r){if(this.enableNativeEvent(t),!r.inputEvent)return!1;r.datas.isDragArea||ba(t)},dragGroupStart:function(t,r){return this.dragStart(t,r)},dragGroup:function(t,r){return this.drag(t,r)},dragGroupEnd:function(t,r){return this.dragEnd(t,r)},unset:function(t){ba(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var r=t.state;r.disableNativeEvent&&$i(function(){r.disableNativeEvent=!1})}},kp=qr("origin",{render:function(t,r){var e=t.props.zoom,n=t.state,a=n.beforeOrigin,i=n.rotation;return[r.createElement("div",{className:Y("control","origin"),style:Jn(i,e,a),key:"beforeOrigin"})]}});function Fp(t){var r=t.scrollContainer;return[r.scrollLeft,r.scrollTop]}var Np={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(t,r){var n=t.props.scrollContainer,a=void 0===n?t.getContainer():n,i=new Pf,o=re(a,!0);r.datas.dragScroll=i;var s=r.isControl?"controlGesto":"targetGesto",u=r.targets;i.on("scroll",function(l){var f=q(t,r,{scrollContainer:l.container,direction:l.direction}),d=u?"onScrollGroup":"onScroll";u&&(f.targets=u),N(t,d,f)}).on("move",function(l){t[s].scrollBy(l.offsetX,l.offsetY,r.inputEvent,!1)}),i.dragStart(r,{container:o})},checkScroll:function(t,r){var e=r.datas.dragScroll;if(e){var n=t.props,a=n.scrollContainer,i=void 0===a?t.getContainer():a,o=n.scrollThreshold,u=n.getScrollPosition,l=void 0===u?Fp:u;return e.drag(r,{container:i,threshold:void 0===o?0:o,getScrollPosition:function(p){return l({scrollContainer:p.container,direction:p.direction})}}),!0}},drag:function(t,r){return this.checkScroll(t,r)},dragEnd:function(t,r){r.datas.dragScroll.dragEnd(),r.datas.dragScroll=null},dragControlStart:function(t,r){return this.dragStart(t,R(R({},r),{isControl:!0}))},dragControl:function(t,r){return this.drag(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupStart:function(t,r){return this.dragStart(t,R(R({},r),{targets:t.props.targets}))},dragGroup:function(t,r){return this.drag(t,R(R({},r),{targets:t.props.targets}))},dragGroupEnd:function(t,r){return this.dragEnd(t,R(R({},r),{targets:t.props.targets}))},dragGroupControlStart:function(t,r){return this.dragStart(t,R(R({},r),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,r){return this.drag(t,R(R({},r),{targets:t.props.targets}))},dragGroupControEnd:function(t,r){return this.dragEnd(t,R(R({},r),{targets:t.props.targets}))}},Ks={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Object,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object,flushSync:Function,stopPropagation:Boolean,preventClickEventOnDrag:Boolean,preventClickDefault:Boolean},events:{}},Lp=qr("padding",{render:function(t,r){var e=t.props;if(e.dragArea)return[];var n=e.padding||{},a=n.left,o=n.top,s=void 0===o?0:o,u=n.right,l=void 0===u?0:u,p=n.bottom,c=void 0===p?0:p,f=t.state,d=f.renderPoses,x=[f.pos1,f.pos2,f.pos3,f.pos4],S=[];return(void 0===a?0:a)>0&&S.push([0,2]),s>0&&S.push([0,1]),l>0&&S.push([1,3]),c>0&&S.push([2,3]),S.map(function(C,M){var E=C[0],_=C[1],O=xn([0,0],[100,0],[0,100],[100,100],x[E],x[_],d[E],d[_]);if(O.length)return r.createElement("div",{key:"padding".concat(M),className:Y("padding"),style:{transform:ye(O,!0)}})})}}),Qs=["nw","ne","se","sw"];function Ne(t,r){var e=t[0]+t[1],n=e>r?r/e:1;return t[0]*=n,t[1]=r-t[1]*n,t}var Wp=[1,2,5,6],Yp=[0,3,4,7],mr=[1,-1,-1,1],br=[1,1,-1,-1];function xa(t,r,e,n,a,i,o,s,u){void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=n),void 0===u&&(u=a);var l=[],p=!1,c=t.map(function(f,d){var v=r[d],h=v.horizontal,m=v.vertical;if(m&&!p&&(p=!0,l.push("/")),p){var b=Math.max(0,1===m?f[1]-o:u-f[1]);return l.push(Wt(b,a,e)),b}return b=Math.max(0,1===h?f[0]-i:s-f[0]),l.push(Wt(b,n,e)),b});return{styles:l,raws:c}}function tu(t){for(var r=[0,0],e=[0,0],n=t.length,a=0;a<n;++a){var i=t[a];!i.sub||(i.horizontal&&(0===r[1]&&(r[0]=a),r[1]=a-r[0]+1,e[0]=a+1),i.vertical&&(0===e[1]&&(e[0]=a),e[1]=a-e[0]+1))}return{horizontalRange:r,verticalRange:e}}function ru(t,r,e,n,a,i){var o,s,u,l;void 0===i&&(i=[0,0]);var p=t.indexOf("/"),c=(p>-1?t.slice(0,p):t).length,f=t.slice(0,c),d=t.slice(c+1),v=f[0],h=void 0===v?"0px":v,m=f[1],b=void 0===m?h:m,x=f[2],C=f[3],E=d[0],_=void 0===E?h:E,w=d[1],y=void 0===w?_:w,D=d[2],P=void 0===D?_:D,O=d[3],T=void 0===O?y:O,A=[h,b,void 0===x?h:x,void 0===C?b:C].map(function(I){return ct(I,r)}),z=[_,y,P,T].map(function(I){return ct(I,e)}),B=A.slice(),k=z.slice();o=Ne([B[0],B[1]],r),B[0]=o[0],B[1]=o[1],s=Ne([B[3],B[2]],r),B[3]=s[0],B[2]=s[1],u=Ne([k[0],k[3]],e),k[0]=u[0],k[3]=u[1],l=Ne([k[1],k[2]],e),k[1]=l[0],k[2]=l[1];var W=B.slice(0,Math.max(i[0],f.length)),G=k.slice(0,Math.max(i[1],d.length));return X(X([],W.map(function(I,L){return{horizontal:mr[L],vertical:0,pos:[n+I,a+(-1===br[L]?e:0)],sub:!0,raw:A[L],direction:Qs[L]}}),!0),G.map(function(I,L){return{horizontal:0,vertical:br[L],pos:[n+(-1===mr[L]?r:0),a+I],sub:!0,raw:z[L],direction:Qs[L]}}),!0)}function eu(t,r,e,n,a){void 0===a&&(a=r.length);var i=tu(t.slice(n)),o=i.horizontalRange,s=i.verticalRange,u=e-n,l=0;if(0===u)l=a;else if(u>0&&u<o[1])l=o[1]-u;else{if(!(u>=s[0]))return;l=s[0]+s[1]-u}t.splice(e,l),r.splice(e,l)}function nu(t,r,e,n,a,i,o,s,u,l,p){void 0===l&&(l=0),void 0===p&&(p=0);var c=tu(t.slice(e)),f=c.horizontalRange,d=c.verticalRange;if(n>-1)for(var v=1===mr[n]?i-l:s-i,h=f[1];h<=n;++h){var b=0;if(n===h?b=i:0===h?b=l+v:-1===mr[h]&&(b=s-(r[e][0]-l)),t.splice(e+h,0,{horizontal:mr[h],vertical:0,pos:[b,m=1===br[h]?p:u]}),r.splice(e+h,0,[b,m]),0===h)break}else if(a>-1){var x=1===br[a]?o-p:u-o;if(0===f[1]&&0===d[1]){var S=[l+x,p];t.push({horizontal:mr[0],vertical:0,pos:S}),r.push(S)}var C=d[0];for(h=d[1];h<=a;++h){var m=0;if(a===h?m=o:0===h?m=p+x:1===br[h]?m=r[e+C][1]:-1===br[h]&&(m=u-(r[e+C][1]-p)),t.push({horizontal:0,vertical:br[h],pos:[b=1===mr[h]?l:s,m]}),r.push([b,m]),0===h)break}}}function au(t,r){return void 0===r&&(r=t.map(function(a){return a.raw})),{horizontals:t.map(function(a,i){return a.horizontal?r[i]:null}).filter(function(a){return null!=a}),verticals:t.map(function(a,i){return a.vertical?r[i]:null}).filter(function(a){return null!=a})}}var Hp=[[0,-1,"n"],[1,0,"e"]],Xp=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Sa(t,r,e){var n=t.props.clipRelative,a=t.state,i=a.width,o=a.height,u=r.type,l=r.poses,p="rect"===u,c="circle"===u;if("polygon"===u)return e.map(function(E){return"".concat(Wt(E[0],i,n)," ").concat(Wt(E[1],o,n))});if(p||"inset"===u){var f=e[1][1],d=e[3][0],v=e[7][0],h=e[5][1];if(p)return[f,d,h,v].map(function(E){return"".concat(E,"px")});var m=[f,i-d,o-h,v].map(function(E,_){return Wt(E,_%2?i:o,n)});if(e.length>8){var b=j(e[4],e[0]),x=b[0],S=b[1];m.push.apply(m,X(["round"],xa(e.slice(8),l.slice(8),n,x,S,v,f,d,h).styles,!1))}return m}if(c||"ellipse"===u){var C=e[0],M=Wt(Math.abs(e[1][1]-C[1]),c?Math.sqrt((i*i+o*o)/2):o,n);return(m=c?[M]:[Wt(Math.abs(e[2][0]-C[0]),i,n),M]).push("at",Wt(C[0],i,n),Wt(C[1],o,n)),m}}function Le(t,r,e,n){var a=[n,(n+r)/2,r],i=[t,(t+e)/2,e];return Xp.map(function(o){var s=o[0],u=o[1],l=o[2],p=a[s+1],c=i[u+1];return{vertical:Math.abs(u),horizontal:Math.abs(s),direction:l,pos:[p,c]}})}function iu(t){var r=[1/0,-1/0],e=[1/0,-1/0];return t.forEach(function(n){var a=n.pos;r[0]=Math.min(r[0],a[0]),r[1]=Math.max(r[1],a[0]),e[0]=Math.min(e[0],a[1]),e[1]=Math.max(e[1],a[1])}),[Math.abs(r[1]-r[0]),Math.abs(e[1]-e[0])]}function ou(t,r,e,n,a){var i,o,s,u,l,p,c,f=a;if(!f){var d=It(t),v=d.clipPath;f="none"!==v?v:d.clip}if(f&&"none"!==f&&"auto"!==f||(f=n)){var h=Ke(f),m=h.prefix,b=void 0===m?f:m,x=h.value,S=void 0===x?"":x,C="circle"===b,M=" ";if("polygon"===b)return M=",",{type:b,clipText:f,poses:_=(E=$t(S||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map(function(vt){var lt=vt.split(" "),Tt=lt[1];return{vertical:1,horizontal:1,pos:[ct(lt[0],r),ct(Tt,e)]}}),splitter:M};if(C||"ellipse"===b){var A,w="",y="",D=0,P=0,E=Jt(S);if(C)w=void 0===(o=E[2])?"50%":o,y=void 0===(s=E[3])?"50%":s,D=ct(void 0===(i=E[0])?"50%":i,Math.sqrt((r*r+e*e)/2)),P=D;else A=void 0===(l=E[1])?"50%":l,w=void 0===(p=E[3])?"50%":p,y=void 0===(c=E[4])?"50%":c,D=ct(void 0===(u=E[0])?"50%":u,r),P=ct(A,e);var z=[ct(w,r),ct(y,e)],_=X([{vertical:1,horizontal:1,pos:z,direction:"nesw"}],Hp.slice(0,C?1:2).map(function(et){return{vertical:Math.abs(et[1]),horizontal:et[0],direction:et[2],sub:!0,pos:[z[0]+et[0]*D,z[1]+et[1]*P]}}),!0);return{type:b,clipText:f,radiusX:D,radiusY:P,left:z[0]-D,top:z[1]-P,poses:_,splitter:M}}if("inset"===b){var B=(E=Jt(S||"0 0 0 0")).indexOf("round"),k=(B>-1?E.slice(0,B):E).length,W=E.slice(k+1),G=E.slice(0,k),I=G[0],L=G[1],V=void 0===L?I:L,nt=G[2],tt=G[3],Q=void 0===tt?V:tt,at=[I,void 0===nt?I:nt].map(function(et){return ct(et,e)}),ft=at[0],it=at[1],Z=[Q,V].map(function(et){return ct(et,r)}),$=r-(St=Z[1]),ot=e-it,rt=ru(W,$-(H=Z[0]),ot-ft,H,ft);return{type:"inset",clipText:f,poses:_=X(X([],Le(ft,$,ot,H),!0),rt,!0),top:ft,left:H,right:$,bottom:ot,radius:W,splitter:M}}if("rect"===b){M=",";var St,H,dt=(E=$t(S||"0px, ".concat(r,"px, ").concat(e,"px, 0px"))).map(function(mt){return Ir(mt).value});return{type:"rect",clipText:f,poses:_=Le(ft=dt[0],St=dt[1],it=dt[2],H=dt[3]),top:ft,right:St,bottom:it,left:H,values:E,splitter:M}}}}var qp={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,keepRatio:Boolean,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,r){var e=t.props,i=e.clipArea,o=e.zoom,s=t.state,u=s.target,l=s.width,p=s.height,c=s.allMatrix,f=s.is3d,d=s.left,v=s.top,h=s.pos1,m=s.pos2,b=s.pos3,x=s.pos4,C=s.snapBoundInfos,M=s.rotation;if(!u)return[];var E=ou(u,l,p,e.defaultClipPath||"inset",s.clipPathState||e.customClipPath);if(!E)return[];var _=f?4:3,w=E.type,D=E.poses.map(function(ot){var rt=_t(c,ot.pos,_);return[rt[0]-d,rt[1]-v]}),P=[],O=[],T="rect"===w,A="inset"===w,z="polygon"===w;if(T||A||z){var B=A?D.slice(0,8):D;O=B.map(function(ot,rt){var dt=0===rt?B[B.length-1]:B[rt-1],vt=ht(dt,ot),lt=cs(dt,ot);return r.createElement("div",{key:"clipLine".concat(rt),className:Y("line","clip-line","snap-control"),"data-clip-index":rt,style:{width:"".concat(lt,"px"),transform:"translate(".concat(dt[0],"px, ").concat(dt[1],"px) rotate(").concat(vt,"rad) scaleY(").concat(o,")")}})})}if(P=D.map(function(ot,rt){return r.createElement("div",{key:"clipControl".concat(rt),className:Y("control","clip-control","snap-control"),"data-clip-index":rt,style:{transform:"translate(".concat(ot[0],"px, ").concat(ot[1],"px) rotate(").concat(M,"rad) scale(").concat(o,")")}})}),A&&P.push.apply(P,D.slice(8).map(function(ot,rt){return r.createElement("div",{key:"clipRadiusControl".concat(rt),className:Y("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+rt,style:{transform:"translate(".concat(ot[0],"px, ").concat(ot[1],"px) rotate(").concat(M,"rad) scale(").concat(o,")")}})})),"circle"===w||"ellipse"===w){var G=E.radiusX,I=E.radiusY,L=j(_t(c,[E.left,E.top],_),_t(c,[0,0],_)),V=L[0],nt=L[1],U="none";if(!i){for(var tt=Math.max(10,G/5,I/5),Q=[],at=0;at<=tt;++at){var ft=2*Math.PI/tt*at;Q.push([G+(G-o)*Math.cos(ft),I+(I-o)*Math.sin(ft)])}Q.push([G,-2]),Q.push([-2,-2]),Q.push([-2,2*I+2]),Q.push([2*G+2,2*I+2]),Q.push([2*G+2,-2]),Q.push([G,-2]),U="polygon(".concat(Q.map(function(ot){return"".concat(ot[0],"px ").concat(ot[1],"px")}).join(", "),")")}P.push(r.createElement("div",{key:"clipEllipse",className:Y("clip-ellipse","snap-control"),style:{width:"".concat(2*G,"px"),height:"".concat(2*I,"px"),clipPath:U,transform:"translate(".concat(-d+V,"px, ").concat(-v+nt,"px) ").concat(ye(c))}}))}if(i){var it=Bt(X([h,m,b,x],D,!0)),Z=it.width,H=it.height,St=it.left,$=it.top;(z||T||A)&&(Q=A?D.slice(0,8):D,P.push(r.createElement("div",{key:"clipArea",className:Y("clip-area","snap-control"),style:{width:"".concat(Z,"px"),height:"".concat(H,"px"),transform:"translate(".concat(St,"px, ").concat($,"px)"),clipPath:"polygon(".concat(Q.map(function(rt){return"".concat(rt[0]-St,"px ").concat(rt[1]-$,"px")}).join(", "),")")}})))}return C&&["vertical","horizontal"].forEach(function(ot){var rt=C[ot],dt="horizontal"===ot;rt.isSnap&&O.push.apply(O,rt.snap.posInfos.map(function(vt,lt){var et=vt.pos,Tt=j(_t(c,dt?[0,et]:[et,0],_),[d,v]),ir=j(_t(c,dt?[l,et]:[et,p],_),[d,v]);return Ie(r,"",Tt,ir,o,"clip".concat(ot,"snap").concat(lt),"guideline")})),rt.isBound&&O.push.apply(O,rt.bounds.map(function(vt,lt){var et=vt.pos,Tt=j(_t(c,dt?[0,et]:[et,0],_),[d,v]),ir=j(_t(c,dt?[l,et]:[et,p],_),[d,v]);return Ie(r,"",Tt,ir,o,"clip".concat(ot,"bounds").concat(lt),"guideline","bounds","bold")}))}),X(X([],P,!0),O,!0)},dragControlCondition:function(t,r){return r.inputEvent&&(r.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,r){var n=t.props.dragWithClip;return!(void 0===n||n)&&this.dragControlStart(t,r)},drag:function(t,r){return this.dragControl(t,R(R({},r),{isDragTarget:!0}))},dragEnd:function(t,r){return this.dragControlEnd(t,r)},dragControlStart:function(t,r){var e=t.state,n=t.props,a=n.defaultClipPath,i=n.customClipPath,o=e.target,s=e.width,u=e.height,l=r.inputEvent?r.inputEvent.target:null,p=l&&l.getAttribute("class")||"",c=r.datas,f=ou(o,s,u,a||"inset",i);if(!f)return!1;var d=f.clipText;return!1===N(t,"onClipStart",q(t,r,{clipType:f.type,clipStyle:d,poses:f.poses.map(function(b){return b.pos})}))?(c.isClipStart=!1,!1):(c.isControl=p&&p.indexOf("clip-control")>-1,c.isLine=p.indexOf("clip-line")>-1,c.isArea=p.indexOf("clip-area")>-1||p.indexOf("clip-ellipse")>-1,c.clipIndex=l?parseInt(l.getAttribute("data-clip-index"),10):-1,c.clipPath=f,c.isClipStart=!0,e.clipPathState=d,vr(t,r),!0)},dragControl:function(t,r){var e,n=r.datas,a=r.originalDatas,i=r.isDragTarget;if(!n.isClipStart)return!1;var s=n.isControl,u=n.isLine,l=n.isArea,p=n.clipIndex,c=n.clipPath;if(!c)return!1;var f=gr(t.props,"clippable"),d=f.keepRatio,v=0,h=0,m=a.draggable,b=Zt(r);i&&m?(v=(e=m.prevBeforeDist)[0],h=e[1]):(v=b[0],h=b[1]);var x=[v,h],S=t.state,C=S.width,M=S.height,E=!l&&!s&&!u,_=c.type,w=c.poses,y=c.splitter,D=w.map(function(ut){return ut.pos});E&&(v=-v,h=-h);var P=!s||"nesw"===w[p].direction,O="inset"===_||"rect"===_,T=w.map(function(){return[0,0]});if(s&&!P){var A=w[p],B=A.vertical,k=[v*Math.abs(A.horizontal),h*Math.abs(B)];T=function(t,r,e,n,a){var i=t[r],o=i.direction,s=i.sub,u=t.map(function(){return[0,0]}),l=o?o.split(""):[];if(n&&r<8){var p=l.filter(function(T){return"w"===T||"e"===T}),c=l.filter(function(T){return"n"===T||"s"===T}),f=p[0],d=c[0];u[r]=e;var v=iu(t),h=v[0],m=v[1],b=h&&m?h/m:0;if(b&&a){var S=t[(r+4)%8].pos,C=[0,0];o.indexOf("w")>-1?C[0]=-1:o.indexOf("e")>-1&&(C[0]=1),o.indexOf("n")>-1?C[1]=-1:o.indexOf("s")>-1&&(C[1]=1);var M=bs([h,m],e,b,C,!0),E=h+M[0],_=m+M[1],w=S[1],y=S[1],D=S[0],P=S[0];-1===C[0]?D=P-E:1===C[0]?P=D+E:(D-=E/2,P+=E/2),-1===C[1]?w=y-_:(1===C[1]||(w=y-_/2),y=w+_);var O=Le(w,P,y,D);t.forEach(function(T,A){u[A][0]=O[A].pos[0]-T.pos[0],u[A][1]=O[A].pos[1]-T.pos[1]})}else t.forEach(function(T,A){var z=T.direction;!z||(z.indexOf(f)>-1&&(u[A][0]=e[0]),z.indexOf(d)>-1&&(u[A][1]=e[1]))}),f&&(u[1][0]=e[0]/2,u[5][0]=e[0]/2),d&&(u[3][1]=e[1]/2,u[7][1]=e[1]/2)}else o&&!s?l.forEach(function(T){var A="n"===T||"s"===T;t.forEach(function(z,B){var k=z.direction,W=z.horizontal,G=z.vertical;!k||-1===k.indexOf(T)||(u[B]=[A||!W?0:e[0],A&&G?e[1]:0])})}):u[r]=e;return u}(w,p,k,O,d)}else P&&(T=D.map(function(){return[v,h]}));var W=D.map(function(ut,Ot){return K(ut,T[Ot])}),G=X([],W,!0);S.snapBoundInfos=null;var I="circle"===c.type,L="ellipse"===c.type;if(I||L){var V=Bt(W),nt=Math.abs(V.bottom-V.top),U=Math.abs(L?V.right-V.left:nt),tt=W[0][1]+nt,Q=W[0][0]-U,at=W[0][0]+U;I&&(G.push([at,V.bottom]),T.push([1,0])),G.push([V.left,tt]),T.push([0,1]),G.push([Q,V.bottom]),T.push([1,0])}var ft=Is((f.clipHorizontalGuidelines||[]).map(function(ut){return ct("".concat(ut),M)}),(f.clipVerticalGuidelines||[]).map(function(ut){return ct("".concat(ut),C)}),C,M),it=[],Z=[];if(I||L)it=[G[4][0],G[2][0]],Z=[G[1][1],G[3][1]];else if(O){var St=[T[0],T[2],T[4],T[6]];it=(H=[G[0],G[2],G[4],G[6]]).filter(function(ut,Ot){return St[Ot][0]}).map(function(ut){return ut[0]}),Z=H.filter(function(ut,Ot){return St[Ot][1]}).map(function(ut){return ut[1]})}else it=G.filter(function(ut,Ot){return T[Ot][0]}).map(function(ut){return ut[0]}),Z=G.filter(function(ut,Ot){return T[Ot][1]}).map(function(ut){return ut[1]});var $=[0,0],ot=As(ft,f.clipTargetBounds&&{left:0,top:0,right:C,bottom:M},it,Z,5),rt=ot.horizontal,dt=ot.vertical,vt=rt.offset,lt=dt.offset;if(rt.isBound&&($[1]+=vt),dt.isBound&&($[0]+=lt),(L||I)&&0===T[0][0]&&0===T[0][1]){var et=(V=Bt(W)).bottom-V.top,Tt=L?V.right-V.left:et;Tt-=dt.isBound?Math.abs(lt):0===dt.snapIndex?-lt:lt,et-=rt.isBound?Math.abs(vt):0===rt.snapIndex?-vt:vt,I&&(Tt=et=Es(dt,rt)>0?et:Tt);var mt=G[0];G[1][1]=mt[1]-et,G[2][0]=mt[0]+Tt,G[3][1]=mt[1]+et,G[4][0]=mt[0]-Tt}else if(O&&d&&s){var Yt=iu(w),zr=Yt[0],Ar=Yt[1],_u=zr&&Ar?zr/Ar:0,Xe=w[p].direction||"",Ra=G[1][1];tt=G[5][1],Q=G[7][0],at=G[3][0],vt<=lt?vt=lt/_u:lt=vt*_u,Xe.indexOf("w")>-1?Q-=lt:Xe.indexOf("e")>-1?at-=lt:(Q+=lt/2,at-=lt/2),Xe.indexOf("n")>-1?Ra-=vt:Xe.indexOf("s")>-1?tt-=vt:(Ra+=vt/2,tt-=vt/2);var Fd=Le(Ra,at,tt,Q);G.forEach(function(Du,Yd){var Pa;Du[0]=(Pa=Fd[Yd].pos)[0],Du[1]=Pa[1]})}else G.forEach(function(ut,Ot){var yu=T[Ot];yu[0]&&(ut[0]-=lt),yu[1]&&(ut[1]-=vt)});var Eu=Sa(t,c,W),Mu="".concat(_,"(").concat(Eu.join(y),")");if(S.clipPathState=Mu,I||L)it=[G[4][0],G[2][0]],Z=[G[1][1],G[3][1]];else if(O){var H;it=(H=[G[0],G[2],G[4],G[6]]).map(function(Ot){return Ot[0]}),Z=H.map(function(Ot){return Ot[1]})}else it=G.map(function(ut){return ut[0]}),Z=G.map(function(ut){return ut[1]});if(S.snapBoundInfos=As(ft,f.clipTargetBounds&&{left:0,top:0,right:C,bottom:M},it,Z,1),m){var Ta=$;i&&(Ta=[x[0]+$[0]-b[0],x[1]+$[1]-b[1]]),m.deltaOffset=st(S.allMatrix,[Ta[0],Ta[1],0,0],S.is3d?4:3)}return N(t,"onClip",q(t,r,{clipEventType:"changed",clipType:_,poses:W,clipStyle:Mu,clipStyles:Eu,distX:v,distY:h})),!0},dragControlEnd:function(t,r){this.unset(t);var e=r.isDrag,n=r.datas,a=r.isDouble,i=n.isLine,s=n.isControl;return!!n.isClipStart&&(N(t,"onClipEnd",zt(t,r,{})),a&&(s?function(t,r){var e=r.datas,n=e.clipPath,a=e.clipIndex,o=n.type,s=n.poses,u=n.splitter,l=s.map(function(f){return f.pos}),p=l.length;if("polygon"===o)s.splice(a,1),l.splice(a,1);else{if("inset"!==o)return;if(a<8||(eu(s,l,a,8,p),p===s.length))return}var c=Sa(t,n,l);N(t,"onClip",q(t,r,{clipEventType:"removed",clipType:o,poses:l,clipStyles:c,clipStyle:"".concat(o,"(").concat(c.join(u),")"),distX:0,distY:0}))}(t,r):i&&function(t,r){var e=Uo(t,r),n=e[0],a=e[1],i=r.datas,o=i.clipPath,s=i.clipIndex,l=o.type,p=o.poses,c=o.splitter,f=p.map(function(b){return b.pos});if("polygon"===l)f.splice(s,0,[n,a]);else{if("inset"!==l)return;var d=Wp.indexOf(s),v=Yp.indexOf(s),h=p.length;if(nu(p,f,8,d,v,n,a,f[4][0],f[4][1],f[0][0],f[0][1]),h===p.length)return}var m=Sa(t,o,f);N(t,"onClip",q(t,r,{clipEventType:"added",clipType:l,poses:f,clipStyles:m,clipStyle:"".concat(l,"(").concat(m.join(c),")"),distX:0,distY:0}))}(t,r)),a||e)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Up={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t,r){return r.isRequest?"originDraggable"===r.requestAble:Ct(r.inputEvent.target,Y("origin"))},dragControlStart:function(t,r){var e=r.datas;vr(t,r);var n=q(t,r,{dragStart:wt.dragStart(t,(new Mr).dragStart([0,0],r))}),a=N(t,"onDragOriginStart",n);return e.startOrigin=t.state.transformOrigin,e.startTargetOrigin=t.state.targetOrigin,e.prevOrigin=[0,0],e.isDragOrigin=!0,!1===a?(e.isDragOrigin=!1,!1):n},dragControl:function(t,r){var e=r.datas,n=r.isPinch,a=r.isRequest;if(!e.isDragOrigin)return!1;var i=Zt(r),u=t.state,l=u.width,p=u.height,c=u.offsetMatrix,f=u.targetMatrix,v=t.props.originRelative,h=void 0===v||v,m=u.is3d?4:3,b=[i[0],i[1]];if(a){var x=r.distOrigin;(x[0]||x[1])&&(b=x)}var S=K(e.startOrigin,b),C=K(e.startTargetOrigin,b),M=j(b,e.prevOrigin),E=$r(c,f,S,m),_=t.getRect(),w=Bt(hr(E,l,p,m)),y=[_.left-w.left,_.top-w.top];e.prevOrigin=b;var P=q(t,r,{width:l,height:p,origin:S,dist:b,delta:M,transformOrigin:[Wt(C[0],l,h),Wt(C[1],p,h)].join(" "),drag:wt.drag(t,Jr(r,t.state,y,!!n,!1))});return N(t,"onDragOrigin",P),P},dragControlEnd:function(t,r){return!!r.datas.isDragOrigin&&(N(t,"onDragOriginEnd",zt(t,r,{})),!0)},dragGroupControlCondition:function(t,r){return this.dragControlCondition(t,r)},dragGroupControlStart:function(t,r){return!!this.dragControlStart(t,r)},dragGroupControl:function(t,r){var e=this.dragControl(t,r);return!!e&&(t.transformOrigin=e.transformOrigin,!0)},request:function(t){var r={},e=t.getRect(),n=0,a=0,i=e.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:r}},request:function(s){return"deltaOrigin"in s?(o[0]+=s.deltaOrigin[0],o[1]+=s.deltaOrigin[1]):"origin"in s?(o[0]=s.origin[0]-i[0],o[1]=s.origin[1]-i[1]):("x"in s?n=s.x-e.left:"deltaX"in s&&(n+=s.deltaX),"y"in s?a=s.y-e.top:"deltaY"in s&&(a+=s.deltaY)),{datas:r,distX:n,distY:a,distOrigin:o}},requestEnd:function(){return{datas:r,isDrag:!0}}}}};function su(t,r,e,n,a){var i;if(void 0===n&&(n=[0,0]),a)i=a;else{var s=It(t);i=s&&s.borderRadius||""}return ru(!i||!a&&"0px"===i?[]:Jt(i),r,e,0,0,n)}function uu(t,r,e,n,a,i){var o=t.state,s=o.width,u=o.height,l=xa(i,a,t.props.roundRelative,s,u),c=l.styles,f=au(a,l.raws),d=f.horizontals,v=f.verticals,h=c.join(" ");o.borderRadiusState=h,N(t,"onRound",q(t,r,{horizontals:d,verticals:v,borderRadius:h,width:s,height:u,delta:n,dist:e}))}var $p={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,r){var e=t.state,n=e.target,o=e.allMatrix,u=e.left,l=e.top,c=t.props,f=c.minRoundControls,v=c.maxRoundControls,h=void 0===v?[4,4]:v,m=c.zoom;if(!n)return null;var b=e.is3d?4:3,x=su(n,e.width,e.height,void 0===f?[0,0]:f,e.borderRadiusState);if(!x)return null;var S=0,C=0;return x.map(function(M,E){C+=Math.abs(M.horizontal),S+=Math.abs(M.vertical);var _=j(_t(o,M.pos,b),[u,l]),w=M.vertical?S<=h[1]:C<=h[0];return r.createElement("div",{key:"borderRadiusControl".concat(E),className:Y("control","border-radius"),"data-radius-index":E,style:{display:w?"block":"none",transform:"translate(".concat(_[0],"px, ").concat(_[1],"px) scale(").concat(m,")")}})})},dragControlCondition:function(t,r){if(!r.inputEvent||r.isRequest)return!1;var e=r.inputEvent.target.getAttribute("class")||"";return e.indexOf("border-radius")>-1||e.indexOf("moveable-line")>-1&&e.indexOf("moveable-direction")>-1},dragControlStart:function(t,r){var n=r.datas,a=r.inputEvent.target,i=a.getAttribute("class")||"",o=i.indexOf("border-radius")>-1,s=i.indexOf("moveable-line")>-1&&i.indexOf("moveable-direction")>-1,u=o?parseInt(a.getAttribute("data-radius-index"),10):-1,l=s?parseInt(a.getAttribute("data-line-index"),10):-1;if(!o&&!s)return!1;if(!1===N(t,"onRoundStart",q(t,r,{})))return!1;n.lineIndex=l,n.controlIndex=u,n.isControl=o,n.isLine=s,vr(t,r);var c=t.props,f=c.roundRelative,d=c.minRoundControls,v=void 0===d?[0,0]:d,h=t.state,m=h.target,b=h.width,x=h.height;n.isRound=!0,n.prevDist=[0,0];var S=su(m,b,x,v)||[];return n.controlPoses=S,h.borderRadiusState=xa(S.map(function(C){return C.pos}),S,f,b,x).styles.join(" "),!0},dragControl:function(t,r){var e=r.datas;if(!e.isRound||!e.isControl||!e.controlPoses.length)return!1;var n=e.controlIndex,a=e.controlPoses,i=Zt(r),o=i[0],s=i[1],u=[o,s],l=j(u,e.prevDist),p=t.props.maxRoundControls,c=void 0===p?[4,4]:p,f=t.state,d=f.width,v=f.height,h=a[n],m=h.vertical,b=h.horizontal,x=a.map(function(C){var M=C.horizontal,E=C.vertical,_=[M*b*u[0],E*m*u[1]];if(M){if(1===c[0])return _;if(c[0]<4&&M!==b)return _}else{if(0===c[1])return _[1]=E*b*u[0]/d*v,_;if(m){if(1===c[1])return _;if(c[1]<4&&E!==m)return _}}return[0,0]});x[n]=u;var S=a.map(function(C,M){return K(C.pos,x[M])});return e.prevDist=[o,s],uu(t,r,u,l,a,S),!0},dragControlEnd:function(t,r){var e=t.state;e.borderRadiusState="";var n=r.datas,a=r.isDouble;if(!n.isRound)return!1;var i=e.width,o=e.height,s=n.isControl,u=n.controlIndex,l=n.isLine,p=n.lineIndex,c=n.controlPoses,f=c.map(function(S){return S.pos}),d=f.length,v=t.props.roundClickable;if(a&&(void 0===v||v)){if(s)eu(c,f,u,0);else if(l){var m=Uo(t,r);!function(t,r,e,n,a,i,o){var s=au(t),p=s.horizontals.length,c=s.verticals.length,f=-1,d=-1;0===e?0===p?f=0:1===p&&(f=1):3===e&&(p<=2?f=2:p<=3&&(f=3)),2===e?0===c?d=0:c<4&&(d=3):1===e&&(c<=1?d=1:c<=2&&(d=2)),nu(t,r,0,f,d,n,a,i,o)}(c,f,p,m[0],m[1],i,o)}d!==c.length&&uu(t,r,[0,0],[0,0],c,f)}return N(t,"onRoundEnd",zt(t,r,{})),e.borderRadiusState="",!0},unset:function(t){t.state.borderRadiusState=""}},lu={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,r){var e=t.state,n=e.is3d,a=e.target,i=e.targetMatrix,o=null==a?void 0:a.style.transform,s=n?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(Co(i,!0),")"),u=o&&"none"!==o?o:s;r.datas.startTransforms=function(t,r){var n=pt(r?4:3);return t==="matrix".concat(r?"3d":"","(").concat(n.join(","),")")||"matrix(1,0,0,1,0,0)"===t}(u,n)?[]:Jt(u)},resetStyle:function(t){var r=t.datas;r.nextStyle={},r.nextTransforms=t.datas.startTransforms,r.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,r){return q(t,r,{setTransform:function(e){r.datas.startTransforms=Ut(e)?e:Jt(e)},isPinch:!!r.isPinch})},fillDragParams:function(t,r){return q(t,r,{isPinch:!!r.isPinch})},dragStart:function(t,r){this.setTransform(t,r),N(t,"onBeforeRenderStart",this.fillDragStartParams(t,r))},drag:function(t,r){this.resetStyle(r),r.datas.nextStyle={},N(t,"onBeforeRender",q(t,r,{isPinch:!!r.isPinch}))},dragEnd:function(t,r){N(t,"onBeforeRenderEnd",q(t,r,{isPinch:!!r.isPinch,isDrag:r.isDrag}))},dragGroupStart:function(t,r){var e=this;this.dragStart(t,r);var n=tr(t,"beforeRenderable",r),a=t.moveables,i=n.map(function(o,s){var u=a[s];return e.setTransform(u,o),e.fillDragStartParams(u,o)});N(t,"onBeforeRenderGroupStart",q(t,r,{isPinch:!!r.isPinch,targets:t.props.targets,setTransform:function(){},events:i}))},dragGroup:function(t,r){var e=this;this.drag(t,r);var n=tr(t,"beforeRenderable",r),a=t.moveables,i=n.map(function(o,s){var u=a[s];return e.resetStyle(o),r.datas.nextStyle={},e.fillDragParams(u,o)});N(t,"onBeforeRenderGroup",q(t,r,{isPinch:!!r.isPinch,targets:t.props.targets,events:i}))},dragGroupEnd:function(t,r){this.dragEnd(t,r),N(t,"onBeforeRenderGroupEnd",q(t,r,{isPinch:!!r.isPinch,isDrag:r.isDrag,targets:t.props.targets}))},dragControlStart:function(t,r){return this.dragStart(t,r)},dragControl:function(t,r){return this.drag(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupControlStart:function(t,r){return this.dragGroupStart(t,r)},dragGroupControl:function(t,r){return this.dragGroup(t,r)},dragGroupControlEnd:function(t,r){return this.dragGroupEnd(t,r)}},fu={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,r){N(t,"onRenderStart",q(t,r,{isPinch:!!r.isPinch}))},drag:function(t,r){N(t,"onRender",this.fillDragParams(t,r))},dragAfter:function(t,r){if(r.resultCount)return this.drag(t,r)},dragEnd:function(t,r){N(t,"onRenderEnd",this.fillDragEndParams(t,r))},dragGroupStart:function(t,r){N(t,"onRenderGroupStart",q(t,r,{isPinch:!!r.isPinch,targets:t.props.targets}))},dragGroup:function(t,r){var e=this,n=tr(t,"beforeRenderable",r),a=t.moveables,i=n.map(function(o,s){return e.fillDragParams(a[s],o)});N(t,"onRenderGroup",q(t,r,R(R({isPinch:!!r.isPinch,targets:t.props.targets,transform:ts(r)},te(rs(r))),{events:i})))},dragGroupEnd:function(t,r){var e=this,n=tr(t,"beforeRenderable",r),a=t.moveables,i=n.map(function(o,s){return e.fillDragEndParams(a[s],o)});N(t,"onRenderGroupEnd",q(t,r,{isPinch:!!r.isPinch,isDrag:r.isDrag,targets:t.props.targets,events:i}))},dragControlStart:function(t,r){return this.dragStart(t,r)},dragControl:function(t,r){return this.drag(t,r)},dragControlAfter:function(t,r){return this.dragAfter(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupControlStart:function(t,r){return this.dragGroupStart(t,r)},dragGroupControl:function(t,r){return this.dragGroup(t,r)},dragGroupControlEnd:function(t,r){return this.dragGroupEnd(t,r)},fillDragParams:function(t,r){return q(t,r,R({isPinch:!!r.isPinch,transform:ts(r)},te(rs(r))))},fillDragEndParams:function(t,r){return q(t,r,{isPinch:!!r.isPinch,isDrag:r.isDrag})}};function ne(t,r,e,n,a,i,o){var s="Start"===a,l=i.isRequest;if(!t.state.target||s&&n.indexOf("Control")>-1&&!l&&t.areaElement===i.inputEvent.target)return!1;var p="".concat(e).concat(n).concat(a),c="".concat(e).concat(n,"Condition"),f="End"===a,d="After"===a,v=s&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());v&&t.updateRect(a,!0,!1),""===a&&!l&&hs(t.state,i);var h=X([],t[r],!0);if(l){var m=i.requestAble;h.some(function(O){return O.name===m})||h.push.apply(h,t.props.ables.filter(function(O){return O.name===m}))}if(!h.length)return!1;var b=X(X([lu],h,!0),[fu],!1).filter(function(O){return O[p]}),x=i.datas;v&&b.forEach(function(O){O.unset&&O.unset(t)});var C,S=i.inputEvent;f&&S&&(C=document.elementFromPoint(i.clientX,i.clientY)||S.target);var M=0,E=!1,_=function(){var O;E=!0,null===(O=i.stop)||void 0===O||O.call(i)},y=b.filter(function(O){var T=O.name,A=x[T]||(x[T]={});if(s&&(A.isEventStart=!O[c]||O[c](t,i)),A.isEventStart){var z=O[p](t,R(R({},i),{stop:_,resultCount:M,datas:A,originalDatas:x,inputTarget:C}));return t._emitter.off(),s&&!1===z&&(A.isEventStart=!1),M+=z?1:0,z}return!1}).length,D=!1;return s&&(E||b.length&&!y)&&(D=E||0===b.filter(function(O){var A=x[O.name];return!(!A.isEventStart||"strong"===O.dragRelation&&(A.isEventStart=!1,1))}).length),(f||D)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(O){O.state.gestos={}})),v&&D&&b.forEach(function(O){O.unset&&O.unset(t)}),s&&!D&&!l&&y&&(null==i||i.preventDefault()),!t.isUnmounted&&!D&&((!s&&y&&!o||f)&&(t.props.flushSync||os)(function(){t.updateRect(f?a:"",!0,!1),t.forceUpdate()}),!s&&!f&&!d&&y&&!o&&ne(t,r,e,n,a+"After",i),!0)}function cu(t,r,e){var n=t.controlBox.getElement(),a=[];a.push(n),(!t.props.dragArea||t.props.dragTarget)&&a.push(r);var i=function(o){var s=o.inputEvent.target;return s===t.areaElement||!t.isMoveableElement(s)&&!t.controlBox.getElement().contains(s)||Ct(s,"moveable-area")||Ct(s,"moveable-padding")};return Ca(t,a,"targetAbles",e,{dragStart:i,pinchStart:i})}function Ca(t,r,e,n,a){void 0===a&&(a={});var i="targetAbles"===e,o=t.props,f={preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,container:window,pinchThreshold:o.pinchThreshold,pinchOutside:o.pinchOutside,preventClickEventOnDrag:!!i&&o.preventClickEventOnDrag,preventClickEventOnDragStart:!!i&&o.preventClickDefault,preventClickEventByCondition:i?null:function(h){return t.controlBox.getElement().contains(h.target)},checkInput:!!i&&o.checkInput},d=new Ff(r,f),v="Control"===n;return["drag","pinch"].forEach(function(h){["Start","","End"].forEach(function(m){d.on("".concat(h).concat(m),function(b){var x,S=b.eventType;(!a[S]||a[S](b))&&ne(t,e,h,n,m,b)?(t.props.stopPropagation||"Start"===m&&v)&&(null===(x=null==b?void 0:b.inputEvent)||void 0===x||x.stopPropagation()):b.stop()})})}),d}var Qp=function(){function t(e,n,a){var i=this;this.target=e,this.moveable=n,this.eventName=a,this.ables=[],this._onEvent=function(o){var s=i.eventName,u=i.moveable;u.state.disableNativeEvent||i.ables.forEach(function(l){l[s](u,{inputEvent:o})})},e.addEventListener(a.toLowerCase(),this._onEvent)}var r=t.prototype;return r.setAbles=function(e){this.ables=e},r.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function pu(t,r,e,n){void 0===e&&(e=r);var a=0,i=0,o=0,s={},u=ps(t);if(t&&(a=u.offsetWidth,i=u.offsetHeight),t){var l=function(t,r,e,n){var a;void 0===e&&(e=r);var i=ls(t,r),o=i.matrixes,s=i.is3d,u=i.targetMatrix,l=i.transformOrigin,p=i.targetOrigin,c=i.offsetContainer,f=i.hasFixed,d=ls(c,e,!0),v=d.matrixes,h=d.is3d,m=d.offsetContainer,b=n||h||s,x=b?4:3,S="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,C=u,M=pt(x),E=pt(x),_=pt(x),w=pt(x),y=o.length;v.reverse(),o.reverse(),!s&&b&&(C=Vt(C,3,4),qn(o)),!h&&b&&qn(v),v.forEach(function(z){E=st(E,z.matrix,x)});var D=e||document.body,P=(null===(a=v[0])||void 0===a?void 0:a.target)||Me(D,D,!0).offsetParent,O=v.slice(1).reduce(function(z,B){return st(z,B.matrix,x)},pt(x));o.forEach(function(z,B){if(y-2===B&&(_=M.slice()),y-1===B&&(w=M.slice()),!z.matrix){var W=function(t,r,e,n,a){var i,o=t.target,s=t.origin,u=r.matrix,l=ps(o),p=l.offsetWidth,c=l.offsetHeight,f=e.getBoundingClientRect(),d=[0,0];e===document.body&&(d=us(o,!0));for(var v=o.getBoundingClientRect(),h=v.left-f.left+e.scrollLeft-(e.clientLeft||0)+d[0],m=v.top-f.top+e.scrollTop-(e.clientTop||0)+d[1],b=v.width,x=v.height,S=mn(n,a,u),C=fs(S,p,c,n),M=C.left,E=C.top,_=C.width,w=C.height,y=_t(S,s,n),D=j(y,[M,E]),P=[h+D[0]*b/_,m+D[1]*x/w],O=[0,0],T=0;++T<10;){var A=Xt(a,n);i=j(_t(A,P,n),_t(A,y,n)),O[0]=i[0],O[1]=i[1];var B=fs(mn(n,a,Yr(O,n),u),p,c,n),G=B.left-h,I=B.top-m;if(Math.abs(G)<2&&Math.abs(I)<2)break;P[0]-=G,P[1]-=I}return O.map(function(L){return Math.round(L)})}(z,o[B+1],P,x,st(O,M,x));z.matrix=Yr(W,x)}M=st(M,z.matrix,x)});var T=!S&&s;C||(C=pt(T?4:3));var A=ye(S&&16===C.length?Vt(C,4,3):C,T);return{hasFixed:f,rootMatrix:E=xo(E,x,x),beforeMatrix:_,offsetMatrix:w,allMatrix:M,targetMatrix:C,targetTransform:A,transformOrigin:l,targetOrigin:p,is3d:b,offsetContainer:c,offsetRootContainer:m}}(t,r,e,n),p=De(l.allMatrix,l.transformOrigin,a,i);s=R(R({},l),p);var c=De(l.allMatrix,[50,50],100,100);o=ds([c.pos1,c.pos2],c.direction)}var f=n?4:3;return R(R(R({width:a,height:i,rotation:o},u),{rootMatrix:pt(f),beforeMatrix:pt(f),offsetMatrix:pt(f),allMatrix:pt(f),targetMatrix:pt(f),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!n,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null}),s)}function _a(t,r,e,n,a){var i=1,o=[0,0],s={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},u={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},l={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},p={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},c=pu(r,e,a,!0);if(r){var d=De(c.offsetMatrix,K(c.transformOrigin,So(c.targetMatrix,c.is3d?4:3)),c.width,c.height);i=d.direction,o=K(d.origin,[d.left-c.left,d.top-c.top]),s=Qr(r),l=Qr(Me(n,n,!0).offsetParent||c.offsetRootContainer,!0),p=Qr(c.offsetRootContainer),t&&(u=Qr(t))}return R({targetClientRect:s,containerClientRect:l,moveableClientRect:u,rootContainerClientRect:p,beforeDirection:i,beforeOrigin:o,originalBeforeOrigin:o,target:r},c)}var Tr=function(t){function r(){var n=null!==t&&t.apply(this,arguments)||this;return n.state=R({container:null,gestos:{},renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1},_a(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new wn,n._prevTarget=null,n._prevDragArea=!1,n._onChangetarget=null,n._isPropTargetChanged=!1,n._observer=null,n._observerId=0,n.checkUpdateRect=function(){if(!n.isDragging()){var a=n.props.parentMoveable;if(a)return void a.checkUpdateRect();fl(n._observerId),n._observerId=$i(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(a){a.stopPropagation(),a.preventDefault()},n}Er(r,t);var e=r.prototype;return e.render=function(){var n=this.props,a=this.state,i=n.parentPosition,o=n.className,s=n.target,u=n.zoom,l=n.cspNonce,p=n.translateZ,c=n.cssStyled,f=n.portalContainer;this.checkUpdate(),this.updateRenderPoses();var d=i||{left:0,top:0},v=d.left,h=d.top,m=a.left,b=a.top,S=a.direction,C=a.hasFixed,M=n.targets,E=(M&&M.length||s)&&a.target,_=this.isDragging(),w={};return this.getEnabledAbles().forEach(function(y){w["data-able-".concat(y.name.toLowerCase())]=!0}),Gt(c,R({cspNonce:l,ref:Ht(this,"controlBox"),className:"".concat(Y("control-box",-1===S?"reverse":"",_?"dragging":"")," ").concat(o)},w,{onClick:this._onPreventClick,portalContainer:f,style:{position:C?"fixed":"absolute",display:E?"block":"none",transform:"translate3d(".concat(m-v,"px, ").concat(b-h,"px, ").concat(p,")"),"--zoom":u,"--zoompx":"".concat(u,"px")}}),this.renderAbles(),this._renderLines())},e.componentDidMount=function(){this.isUnmounted=!1,this.controlBox.getElement();var n=this.props,a=n.parentMoveable,i=n.container,o=n.wrapperMoveable;this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),!i&&!a&&!o&&this.updateRect("",!1,!0),this.updateCheckInput(),this._updateObserver(this.props)},e.componentDidUpdate=function(n){var a;this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(n),this._isPropTargetChanged&&(null===(a=this._onChangetarget)||void 0===a||a.call(this))},e.componentWillUnmount=function(){this.isUnmounted=!0,this._emitter.off(),Dr(this,"targetGesto"),Dr(this,"controlGesto");var n=this.events;for(var a in n){var i=n[a];i&&i.destroy()}},e.getAble=function(n){return ur(this.props.ables||[],function(i){return i.name===n})},e.getContainer=function(){var n=this.props,a=n.parentMoveable,i=n.wrapperMoveable;return n.container||i&&i.getContainer()||a&&a.getContainer()||this.controlBox.getElement().parentElement},e.isMoveableElement=function(n){return n&&(n.getAttribute("class")||"").indexOf(Wn)>-1},e.dragStart=function(n){var a=this.targetGesto;return a&&!a.isFlag()&&a.triggerDragStart(n),this},e.hitTest=function(n){var c,a=this.state,o=a.pos1,s=a.pos2,u=a.pos3,l=a.pos4,p=a.targetClientRect;if(!a.target)return 0;if(n instanceof Element){var f=n.getBoundingClientRect();c={left:f.left,top:f.top,width:f.width,height:f.height}}else c=R({width:0,height:0},n);var d=c.left,v=c.top,h=c.width,m=c.height,b=wo([o,s,l,u],p),x=af(b,[[d,v],[d+h,v],[d+h,v+m],[d,v+m]]),S=Do(b);return x&&S?Math.min(100,x/S*100):0},e.isInside=function(n,a){var i=this.state;return!!i.target&&Cn([n,a],wo([i.pos1,i.pos2,i.pos4,i.pos3],i.targetClientRect))},e.updateRect=function(n,a,i){void 0===i&&(i=!0);var o=this.props,s=o.parentMoveable,l=this.state.target||this.props.target,p=this.getContainer(),c=s?s.props.rootContainer:o.rootContainer;this.updateState(_a(this.controlBox&&this.controlBox.getElement(),l,p,p,c||p),!s&&i)},e.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},e.updateTarget=function(n){this.updateRect(n,!0)},e.getRect=function(){var n=this.state,a=Rt(this.state),i=a[0],o=a[1],s=a[2],u=a[3],l=Bt(a),p=n.width,c=n.height,f=l.width,d=l.height,v=l.left,h=l.top,m=[n.left,n.top],b=K(m,n.origin);return{width:f,height:d,left:v,top:h,pos1:i,pos2:o,pos3:s,pos4:u,offsetWidth:p,offsetHeight:c,beforeOrigin:K(m,n.beforeOrigin),origin:b,transformOrigin:n.transformOrigin,rotation:this.getRotation()}},e.getManager=function(){return this},e.getRotation=function(){var n=this.state;return function(t,r,e){var n=ht(t,r)/Math.PI*180;return(n=e>=0?n:180-n)>=0?n:360+n}(n.pos1,n.pos2,n.direction)},e.request=function(n,a,i){void 0===a&&(a={});var o=this.props,u=o.groupable,l=o.ables.filter(function(m){return m.name===n})[0];if(this.isDragging()||!l||!l.request)return{request:function(){return this},requestEnd:function(){return this}};var p=this,c=l.request(this),f=i||a.isInstant,d=c.isControl?"controlAbles":"targetAbles",v="".concat(u?"Group":"").concat(c.isControl?"Control":""),h={request:function(m){return ne(p,d,"drag",v,"",R(R({},c.request(m)),{requestAble:n,isRequest:!0}),f),this},requestEnd:function(){return ne(p,d,"drag",v,"End",R(R({},c.requestEnd()),{requestAble:n,isRequest:!0}),f),this}};return ne(p,d,"drag",v,"Start",R(R({},c.requestStart(a)),{requestAble:n,isRequest:!0}),f),f?h.request(a).requestEnd():h},e.destroy=function(){this.componentWillUnmount()},e.updateRenderPoses=function(){var n=this.state,a=this.props,i=n.originalBeforeOrigin,o=n.transformOrigin,s=n.allMatrix,l=n.pos1,p=n.pos2,c=n.pos3,f=n.pos4,h=a.padding||{},m=h.left,b=void 0===m?0:m,x=h.top,S=void 0===x?0:x,C=h.bottom,M=void 0===C?0:C,E=h.right,_=void 0===E?0:E,w=n.is3d?4:3,y=a.groupable?i:K(i,[n.left,n.top]);n.renderPoses=[K(l,Re(s,[-b,-S],o,y,w)),K(p,Re(s,[_,-S],o,y,w)),K(c,Re(s,[-b,M],o,y,w)),K(f,Re(s,[_,M],o,y,w))]},e.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,a=n.target,i=n.container,o=n.parentMoveable,s=this.state,u=s.target,l=s.container;if(u||a){this.updateAbles();var p=!ta(u,a);if(p||!ta(l,i)){var f=i||this.controlBox;f&&this.unsetAbles(),this.updateState({target:a,container:i}),!o&&f&&this.updateRect("End",!1,!1),this._isPropTargetChanged=p}}},e.waitToChangeTarget=function(){var a,n=this;return this._onChangetarget=function(){n._onChangetarget=null,a()},new Promise(function(i){a=i})},e.triggerEvent=function(n,a){this._emitter.trigger(n,a);var i=this.props[n];return i&&i(a)},e.useCSS=function(n,a){var i=this.props.customStyledMap,o=n+a;return i[o]||(i[o]=Ho(n,a)),i[o]},e.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(a){a.unset&&a.unset(n)})},e.updateAbles=function(n,a){void 0===n&&(n=this.props.ables),void 0===a&&(a="");var i=this.props,o=i.triggerAblesSimultaneously,s=n.filter(function(d){return d&&(d.always&&!1!==i[d.name]||i[d.name])}),u="drag".concat(a,"Start"),l="pinch".concat(a,"Start"),p="drag".concat(a,"ControlStart"),c=Oe(s,[u,l],o),f=Oe(s,[p],o);this.enabledAbles=s,this.targetAbles=c,this.controlAbles=f},e.updateState=function(n,a){if(a){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var o in n)i[o]=n[o]}},e.getEnabledAbles=function(){var n=this.props;return n.ables.filter(function(i){return i&&n[i.name]})},e.renderAbles=function(){var n=this,i=this.props.triggerAblesSimultaneously,o={createElement:Gt};return this.renderState={},function(t,r){var e=[],n={};return t.forEach(function(a,i){var o=function(s){return s.key}(a),s=n[o];s||(n[o]=s=[],e.push(s)),s.push(a)}),e}(function(t){return t.reduce(function(r,e){return r.concat(e)},[])}(Oe(this.getEnabledAbles(),["render"],i).map(function(s){return(0,s.render)(n,o)||[]})).filter(function(s){return s})).map(function(s){return s[0]})},e.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e._updateObserver=function(n){var a,i=this.props,o=i.target;if(window.ResizeObserver&&o&&i.useResizeObserver){if(n.target!==o||!this._observer){var s=new ResizeObserver(this.checkUpdateRect);s.observe(o,{box:"border-box"}),this._observer=s}}else null===(a=this._observer)||void 0===a||a.disconnect()},e._updateEvents=function(){var n=this.controlBox.getElement(),a=this.targetAbles.length,i=this.controlAbles.length,o=this.props,s=o.dragTarget||o.target;(!a&&this.targetGesto||this._isTargetChanged(!0))&&(Dr(this,"targetGesto"),this.updateState({gesto:null})),i||Dr(this,"controlGesto"),s&&a&&!this.targetGesto&&(this.targetGesto=cu(this,s,"")),!this.controlGesto&&i&&(this.controlGesto=Ca(this,n,"controlAbles","Control"))},e._updateTargets=function(){var n=this.props;this._prevTarget=n.dragTarget||n.target,this._prevDragArea=n.dragArea},e._renderLines=function(){var n=this.props,i=n.zoom;if(n.hideDefaultLines||n.parentMoveable&&n.hideChildMoveableDefaultLines)return[];var l=this.state.renderPoses,p={createElement:Gt};return[[0,1],[1,3],[3,2],[2,0]].map(function(c,f){return Ie(p,"",l[c[0]],l[c[1]],i,f)})},e._isTargetChanged=function(n){var a=this.props,u=a.dragArea;return!u&&this._prevTarget!==(a.dragTarget||a.target)||(n||u)&&this._prevDragArea!==u},e._updateNativeEvents=function(){var n=this,i=this.props.dragArea?this.areaElement:this.state.target,o=this.events,s=xr(o);if(this._isTargetChanged())for(var u in o){var l=o[u];l&&l.destroy(),o[u]=null}if(i){var p=this.enabledAbles;s.forEach(function(c){var f=Oe(p,[c]),v=o[c];f.length>0?(v||(v=new Qp(i,n,c),o[c]=v),v.setAbles(f)):v&&(v.destroy(),o[c]=null)})}},r.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,useResizeObserver:!1,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:os},r}(fn),Ea={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean,hideChildMoveableDefaultLines:Boolean},events:{},render:function(t,r){var e=t.props.targets||[];t.moveables=[];var n=t.state,o={left:n.left,top:n.top},s=t.props;return e.map(function(u,l){return r.createElement(Tr,{key:"moveable"+l,ref:Ni(t,"moveables",l),target:u,origin:!1,cssStyled:s.cssStyled,customStyledMap:s.customStyledMap,useResizeObserver:s.useResizeObserver,hideChildMoveableDefaultLines:s.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:o})})}},rd=qr("clickable",{props:{clickable:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){this.dragStart()},dragGroupStart:function(t,r){r.datas.inputTarget=r.inputEvent&&r.inputEvent.target},dragEnd:function(t,r){var e=t.state.target,n=r.inputEvent,a=r.inputTarget,o=!t.isMoveableElement(a)&&t.controlBox.getElement().contains(a);if(n&&a&&!r.isDrag&&!t.isMoveableElement(a)&&!o){var s=e.contains(a);N(t,"onClick",q(t,r,{isDouble:r.isDouble,inputTarget:a,isTarget:e===a,containsTarget:s}))}},dragGroupEnd:function(t,r){var n=r.inputTarget;if(r.inputEvent&&n&&!r.isDrag&&!t.isMoveableElement(n)&&r.datas.inputTarget!==n){var a=t.props.targets,i=a.indexOf(n),o=i>-1,s=!1;-1===i&&(s=(i=jt(a,function(u){return u.contains(n)}))>-1),N(t,"onClickGroup",q(t,r,{isDouble:r.isDouble,targets:a,inputTarget:n,targetIndex:i,isTarget:o,containsTarget:s}))}},dragControlEnd:function(t,r){this.dragEnd(t,r)},dragGroupControlEnd:function(t,r){this.dragEnd(t,r)}});function Pr(t){var r=t.originalDatas.draggable;return r||(t.originalDatas.draggable={},r=t.originalDatas.draggable),R(R({},t),{datas:r})}var ed=qr("edgeDraggable",{css:[".edge.edgeDraggable.line {\n    cursor: move;\n}"],render:function(t,r){var e=t.props,n=e.edgeDraggable;return n?Hs(r,"edgeDraggable",n,t.state.renderPoses,e.zoom):[]},dragControlCondition:function(t,r){if(!t.props.edgeDraggable||!r.inputEvent)return!1;var e=r.inputEvent.target;return Ct(e,Y("direction"))&&Ct(e,Y("edge"))&&Ct(e,Y("edgeDraggable"))},dragControlStart:function(t,r){return t.state.snapRenderInfo={request:r.isRequest,snap:!0,center:!0},wt.dragStart(t,Pr(r))},dragControl:function(t,r){return wt.drag(t,Pr(r))},dragControlEnd:function(t,r){return wt.dragEnd(t,Pr(r))},dragGroupControlCondition:function(t,r){if(!t.props.edgeDraggable||!r.inputEvent)return!1;var e=r.inputEvent.target;return Ct(e,Y("direction"))&&Ct(e,Y("line"))},dragGroupControlStart:function(t,r){return wt.dragGroupStart(t,Pr(r))},dragGroupControl:function(t,r){return wt.dragGroup(t,Pr(r))},dragGroupControlEnd:function(t,r){return wt.dragGroupEnd(t,Pr(r))},unset:function(t){return wt.unset(t)}}),du={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},Ma=[lu,Ks,Dp,Nc,wt,ed,da,Ap,Bp,zp,Np,Lp,kp,Up,qp,$p,Ea,du,rd,$s,fu],nd=Ma.reduce(function(t,r){return R(R({},t),"events"in r?r.events:{})},{}),vu=Ma.reduce(function(t,r){return R(R({},t),r.props)},{}),id=Object.keys(Gc(nd)),od=Object.keys(vu);function We(t,r){return Math.max.apply(Math,t.map(function(e){return Math.max(e[0][r],e[1][r],e[2][r],e[3][r])}))}function Ye(t,r){return Math.min.apply(Math,t.map(function(e){return Math.min(e[0][r],e[1][r],e[2][r],e[3][r])}))}var ud=function(t){function r(){var n=null!==t&&t.apply(this,arguments)||this;return n.differ=new Ul,n.moveables=[],n.transformOrigin="50% 50%",n}Er(r,t);var e=r.prototype;return e.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.updateRect=function(n,a,i){if(void 0===i&&(i=!0),this.controlBox){this.moveables.forEach(function(T){T.updateRect(n,!1,!1)});var o=this.state,s=this.props,u=o.target||s.target;(!a||""!==n&&s.updateGroup)&&(this.rotation=s.defaultGroupRotate,this.transformOrigin=s.defaultGroupOrigin||"50% 50%",this.scale=[1,1]);var l=this.rotation,p=this.scale,c=function(t,r){if(!t.length)return[0,0,0,0];var e=t.map(function(h){return Rt(h.state)}),n=Ur,a=Ur,i=0,o=0,s=J(r,Dt);if(s%90){var u=s/180*Math.PI,l=Math.tan(u),p=-1/l,c=[Zo,Ur],f=[Zo,Ur];e.forEach(function(h){h.forEach(function(m){var b=m[1]-l*m[0],x=m[1]-p*m[0];c[0]=Math.max(c[0],b),c[1]=Math.min(c[1],b),f[0]=Math.max(f[0],x),f[1]=Math.min(f[1],x)})}),c.forEach(function(h){f.forEach(function(m){var b=(m-h)/(l-p),x=l*b+h;n=Math.min(n,b),a=Math.min(a,x)})});var d=e.map(function(h){var b=h[1],x=h[2],S=h[3];return[Qt(h[0],-u),Qt(b,-u),Qt(x,-u),Qt(S,-u)]});i=We(d,0)-Ye(d,0),o=We(d,1)-Ye(d,1)}else if(n=Ye(e,0),a=Ye(e,1),i=We(e,0)-n,o=We(e,1)-a,s%180){var v=i;i=o,o=v}return[n,a,i,o]}(this.moveables,l),f=c[0],d=c[1],v=c[2],h=c[3],m="rotate(".concat(l,"deg) scale(").concat(p[0]>=0?1:-1,", ").concat(p[1]>=0?1:-1,")");u.style.cssText+="left:0px;top:0px; transform-origin: ".concat(this.transformOrigin,"; width:").concat(v,"px; height:").concat(h,"px;")+"transform:".concat(m),o.width=v,o.height=h;var b=this.getContainer(),x=_a(this.controlBox.getElement(),u,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||b),S=[x.left,x.top],C=Rt(x),M=C[0],E=C[1],_=C[2],w=C[3],y=ve([M,E,_,w]),D=[y.minX,y.minY];x.pos1=j(M,D),x.pos2=j(E,D),x.pos3=j(_,D),x.pos4=j(w,D),x.left=f-x.left+D[0],x.top=d-x.top+D[1],x.origin=j(K(S,x.origin),D),x.beforeOrigin=j(K(S,x.beforeOrigin),D),x.originalBeforeOrigin=K(S,x.originalBeforeOrigin);var P=x.targetClientRect,O=p[0]*p[1]>0?1:-1;P.top+=x.top-o.top,P.left+=x.left-o.left,u.style.transform="translate(".concat(-D[0],"px, ").concat(-D[1],"px) ").concat(m),this.updateState(R(R({},x),{direction:O,beforeDirection:O}),i)}},e.getRect=function(){return R(R({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.triggerEvent=function(n,a,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,a);this._emitter.trigger(n,a)},e.updateAbles=function(){t.prototype.updateAbles.call(this,X(X([],this.props.ables,!0),[Ea],!1),"Group")},e._updateTargets=function(){t.prototype._updateTargets.call(this),this._prevTarget=this.props.dragTarget||this.areaElement},e._updateEvents=function(){var n=this.state,a=this.props,o=a.dragTarget||this.areaElement;this._prevTarget!==o&&(Dr(this,"targetGesto"),Dr(this,"controlGesto"),n.target=null),n.target||(n.target=this.areaElement,this.controlBox.getElement().style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=cu(this,o,"Group")),this.controlGesto||(this.controlGesto=Ca(this,this.controlBox.getElement(),"controlAbles","GroupControl")));var s=!ta(n.container,a.container);s&&(n.container=a.container);var u=this.differ.update(a.targets),f=u.added.length||u.removed.length;(s||f||u.changed.length)&&this.updateRect(),this._isPropTargetChanged=!!f},e._updateObserver=function(){},r.defaultProps=R(R({},Tr.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),r}(Tr),ld=function(t){function r(){var n=null!==t&&t.apply(this,arguments)||this;return n.moveables=[],n}Er(r,t);var e=r.prototype;return e.render=function(){var n=this,a=this.props,s=a.targets;return Gt(a.cssStyled,{cspNonce:a.cspNonce,ref:Ht(this,"controlBox"),className:Y("control-box")},s.map(function(u,l){return Gt(Tr,R({key:"moveable"+l,ref:Ni(n,"moveables",l)},n.props,{target:u,wrapperMoveable:n}))}))},e.componentDidUpdate=function(){},e.updateRect=function(n,a,i){void 0===i&&(i=!0),this.moveables.forEach(function(o){o.updateRect(n,a,i)})},e.getRect=function(){return R(R({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},e.dragStart=function(){return this},e.hitTest=function(){return 0},e.isInside=function(){return!1},e.isDragging=function(){return!1},e.updateRenderPoses=function(){},e.checkUpdate=function(){},e.triggerEvent=function(){},e.updateAbles=function(){},e._updateEvents=function(){},e._updateObserver=function(){},r}(Tr),cd=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return Er(r,t),r.defaultAbles=Ma,r}(function(t){function r(){var n=null!==t&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n}Er(r,t);var e=r.prototype;return r.makeStyled=function(){var n={};this.getTotalAbles().forEach(function(o){var s=o.css;!s||s.forEach(function(u){n[u]=!0})});var i=xr(n).join("\n");this.defaultStyled=Ho("div",function(t,r){return r.replace(/([^}{]*){/gm,function(e,n){return n.replace(/\.([^{,\s\d.]+)/g,".moveable-$1")+"{"})}(0,rc+i))},r.getTotalAbles=function(){return X([Ks,Ea,du,$s],this.defaultAbles,!0)},e.render=function(){var n=this.constructor;n.defaultStyled||n.makeStyled();var a=this.props,i=a.ables,o=a.props,s=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]])}return e}(a,["ables","props"]),l=function(t,r){var e=[];return t.forEach(function(n){if(n){if(At(n))return void(r[n]&&e.push.apply(e,r[n]));e.push(n)}}),e}(this._updateRefs(!0),this.selectorMap),p=l.length>1,f=X(X([],n.getTotalAbles(),!0),i||[],!0),d=R(R(R({},s),o||{}),{ables:f,cssStyled:n.defaultStyled,customStyledMap:n.customStyledMap});return p?s.individualGroupable?Gt(ld,R({key:"individual-group",ref:Ht(this,"moveable")},d,{target:null,targets:l})):Gt(ud,R({key:"group",ref:Ht(this,"moveable")},d,{target:null,targets:l})):Gt(Tr,R({key:"single",ref:Ht(this,"moveable")},d,{target:l[0]}))},e.componentDidMount=function(){this._updateRefs()},e.componentDidUpdate=function(){this._updateRefs()},e.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.getManager=function(){return this.moveable},e._updateRefs=function(n){var a=this.refTargets,i=gs(this.props.target||this.props.targets),o="undefined"!=typeof document,s=a.length!==i.length||a.some(function(p,c){var f=i[c];return!(!p&&!f)&&p!==f}),u=this.selectorMap,l={};return this.refTargets.forEach(function(p){At(p)&&(u[p]?l[p]=u[p]:o&&(s=!0,l[p]=[].slice.call(document.querySelectorAll(p))))}),this.refTargets=i,this.selectorMap=l,!n&&s&&this.forceUpdate(),i},r.defaultAbles=[],r.customStyledMap={},r.defaultStyled=null,function(t,r,e,n){var o,a=arguments.length,i=a<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,r,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(r,e,i):o(r,e))||i);a>3&&i&&Object.defineProperty(r,e,i)}([Wi(qo)],r.prototype,"moveable",void 0),r}(fn)),ya=function(t,r){return(ya=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])})(t,r)};function Da(t,r){function e(){this.constructor=t}ya(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}var ae=function(){return(ae=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r}).apply(this,arguments)},dd=function(t){function r(n){var a=t.call(this,n)||this;return a.state={},a.state=a.props,a}return Da(r,t),r.prototype.render=function(){return function(t,r){return Gt(wl,{element:t,container:r})}(Gt(cd,ae({ref:Ht(this,"moveable")},this.state)),this.state.parentElement)},r}(ln),gu=od,mu=qo,wa=id,Oa=function(){return(Oa=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r}).apply(this,arguments)},bu=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return Da(r,t),r}(function(t){function r(n,a){void 0===a&&(a={});var i=t.call(this)||this;i.tempElement=document.createElement("div");var o=ae({},a),s={};wa.forEach(function(l){s[function(t){return t.replace(/[\s-_]([a-z])/g,function(r,e){return e.toUpperCase()})}("on ".concat(l))]=function(p){return i.trigger(l,p)}}),uo(Gt(dd,ae({ref:Ht(i,"innerMoveable"),parentElement:n},o,s)),i.tempElement);var u=o.target;return Ut(u)&&u.length>1&&i.updateRect(),i}Da(r,t);var e=r.prototype;return e.setState=function(n,a){this.innerMoveable.setState(n,a)},e.forceUpdate=function(n){this.innerMoveable.forceUpdate(n)},e.dragStart=function(n){this.innerMoveable.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(n)},e.destroy=function(){uo(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},e.getMoveable=function(){return this.innerMoveable.moveable},function(t,r,e,n){var o,a=arguments.length,i=a<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,r,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(r,e,i):o(r,e))||i);return a>3&&i&&Object.defineProperty(r,e,i),i}([Li(mu,function(n,a){n[a]||(n[a]=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=this.getMoveable();if(s&&s[a])return s[a].apply(s,i)})}),Li(gu,function(n,a){Object.defineProperty(n,a,{get:function(){return this.getMoveable().props[a]},set:function(i){var o;this.setState(((o={})[a]=i,o))},enumerable:!0,configurable:!0})})],r)}(function(){function t(){this._events={}}var r=t.prototype;return r.on=function(e,n){if(kt(e))for(var a in e)this.on(a,e[a]);else this._addEvent(e,n,{});return this},r.off=function(e,n){if(e)if(kt(e))for(var a in e)this.off(a);else if(n){var i=this._events[e];if(i){var o=jt(i,function(s){return s.listener===n});o>-1&&i.splice(o,1)}}else this._events[e]=[];else this._events={};return this},r.once=function(e,n){var a=this;return n&&this._addEvent(e,n,{once:!0}),new Promise(function(i){a._addEvent(e,i,{once:!0})})},r.emit=function(e,n){var a=this;void 0===n&&(n={});var i=this._events[e];if(!e||!i)return!0;var o=!1;return n.eventType=e,n.stop=function(){o=!0},n.currentTarget=this,function(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;var n=Array(t),a=0;for(r=0;r<e;r++)for(var i=arguments[r],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}(i).forEach(function(s){s.listener(n),s.once&&a.off(e,s.listener)}),!o},r.trigger=function(e,n){return void 0===n&&(n={}),this.emit(e,n)},r._addEvent=function(e,n,a){var i=this._events;i[e]=i[e]||[],i[e].push(Oa({listener:n},a))},t}())),xu=F(4762);let bd=(()=>{class t{}return(0,xu.gn)([Wi(mu,{dragStart:"ngDragStart"}),(0,xu.w6)("design:type",bu)],t.prototype,"moveable",void 0),t})(),xd=(()=>{class t extends bd{constructor(e){super(),this._elementRef=e,wa.forEach(n=>{this[n]=new g.vpe})}ngOnInit(){const e={},n={};gu.forEach(i=>{e[i]=this[i]}),wa.forEach(i=>{n[i]=o=>{this[i].emit(o)}});const a=this._elementRef.nativeElement;this.moveable=new bu(a,Object.assign(Object.assign({},e),{portalContainer:a})),this.moveable.on(n)}ngOnChanges(e){const n=this.moveable;if(n)for(const a in e){const{previousValue:i,currentValue:o}=e[a];i!==o&&(n[a]=o)}}ngOnDestroy(){this.moveable.destroy()}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(g.SBq))},t.\u0275cmp=g.Xpm({type:t,selectors:[["ngx-moveable"]],inputs:{target:"target",dragTarget:"dragTarget",container:"container",portalContainer:"portalContainer",rootContainer:"rootContainer",useResizeObserver:"useResizeObserver",zoom:"zoom",transformOrigin:"transformOrigin",edge:"edge",ables:"ables",className:"className",pinchThreshold:"pinchThreshold",pinchOutside:"pinchOutside",triggerAblesSimultaneously:"triggerAblesSimultaneously",checkInput:"checkInput",cspNonce:"cspNonce",translateZ:"translateZ",hideDefaultLines:"hideDefaultLines",props:"props",flushSync:"flushSync",stopPropagation:"stopPropagation",preventClickEventOnDrag:"preventClickEventOnDrag",preventClickDefault:"preventClickDefault",snappable:"snappable",snapContainer:"snapContainer",snapDirections:"snapDirections",elementSnapDirections:"elementSnapDirections",snapGap:"snapGap",snapGridWidth:"snapGridWidth",snapGridHeight:"snapGridHeight",isDisplaySnapDigit:"isDisplaySnapDigit",isDisplayInnerSnapDigit:"isDisplayInnerSnapDigit",snapDigit:"snapDigit",snapThreshold:"snapThreshold",horizontalGuidelines:"horizontalGuidelines",verticalGuidelines:"verticalGuidelines",elementGuidelines:"elementGuidelines",bounds:"bounds",innerBounds:"innerBounds",snapDistFormat:"snapDistFormat",maxSnapElementGuidelineDistance:"maxSnapElementGuidelineDistance",maxSnapElementGapDistance:"maxSnapElementGapDistance",pinchable:"pinchable",draggable:"draggable",throttleDrag:"throttleDrag",throttleDragRotate:"throttleDragRotate",startDragRotate:"startDragRotate",edgeDraggable:"edgeDraggable",resizable:"resizable",throttleResize:"throttleResize",renderDirections:"renderDirections",keepRatio:"keepRatio",resizeFormat:"resizeFormat",keepRatioFinally:"keepRatioFinally",scalable:"scalable",throttleScale:"throttleScale",warpable:"warpable",rotatable:"rotatable",rotationPosition:"rotationPosition",throttleRotate:"throttleRotate",rotationTarget:"rotationTarget",rotateAroundControls:"rotateAroundControls",resolveAblesWithRotatable:"resolveAblesWithRotatable",scrollable:"scrollable",scrollContainer:"scrollContainer",scrollThreshold:"scrollThreshold",getScrollPosition:"getScrollPosition",padding:"padding",origin:"origin",originDraggable:"originDraggable",originRelative:"originRelative",clippable:"clippable",defaultClipPath:"defaultClipPath",customClipPath:"customClipPath",clipRelative:"clipRelative",clipArea:"clipArea",dragWithClip:"dragWithClip",clipTargetBounds:"clipTargetBounds",clipVerticalGuidelines:"clipVerticalGuidelines",clipHorizontalGuidelines:"clipHorizontalGuidelines",clipSnapThreshold:"clipSnapThreshold",roundable:"roundable",roundRelative:"roundRelative",minRoundControls:"minRoundControls",maxRoundControls:"maxRoundControls",roundClickable:"roundClickable",defaultGroupRotate:"defaultGroupRotate",defaultGroupOrigin:"defaultGroupOrigin",groupable:"groupable",hideChildMoveableDefaultLines:"hideChildMoveableDefaultLines",individualGroupable:"individualGroupable",clickable:"clickable",dragArea:"dragArea",passDragArea:"passDragArea"},outputs:{beforeRenderStart:"beforeRenderStart",beforeRender:"beforeRender",beforeRenderEnd:"beforeRenderEnd",beforeRenderGroupStart:"beforeRenderGroupStart",beforeRenderGroup:"beforeRenderGroup",beforeRenderGroupEnd:"beforeRenderGroupEnd",snap:"snap",pinchStart:"pinchStart",pinch:"pinch",pinchEnd:"pinchEnd",pinchGroupStart:"pinchGroupStart",pinchGroup:"pinchGroup",pinchGroupEnd:"pinchGroupEnd",dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd",dragGroupStart:"dragGroupStart",dragGroup:"dragGroup",dragGroupEnd:"dragGroupEnd",resizeStart:"resizeStart",beforeResize:"beforeResize",resize:"resize",resizeEnd:"resizeEnd",resizeGroupStart:"resizeGroupStart",beforeResizeGroup:"beforeResizeGroup",resizeGroup:"resizeGroup",resizeGroupEnd:"resizeGroupEnd",scaleStart:"scaleStart",beforeScale:"beforeScale",scale:"scale",scaleEnd:"scaleEnd",scaleGroupStart:"scaleGroupStart",beforeScaleGroup:"beforeScaleGroup",scaleGroup:"scaleGroup",scaleGroupEnd:"scaleGroupEnd",warpStart:"warpStart",warp:"warp",warpEnd:"warpEnd",rotateStart:"rotateStart",beforeRotate:"beforeRotate",rotate:"rotate",rotateEnd:"rotateEnd",rotateGroupStart:"rotateGroupStart",beforeRotateGroup:"beforeRotateGroup",rotateGroup:"rotateGroup",rotateGroupEnd:"rotateGroupEnd",scroll:"scroll",scrollGroup:"scrollGroup",dragOriginStart:"dragOriginStart",dragOrigin:"dragOrigin",dragOriginEnd:"dragOriginEnd",clipStart:"clipStart",clip:"clip",clipEnd:"clipEnd",roundStart:"roundStart",round:"round",roundEnd:"roundEnd",click:"click",clickGroup:"clickGroup",renderStart:"renderStart",render:"render",renderEnd:"renderEnd",renderGroupStart:"renderGroupStart",renderGroup:"renderGroup",renderGroupEnd:"renderGroupEnd"},features:[g.qOj,g.TTD],decls:0,vars:0,template:function(e,n){},encapsulation:2}),t})(),Sd=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[]]}),t})();var Su=F(4828);const Cd=["textareaOptions"],_d=["textareaMockData"];let Ed=(()=>{class t{constructor(){this.options={},this.mockdata={},this.changeSetting=new g.vpe}ngOnInit(){}ngOnChanges(){this.loadOptons()}loadOptons(){this.textareaOptions&&(this.textareaOptions.nativeElement.innerHTML=JSON.stringify(this.options||{},null,2)),this.textareaMockData&&(this.textareaMockData.nativeElement.innerHTML=JSON.stringify(this.mockdata||{},null,2))}textareaOnchange1(){this.options=JSON.parse(this.textareaOptions.nativeElement.value),this.changeSetting.emit({options:this.options})}textareaOnchange2(){this.mockdata=JSON.parse(this.textareaMockData.nativeElement.value),this.changeSetting.emit({mockdata:this.mockdata})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-setting"]],viewQuery:function(e,n){if(1&e&&(g.Gf(Cd,5),g.Gf(_d,5)),2&e){let a;g.iGM(a=g.CRH())&&(n.textareaOptions=a.first),g.iGM(a=g.CRH())&&(n.textareaMockData=a.first)}},inputs:{options:"options",mockdata:"mockdata"},outputs:{changeSetting:"changeSetting"},features:[g.TTD],decls:10,vars:0,consts:[["nzTitle","options"],["cols","30","rows","20",1,"area",3,"change"],["textareaOptions",""],["nzTitle","mockdata"],["textareaMockData",""]],template:function(e,n){1&e&&(g.TgZ(0,"div"),g.TgZ(1,"nz-tabset"),g.TgZ(2,"nz-tab",0),g.TgZ(3,"textarea",1,2),g.NdJ("change",function(){return n.textareaOnchange1()}),g._uU(5," "),g.qZA(),g.qZA(),g.TgZ(6,"nz-tab",3),g.TgZ(7,"textarea",1,4),g.NdJ("change",function(){return n.textareaOnchange2()}),g._uU(9," "),g.qZA(),g.qZA(),g.qZA(),g.qZA())},directives:[Su.xH,Su.xw],styles:["nz-tabset[_ngcontent-%COMP%]{background:white;min-height:520px;padding:0 10px}"]}),t})();const Md=["target"],yd=["moveable"],Dd=["appwidget"];function wd(t,r){if(1&t){const e=g.EpF();g.TgZ(0,"li",20),g.NdJ("click",function(){const i=g.CHM(e).$implicit;return g.oxw(2).wlistclick(i)}),g._uU(1),g.qZA()}if(2&t){const e=r.$implicit;g.xp6(1),g.hij(" ",e.title," ")}}function Od(t,r){if(1&t&&(g.TgZ(0,"li",18),g.TgZ(1,"ul"),g.YNc(2,wd,2,1,"li",19),g.qZA(),g.qZA()),2&t){const e=r.$implicit;g.s9C("nzTitle",e.title),g.xp6(2),g.Q6J("ngForOf",e.children)}}const Cu=function(t){return{transform:t}};function Rd(t,r){if(1&t){const e=g.EpF();g.TgZ(0,"app-widget",21,22),g.NdJ("click",function(a){const o=g.CHM(e).$implicit;return g.oxw().appWidgetClick(o,a)})("eventEmit",function(a){return g.CHM(e),g.oxw().onGetInstance(a)}),g.qZA()}if(2&t){const e=r.$implicit;g.Akn(g.VKq(11,Cu,"rotate("+e.position.rotate+"deg)")),g.Udp("top",e.position.top,"px")("left",e.position.left,"px")("width",e.position.width,"px")("height",e.position.height,"px"),g.Q6J("widgetConfig",e)}}const Td=function(){return["/home"]},Pd=function(t){return["/editer/preview",t]},zd=[{path:"list",component:ka},{path:"edit/:id",component:(()=>{class t{constructor(e,n,a){this.route=e,this.router=n,this.editService=a,this.isCollapsed=!1,this.displaySetting=!1,this.scaleK=.5,this.cwidgets=Fu,this.nowwidget=null,this.senseWidgets=[],this.position={left:0,top:0,width:400,height:400,rotate:0},this.widgetInstances={},this.scalable=!0,this.resizable=!0,this.warpable=!1}ngOnInit(){this.route.paramMap.subscribe(e=>{const n=e.get("id");this.sceneId=n,n.toString().length<6?this.editService.loadJsonScene(n).subscribe(a=>{this.senseWidgets=a.components}):this.editService.getScene(n).subscribe(a=>{this.senseWidgets=a.data||[],this.senseWidgets.forEach(o=>{o.uuid||(o.uuid=Ze())})})})}wlistclick(e){this.options=null;const n={selector:e.selector,position:Object.assign(JSON.parse(JSON.stringify(this.position)),e.position||{}),uuid:Ze()};this.senseWidgets.push(n),this.nowwidget=n;const{width:a,height:i,left:o,top:s,rotate:u}=n.position;this.setTargetPosition(a,i,o,s,u),setTimeout(()=>{var l;this.options=null===(l=this.widgetInstances[n.uuid])||void 0===l?void 0:l.options,this.options=JSON.parse(JSON.stringify(this.options||{}))},10)}onMoving(e,n){}onMoveEnd(e,n){}onResizeStart(e,n){this._width=n.size.width}onResizing(e,n){e.position.width=this._width+2*(n.size.width-this._width)}onResizeStop(e,n){var a,i;let o=n.size.width;e.position.top=n.position.top,e.position.left=n.position.left,e.position.width=this._width+2*(o-this._width),e.position.height=n.size.height,this._width=n.size.width,this.widgetInstances[e.uuid]&&(null===(i=(a=this.widgetInstances[e.uuid]).onResize)||void 0===i||i.call(a))}clearScene(){this.senseWidgets=[],this.clearSomething()}saveScene(){this.editService.saveScene(this.sceneId,this.senseWidgets),localStorage.setItem("scene",JSON.stringify(this.senseWidgets))}innerContentClick(e){e.preventDefault(),e.stopPropagation(),(e.target.classList.contains("nz-content")||e.target.classList.contains("inner-content"))&&this.clearSomething()}clearSomething(){this.nowwidget=null,this.options=null,this.targetdiv.nativeElement.style.display="none",this.targetdiv.nativeElement.style.width="0px",this.targetdiv.nativeElement.style.height="0px",this.moveable.updateTarget()}setTargetPosition(e,n,a,i,o=0){this.targetdiv.nativeElement&&(this.targetdiv.nativeElement.style.width=e+"px",this.targetdiv.nativeElement.style.height=n+"px",this.targetdiv.nativeElement.style.left=a+"px",this.targetdiv.nativeElement.style.top=i+"px",this.targetdiv.nativeElement.style.transform=`rotate(${o}deg)`),this.nowwidget&&(this.nowwidget.position.width=e,this.nowwidget.position.height=n,this.nowwidget.position.left=a,this.nowwidget.position.top=i,this.nowwidget.position.rotate=o)}appWidgetClick(e,n){if(e.selector){this.nowwidget=e,this.targetdiv.nativeElement&&(this.targetdiv.nativeElement.style.display="block");const{width:a,height:i,left:o,top:s,rotate:u}=e.position;this.setTargetPosition(a,i,o,s,u),setTimeout(()=>{var l;this.moveable.updateTarget(),this.options=null===(l=this.widgetInstances[e.uuid])||void 0===l?void 0:l.options,this.options=JSON.parse(JSON.stringify(this.options||{}))},10)}}deleteComponent(){this.senseWidgets=this.senseWidgets.filter(e=>e.uuid!==this.nowwidget.uuid),this.clearSomething()}onChangeSetting(e){var n,a;e.options&&this.widgetInstances[this.nowwidget.uuid]&&(null===(a=(n=this.widgetInstances[this.nowwidget.uuid]).onchangeOption)||void 0===a||a.call(n,e.options))}onGetInstance(e){e.uuid&&(this.widgetInstances[e.uuid]=e.comInstance)}onPinch({}){}onDrag({target:e,top:i,left:o}){e.style.left=`${o}px`,e.style.top=`${i}px`,this.nowwidget&&(this.nowwidget.position.left=o,this.nowwidget.position.top=i)}onScale({target:e,delta:n}){e.style.transform=`scale(${n})`}onRotate({target:e,beforeRotate:o}){e.style.transform=`rotate(${o}deg)`,this.nowwidget&&(this.nowwidget.position.rotate=o)}onResize({target:e,width:i,height:o,drag:s}){e.style.width=`${i}px`,e.style.height=`${o}px`,e.style.left=s.beforeTranslate[0]+"px",e.style.top=s.beforeTranslate[1]+"px",this.setTargetPosition(i,o,s.beforeTranslate[0],s.beforeTranslate[1],this.nowwidget.position.rotate),this.moveable.updateTarget()}onWarp({}){}onEnd(){var e,n;this.nowwidget&&(null===(n=null===(e=this.widgetInstances[this.nowwidget.uuid])||void 0===e?void 0:e.onResize)||void 0===n||n.call(e))}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(or.gz),g.Y36(or.F0),g.Y36(qe))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-edit"]],viewQuery:function(e,n){if(1&e&&(g.Gf(Md,5),g.Gf(yd,5),g.Gf(Dd,5)),2&e){let a;g.iGM(a=g.CRH())&&(n.targetdiv=a.first),g.iGM(a=g.CRH())&&(n.moveable=a.first),g.iGM(a=g.CRH())&&(n.appwidget=a)}},decls:35,vars:38,consts:[[1,"app-layout"],["nzCollapsible","","nzWidth","150px","nzBreakpoint","md",1,"menu-sidebar",3,"nzCollapsed","nzTrigger","nzCollapsedChange"],[1,"sidebar-logo"],["nz-icon","",2,"color","white",3,"nzType","click"],[3,"routerLink"],["nz-menu","","nzTheme","dark",3,"nzMode"],["nz-submenu","","nzIcon","appstore",3,"nzTitle",4,"ngFor","ngForOf"],[2,"position","absolute","width","150px","top","36px",3,"ngModel","nzMin","nzMax","nzStep","nzDefaultValue","ngModelChange"],[3,"click"],["target","_blank",3,"routerLink"],[1,"nz-content",3,"click"],[1,"inner-content"],["style","position: absolute;",3,"widgetConfig","style","top","left","width","height","click","eventEmit",4,"ngFor","ngForOf"],[1,"moveable",2,"position","absolute","left","-10000px","width","0px","height","0px","z-index","99","background-color","rgba(127, 255, 212, 0.108)"],["target",""],[3,"target","draggable","origin","rotatable","pinchable","scalable","resizable","warpable","keepRatio","throttleDrag","throttleScale","throttleRotate","throttleResize","drag","resize","scale","warp","rotate","pinch","dragEnd","resizeEnd","scaleEnd","warpEnd","rotateEnd","pinchEnd"],["moveable",""],[1,"setting",3,"options","changeSetting"],["nz-submenu","","nzIcon","appstore",3,"nzTitle"],["nz-menu-item","",3,"click",4,"ngFor","ngForOf"],["nz-menu-item","",3,"click"],[2,"position","absolute",3,"widgetConfig","click","eventEmit"],["appwidget",""]],template:function(e,n){if(1&e&&(g.TgZ(0,"nz-layout",0),g.TgZ(1,"nz-sider",1),g.NdJ("nzCollapsedChange",function(i){return n.isCollapsed=i}),g.TgZ(2,"div",2),g.TgZ(3,"i",3),g.NdJ("click",function(){return n.isCollapsed=!n.isCollapsed}),g.qZA(),g.TgZ(4,"h1"),g.TgZ(5,"a",4),g._uU(6,"Home"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(7,"ul",5),g.YNc(8,Od,3,2,"li",6),g.qZA(),g.qZA(),g.TgZ(9,"nz-layout"),g.TgZ(10,"nz-header"),g.TgZ(11,"nz-slider",7),g.NdJ("ngModelChange",function(i){return n.scaleK=i}),g.qZA(),g.TgZ(12,"span"),g.TgZ(13,"a",8),g.NdJ("click",function(){return n.saveScene()}),g._uU(14,"Save"),g.qZA(),g.qZA(),g.TgZ(15,"span"),g.TgZ(16,"a",8),g.NdJ("click",function(){return n.displaySetting=!n.displaySetting}),g._uU(17,"Options"),g.qZA(),g.qZA(),g.TgZ(18,"span"),g.TgZ(19,"a",8),g.NdJ("click",function(){return n.deleteComponent()}),g._uU(20,"Delete"),g.qZA(),g.qZA(),g.TgZ(21,"span"),g.TgZ(22,"a",8),g.NdJ("click",function(){return n.clearScene()}),g._uU(23,"Clear"),g.qZA(),g.qZA(),g.TgZ(24,"span"),g.TgZ(25,"a",9),g._uU(26,"Preview"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(27,"nz-content",10),g.NdJ("click",function(i){return n.innerContentClick(i)}),g.TgZ(28,"div",11),g.YNc(29,Rd,2,13,"app-widget",12),g._UZ(30,"div",13,14),g.TgZ(32,"ngx-moveable",15,16),g.NdJ("drag",function(i){return n.onDrag(i)})("resize",function(i){return n.onResize(i)})("scale",function(i){return n.onScale(i)})("warp",function(i){return n.onWarp(i)})("rotate",function(i){return n.onRotate(i)})("pinch",function(i){return n.onPinch(i)})("dragEnd",function(){return n.onEnd()})("resizeEnd",function(){return n.onEnd()})("scaleEnd",function(){return n.onEnd()})("warpEnd",function(){return n.onEnd()})("rotateEnd",function(){return n.onEnd()})("pinchEnd",function(){return n.onEnd()}),g.qZA(),g.qZA(),g.TgZ(34,"app-setting",17),g.NdJ("changeSetting",function(i){return n.onChangeSetting(i)}),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e){const a=g.MAs(31);g.xp6(1),g.Q6J("nzCollapsed",n.isCollapsed)("nzTrigger",null),g.xp6(2),g.Q6J("nzType","home"),g.xp6(2),g.Q6J("routerLink",g.DdM(33,Td)),g.xp6(2),g.Q6J("nzMode","vertical"),g.xp6(1),g.Q6J("ngForOf",n.cwidgets),g.xp6(3),g.Q6J("ngModel",n.scaleK)("nzMin",.1)("nzMax",2)("nzStep",.1)("nzDefaultValue",.5),g.xp6(14),g.Q6J("routerLink",g.VKq(34,Pd,n.sceneId)),g.xp6(3),g.Akn(g.VKq(36,Cu,"scale("+n.scaleK+")")),g.xp6(1),g.Q6J("ngForOf",n.senseWidgets),g.xp6(3),g.Udp("opacity",null===n.nowwidget?0:1),g.Q6J("target",a)("draggable",!0)("origin",!1)("rotatable",!0)("pinchable",!0)("scalable",n.scalable)("resizable",n.resizable)("warpable",n.warpable)("keepRatio",!1)("throttleDrag",1)("throttleScale",.01)("throttleRotate",.2)("throttleResize",1),g.xp6(2),g.Udp("display",n.displaySetting?"unset":"none"),g.Q6J("options",n.options)}},directives:[oe.hw,oe.t7,Ba.w,Hu.Ls,or.yS,Ue.wO,ie.sg,oe.E8,Xu.jS,Ve.JJ,Ve.On,oe.OK,xd,Ed,Ue.rY,Ue.r9,Fi],styles:["[_nghost-%COMP%]{display:flex;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.app-layout[_ngcontent-%COMP%]{height:100vh}.menu-sidebar[_ngcontent-%COMP%]{position:relative;z-index:10;min-height:100vh;box-shadow:2px 0 6px #11111259}.header-trigger[_ngcontent-%COMP%]{height:64px;padding:20px 24px;font-size:20px;cursor:pointer;transition:all .3s,padding 0s}.trigger[_ngcontent-%COMP%]:hover{color:#1890ff}.sidebar-logo[_ngcontent-%COMP%]{position:relative;height:64px;padding-left:24px;overflow:hidden;line-height:64px;background:#001529;transition:all .3s}.sidebar-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:inline-block;height:32px;width:32px;vertical-align:middle}.sidebar-logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:inline-block;margin:0 0 0 20px;color:#fff;font-weight:600;font-size:14px;font-family:Avenir,Helvetica Neue,Arial,Helvetica,sans-serif;vertical-align:middle}nz-header[_ngcontent-%COMP%]{padding:0;width:100%;z-index:2}nz-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:20px}.app-header[_ngcontent-%COMP%]{position:relative;height:64px;padding:0;background:#fff;box-shadow:0 1px 4px #00152914}nz-content[_ngcontent-%COMP%]{margin:12px}.inner-content[_ngcontent-%COMP%]{min-height:600px;background-color:#000;position:absolute;width:1920px;height:1080px;transform:scale(.5);transform-origin:top left}.inner-dragbox[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:.5}.mborder[_ngcontent-%COMP%]{box-shadow:#0197f9 0 0 1px 2px;background-color:#ffffff3d}.setting[_ngcontent-%COMP%]{position:absolute;right:0px;z-index:100}"]}),t})()},{path:"preview/:id",component:Yu},{path:"",component:ka}];let Ad=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[or.Bz.forChild(zd)],or.Bz]}),t})();var Gd=F(9284),Bd=F(1610);let Id=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[ie.ez,Ve.u5,wu.YY,Ad,Gd.b,Bd.m,Sd]]}),t})()}}]);