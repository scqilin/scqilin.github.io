"use strict";(self.webpackChunkcomponent_library=self.webpackChunkcomponent_library||[]).push([[223],{9223:(nv,zi,k)=>{k.r(zi),k.d(zi,{EditerModule:()=>Jd});var xe=k(8583),jr=k(665),Gu=k(3928),oe=k(9838),h=k(7716);const Et=[];for(let t=0;t<256;t++)Et[t]=(t<16?"0":"")+t.toString(16);let sr=(t=21)=>{let e="",r=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let n=63&r[t];e+=n<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():n<63?"_":"-"}return e};var Gi=k(5917),Iu=k(8002),qr=k(1841);let Ur=(()=>{class t{constructor(r){this.http=r,this.localScenes={scene:[]},this.getLocalScenes()}getLocalScenes(){const r=localStorage.getItem("localScenes");this.localScenes=r?JSON.parse(r):this.localScenes}getScenes(){return(0,Gi.of)(this.localScenes)}getScene(r){return(0,Gi.of)(this.localScenes.scene).pipe((0,Iu.U)(n=>n.find(i=>i.id===r)))}saveScene(r,n){this.localScenes.scene.map(i=>{i.id===r&&(i=n)}),this.saveScenes()}createNewScene(r){this.localScenes.scene.length<10?this.localScenes.scene.unshift({id:sr(6),name:r,components:[],options:{width:1920,height:1080,bgColor:"#000000",bgImage:""}}):window.alert("Stop , A'zu, Ten is enough !")}deleteScene(r){this.localScenes.scene=this.localScenes.scene.filter(n=>n.id!==r)}saveScenes(){localStorage.setItem("localScenes",JSON.stringify(this.localScenes))}loadJsonScenesList(){return this.http.get("./assets/scene-data/scenes-list.json")}loadJsonScene(r){return this.http.get(`./assets/scene-data/${r}.json`)}}return t.\u0275fac=function(r){return new(r||t)(h.LFG(qr.eN))},t.\u0275prov=h.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Bu=k(3385),Ii=k(6704),ku=k(4453),Nu=k(9374),Bi=k(4514);const Fu=function(t){return["/editer/edit",t]},Lu=function(t){return["/editer/preview",t]};function Yu(t,e){if(1&t){const r=h.EpF();h.TgZ(0,"div",3),h.TgZ(1,"div",4),h.TgZ(2,"span"),h._uU(3),h.qZA(),h.TgZ(4,"span"),h.TgZ(5,"a",8),h._uU(6,"Edit"),h.qZA(),h.qZA(),h.TgZ(7,"span"),h.TgZ(8,"a",9),h._uU(9,"Preview"),h.qZA(),h.qZA(),h.TgZ(10,"span"),h.TgZ(11,"a",10),h.NdJ("click",function(){const a=h.CHM(r).$implicit;return h.oxw().deleteScene(a.id)}),h._uU(12,"Delete"),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&t){const r=e.$implicit,n=h.oxw();h.Q6J("nzSpan",24/n.count),h.xp6(3),h.Oqu(r.sid),h.xp6(2),h.Q6J("routerLink",h.VKq(4,Fu,r.id)),h.xp6(3),h.Q6J("routerLink",h.VKq(6,Lu,r.id))}}function Wu(t,e){if(1&t&&(h.TgZ(0,"div",3),h.TgZ(1,"div",4),h.TgZ(2,"span"),h._uU(3),h.qZA(),h.TgZ(4,"span"),h.TgZ(5,"a",8),h._uU(6,"Edit"),h.qZA(),h.qZA(),h.TgZ(7,"span"),h.TgZ(8,"a",9),h._uU(9,"Preview"),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t){const r=e.$implicit,n=h.oxw();h.Q6J("nzSpan",24/n.count),h.xp6(3),h.Oqu(r.id),h.xp6(2),h.MGl("routerLink","/editer/edit/",r.id,""),h.xp6(3),h.MGl("routerLink","/editer/preview/",r.id,"")}}const ki=function(t,e){return[t,e]};let Ni=(()=>{class t{constructor(r,n){this.editService=r,this.http=n,this.hGutter=16,this.vGutter=16,this.count=6,this.localArray=[],this.jsonArray=[]}ngOnInit(){this.getSceneList(),this.editService.loadJsonScenesList().subscribe(r=>{this.jsonArray=r.scene||[]})}createNewScene(){this.editService.createNewScene("\u5927\u5c4f"),setTimeout(()=>{this.saveScenes(),this.getSceneList()},10)}deleteScene(r){this.editService.deleteScene(r),this.getSceneList(),this.saveScenes()}getSceneList(){this.editService.getScenes().subscribe(r=>{this.localArray=JSON.parse(JSON.stringify(r.scene||[]));let n=this.localArray.length;for(let i=0;i<n;i++)this.localArray[i].sid=n-i})}saveScenes(){this.editService.saveScenes()}}return t.\u0275fac=function(r){return new(r||t)(h.Y36(Ur),h.Y36(qr.eN))},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-list"]],decls:11,vars:11,consts:[[1,"gutter-example"],["nzText","List1"],["nz-row","",3,"nzGutter"],["nz-col","",1,"gutter-row",3,"nzSpan"],[1,"grid-config"],["nz-button","","nzType","primary",3,"click"],["nz-col","","class","gutter-row",3,"nzSpan",4,"ngFor","ngForOf"],["nzText","List2"],[3,"routerLink"],["target","_blank",3,"routerLink"],[3,"click"]],template:function(r,n){1&r&&(h.TgZ(0,"div",0),h._UZ(1,"nz-divider",1),h.TgZ(2,"div",2),h.TgZ(3,"div",3),h.TgZ(4,"div",4),h.TgZ(5,"button",5),h.NdJ("click",function(){return n.createNewScene()}),h._uU(6," + "),h.qZA(),h.qZA(),h.qZA(),h.YNc(7,Yu,13,8,"div",6),h.qZA(),h._UZ(8,"nz-divider",7),h.TgZ(9,"div",2),h.YNc(10,Wu,10,4,"div",6),h.qZA(),h.qZA()),2&r&&(h.xp6(2),h.Q6J("nzGutter",h.WLB(5,ki,n.hGutter,n.vGutter)),h.xp6(1),h.Q6J("nzSpan",24/n.count),h.xp6(4),h.Q6J("ngForOf",n.localArray),h.xp6(2),h.Q6J("nzGutter",h.WLB(8,ki,n.hGutter,n.vGutter)),h.xp6(1),h.Q6J("ngForOf",n.jsonArray))},directives:[Bu.g,Ii.SK,Ii.t3,ku.ix,Nu.dQ,Bi.w,xe.sg,oe.yS],styles:[".com-but[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px}.gutter-example[_ngcontent-%COMP%]{padding:15px;text-align:center}.grid-config[_ngcontent-%COMP%]{height:120px;font-size:14px;line-height:120px;background:#bddde8;border-radius:4px;overflow:auto}.grid-config[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-right:10px}"]}),t})();var Fi=k(2855);let Li=(()=>{class t{constructor(){}ngOnInit(){}onResize(r){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-colorbar"]],decls:2,vars:0,consts:[[1,"bar"]],template:function(r,n){1&r&&(h.TgZ(0,"p",0),h._uU(1,"colorbar works!"),h.qZA())},styles:[".bar[_ngcontent-%COMP%]{background-color:#509a80;width:max-content}"]}),t})();var Yi=k(47),Wi=k(4266),Hi=k(2412),Xi=k(2026);let Zi=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-head2"]],decls:2,vars:0,template:function(r,n){1&r&&(h.TgZ(0,"p"),h._uU(1,"head2 works!"),h.qZA())},encapsulation:2}),t})();var Vi=k(2004),ji=k(8845),qi=k(4335),Ui=k(7947);let Ji=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-minibar"]],decls:2,vars:0,template:function(r,n){1&r&&(h.TgZ(0,"p"),h._uU(1,"minibar works!"),h.qZA())},styles:[""]}),t})();var $i=k(5543),Ki=k(8968),Qi=k(7610),ta=k(7186),ea=k(2815),ra=k(4823),na=k(1109),ia=k(8075),aa=k(2957),oa=k(4282),sa=k(8503),ua=k(4184),la=k(1259),ca=k(5076),fa=k(1335),pa=k(5815),da=k(6803);let va=(()=>{class t{constructor(){}ngOnInit(){}ngAfterViewInit(){}ngOnChanges(){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-turnbook3d"]],features:[h.TTD],decls:1,vars:0,template:function(r,n){1&r&&h._uU(0,"turnbook3d")},styles:[""]}),t})();var ha=k(3371),ga=k(1566),ma=k(66),ba=k(3265),xa=k(9313),Ca=k(7266),_a=k(1052),Sa=k(7120),Ea=k(4681),Ma=k(9827),ya=k(1786),Da=k(8466),wa=k(9676),Oa=k(6310),Ta=k(9554),Ra=k(6665),Pa=k(9),Aa=k(4170),za=k(2726),Ga=k(4288),Ia=k(7974);const Hu=["container"];let Ba=(()=>{class t{constructor(){this.width=100,this.height=100,this.backcolor="#1d48c4",this.points="40, 0 5, 0 0, 5 0, 16 3, 19 3, 7 7, 3 35, 3"}ngOnInit(){}ngAfterViewInit(){let r=this.container.nativeElement;setTimeout(()=>{this.width=r.offsetWidth,this.height=r.offsetHeight},100)}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-borderbox01"]],viewQuery:function(r,n){if(1&r&&h.Gf(Hu,5),2&r){let i;h.iGM(i=h.CRH())&&(n.container=i.first)}},decls:11,vars:6,consts:[[2,"width","100%","height","100%"],["container",""],[1,"dv-border-box-10"],["width","150px","height","150px",1,"left-top","dv-border-svg-container"],["fill","#d3e1f8"],["width","150px","height","150px",1,"right-top","dv-border-svg-container"],["width","150px","height","150px",1,"left-bottom","dv-border-svg-container"],["width","150px","height","150px",1,"right-bottom","dv-border-svg-container"]],template:function(r,n){1&r&&(h.TgZ(0,"div",0,1),h.TgZ(2,"div",2),h.O4$(),h.TgZ(3,"svg",3),h._UZ(4,"polygon",4),h.qZA(),h.TgZ(5,"svg",5),h._UZ(6,"polygon",4),h.qZA(),h.TgZ(7,"svg",6),h._UZ(8,"polygon",4),h.qZA(),h.TgZ(9,"svg",7),h._UZ(10,"polygon",4),h.qZA(),h.qZA(),h.qZA()),2&r&&(h.xp6(2),h.Udp("box-shadow",n.backcolor+" 0px 0px 25px 3px inset"),h.xp6(2),h.uIk("points",n.points),h.xp6(2),h.uIk("points",n.points),h.xp6(2),h.uIk("points",n.points),h.xp6(2),h.uIk("points",n.points))},styles:[".dv-border-box-10[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;border-radius:6px}.dv-border-box-10[_ngcontent-%COMP%]   .dv-border-svg-container[_ngcontent-%COMP%]{position:absolute;display:block}.dv-border-box-10[_ngcontent-%COMP%]   .right-top[_ngcontent-%COMP%]{right:0px;transform:rotateY(180deg)}.dv-border-box-10[_ngcontent-%COMP%]   .left-bottom[_ngcontent-%COMP%]{bottom:0px;transform:rotateX(180deg)}.dv-border-box-10[_ngcontent-%COMP%]   .right-bottom[_ngcontent-%COMP%]{right:0px;bottom:0px;transform:rotateX(180deg) rotateY(180deg)}"]}),t})(),ka=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-borderbox02"]],decls:2,vars:0,template:function(r,n){1&r&&(h.TgZ(0,"p"),h._uU(1,"borderbox02 works!"),h.qZA())},encapsulation:2}),t})();var Na=k(9824),Fa=k(8410),La=k(3631);const Ya=[Fi.P,Li,Yi.i,Wi.B,Xi.J,Zi,Hi.F,Vi._,ji.t,qi.K,Ui.X,Ji,$i.b,Ki.d,Qi.Z,ta.J,ea.O,ra.g,na.T,ia.e,aa.o,oa.F,Da.R,wa.x,Oa.d,sa.p,ua.$,Sa.L,Ta.s,Ra.N,Pa.p,Ea.Q,Ma.c,ya.i,la.r,ca.X,fa.J,pa.f,da.m,va,ha.P,ga.r,ma.$,ba.B,Ca.z,xa.Y,Aa.G,za.g,_a.Y,Ga.T,Ia.v,Ba,ka,Na.j,Fa.r,La.q],Xu=["BasicbarComponent","ColorbarComponent","BarStackComponent","BarStacksBendComponent","Head1Component","Head2Component","ClockComponent","Chinamap1Component","Worldmap1Component","MapsvgComponent","EarthComponent","MinibarComponent","MiniarealineComponent","MimipiesComponent","ChinamapComponent","MapChina4Component","D3lineareaComponent","TitleareaComponent","Chinamap2Component","Chinamapthree1Component","MulpiesComponent","YuanhuanComponent","TopolineComponent","Topoline2Component","D3polylineComponent","AlarmlistComponent","NoiseSphereComponent","UsertreeComponent","Topo25Component","Topo253dComponent","ComputerRoomComponent","TreeAndTopoComponent","D3hierarchyComponent","D3hierarchy2Component","VideosphereComponent","CenterraderComponent","LineschartComponent","LinechartComponent","AmmojsComponent","Turnbook3dComponent","Book3dbaseComponent","Book3dbasehtmlComponent","SphereComponent","PlaneComponent","SuperSportsCarComponent","RingComponent","Pie3dComponent","PieSingleComponent","Ring2Component","P5testComponent","P5barComponent","Borderbox01Component","Borderbox02Component","MarqueeComponent","TitleComponent","TipRandomPosComponent"],Zu=[{title:"\u62d3\u6251\u7c7b",children:[{name:"flow-chart",title:"\u6d41\u7a0b\u56fe",selector:"D3hierarchy2Component",component:ya.i,position:{width:1e3,height:400}},{name:"computer-room",title:"\u673a\u623f\u53ef\u89c6\u5316",selector:"ComputerRoomComponent",component:Pa.p,position:{width:1e3,height:800}},{name:"Topo253d",title:"\u673a\u623f\u5173\u7cfb\u56fe",selector:"Topo253dComponent",component:Ra.N,position:{width:1e3,height:680}},{name:"Topo25",title:"2.5D\u62d3\u6251\u56fe",selector:"Topo25Component",component:Ta.s,position:{width:750,height:600}},{name:"Usertree",title:"\u81ea\u5b9a\u4e49\u5c42\u7ea7\u6811",selector:"UsertreeComponent",component:Sa.L,position:{width:700,height:300}},{name:"Hierarchytree",title:"\u5c42\u7ea7\u6811\u62d3\u6251",selector:"TreeAndTopoComponent",component:Ea.Q,position:{width:1100,height:700}},{name:"Topod3",title:"\u5c42\u7ea7\u6811",selector:"D3hierarchyComponent",component:Ma.c},{name:"Topoline",title:"\u73af\u5f62\u62d3\u6251",selector:"TopolineComponent",component:Da.R,position:{width:1200,height:600}},{name:"Topoline2",title:"\u73af\u5f62\u5c42\u7ea7\u62d3\u6251",selector:"Topoline2Component",component:wa.x,position:{width:800,height:400}},{name:"Polyline",title:"\u6d41\u7a0b\u56fe\u6298\u7ebf",selector:"D3polylineComponent",component:Oa.d,position:{width:1100,height:700}}]},{title:"\u57fa\u7840\u56fe\u8868",children:[{name:"BarStackBand",title:"\u5f2f\u66f2\u5806\u53e0\u6761\u5f62\u56fe",selector:"BarStacksBendComponent",component:Wi.B,position:{width:250,height:250}},{name:"BarStack",title:"\u5806\u53e0\u6761\u5f62\u56fe",selector:"BarStackComponent",component:Yi.i,position:{width:300,height:300}},{name:"Pie3d",title:"\u997c\u56fe3D",selector:"Pie3dComponent",component:Aa.G},{name:"PieSingle",title:"\u997c\u56fe",selector:"PieSingleComponent",component:za.g},{name:"Basicbar",title:"\u57fa\u672c\u67f1\u72b6\u56fe",selector:"BasicbarComponent",component:Fi.P},{name:"Colorbar",title:"\u5f69\u8272\u67f1\u72b6\u56fe",selector:"ColorbarComponent",component:Li},{name:"Minibar",title:"\u8ff7\u4f60\u67f1\u72b6\u56fe",component:Ji,selector:"MinibarComponent"},{name:"Miniarealine",title:"\u8ff7\u4f60\u9762\u79ef\u56fe",selector:"MiniarealineComponent",component:$i.b,icon:"miniarealineicon.png"},{name:"Mimipies",title:"\u8ff7\u4f60\u997c\u56fe",selector:"MimipiesComponent",component:Ki.d,icon:"minipiesicon.png"},{name:"D3linearea",title:"\u6298\u7ebf\u9762\u79ef\u56fe",selector:"D3lineareaComponent",component:ea.O,icon:"d3lineareaicon.png"},{name:"Titlearea",title:"\u6807\u9898\u9762\u79ef\u56fe",selector:"TitleareaComponent",component:ra.g,icon:"titleareaicon.png"},{name:"Lineschart",title:"\u8f6e\u64ad\u6298\u7ebf\u56fe",selector:"LineschartComponent",component:fa.J},{name:"Linechart",title:"\u6298\u7ebf\u56fe",selector:"LinechartComponent",component:pa.f}]},{title:"\u6df7\u5408\u56fe\u8868",children:[{name:"Alarmlist",title:"\u544a\u8b66\u6536\u655b",selector:"AlarmlistComponent",component:sa.p},{name:"Mulpies",title:"\u6df7\u5408\u997c\u56fe",selector:"MulpiesComponent",component:aa.o}]},{title:"\u6587\u672c",children:[{name:"Title",title:"\u6807\u9898",selector:"TitleComponent",component:Fa.r,position:{width:700,height:40}},{name:"Marquee",title:"\u8dd1\u9a6c\u706f",selector:"MarqueeComponent",component:Na.j,position:{width:700,height:40}},{name:"RTips",title:"RTips",selector:"TipRandomPosComponent",component:La.q,position:{width:180,height:85}}]},{title:"\u57fa\u7840\u88c5\u9970",children:[{name:"Head1",title:"\u5934\u90e81",selector:"Head1Component",component:Xi.J,position:{width:1200,height:60}},{name:"Head2",title:"\u5934\u90e82",selector:"Head2Component",component:Zi},{name:"Clock",title:"\u65f6\u949f",selector:"ClockComponent",component:Hi.F}]},{title:"\u7279\u6548\u7c7b",children:[{name:"ring",title:"Siri\u6548\u679c",selector:"RingComponent",component:xa.Y},{name:"plane",title:"\u6d77\u9762\u98ce\u8f66\u5c0f\u8239",selector:"PlaneComponent",component:ba.B},{name:"supersportscar",title:"\u672a\u6765\u8d85\u7ea7\u8dd1\u8f66",selector:"SuperSportsCarComponent",component:Ca.z}]},{title:"\u88c5\u9970\u7c7b",children:[{name:"Ring2",title:"\u88c5\u9970\u5706\u73af",selector:"Ring2Component",component:_a.Y},{name:"Yuanhuan",title:"\u88c5\u9970\u5706\u73af",selector:"YuanhuanComponent",component:oa.F},{name:"Videosphere",title:"\u89c6\u9891\u7eb9\u7406",selector:"VideosphereComponent",component:la.r},{name:"Centerrader",title:"\u4e2d\u592e\u96f7\u8fbe",selector:"CenterraderComponent",component:ca.X}]},{title:"\u5730\u56fe\u7c7b",children:[{name:"Worldmap1",title:"\u4e16\u754c\u5730\u56fe",selector:"Worldmap1Component",component:ji.t},{name:"Chinamap1",title:"\u4e2d\u56fd\u5730\u56fe1",selector:"Chinamap1Component",component:Vi._},{name:"Mapsvg",title:"svg\u5730\u56fe",selector:"MapsvgComponent",component:qi.K},{name:"Chinamap2",title:"\u5730\u56fed3js",selector:"Chinamap2Component",component:na.T,icon:"chinamap2icon.png"},{name:"Chinamapthree1",title:"\u5730\u56fethree1",selector:"Chinamapthree1Component",component:ia.e,icon:"chinamap2icon.png"},{name:"Chinamap",title:"\u4e2d\u56fd\u5730\u56febar",selector:"ChinamapComponent",component:Qi.Z,icon:"chinamapicon.png"},{name:"Chinamap",title:"\u4e2d\u56fd\u5730\u56feline",selector:"MapChina4Component",component:ta.J,icon:"chinamapicon.png"}]},{title:"\u5706\u7403\u7c7b",children:[{name:"Noisesphere",title:"\u566a\u58f0\u7403",selector:"NoiseSphereComponent",component:ua.$},{name:"Earth",title:"\u88c5\u9970\u5730\u7403",selector:"EarthComponent",component:Ui.X,icon:"earthicon.png"},{name:"Sphere",title:"\u7403\u4f53",selector:"SphereComponent",component:ma.$}]},{title:"\u5176\u4ed6\u7c7b",children:[{name:"p5test",title:"p5test",selector:"P5testComponent",component:Ga.T},{name:"p5bar",title:"p5bar",selector:"P5barComponent",component:Ia.v},{name:"Ammojs",title:"Ammojs",selector:"AmmojsComponent",component:da.m},{name:"Turnbook3d",title:"Turnbook3d",selector:"Turnbook3dComponent",component:va},{name:"Book3d",title:"\u62d3\u6251\u673a\u7bb1",selector:"Book3dbasehtmlComponent",component:ga.r},{name:"Book3dbase",title:"\u65e0\u5b57\u5929\u4e66",selector:"Book3dbaseComponent",component:ha.P}]},{title:"\u8fb9\u6846",children:[{name:"borderbox01",title:"borderbox01",selector:"Borderbox01Component",component:Ba},{name:"borderbox02",title:"borderbox02",selector:"Borderbox02Component",component:ka}]}];let Wa=(()=>{class t{constructor(r){this.viewContainerRef=r}}return t.\u0275fac=function(r){return new(r||t)(h.Y36(h.s_b))},t.\u0275dir=h.lG2({type:t,selectors:[["","comHost",""]]}),t})();function Vu(t,e){}let Ha=(()=>{class t{constructor(r){this.componentFactoryResolver=r,this.eventEmit=new h.vpe}findComponent(r){let n=null;for(let i=0;i<Ya.length;i++)if(Xu[i]===r){n=Ya[i];break}return n}ngOnChanges(r){if(this.widgetConfig&&this.widgetConfig.selector){let n=this.findComponent(this.widgetConfig.selector);n&&this.loadComponent(n)}}ngOnInit(){if(this.widgetConfig&&this.widgetConfig.selector){let r=this.findComponent(this.widgetConfig.selector);r&&this.loadComponent(r)}}loadComponent(r){if(!r)return;const n=this.componentFactoryResolver.resolveComponentFactory(r),i=this.comHost.viewContainerRef;i.clear(),this.componentRef=i.createComponent(n),this.componentRef.instance.factoryData=this.widgetConfig,this.eventEmit.emit({uuid:this.widgetConfig.uuid,comInstance:this.componentRef.instance})}onResize(){var r,n;this.componentRef&&(null===(n=(r=this.componentRef.instance).ngOnChanges)||void 0===n||n.call(r,{resize:!0}))}onChangeSetting(){var r,n;this.componentRef&&(null===(n=(r=this.componentRef.instance).ngOnChanges)||void 0===n||n.call(r,{config:this.widgetConfig}))}}return t.\u0275fac=function(r){return new(r||t)(h.Y36(h._Vd))},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-widget"]],viewQuery:function(r,n){if(1&r&&h.Gf(Wa,7),2&r){let i;h.iGM(i=h.CRH())&&(n.comHost=i.first)}},inputs:{widgetConfig:"widgetConfig"},outputs:{eventEmit:"eventEmit"},features:[h.TTD],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["comHost",""]],template:function(r,n){1&r&&(h.TgZ(0,"div",0),h.YNc(1,Vu,0,0,"ng-template",1),h.qZA())},directives:[Wa],encapsulation:2}),t})();var Ce=k(85);const ju=["container"];let Xa=(()=>{class t{constructor(){this.eventEmit=new h.vpe}nodata(){return[]}ngOnChanges(r){}ngOnInit(){}ngAfterViewInit(){var r;let n=this.widgetConfig.selector;this.scene=new Ce.O[n].component(this.container.nativeElement,Ce.O[n].options||{}),this.demoData=Ce.O[n].mockjs,"function"!=typeof this.demoData&&(this.demoData=this.nodata);const a=this.demoData();null===(r=this.scene)||void 0===r||r.updateData(a),this.eventEmit.emit({uuid:this.widgetConfig.uuid,comInstance:this.scene})}loadComponent(r){}onResize(){}onChangeSetting(){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-mulwidget"]],viewQuery:function(r,n){if(1&r&&h.Gf(ju,5),2&r){let i;h.iGM(i=h.CRH())&&(n.container=i.first)}},inputs:{widgetConfig:"widgetConfig"},outputs:{eventEmit:"eventEmit"},features:[h.TTD],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["container",""]],template:function(r,n){1&r&&h._UZ(0,"div",0,1)},encapsulation:2}),t})();const Za=function(t){return{transform:t}};function qu(t,e){if(1&t&&h._UZ(0,"app-widget",3,4),2&t){const r=h.oxw().$implicit;h.Akn(h.VKq(11,Za,"rotate("+r.position.rotate+"deg)")),h.Udp("top",r.position.top,"px")("left",r.position.left,"px")("width",r.position.width,"px")("height",r.position.height,"px"),h.Q6J("widgetConfig",r)}}function Uu(t,e){if(1&t&&h._UZ(0,"app-mulwidget",3,4),2&t){const r=h.oxw().$implicit;h.Akn(h.VKq(11,Za,"rotate("+r.position.rotate+"deg)")),h.Udp("top",r.position.top,"px")("left",r.position.left,"px")("width",r.position.width,"px")("height",r.position.height,"px"),h.Q6J("widgetConfig",r)}}function Ju(t,e){if(1&t&&(h.TgZ(0,"div"),h.YNc(1,qu,2,13,"app-widget",2),h.YNc(2,Uu,2,13,"app-mulwidget",2),h.qZA()),2&t){const r=e.$implicit;h.xp6(1),h.Q6J("ngIf","mulcoms"!=r.type),h.xp6(1),h.Q6J("ngIf","mulcoms"===r.type)}}const $u=function(t,e,r){return{width:t,height:e,background:r}};let Ku=(()=>{class t{constructor(r,n,i){this.route=r,this.http=n,this.editService=i}ngOnInit(){this.route.paramMap.subscribe(r=>{const n=r.get("id");n.toString().length<6?this.editService.loadJsonScene(n).subscribe(i=>{this.sceneAllData=i}):this.editService.getScene(n).subscribe(i=>{this.sceneAllData=i})})}}return t.\u0275fac=function(r){return new(r||t)(h.Y36(oe.gz),h.Y36(qr.eN),h.Y36(Ur))},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-preview"]],decls:2,vars:7,consts:[[1,"prevoew-content"],[4,"ngFor","ngForOf"],["style","position: absolute;",3,"style","widgetConfig","top","left","width","height",4,"ngIf"],[2,"position","absolute",3,"widgetConfig"],["appwidget",""]],template:function(r,n){1&r&&(h.TgZ(0,"div",0),h.YNc(1,Ju,3,2,"div",1),h.qZA()),2&r&&(h.Akn(h.kEZ(3,$u,n.sceneAllData.options.width+"px",n.sceneAllData.options.height+"px",n.sceneAllData.options.bgColor)),h.xp6(1),h.Q6J("ngForOf",n.sceneAllData.components))},directives:[xe.sg,xe.O5,Ha,Xa],styles:[".prevoew-content[_ngcontent-%COMP%]{position:absolute;background-color:#000;width:1920px;height:1080px}.sc-list[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:10px}.sc-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:20px;height:20px;color:#000;display:inline-block;background-color:#faebd7;border-radius:10px;margin-right:10px;text-align:center;line-height:20px}"]}),t})();var ur=k(2746),Qu=k(3599),Jr=k(3730),tl=k(7564);function el(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.map(function(n){return n.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function Ht(t,e){return function(r){r&&(t[e]=r)}}function Va(t,e,r){return function(n){n&&(t[e][r]=n)}}function ja(t,e){return function(r){var n=r.prototype;t.forEach(function(i){e(n,i)})}}function qa(t,e){return void 0===e&&(e={}),function(r,n){t.forEach(function(i){var a=e[i]||i;a in r||(r[a]=function(){for(var o,s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];var l=(o=this[n])[i].apply(o,s);return l===this[n]?this:l})})}}var nl=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(r){return this.values[this.keys.indexOf(r)]},e.set=function(r,n){var i=this.keys,a=this.values,o=i.indexOf(r),s=-1===o?i.length:o;i[s]=r,a[s]=n},t}(),il=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(r){return this.object[r]},e.set=function(r,n){this.object[r]=n},t}(),al="function"==typeof Map,ol=function(){function t(){}var e=t.prototype;return e.connect=function(r,n){this.prev=r,this.next=n,r&&(r.next=this),n&&(n.prev=this)},e.disconnect=function(){var r=this.prev,n=this.next;r&&(r.next=n),n&&(n.prev=r)},e.getIndex=function(){for(var r=this,n=-1;r;)r=r.prev,++n;return n},t}(),ul=function(){function t(r,n,i,a,o,s,u,l){this.prevList=r,this.list=n,this.added=i,this.removed=a,this.changed=o,this.maintained=s,this.changedBeforeAdded=u,this.fixed=l}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var r=function(t,e){var r=[],n=[];return t.forEach(function(i){var a=i[0],o=i[1],s=new ol;r[a]=s,n[o]=s}),r.forEach(function(i,a){i.connect(r[a-1])}),t.filter(function(i,a){return!e[a]}).map(function(i,a){var o=i[0],s=i[1];if(o===s)return[0,0];var u=r[o],l=n[s-1],p=u.getIndex();return u.disconnect(),l?u.connect(l,l.next):u.connect(void 0,r[0]),[p,u.getIndex()]})}(this.changedBeforeAdded,this.fixed),n=this.changed,i=[];this.cacheOrdered=r.filter(function(a,o){var l=n[o];if(a[0]!==a[1])return i.push([l[0],l[1]]),!0}),this.cachePureChanged=i},t}();function lr(t,e,r){var n=al?Map:r?il:nl,i=r||function(x){return x},a=[],o=[],s=[],u=t.map(i),l=e.map(i),p=new n,f=new n,c=[],d=[],v={},g=[],m=0,b=0;return u.forEach(function(x,C){p.set(x,C)}),l.forEach(function(x,C){f.set(x,C)}),u.forEach(function(x,C){var _=f.get(x);void 0===_?(++b,o.push(C)):v[_]=b}),l.forEach(function(x,C){var _=p.get(x);void 0===_?(a.push(C),++m):(s.push([_,C]),c.push([_-(b=v[C]||0),C-m]),d.push(C===_),_!==C&&g.push([_,C]))}),o.reverse(),new ul(t,e,a,o,g,s,c,d)}const cl=function(){function t(r,n){void 0===r&&(r=[]),this.findKeyCallback=n,this.list=[].slice.call(r)}return t.prototype.update=function(r){var n=[].slice.call(r),i=lr(this.list,n,this.findKeyCallback);return this.list=n,i},t}();var Be="undefined",Qa=typeof window!==Be,hl=(typeof document!==Be&&document,[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}]),bt=1e-7,cr={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,e){return t*e/100},vw:function(t,e){return void 0===e&&(e=window.innerWidth),t/100*e},vh:function(t,e){return void 0===e&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return void 0===e&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return void 0===e&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function se(t,e,r,n){return(t*n+e*r)/(r+n)}function fr(t){return typeof t===Be}function kt(t){return t&&"object"==typeof t}function Ut(t){return Array.isArray(t)}function zt(t){return"string"==typeof t}function $r(t){return"number"==typeof t}function eo(t){return"function"==typeof t}function ro(t,e,r,n,i){return Kr(t,e,r)?r:function(t,e,r,n,i){for(var o,a=function(l){var p=e[l].trim();if(p===t.close&&!Kr(t,e,l))return{value:l};var f=l,c=ue(i,function(d){return d.open===p});if(c&&(f=ro(c,e,l,n,i)),-1===f)return o=l,"break";o=l=f},s=r;s<n;++s){var u=a(s);if(s=o,"object"==typeof u)return u.value;if("break"===u)break}return-1}(t,e,r+1,n,i)}function Kr(t,e,r){if(!t.ignore)return null;var n=e.slice(Math.max(r-3,0),r+3).join("");return new RegExp(t.ignore).exec(n)}function no(t,e){var r=zt(e)?{separator:e}:e,n=r.separator,i=void 0===n?",":n,a=r.isSeparateFirst,o=r.isSeparateOnlyOpenClose,s=r.isSeparateOpenClose,u=void 0===s?o:s,l=r.openCloseCharacters,p=void 0===l?hl:l,f=p.map(function(S){var w=S.open,y=S.close;return w===y?w:w+"|"+y}).join("|"),d=new RegExp("(\\s*"+i+"\\s*|"+f+"|\\s+)","g"),v=t.split(d).filter(Boolean),g=v.length,m=[],b=[];function x(){return!!b.length&&(m.push(b.join("")),b=[],!0)}for(var _,C=function(S){var w=v[S].trim(),y=S,D=ue(p,function(O){return O.open===w}),P=ue(p,function(O){return O.close===w});if(D){if(-1!==(y=ro(D,v,S,g,p))&&u)return x()&&a||(m.push(v.slice(S,y+1).join("")),S=y,a)?(_=S,"break"):(_=S,"continue")}else{if(P&&!Kr(P,v,S))throw new Error("invalid format: "+P.close);if(function(t,e){return(""===e||" "==e)&&(""===t||" "==t)||t===e}(w,i)&&!o)return x(),a?(_=S,"break"):(_=S,"continue")}-1===y&&(y=g-1),b.push(v.slice(S,y+1).join("")),_=S=y},M=0;M<g;++M){var E=C(M);if(M=_,"break"===E)break}return b.length&&m.push(b.join("")),m}function Jt(t){return no(t,"")}function $t(t){return no(t,",")}function Qr(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function Ne(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);return e?{prefix:e[1],unit:e[3],value:parseFloat(e[2])}:{prefix:"",unit:"",value:NaN}}function tn(t,e){return void 0===e&&(e="-"),t.replace(/([a-z])([A-Z])/g,function(r,n,i){return""+n+e+i.toLowerCase()})}function pr(){return Date.now?Date.now():(new Date).getTime()}function jt(t,e,r){void 0===r&&(r=-1);for(var n=t.length,i=0;i<n;++i)if(e(t[i],i,t))return i;return r}function ue(t,e,r){var n=jt(t,e);return n>-1?t[n]:r}var io=function(){var t=pr(),e=Qa&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(r){var n=pr();return window.setTimeout(function(){r(n-t)},1e3/60)}}(),Cl=function(){var t=Qa&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}}();function _e(t){if(Object.keys)return Object.keys(t);var e=[];for(var r in e)e.push(r);return e}function ft(t,e){var r=Ne(t),n=r.value,i=r.unit;if(kt(e)){var a=e[i];if(a){if(eo(a))return a(n);if(cr[i])return cr[i](n,a)}}else if("%"===i)return n*e/100;return cr[i]?cr[i](n):n}function en(t,e,r){return Math.max(e,Math.min(t,r))}function ao(t,e,r,n){return void 0===n&&(n=t[0]/t[1]),[[J(e[0],bt),J(e[0]/n,bt)],[J(e[1]*n,bt),J(e[1],bt)]].filter(function(i){return i.every(function(a,o){var s=e[o],u=J(s,bt);return r?a<=s||a<=u:a>=s||a>=u})})[0]||t}function rn(t){for(var e=t.length,r=0,n=e-1;n>=0;--n)r+=t[n];return e?r/e:0}function ht(t,e){var i=Math.atan2(e[1]-t[1],e[0]-t[0]);return i>=0?i:i+2*Math.PI}function nn(t){var e=function(t){return[0,1].map(function(e){return rn(t.map(function(r){return r[e]}))})}(t),r=ht(e,t[0]),n=ht(e,t[1]);return r<n&&n-r<Math.PI||r>n&&n-r<-Math.PI?1:-1}function Nt(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function J(t,e){if(!e)return t;var r=1/e;return Math.round(t/e)/r}function dr(t,e){return t.forEach(function(r,n){t[n]=J(t[n],e)}),t}function _t(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function Ft(t,e,r,n){t.addEventListener(e,r,n)}function Pt(t,e,r,n){t.removeEventListener(e,r,n)}var an=function(t,e){return(an=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};function le(t,e){function r(){this.constructor=t}an(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Kt=function(){return(Kt=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++)for(var a in r=arguments[n])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)};function so(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}function on(t,e){if(t===e)return!1;for(var r in t)if(!(r in e))return!0;for(var r in e)if(t[r]!==e[r])return!0;return!1}function sn(t,e){var r=Object.keys(t),n=Object.keys(e),i=lr(r,n,function(u){return u}),a={},o={},s={};return i.added.forEach(function(u){var l=n[u];a[l]=e[l]}),i.removed.forEach(function(u){var l=r[u];o[l]=t[l]}),i.maintained.forEach(function(u){var p=r[u[0]];t[p]!==e[p]&&(s[p]=[t[p],e[p]])}),{added:a,removed:o,changed:s}}function uo(t){t.forEach(function(e){e()})}function lo(t){var e=0;return t.map(function(r){return null==r?"$compat"+ ++e:""+r})}function co(t,e,r,n){return zt(t)||$r(t)?new zl("text_"+t,e,r,n,null,{}):new("string"==typeof t.type?Gl:t.type.prototype.render?Bl:Il)(t.type,e,r,n,t.ref,t.props)}function fo(t){var e=[];return t.forEach(function(r){e=e.concat(Ut(r)?fo(r):r)}),e}function po(t){var e=t.className,r=so(t,["className"]);return null!=e&&(r.class=e),delete r.style,delete r.children,r}function un(t,e){if(!e)return t;for(var r in e)fr(t[r])&&(t[r]=e[r]);return t}function Gt(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=e||{},a=i.key,o=i.ref,s=so(i,["key","ref"]);return{type:t,key:a,ref:o,props:Kt(Kt({},s),{children:fo(r).filter(function(u){return null!=u&&!1!==u})})}}var Fe=function(){function t(r,n,i,a,o,s){void 0===s&&(s={}),this.type=r,this.key=n,this.index=i,this.container=a,this.ref=o,this.props=s,this._providers=[]}var e=t.prototype;return e._should=function(r,n){return!0},e._update=function(r,n,i,a){if(this.base&&!zt(n)&&!a&&!this._should(n.props,i))return!1;this.original=n,this._setState(i);var o=this.props;return zt(n)||(this.props=n.props,this.ref=n.ref),this._render(r,this.base?o:{},i),!0},e._mounted=function(){var r=this.ref;r&&r(this.base)},e._setState=function(r){},e._updated=function(){var r=this.ref;r&&r(this.base)},e._destroy=function(){var r=this.ref;r&&r(null)},t}();function vo(t){var e={},r={};for(var n in t)0===n.indexOf("on")?r[n.replace("on","").toLowerCase()]=t[n]:e[n]=t[n];return{attributes:e,events:r}}var zl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}le(e,t);var r=e.prototype;return r._render=function(n){var i=this,a=!this.base;return a&&(this.base=document.createTextNode(this.type.replace("text_",""))),n.push(function(){a?i._mounted():i._updated()}),!0},r._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(Fe),Gl=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.events={},n._isSVG=!1,n}le(e,t);var r=e.prototype;return r.addEventListener=function(n,i){var a=this.events;a[n]=function(o){o.nativeEvent=o,i(o)},this.base.addEventListener(n,a[n])},r.removeEventListener=function(n){var i=this.events;this.base.removeEventListener(n,i[n]),delete i[n]},r._should=function(n){return on(this.props,n)},r._render=function(n,i){var a=this,o=!this.base;if(o){var s=this._hasSVG();this._isSVG=s;var u=this.props.portalContainer;if(!u){var l=this.type;u=s?document.createElementNS("http://www.w3.org/2000/svg",l):document.createElement(l)}this.base=u}Ye(this,this._providers,this.props.children,n,null);var p=this.base,f=vo(i),c=f.attributes,d=f.events,v=vo(this.props),g=v.attributes,m=v.events;return function(t,e,r){var n=sn(t,e),i=n.added,a=n.removed,o=n.changed;for(var s in i)r.setAttribute(s,i[s]);for(var s in o)r.setAttribute(s,o[s][1]);for(var s in a)r.removeAttribute(s)}(po(c),po(g),p),function(t,e,r){var n=sn(t,e),i=n.added,a=n.removed,o=n.changed;for(var s in a)r.removeEventListener(s);for(var s in i)r.addEventListener(s,i[s]);for(var s in o)r.removeEventListener(s),r.addEventListener(s,o[s][1]);for(var s in a)r.removeEventListener(s)}(d,m,this),function(t,e,r){var n=r.style,i=sn(t,e),a=i.added,o=i.removed,s=i.changed;for(var u in a){var l=tn(u,"-");n.setProperty?n.setProperty(l,a[u]):n[l]=a[u]}for(var u in s)l=tn(u,"-"),n.setProperty?n.setProperty(l,s[u][1]):n[l]=s[u][1];for(var u in o)l=tn(u,"-"),n.removeProperty?n.removeProperty(l):n[l]=""}(i.style||{},this.props.style||{},p),n.push(function(){o?a._mounted():a._updated()}),!0},r._unmount=function(){var n=this.events,i=this.base;for(var a in n)i.removeEventListener(a,n[a]);this._providers.forEach(function(o){o._unmount()}),this.events={},this.props.portalContainer||i.parentNode.removeChild(i)},r._hasSVG=function(){if(this._isSVG||"svg"===this.type)return!0;var n=ln(this.container);return n&&"ownerSVGElement"in n},e}(Fe);function ln(t){if(!t)return null;var e=t.base;return e instanceof Node?e:ln(t.container)}function Le(t){if(!t)return null;if(t instanceof Node)return t;var e=t.$_provider._providers;return e.length?Le(e[0].base):null}var Il=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}le(e,t);var r=e.prototype;return r._render=function(n){var i=this.type(this.props);return Ye(this,this._providers,i?[i]:[],n),!0},r._unmount=function(){this._providers.forEach(function(n){n._unmount()})},e}(Fe),ho=function(t){function e(n){var i=t.call(this,"container","container",0,null)||this;return i.base=n,i}le(e,t);var r=e.prototype;return r._render=function(){return!0},r._unmount=function(){},e}(Fe),Bl=function(t){function e(n,i,a,o,s,u){return void 0===u&&(u={}),t.call(this,n,i,a,o,s,un(u,n.defaultProps))||this}le(e,t);var r=e.prototype;return r._should=function(n,i){return this.base.shouldComponentUpdate(un(n,this.type.defaultProps),i||this.base.state)},r._render=function(n,i){var a=this;this.props=un(this.props,this.type.defaultProps);var o=!this.base;o?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props;var s=this.base,u=s.state,l=s.render();l&&l.props&&!l.props.children.length&&(l.props.children=this.props.children),Ye(this,this._providers,l?[l]:[],n),n.push(function(){o?(a._mounted(),s.componentDidMount()):(a._updated(),s.componentDidUpdate(i,u))})},r._setState=function(n){var i=this.base;!i||!n||(i.state=n)},r._unmount=function(){this._providers.forEach(function(n){n._unmount()}),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},e}(Fe),cn=function(){function t(r){void 0===r&&(r={}),this.props=r,this.state={},this.$_timer=0,this.$_state={}}var e=t.prototype;return e.shouldComponentUpdate=function(r,n){return!0},e.render=function(){return null},e.setState=function(r,n,i){var a=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=Kt(Kt({},this.$_state),r),i?this.$_setState(n,i):this.$_timer=setTimeout(function(){a.$_timer=0,a.$_setState(n,i)})},e.forceUpdate=function(r){this.setState({},r,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(r,n){},e.componentWillUnmount=function(){},e.$_setState=function(r,n){var i=[],a=this.$_provider;Ye(a.container,[a],[a.original],i,Kt(Kt({},this.state),this.$_state),n)&&(r&&i.push(r),uo(i))},t}(),fn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return le(e,t),e.prototype.shouldComponentUpdate=function(n,i){return on(this.props,n)||on(this.state,i)},e}(cn),kl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}le(e,t);var r=e.prototype;return r.componentDidMount=function(){var n=this.props,i=n.element,a=n.container;this._portalProvider=new ho(a),vr(i,a,this._portalProvider)},r.componentDidUpdate=function(){var n=this.props;vr(n.element,n.container,this._portalProvider)},r.componentWillUnmount=function(){vr(null,this.props.container,this._portalProvider),this._portalProvider=null},e}(fn);function Ye(t,e,r,n,i,a){var o=function(t,e,r){var n=r.map(function(u){return zt(u)?null:u.key}),o=lr(lo(e.map(function(u){return u.key})),lo(n),function(u){return u});o.removed.forEach(function(u){e.splice(u,1)[0]._unmount()}),o.ordered.forEach(function(u){var p=u[1],f=e.splice(u[0],1)[0];e.splice(p,0,f);var c=Le(f.base),d=Le(e[p+1]&&e[p+1].base);c&&c.parentNode.insertBefore(c,d)}),o.added.forEach(function(u){e.splice(u,0,co(r[u],n[u],u,t))});var s=o.maintained.filter(function(u){var p=u[1],f=r[p],c=e[p];return(zt(f)?"text_"+f:f.type)!==c.type?(c._unmount(),e.splice(p,1,co(f,n[p],p,t)),!0):(c.index=p,!1)});return function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}(o.added,s.map(function(u){return u[1]}))}(t,e,r),s=e.filter(function(l,p){return l._update(n,r[p],i,a)}),u=ln(t);return u&&o.reverse().forEach(function(l){var p=e[l],f=Le(p.base);if(f&&u!==f&&!f.parentNode){var c=function(t,e){for(var r=t._providers,n=r.length,i=e.index+1;i<n;++i){var a=Le(r[i].base);if(a)return a}return null}(t,p);u.insertBefore(f,c)}}),s.length>0}function vr(t,e,r){void 0===r&&(r=e.__REACT_COMPAT__);var n=!!r;return r||(r=new ho(e)),function(t,e,r){var n=[];Ye(t,t._providers,e,n,void 0),uo(n)}(r,t?[t]:[]),n||(e.__REACT_COMPAT__=r),r}function go(t,e,r){var n=e.__REACT_COMPAT__;t&&!n&&(e.innerHTML=""),vr(t,e,n),r&&r()}function pn(t,e){for(var r=t.length,n=0;n<r;++n)if(e(t[n],n))return!0;return!1}function mo(t,e){for(var r=t.length,n=0;n<r;++n)if(e(t[n],n))return t[n];return null}function bo(t){var e=t;if(void 0===e){if("undefined"==typeof navigator||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function dn(t,e){try{return new RegExp(t,"g").exec(e)}catch(r){return null}}function vn(t){return t.replace(/_/g,".")}function We(t,e){var r=null,n="-1";return pn(t,function(i){var a=dn("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!(!a||i.brand||(r=i,n=a[3]||"-1",i.versionAlias?n=i.versionAlias:i.versionTest&&(n=function(t,e){var r=dn("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return r?r[3]:""}(i.versionTest.toLowerCase(),e)||n),n=vn(n),0))}),{preset:r,version:n}}function He(t,e){var r={brand:"",version:"-1"};return pn(t,function(n){var i=Co(e,n);return!!i&&(r.brand=n.id,r.version=n.versionAlias||i.version,"-1"!==r.version)}),r}function Co(t,e){return mo(t,function(r){return dn(""+e.test,r.brand.toLowerCase())})}var hn=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],_o=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],gn=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],So=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],Eo=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function Mo(t){return!!We(So,t).preset}const Zl=function(t){return void 0===t&&function(){if("undefined"==typeof navigator||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!(!e||!e.length)}()?function(t){var e=navigator.userAgentData,r=(e.uaList||e.brands).slice(),n=t&&t.fullVersionList,i=e.mobile||!1,a=r[0],o=(t&&t.platform||e.platform||navigator.platform).toLowerCase(),s={name:a.brand,version:a.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!He(So,r).brand||Mo(bo())},u={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&pn(gn,function(v){return Co(r,v)});var l=He(_o,r);if(s.chromium=!!l.brand,s.chromiumVersion=l.version,!s.chromium){var p=He(gn,r);s.webkit=!!p.brand,s.webkitVersion=p.version}var f=mo(Eo,function(v){return new RegExp(""+v.test,"g").exec(o)});if(u.name=f?f.id:"",t&&(u.version=t.platformVersion),n&&n.length){var c=He(hn,n);s.name=c.brand||s.name,s.version=c.version||s.version}else{var d=He(hn,r);s.name=d.brand||s.name,s.version=d.brand&&t?t.uaFullVersion:d.version}return s.webkit&&(u.name=i?"ios":"mac"),"ios"===u.name&&s.webview&&(s.version="-1"),u.version=vn(u.version),s.version=vn(s.version),u.majorVersion=parseInt(u.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:u,isMobile:i,isHints:!0}}():function(t){var e=bo(t),r=!!/mobi/g.exec(e),n={name:"unknown",version:"-1",majorVersion:-1,webview:Mo(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=We(hn,e),o=a.preset,s=a.version,u=We(Eo,e),l=u.preset,p=u.version,f=We(_o,e);if(n.chromium=!!f.preset,n.chromiumVersion=f.version,!n.chromium){var c=We(gn,e);n.webkit=!!c.preset,n.webkitVersion=c.version}return l&&(i.name=l.id,i.version=p,i.majorVersion=parseInt(p,10)),o&&(n.name=o.id,n.version=s,n.webview&&"ios"===i.name&&"safari"!==n.name&&(n.webview=!1)),n.majorVersion=parseInt(n.version,10),{browser:n,os:i,isMobile:r,isHints:!1}}(t)};function Vl(t,e,r,n,i,a){for(var o=0;o<i;++o){var s=r+o*i,u=n+o*i;t[s]+=t[u]*a,e[s]+=e[u]*a}}function jl(t,e,r,n,i){for(var a=0;a<i;++a){var o=r+a*i,s=n+a*i,u=t[o],l=e[o];t[o]=t[s],t[s]=u,e[o]=e[s],e[s]=l}}function ql(t,e,r,n,i){for(var a=0;a<n;++a){var o=r+a*n;t[o]/=i,e[o]/=i}}function Do(t,e,r){void 0===r&&(r=Math.sqrt(t.length));for(var n=t.slice(),i=0;i<r;++i)n[i*r+e-1]=0,n[(e-1)*r+i]=0;return n[(e-1)*(r+1)]=1,n}function Xt(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=t.slice(),n=pt(e),i=0;i<e;++i){var a=e*i+i;if(!J(r[a],bt))for(var o=i+1;o<e;++o)if(r[e*i+o]){jl(r,n,i,o,e);break}if(!J(r[a],bt))return[];for(ql(r,n,i,e,r[a]),o=0;o<e;++o){var s=o,l=r[o+i*e];!J(l,bt)||i===o||Vl(r,n,s,i,e,-l)}}return n}function wo(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=[],n=t[e*e-1],i=0;i<e-1;++i)r[i]=t[e*(e-1)+i]/n;return r[e-1]=0,r}function ce(t,e){for(var r=t.slice(),n=t.length;n<e-1;++n)r[n]=0;return r[e-1]=1,r}function Zt(t,e,r){if(void 0===e&&(e=Math.sqrt(t.length)),e===r)return t;for(var n=pt(r),i=Math.min(e,r),a=0;a<i-1;++a){for(var o=0;o<i-1;++o)n[a*r+o]=t[a*e+o];n[(a+1)*r-1]=t[(a+1)*e-1],n[(r-1)*r+a]=t[(e-1)*e+a]}return n[r*r-1]=t[e*e-1],n}function bn(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=pt(t);return e.forEach(function(i){n=st(n,i,t)}),n}function st(t,e,r){void 0===r&&(r=Math.sqrt(t.length));var n=[],i=t.length/r,a=e.length/i;if(!i)return e;if(!a)return t;for(var o=0;o<r;++o)for(var s=0;s<a;++s){n[s*r+o]=0;for(var u=0;u<i;++u)n[s*r+o]+=t[u*r+o]*e[s*i+u]}return n}function K(t,e){for(var r=Math.min(t.length,e.length),n=t.slice(),i=0;i<r;++i)n[i]=n[i]+e[i];return n}function j(t,e){for(var r=Math.min(t.length,e.length),n=t.slice(),i=0;i<r;++i)n[i]=n[i]-e[i];return n}function $l(t,e){return void 0===e&&(e=6===t.length),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function Oo(t,e){return void 0===e&&(e=9===t.length),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function Mt(t,e,r){void 0===r&&(r=e.length);var n=st(t,e,r),i=n[r-1];return n.map(function(a){return a/i})}function Kl(t,e){return st(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function Ql(t,e){return st(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function tc(t,e){return st(t,Se(e,4))}function hr(t,e){var r=e[0],i=e[1],o=e[2];return st(t,[void 0===r?1:r,0,0,0,0,void 0===i?1:i,0,0,0,0,void 0===o?1:o,0,0,0,0,1],4)}function Qt(t,e){return Mt(Se(e,3),ce(t,3))}function xn(t,e){var r=e[0],i=e[1],o=e[2];return st(t,[1,0,0,0,0,1,0,0,0,0,1,0,void 0===r?0:r,void 0===i?0:i,void 0===o?0:o,1],4)}function To(t,e){return st(t,e,4)}function Se(t,e){var r=Math.cos(t),n=Math.sin(t),i=pt(e);return i[0]=r,i[1]=n,i[e]=-n,i[e+1]=r,i}function pt(t){for(var e=t*t,r=[],n=0;n<e;++n)r[n]=n%(t+1)?0:1;return r}function Ro(t,e){for(var r=pt(e),n=Math.min(t.length,e-1),i=0;i<n;++i)r[(e+1)*i]=t[i];return r}function Xe(t,e){for(var r=pt(e),n=Math.min(t.length,e-1),i=0;i<n;++i)r[e*(e-1)+i]=t[i];return r}function Cn(t,e,r,n,i,a,o,s){var u=t[0],l=t[1],p=e[0],f=e[1],c=r[0],d=r[1],v=n[0],g=n[1],m=i[0],b=i[1],x=a[0],C=a[1],_=o[0],M=o[1],E=s[0],S=s[1],y=Xt([u,0,p,0,c,0,v,0,l,0,f,0,d,0,g,0,1,0,1,0,1,0,1,0,0,u,0,p,0,c,0,v,0,l,0,f,0,d,0,g,0,1,0,1,0,1,0,1,-m*u,-b*u,-x*p,-C*p,-_*c,-M*c,-E*v,-S*v,-m*l,-b*l,-x*f,-C*f,-_*d,-M*d,-E*g,-S*g],8);if(!y.length)return[];var D=st(y,[m,b,x,C,_,M,E,S],8);return D[8]=1,Zt(function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=[],n=0;n<e;++n)for(var i=0;i<e;++i)r[i*e+n]=t[e*n+i];return r}(D),3,4)}function Ze(t){return Ee(fe(t))}function Ee(t){var e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach(function(r){var n=r.matrixFunction;!n||(e=n(e,r.functionValue))}),e}function fe(t){return(Ut(t)?t:Jt(t)).map(function(r){var n=Qr(r),i=n.prefix,a=n.value,o=null,s=i,u="";if("translate"===i||"translateX"===i||"translate3d"===i){var l=$t(a).map(function(D){return parseFloat(D)}),f=l[1],d=l[2];o=xn,u=[l[0],void 0===f?0:f,void 0===d?0:d]}else if("translateY"===i)o=xn,u=[0,parseFloat(a),0];else if("translateZ"===i)o=xn,u=[0,0,parseFloat(a)];else if("scale"===i||"scale3d"===i){var g=$t(a).map(function(D){return parseFloat(D)}),b=g[1],C=g[2];o=hr,u=[m=g[0],void 0===b?m:b,void 0===C?1:C]}else if("scaleX"===i){var m;o=hr,u=[m=parseFloat(a),1,1]}else if("scaleY"===i)o=hr,u=[1,parseFloat(a),1];else if("scaleZ"===i)o=hr,u=[1,1,parseFloat(a)];else if("rotate"===i||"rotateZ"===i||"rotateX"===i||"rotateY"===i){var M=Ne(a),S=M.value;"rotate"===i||"rotateZ"===i?(s="rotateZ",o=tc):"rotateX"===i?o=Kl:"rotateY"===i&&(o=Ql),u="rad"===M.unit?S:S*Math.PI/180}else if("matrix3d"===i)o=To,u=$t(a).map(function(D){return parseFloat(D)});else if("matrix"===i){var y=$t(a).map(function(D){return parseFloat(D)});o=To,u=[y[0],y[1],0,0,y[2],y[3],0,0,0,0,1,0,y[4],y[5],0,1]}else s="";return{name:i,functionName:s,value:a,matrixFunction:o,functionValue:u}})}var t,_n=function(t,e){return(_n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)},Ao="function"==typeof Map?void 0:(t=0,function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)});const ac=function(t){function e(r){return void 0===r&&(r=[]),t.call(this,r,Ao)||this}return function(t,e){function r(){this.constructor=t}_n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e}(cl);function yt(t){return J(t,bt)}function zo(t){return t.length<3?0:Math.abs(function(t){for(var r=0,n=t.length-1;n>=0;--n)r+=t[n];return r}(t.map(function(e,r){var n=t[r+1]||t[0];return e[0]*n[1]-n[0]*e[1]})))/2}function Go(t,e){var r=e.width,n=e.height,i=e.left,a=e.top,o=gr(t),s=o.minX,u=o.minY,f=r/(o.maxX-s),c=n/(o.maxY-u);return t.map(function(d){return[i+(d[0]-s)*f,a+(d[1]-u)*c]})}function gr(t){var e=t.map(function(n){return n[0]}),r=t.map(function(n){return n[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,r),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,r)}}function Sn(t,e,r){var n=t[0],i=t[1],a=gr(e),u=[[a.minX,i],[a.maxX,i]],l=de(u[0],u[1]),p=yn(e),f=[];if(p.forEach(function(v){var g=de(v[0],v[1]),m=v[0];!function(t,e){return t.every(function(r,n){return 0===yt(r-e[n])})}(l,g)?Mn(En(l,g),[u,v]).forEach(function(x){v.some(function(C){return function(t,e){return!yt(t[0]-e[0])&&!yt(t[1]-e[1])}(C,x)})?f.push({pos:x,line:v,type:"point"}):0!==yt(m[1]-i)&&f.push({pos:x,line:v,type:"intersection"})}):f.push({pos:t,line:v,type:"line"})}),!r&&ue(f,function(v){return v[0]===n}))return!0;var c=0,d={};return f.forEach(function(v){var g=v.pos,m=v.type;if(!(g[0]>n))if("intersection"===m)++c;else{if("line"===m)return;if("point"===m){var x=ue(v.line,function(M){return M[1]!==i}),C=d[g[0]],_=x[1]>i?1:-1;C?C!==_&&++c:d[g[0]]=_}}}),c%2==1}function de(t,e){var r=t[0],n=t[1],o=e[0]-r,s=e[1]-n;Math.abs(o)<bt&&(o=0),Math.abs(s)<bt&&(s=0);var u=0,l=0,p=0;return o?s?(l=1,p=-(u=-s/o)*r-n):(l=1,p=-n):s&&(u=-1,p=r),[u,l,p]}function En(t,e){var r=t[0],n=t[1],i=t[2],a=e[0],o=e[1],s=e[2],u=0===r&&0===a,l=0===n&&0===o,p=[];if(u&&l)return[];if(u){var f=-i/n;return f!==-s/o?[]:[[-1/0,f],[1/0,f]]}if(l){var d=-i/r;return d!==-s/a?[]:[[d,-1/0],[d,1/0]]}if(0===r)p=[[m=-(o*(g=-i/n)+s)/a,g]];else if(0===a)p=[[m=-(n*(g=-s/o)+i)/r,g]];else if(0===n)p=[[m=-i/r,g=-(a*m+s)/o]];else if(0===o)p=[[m=-s/a,g=-(r*m+i)/n]];else{var m,g;p=[[m=(n*s-o*i)/(o*r-n*a),g=-(r*m+i)/n]]}return p.map(function(b){return[b[0],b[1]]})}function Mn(t,e){var r=e.map(function(f){return[0,1].map(function(c){return[Math.min(f[0][c],f[1][c]),Math.max(f[0][c],f[1][c])]})}),n=[];if(2===t.length){var i=t[0],a=i[0],o=i[1];if(yt(a-t[1][0])){if(!yt(o-t[1][1])){var l=Math.max.apply(Math,r.map(function(f){return f[0][0]})),p=Math.min.apply(Math,r.map(function(f){return f[0][1]}));if(yt(l-p)>0)return[];n=[[l,o],[p,o]]}}else{var s=Math.max.apply(Math,r.map(function(f){return f[1][0]})),u=Math.min.apply(Math,r.map(function(f){return f[1][1]}));if(yt(s-u)>0)return[];n=[[a,s],[a,u]]}}return n.length||(n=t.filter(function(f){var c=f[0],d=f[1];return r.every(function(v){return 0<=yt(c-v[0][0])&&0<=yt(v[0][1]-c)&&0<=yt(d-v[1][0])&&0<=yt(v[1][1]-d)})})),n.map(function(f){return[yt(f[0]),yt(f[1])]})}function yn(t){return function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}(t.slice(1),[t[0]]).map(function(e,r){return[t[r],e]})}function vc(t,e){return zo(function(t,e){return function(t,e){var r=t.slice(),n=e.slice();-1===nn(r)&&r.reverse(),-1===nn(n)&&n.reverse();var i=yn(r),a=yn(n),o=i.map(function(p){return de(p[0],p[1])}),s=a.map(function(p){return de(p[0],p[1])}),u=[];o.forEach(function(p,f){var c=i[f],d=[];s.forEach(function(v,g){var b=Mn(En(p,v),[c,a[g]]);d.push.apply(d,b.map(function(x){return{index1:f,index2:g,pos:x,type:"intersection"}}))}),d.sort(function(v,g){return Nt(c[0],v.pos)-Nt(c[0],g.pos)}),u.push.apply(u,d),Sn(c[1],n)&&u.push({index1:f,index2:-1,pos:c[1],type:"inside"})}),a.forEach(function(p,f){if(Sn(p[1],r)){var c=!1,d=jt(u,function(v){return v.index2===f?(c=!0,!1):!!c});-1===d&&(c=!1,d=jt(u,function(v){return-1===v.index1&&v.index2+1===f?(c=!0,!1):!!c})),-1===d?u.push({index1:-1,index2:f,pos:p[1],type:"inside"}):u.splice(d,0,{index1:-1,index2:f,pos:p[1],type:"inside"})}});var l={};return u.filter(function(p){var f=p.pos,c=f[0]+"x"+f[1];return!l[c]&&(l[c]=!0,!0)})}(t,e).map(function(n){return n.pos})}(t,e))}var wn=function(){return(wn=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++)for(var a in r=arguments[n])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)};const On=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(r,n){if(kt(r))for(var i in r)this.on(i,r[i]);else this._addEvent(r,n,{});return this},e.off=function(r,n){if(r)if(kt(r))for(var i in r)this.off(i);else if(n){var a=this._events[r];if(a){var o=jt(a,function(s){return s.listener===n});o>-1&&a.splice(o,1)}}else this._events[r]=[];else this._events={};return this},e.once=function(r,n){var i=this;return n&&this._addEvent(r,n,{once:!0}),new Promise(function(a){i._addEvent(r,a,{once:!0})})},e.emit=function(r,n){var i=this;void 0===n&&(n={});var a=this._events[r];if(!r||!a)return!0;var o=!1;return n.eventType=r,n.stop=function(){o=!0},n.currentTarget=this,function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}(a).forEach(function(s){s.listener(n),s.once&&i.off(r,s.listener)}),!o},e.trigger=function(r,n){return void 0===n&&(n={}),this.emit(r,n)},e._addEvent=function(r,n,i){var a=this._events;a[r]=a[r]||[],a[r].push(wn({listener:n},i))},t}();"undefined"!=typeof document&&document;var An=function(t,e){return(An=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)},Me=function(){return(Me=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++)for(var a in r=arguments[n])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)};function Nc(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function zn(t){return t?function(t){return"string"==typeof t}(t)?document.querySelector(t):function(t){return"function"==typeof t}(t)?t():t instanceof Element?t:"current"in t?t.current:"value"in t?t.value:void 0:null}const Lc=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n._startRect=null,n._startPos=[],n._prevTime=0,n._timer=0,n._prevScrollPos=[0,0],n._isWait=!1,n._flag=!1,n}!function(t,e){function r(){this.constructor=t}An(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t);var r=e.prototype;return r.dragStart=function(n,i){var a=zn(i.container);if(a){var o=0,s=0,u=0,l=0;if(a===document.body)u=window.innerWidth,l=window.innerHeight;else{var p=a.getBoundingClientRect();o=p.top,s=p.left,u=p.width,l=p.height}this._flag=!0,this._startPos=[n.clientX,n.clientY],this._startRect={top:o,left:s,width:u,height:l},this._prevScrollPos=this._getScrollPosition([0,0],i)}else this._flag=!1},r.drag=function(n,i){if(this._flag){var a=n.clientX,o=n.clientY,s=i.threshold,u=void 0===s?0:s,p=this._startRect,f=this._startPos,c=[0,0];return p.top>o-u?(f[1]>p.top||o<f[1])&&(c[1]=-1):p.top+p.height<o+u&&(f[1]<p.top+p.height||o>f[1])&&(c[1]=1),p.left>a-u?(f[0]>p.left||a<f[0])&&(c[0]=-1):p.left+p.width<a+u&&(f[0]<p.left+p.width||a>f[0])&&(c[0]=1),clearTimeout(this._timer),!(!c[0]&&!c[1])&&this._continueDrag(Me(Me({},i),{direction:c,inputEvent:n,isDrag:!0}))}},r.checkScroll=function(n){var i=this;if(this._isWait)return!1;var a=n.prevScrollPos,o=void 0===a?this._prevScrollPos:a,s=n.direction,u=n.throttleTime,l=void 0===u?0:u,p=n.inputEvent,f=n.isDrag,c=this._getScrollPosition(s||[0,0],n),d=c[0]-o[0],v=c[1]-o[1],g=s||[d?Math.abs(d)/d:0,v?Math.abs(v)/v:0];return this._prevScrollPos=c,!(!d&&!v||(this.trigger("move",{offsetX:g[0]?d:0,offsetY:g[1]?v:0,inputEvent:p}),l&&f&&(this._timer=window.setTimeout(function(){i._continueDrag(n)},l)),0))},r.dragEnd=function(){clearTimeout(this._timer)},r._getScrollPosition=function(n,i){var o=i.getScrollPosition;return(void 0===o?Nc:o)({container:zn(i.container),direction:n})},r._continueDrag=function(n){var i=this,a=n.container,o=n.direction,s=n.throttleTime,u=n.useScroll,l=n.isDrag,p=n.inputEvent;if(!l||!this._isWait){var f=Date.now?Date.now():(new Date).getTime(),c=Math.max(s+this._prevTime-f,0);if(c>0)return this._timer=window.setTimeout(function(){i._continueDrag(n)},c),!1;this._prevTime=f;var d=this._getScrollPosition(o,n);return this._prevScrollPos=d,l&&(this._isWait=!0),this.trigger("scroll",{container:zn(a),direction:o,inputEvent:p}),this._isWait=!1,u||this.checkScroll(Me(Me({},n),{prevScrollPos:d,direction:o,inputEvent:p}))}},e}(On);var Gn=function(t,e){return(Gn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)},xt=function(){return(xt=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++)for(var a in r=arguments[n])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)};function In(t){return function(t,e){var i=Math.atan2(e[1]-t[1],e[0]-t[0]);return i>=0?i:i+2*Math.PI}([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function Cr(t){return t?t.touches?function(t){for(var e=Math.min(t.length,2),r=[],n=0;n<e;++n)r.push(jo(t[n]));return r}(t.touches):[jo(t)]:[]}function Vo(t,e,r){var n=r.length,i=Ue(t,n),a=i.clientX,o=i.clientY,s=i.originalClientX,u=i.originalClientY,l=Ue(e,n),p=l.clientX,f=l.clientY,c=Ue(r,n);return{clientX:s,clientY:u,deltaX:a-p,deltaY:o-f,distX:a-c.clientX,distY:o-c.clientY}}function Bn(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function jo(t){return{clientX:t.clientX,clientY:t.clientY}}function Ue(t,e){void 0===e&&(e=t.length);for(var r={clientX:0,clientY:0,originalClientX:0,originalClientY:0},n=0;n<e;++n){var i=t[n];r.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,r.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,r.clientX+=i.clientX,r.clientY+=i.clientY}return e?{clientX:r.clientX/e,clientY:r.clientY/e,originalClientX:r.originalClientX/e,originalClientY:r.originalClientY/e}:r}var kn=function(){function t(r){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=r,this.prevClients=r,this.length=r.length}var e=t.prototype;return e.getAngle=function(r){return void 0===r&&(r=this.prevClients),In(r)},e.getRotation=function(r){return void 0===r&&(r=this.prevClients),In(r)-In(this.startClients)},e.getPosition=function(r,n){void 0===r&&(r=this.prevClients);var i=Vo(r||this.prevClients,this.prevClients,this.startClients),a=i.deltaX,o=i.deltaY;return this.movement+=Math.sqrt(a*a+o*o),this.prevClients=r,i},e.getPositions=function(r){void 0===r&&(r=this.prevClients);var n=this.prevClients;return this.startClients.map(function(i,a){return Vo([r[a]],[n[a]],[i])})},e.getMovement=function(r){var n=this.movement;if(!r)return n;var i=Ue(r,this.length),a=Ue(this.prevClients,this.length),o=i.clientX-a.clientX,s=i.clientY-a.clientY;return Math.sqrt(o*o+s*s)+n},e.getDistance=function(r){return void 0===r&&(r=this.prevClients),Bn(r)},e.getScale=function(r){return void 0===r&&(r=this.prevClients),Bn(r)/Bn(this.startClients)},e.move=function(r,n){this.startClients.forEach(function(i){i.clientX-=r,i.clientY-=n})},t}(),qo=["textarea","input"];const jc=function(t){function e(n,i){void 0===i&&(i={});var a=t.call(this)||this;a.options={},a.flag=!1,a.pinchFlag=!1,a.datas={},a.isDrag=!1,a.isPinch=!1,a.isMouse=!1,a.isTouch=!1,a.clientStores=[],a.targets=[],a.prevTime=0,a.doubleFlag=!1,a._dragFlag=!1,a._isMouseEvent=!1,a._isSecondaryButton=!1,a._preventMouseEvent=!1,a.onDragStart=function(c,d){if(void 0===d&&(d=!0),a.flag||!1!==c.cancelable){var v=a.options,g=v.container,m=v.pinchOutside,b=v.preventWheelClick,x=v.preventRightClick,C=v.preventDefault,_=v.checkInput,M=v.preventClickEventOnDragStart,E=v.preventClickEventOnDrag,S=v.preventClickEventByCondition,w=a.isTouch,y=!a.flag;if(a._isSecondaryButton=3===c.which||2===c.button,b&&(2===c.which||1===c.button)||x&&(3===c.which||2===c.button))return a.initDrag(),!1;if(y){var D=document.activeElement,P=c.target,O=P.tagName.toLowerCase(),R=qo.indexOf(O)>-1,z=P.isContentEditable;if(R||z){if(_||D===P||D&&z&&D.isContentEditable&&D.contains(P))return!1}else(C||"touchstart"===c.type)&&D&&(D.isContentEditable||qo.indexOf(D.tagName)>-1)&&D.blur();(M||E||S)&&Ft(window,"click",a._onClick,!0),a.clientStores=[new kn(Cr(c))],a.flag=!0,a.isDrag=!1,a._dragFlag=!0,a.datas={},a.doubleFlag=pr()-a.prevTime<200,a._isMouseEvent=function(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}(c),!a._isMouseEvent&&a._preventMouseEvent&&(a._preventMouseEvent=!1),!1===(a._preventMouseEvent||a.emit("dragStart",xt(xt({datas:a.datas,inputEvent:c,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,isTrusted:d,isDouble:a.doubleFlag},a.getCurrentStore().getPosition()),{preventDefault:function(){c.preventDefault()},preventDrag:function(){a._dragFlag=!1}})))&&a.initDrag(),a._isMouseEvent&&a.flag&&C&&c.preventDefault()}if(!a.flag)return!1;var N=0;if(y&&w&&m&&(N=setTimeout(function(){Ft(g,"touchstart",a.onDragStart,{passive:!1})})),!y&&w&&m&&Pt(g,"touchstart",a.onDragStart),a.flag&&function(t){return t.touches&&t.touches.length>=2}(c)){if(clearTimeout(N),y&&c.touches.length!==c.changedTouches.length)return;a.pinchFlag||a.onPinchStart(c)}}},a.onDrag=function(c,d){if(a.flag){!a._isMouseEvent&&a.options.preventDefault&&c.preventDefault();var g=Cr(c),m=a.moveClients(g,c,!1);if(a._dragFlag){if((a.pinchFlag||m.deltaX||m.deltaY)&&!1===(a._preventMouseEvent||a.emit("drag",xt(xt({},m),{isScroll:!!d,inputEvent:c}))))return void a.stop();a.pinchFlag&&a.onPinch(c,g)}a.getCurrentStore().getPosition(g,!0)}},a.onDragEnd=function(c){if(a.flag){var d=a.options,v=d.pinchOutside,g=d.container,m=d.preventClickEventOnDrag,b=d.preventClickEventOnDragStart,x=d.preventClickEventByCondition,C=a.isDrag;(m||b||x)&&requestAnimationFrame(function(){a._allowClickEvent()}),!x&&!b&&m&&!C&&a._allowClickEvent(),a.isTouch&&v&&Pt(g,"touchstart",a.onDragStart),a.pinchFlag&&a.onPinchEnd(c);var _=(null==c?void 0:c.touches)?Cr(c):[];0!==_.length&&a.options.keepDragging?a._addStore(new kn(_)):a.flag=!1;var E=a._getPosition(),S=pr(),w=!C&&a.doubleFlag;a.prevTime=C||w?0:S,a.flag||(a._preventMouseEvent||a.emit("dragEnd",xt({datas:a.datas,isDouble:w,isDrag:C,isClick:!C,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,inputEvent:c},E)),a.clientStores=[],a._isMouseEvent||(a._preventMouseEvent=!0,requestAnimationFrame(function(){requestAnimationFrame(function(){a._preventMouseEvent=!1})})))}},a.onBlur=function(){a.onDragEnd()},a._allowClickEvent=function(){Pt(window,"click",a._onClick,!0)},a._onClick=function(c){a._preventMouseEvent=!1;var d=a.options.preventClickEventByCondition;(null==d?void 0:d(c))||(c.stopPropagation(),c.preventDefault())},a._onContextMenu=function(c){a.options.preventRightClick?a.onDragEnd(c):c.preventDefault()};var o=[].concat(n);a.options=xt({checkInput:!1,container:o.length>1?window:o[0],preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},i);var s=a.options,u=s.container,l=s.events,p=s.checkWindowBlur;if(a.isTouch=l.indexOf("touch")>-1,a.isMouse=l.indexOf("mouse")>-1,a.targets=o,a.isMouse&&(o.forEach(function(c){Ft(c,"mousedown",a.onDragStart)}),Ft(u,"mousemove",a.onDrag),Ft(u,"mouseup",a.onDragEnd),Ft(u,"contextmenu",a._onContextMenu)),p&&Ft(window,"blur",a.onBlur),a.isTouch){var f={passive:!1};o.forEach(function(c){Ft(c,"touchstart",a.onDragStart,f)}),Ft(u,"touchmove",a.onDrag,f),Ft(u,"touchend",a.onDragEnd,f),Ft(u,"touchcancel",a.onDragEnd,f)}return a}!function(t,e){function r(){this.constructor=t}Gn(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t);var r=e.prototype;return r.stop=function(){this.isDrag=!1,this.flag=!1,this.clientStores=[],this.datas={}},r.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(i,a){return i+a.movement},0)},r.isDragging=function(){return this.isDrag},r.isFlag=function(){return this.flag},r.isPinchFlag=function(){return this.pinchFlag},r.isDoubleFlag=function(){return this.doubleFlag},r.isPinching=function(){return this.isPinch},r.scrollBy=function(n,i,a,o){void 0===o&&(o=!0),this.flag&&(this.clientStores[0].move(n,i),o&&this.onDrag(a,!0))},r.move=function(n,i){var a=n[0],o=n[1],s=this.getCurrentStore();return this.moveClients(s.prevClients.map(function(l){var p=l.clientX,f=l.clientY;return{clientX:p+a,clientY:f+o,originalClientX:p,originalClientY:f}}),i,!0)},r.triggerDragStart=function(n){this.onDragStart(n,!1)},r.setEventDatas=function(n){var i=this.datas;for(var a in n)i[a]=n[a];return this},r.getCurrentEvent=function(n){return xt(xt({datas:this.datas},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},r.getEventDatas=function(){return this.datas},r.unset=function(){var n=this,i=this.targets,a=this.options.container;this.off(),Pt(window,"blur",this.onBlur),this.isMouse&&(i.forEach(function(o){Pt(o,"mousedown",n.onDragStart)}),Pt(a,"mousemove",this.onDrag),Pt(a,"mouseup",this.onDragEnd),Pt(a,"contextmenu",this._onContextMenu)),this.isTouch&&(i.forEach(function(o){Pt(o,"touchstart",n.onDragStart)}),Pt(a,"touchstart",this.onDragStart),Pt(a,"touchmove",this.onDrag),Pt(a,"touchend",this.onDragEnd),Pt(a,"touchcancel",this.onDragEnd))},r.onPinchStart=function(n){var i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new kn(Cr(n));this.pinchFlag=!0,this._addStore(a),!1===this.emit("pinchStart",xt(xt({datas:this.datas,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:n}))&&(this.pinchFlag=!1)}},r.onPinch=function(n,i){if(this.flag&&this.pinchFlag&&!(i.length<2)){var a=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",xt(xt({datas:this.datas,movement:this.getMovement(i),angle:a.getAngle(i),rotation:a.getRotation(i),touches:a.getPositions(i),scale:a.getScale(i),distance:a.getDistance(i)},a.getPosition(i)),{inputEvent:n}))}},r.onPinchEnd=function(n){if(this.pinchFlag){var i=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var a=this.getCurrentStore();this.emit("pinchEnd",xt(xt({datas:this.datas,isPinch:i,touches:a.getPositions()},a.getPosition()),{inputEvent:n}))}},r.initDrag=function(){this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._allowClickEvent()},r.getCurrentStore=function(){return this.clientStores[0]},r.moveClients=function(n,i,a){var o=this._getPosition(n,a);return(o.deltaX||o.deltaY)&&(this.isDrag=!0),xt(xt({datas:this.datas},o),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:i})},r._addStore=function(n){this.clientStores.splice(0,0,n)},r._getPosition=function(n,i){var o=this.getCurrentStore().getPosition(n,i),s=this.clientStores.slice(1).reduce(function(p,f){var c=f.getPosition();return p.distX+=c.distX,p.distY+=c.distY,p},o),u=s.distX,l=s.distY;return xt(xt({},o),{distX:u,distY:l})},e}(On);const ef=function(t){var n,e="rCS"+function(t){return function(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return e>>>0}(t).toString(36)}(t),r=0;return{className:e,inject:function(i,a){void 0===a&&(a={});var u,o=function(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(i),s=0===r;return(o||s)&&(u=function(t,e,r,n){var i=document.createElement("style");return i.setAttribute("type","text/css"),i.setAttribute("data-styled-id",t),r.nonce&&i.setAttribute("nonce",r.nonce),i.innerHTML=function(t,e,r){return r.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/gm,function(n,i){var a=i.trim();return(a?$t(a):[""]).map(function(o){var s=o.trim();return 0===s.indexOf("@")?s:s.indexOf(":global")>-1?s.replace(/\:global/g,""):s.indexOf(":host")>-1?""+s.replace(/\:host/g,"."+t):s?"."+t+" "+s:"."+t}).join(", ")+" {"})}(t,e,r),(n||document.head||document.body).appendChild(i),i}(e,t,a,o)),s&&(n=u),o||++r,{destroy:function(){o?(i.removeChild(u),u=null):(r>0&&--r,0===r&&n&&(n.parentNode.removeChild(n),n=null))}}}}};var Nn=function(t,e){return(Nn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};function Uo(t,e){function r(){this.constructor=t}Nn(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Fn=function(){return(Fn=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++)for(var a in r=arguments[n])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},nf=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.injectResult=null,n.tag="div",n}Uo(e,t);var r=e.prototype;return r.render=function(){var n=this.props,i=n.className,a=void 0===i?"":i,s=n.portalContainer,u=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}(n,["className","cspNonce","portalContainer"]),l=this.injector.className,p=this.tag,f={};return"simple-1.1.0".indexOf("simple")>-1&&s&&(f={portalContainer:s}),Gt(p,Fn({ref:Ht(this,"element"),"data-styled-id":l,className:a+" "+l},f,u))},r.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},r.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},r.getElement=function(){return this.element},e}(cn);const Jo=function(t,e){var r=ef(e);return function(n){function i(){var a=null!==n&&n.apply(this,arguments)||this;return a.injector=r,a.tag=t,a}return Uo(i,n),i}(nf)};var Ln=function(t,e){return(Ln=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};function ye(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Ln(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var T=function(){return(T=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++)for(var a in r=arguments[n])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)};function X(t,e,r){if(r||2===arguments.length)for(var a,n=0,i=e.length;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function Je(t,e){var r;return T({events:{},props:(r={},r[t]=Boolean,r),name:t},e)}var Yn=Zl(),$o=Yn.browser.webkit,Ko=$o&&function(){var t="undefined"==typeof window?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return!!e&&parseFloat(e[1])<605}(),cf=parseInt(Yn.browser.webkitVersion,10)>=612||parseInt(Yn.browser.version,10)>=15,Wn="moveable-",ff="\n{\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --moveable-color: #4af;\n    --zoom: 1;\n    --zoompx: 1px;\n    will-change: transform;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n    position: absolute;\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n    background: #4af;\n    background: var(--moveable-color);\n\tmargin-top: -7px;\n    margin-left: -7px;\n    border: 2px solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\twidth: 1px;\n    height: 1px;\n    background: #4af;\n    background: var(--moveable-color);\n\ttransform-origin: 0px 50%;\n}\n.line.edge {\n    z-index: 1;\n    background: transparent;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top-color: #4af;\n    border-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left-color: #4af;\n    border-left-color: var(--moveable-color);\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n}\n.line.horizontal.bold {\n    height: 2px;\n}\n\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n\tpointer-events: none;\n}\n".concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return'\n.direction[data-rotation="'.concat(t,'"] {\n\t').concat(function(t){var e=function(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32,'px" height="').concat(32,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}(0,t),r=45*Math.round(t/45)%180,n="ns-resize";return 135===r?n="nwse-resize":45===r?n="nesw-resize":90===r&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(e,"') 16 16, ").concat(n,";")}(t),"\n}\n")}).join("\n"),"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n").concat(Ko?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"","\n"),pf=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Dt=1e-7,$e=Math.pow(10,10),Qo=-$e,vf=["n","w","s","e"],Hn=["n","w","s","e","nw","ne","sw","se"],hf={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Xn={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},ts={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},es=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget"];function Ke(t,e,r,n,i,a){void 0===a&&(a="draggable");var o=e.gestos[a].move(r,t.inputEvent),s=o.originalDatas||o.datas,u=s[a]||(s[a]={});return T(T({},i?Ss(e,o):o),{isPinch:!!n,parentEvent:!0,datas:u,originalDatas:t.originalDatas})}var De=function(){function t(r){var n;void 0===r&&(r="draggable"),this.ableName=r,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=((n={})[r]={},n)}var e=t.prototype;return e.dragStart=function(r,n){this.isDrag=!1,this.isFlag=!1;var i=n.originalDatas;return this.datas=i,i[this.ableName]||(i[this.ableName]={}),T(T({},this.move(r,n.inputEvent)),{type:"dragstart"})},e.drag=function(r,n){return this.move([r[0]-this.prevX,r[1]-this.prevY],n)},e.move=function(r,n){var i,a;return this.isFlag?(i=this.prevX+r[0],a=this.prevY+r[1],(r[0]||r[1])&&(this.isDrag=!0)):(this.prevX=r[0],this.prevY=r[1],this.startX=r[0],this.startY=r[1],i=r[0],a=r[1],this.isFlag=!0),this.prevX=i,this.prevY=a,{type:"drag",clientX:i,clientY:a,inputEvent:n,isDrag:this.isDrag,distX:i-this.startX,distY:a-this.startY,deltaX:r[0],deltaY:r[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function rs(t,e){var i=e.datas,a=t.state,o=a.moveableClientRect,l=a.pos1,d=j(Re(a.rootMatrix,[e.clientX-o.left,e.clientY-o.top],a.is3d?4:3),l),m=Vt({datas:i,distX:d[0],distY:d[1]});return[m[0],m[1]]}function ve(t,e){var r=e.datas,n=t.state,i=n.allMatrix,a=n.beforeMatrix,o=n.is3d,s=n.left,u=n.top,l=n.origin,p=n.offsetMatrix,f=n.targetMatrix,c=n.transformOrigin,d=o?4:3;r.is3d=o,r.matrix=i,r.targetMatrix=f,r.beforeMatrix=a,r.offsetMatrix=p,r.transformOrigin=c,r.inverseMatrix=Xt(i,d),r.inverseBeforeMatrix=Xt(a,d),r.absoluteOrigin=ce(K([s,u],l),d),r.startDragBeforeDist=Mt(r.inverseBeforeMatrix,r.absoluteOrigin,d),r.startDragDist=Mt(r.inverseMatrix,r.absoluteOrigin,d)}function Sr(t,e){var r=t.datas,n=t.originalDatas.beforeRenderable,i=r.transformIndex,a=n.nextTransforms,o=a.length,s=n.nextTransformAppendedIndexes,u=0;-1===i?r.transformIndex=u=a.length:u=ue(s,function(c){return c.index===i&&c.functionName===e})?i:i+s.filter(function(c){return c.index<i}).length;var l=function(t,e){var r=t.slice(0,e<0?void 0:e),n=t.slice(0,e<0?void 0:e+1),i=t[e]||"",a=e<0?[]:t.slice(e),o=e<0?[]:t.slice(e+1),s=fe(r),u=fe(n),l=fe([i]),p=fe(a),f=fe(o),c=Ee(s),d=Ee(u),v=Ee(p),g=Ee(f),m=st(c,v,4);return{transforms:t,beforeFunctionMatrix:c,beforeFunctionMatrix2:d,targetFunctionMatrix:Ee(l),afterFunctionMatrix:v,afterFunctionMatrix2:g,allFunctionMatrix:m,beforeFunctions:s,beforeFunctions2:u,targetFunction:l[0],afterFunctions:p,afterFunctions2:f,beforeFunctionTexts:r,beforeFunctionTexts2:n,targetFunctionText:i,afterFunctionTexts:a,afterFunctionTexts2:o}}(a,u),p=l.targetFunction,f="rotate"===e?"rotateZ":e;r.beforeFunctionTexts=l.beforeFunctionTexts,r.afterFunctionTexts=l.afterFunctionTexts,r.beforeTransform=l.beforeFunctionMatrix,r.beforeTransform2=l.beforeFunctionMatrix2,r.targetTansform=l.targetFunctionMatrix,r.afterTransform=l.afterFunctionMatrix,r.afterTransform2=l.afterFunctionMatrix2,r.targetAllTransform=l.allFunctionMatrix,p.functionName===f?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):o>u&&(r.isAppendTransform=!0,n.nextTransformAppendedIndexes=X(X([],s,!0),[{functionName:e,index:u,isAppend:!0}],!1))}function Er(t,e,r){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?r:e," ").concat(t.afterFunctionTexts.join(" "))}function ns(t,e,r){var n=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,o=t.afterTransform2,s=t.targetAllTransform,u=r?st(s,e,4):st(e,s,4),l=st(Xt(r?a:n,4),u,4);return st(l,Xt(r?o:i,4),4)}function is(t){var e=t.datas,o=e.startDragBeforeDist,u=e.is3d?4:3;return j(Mt(e.inverseBeforeMatrix,K(e.absoluteOrigin,[t.distX,t.distY]),u),o)}function Vt(t,e){var r=t.datas,u=r.startDragBeforeDist,l=r.startDragDist,f=r.is3d?4:3;return j(Mt(e?r.inverseBeforeMatrix:r.inverseMatrix,K(r.absoluteOrigin,[t.distX,t.distY]),f),e?u:l)}function as(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function gt(t,e){var r=(e[0]+1)/2,n=(e[1]+1)/2,i=[se(t[0][0],t[1][0],r,1-r),se(t[0][1],t[1][1],r,1-r)],a=[se(t[2][0],t[3][0],r,1-r),se(t[2][1],t[3][1],r,1-r)];return[se(i[0],a[0],n,1-n),se(i[1],a[1],n,1-n)]}function Qe(t,e,r,n){return st(t,jn(e,n,r),n)}function Mr(t){var e=we(t);return{setTransform:function(r,n){void 0===n&&(n=-1),e.startTransforms=Ut(r)?r:Jt(r),Zn(t,n)},setTransformIndex:function(r){Zn(t,r)}}}function yr(t,e){Zn(t,jt(we(t).startTransforms,function(i){return 0===i.indexOf("".concat(e,"("))}))}function Zn(t,e){var r=we(t),n=t.datas;if(n.transformIndex=e,-1!==e){var i=r.startTransforms[e];if(i){var a=fe([i]);n.startValue=a[0].functionValue}}}function Vn(t,e){we(t).nextTransforms=Jt(e)}function we(t){return t.originalDatas.beforeRenderable}function os(t){return t.originalDatas.beforeRenderable.nextTransforms}function ss(t){return os(t).join(" ")}function us(t){return we(t).nextStyle}function ls(t,e,r,n,i){Vn(i,e);var a=wt.drag(t,Ke(i,t.state,r,n,!1)),o=a?a.transform:e;return T(T({transform:e,drag:a},rr({transform:o},i)),{afterTransform:o})}function cs(t,e,r,n,i){var a=t.state,u=t.props.groupable,p=u?a.left:0,f=u?a.top:0,d=j(n,fs(t,r,function(t,e,r){var n=t.transformOrigin,s=e.afterTransform,u=t.is3d?4:3;return Qe(t.offsetMatrix,Zt(st(st(e.beforeTransform,Ze([r]),4),s,4),4,u),n,u)}(t.state,i,e)));return j(d,[p,f])}function fs(t,e,r){void 0===r&&(r=t.state.allMatrix);var n=t.state;return St(r,[n.width/2*(1+e[0]),n.height/2*(1+e[1])],n.is3d?4:3)}function ps(t,e){return gt(Tt(t.state),e)}function W(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return el.apply(void 0,X([Wn],t,!1))}function ds(t){t()}function Tf(t){return t&&"none"!==t?kt(t)?t:Ze(t):[1,0,0,1,0,0]}function jn(t,e,r){return bn(e,Xe(r,e),t,Xe(r.map(function(n){return-n}),e))}function qn(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function vs(t,e){void 0===e&&(e=Bt(t));var r=e.transform;if(r&&"none"!==r)return e.transform;if("transform"in t){var i=t.transform.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var o=[],s=function(l){var p=i[l].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(f){return p[f]}).join(", "),")"))},u=0;u<a;++u)s(u);return o.join(" ")}return""}function Dr(t,e,r){for(var n,i=document.body,a=!t||r?t:(null===(n=null==t?void 0:t.assignedSlot)||void 0===n?void 0:n.parentElement)||t.parentElement,o=!1,s=t===e||a===e,u="relative";a&&a!==i;){e===a&&(s=!0);var l=Bt(a),p=a.tagName.toLowerCase(),f=vs(a,l);if(u=l.position,"svg"===p||"static"!==u||f&&"none"!==f||"transform"===l.willChange)break;var d=a.parentNode;if(d&&11===d.nodeType){a=d.host,o=!0;break}a=d,u="relative"}return{isCustomElement:o,isStatic:"static"===u,isEnd:s||!a||a===i,offsetParent:a||i}}function Af(t,e){var r,u,l,n=t.tagName.toLowerCase(),i=t.offsetLeft,a=t.offsetTop,o=fr(i),s=!o;return s||"svg"===n?l=(u=qn(e).map(function(p){return parseFloat(p)})).slice():(l=(u=Ko?function(t){return qn(Bt(t,":before")).map(function(r,n){var i=Ne(r);return i.value*function(t,e,r){return"%"===e?Jn(t.ownerSVGElement)[r?"width":"height"]/100:1}(t,i.unit,0===n)})}(t):qn(e).map(function(p){return parseFloat(p)})).slice(),s=!0,i=(r=function(t,e){if(!t.getBBox||"g"===t.tagName.toLowerCase())return[0,0,0,0];var r=t.getBBox(),n=Jn(t.ownerSVGElement),i=r.x-n.x,a=r.y-n.y;return[i,a,e[0]-i,e[1]-a]}(t,u))[0],a=r[1],u[0]=r[2],u[1]=r[3]),{tagName:n,isSVG:o,hasOffset:s,offset:[i||0,a||0],origin:u,targetOrigin:l}}function hs(t,e,r){void 0===r&&(r=Bt(t));var n=Bt(document.body),i=n.position;if(!(e||i&&"static"!==i))return[0,0];var a=parseInt(n.marginLeft,10),o=parseInt(n.marginTop,10);return"absolute"===r.position&&(("auto"!==r.top||"auto"!==r.bottom)&&(o=0),("auto"!==r.left||"auto"!==r.right)&&(a=0)),[a,o]}function Un(t){t.forEach(function(e){var r=e.matrix;r&&(e.matrix=Zt(r,3,4))})}function Gf(t){for(var e=t.parentElement,r=!1;e;){var n=Bt(e).transform;if(n&&"none"!==n){r=!0;break}if(e===document.body)break;e=e.parentElement}return{fixedContainer:e||document.body,hasTransform:r}}function gs(t,e,r){for(var l,p,f,n=t,i=[],a=!r&&t===e||t===document.body,o=a,s=!1,u=3,c=!1,d=Dr(e,e,!0).offsetParent;n&&!o;){o=a;var v=Bt(n),g=v.position,b=$l(Tf(vs(n,v))),x="fixed"===g,C={hasTransform:!1,fixedContainer:null};x&&(c=!0,d=(C=Gf(n)).fixedContainer);var _=b.length;!s&&16===_&&(s=!0,u=4,Un(i),f&&(f=Zt(f,3,4))),s&&9===_&&(b=Zt(b,3,4));var M=Af(n,v),E=M.tagName,S=M.hasOffset,w=M.isSVG,y=M.origin,D=M.targetOrigin,P=M.offset,O=P[0],R=P[1];"svg"===E&&f?(i.push({type:"target",target:n,matrix:If(n,u)}),i.push({type:"offset",target:n,matrix:pt(u)})):"g"===E&&t!==n&&(O=0,R=0);var z=void 0,A=!1,I=!1;if(x)z=C.fixedContainer,A=!0;else{var N=Dr(n,e);z=N.offsetParent,A=N.isEnd,I=N.isStatic}$o&&!cf&&S&&!w&&I&&("relative"===g||"static"===g)&&(O-=z.offsetLeft,R-=z.offsetTop,a=a||A);var Y=0,G=0,B=0,L=0;if(x)S&&C.hasTransform&&(B=z.clientLeft,L=z.clientTop);else if(S&&d!==z&&(Y=z.clientLeft,G=z.clientTop),S&&z===document.body){var Z=hs(n,!1,v);O+=Z[0],R+=Z[1]}if(i.push({type:"target",target:n,matrix:jn(b,u,y)}),i.push(S?{type:"offset",target:n,matrix:Xe([O-n.scrollLeft+Y-B,R-n.scrollTop+G-L],u)}:{type:"offset",target:n,origin:y}),f||(f=b),l||(l=y),p||(p=D),o||x)break;n=z,a=A,(!r||n===document.body)&&(o=a)}return f||(f=pt(u)),l||(l=[0,0]),p||(p=[0,0]),{offsetContainer:d,matrixes:i,targetMatrix:f,transformOrigin:l,targetOrigin:p,is3d:s,hasFixed:c}}function wr(t,e){return void 0===e&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(Oo(t,!e).join(","),")")}function Jn(t){var e=t.clientWidth,r=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:r};var n=t.viewBox,i=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||r,clientWidth:e,clientHeight:r}}function If(t,e){var r=Jn(t),n=r.width,i=r.height,a=r.clientWidth,o=r.clientHeight,s=a/n,u=o/i,l=t.preserveAspectRatio.baseVal,p=l.align,f=l.meetOrSlice,c=[0,0],d=[s,u],v=[0,0];if(1!==p){var g=(p-2)%3,m=Math.floor((p-2)/3);c[0]=n*g/2,c[1]=i*m/2;var b=2===f?Math.max(u,s):Math.min(s,u);d[0]=b,d[1]=b,v[0]=(a-n)/2*g,v[1]=(o-i)/2*m}var x=Ro(d,e);return x[e*(e-1)]=v[0],x[e*(e-1)+1]=v[1],jn(x,e,c)}function St(t,e,r){return Mt(t,ce(e,r),r)}function he(t,e,r,n){return[[0,0],[e,0],[0,r],[e,r]].map(function(i){return St(t,i,n)})}function It(t){var e=t.map(function(l){return l[0]}),r=t.map(function(l){return l[1]}),n=Math.min.apply(Math,e),i=Math.min.apply(Math,r),a=Math.max.apply(Math,e),o=Math.max.apply(Math,r);return{left:n,top:i,right:a,bottom:o,width:a-n,height:o-i}}function ms(t,e,r,n){return It(he(t,e,r,n))}function Or(t,e,r,n){var a=16===t.length?4:3,o=he(t,r,n,a),s=o[0],u=s[0],l=s[1],p=o[1],f=p[0],c=p[1],d=o[2],v=d[0],g=d[1],m=o[3],b=m[0],x=m[1],C=St(t,e,a),_=C[0],M=C[1],E=Math.min(u,f,v,b),S=Math.min(l,c,g,x),w=Math.max(u,f,v,b);return u=u-E||0,{left:E,top:S,right:w,bottom:Math.max(l,c,g,x),origin:[_=_-E||0,M=M-S||0],pos1:[u,l=l-S||0],pos2:[f=f-E||0,c=c-S||0],pos3:[v=v-E||0,g=g-S||0],pos4:[b=b-E||0,x=x-S||0],direction:nn(o)}}function Lt(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function bs(t,e){return Lt([e[0]-t[0],e[1]-t[1]])}function tr(t,e,r,n){void 0===r&&(r=1),void 0===n&&(n=ht(t,e));var i=bs(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(n,"rad) scaleY(").concat(r,")"),width:"".concat(i,"px")}}function $n(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=r.length,a=r.reduce(function(s,u){return s+u[0]},0)/i,o=r.reduce(function(s,u){return s+u[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(o,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function ge(t,e){var r=t[e];return kt(r)?T(T({},t),r):t}function xs(t,e){void 0===e&&(e=t?Bt(t):null);var r=t&&!fr(t.offsetWidth),n=0,i=0,a=0,o=0,s=0,u=0,l=0,p=0,f=0,c=0,d=0,v=0,g=1/0,m=1/0,b=1/0,x=1/0,C=!1;if(t)if(r||"svg"===t.tagName.toLowerCase()){var M=t.style,E="border-box"===e.boxSizing,S=parseFloat(e.borderLeftWidth)||0,w=parseFloat(e.borderRightWidth)||0,y=parseFloat(e.borderTopWidth)||0,D=parseFloat(e.borderBottomWidth)||0,A=(parseFloat(e.paddingLeft)||0)+(parseFloat(e.paddingRight)||0),I=(parseFloat(e.paddingTop)||0)+(parseFloat(e.paddingBottom)||0),G=A+(S+w),B=I+(y+D);f=Math.max(A,ft(e.minWidth,0)||0),c=Math.max(I,ft(e.minHeight,0)||0),g=ft(e.maxWidth,0),m=ft(e.maxHeight,0),isNaN(g)&&(g=1/0,m=1/0);var L=ft(M.width,0)||0,Z=ft(M.height,0)||0,nt=parseFloat(e.width)||0,U=parseFloat(e.height)||0;s=parseFloat(e.width),u=parseFloat(e.height),n=l=Math.abs(nt-L)<1?en(f,L||s,g):nt,i=p=Math.abs(U-Z)<1?en(c,Z||u,m):U,a=l,o=p,E?(b=g,x=m,d=f,v=c,l=n-G,p=i-B):(b=g+G,x=m+B,d=f+G,v=c+B,n=l+G,i=p+B),a=l+A,o=p+I}else{var _=t.getBBox();C=!0,s=n=_.width,u=i=_.height,l=n,p=i,a=n,o=i}return{svg:C,offsetWidth:n,offsetHeight:i,clientWidth:a,clientHeight:o,contentWidth:l,contentHeight:p,cssWidth:s,cssHeight:u,minWidth:f,minHeight:c,maxWidth:g,maxHeight:m,minOffsetWidth:d,minOffsetHeight:v,maxOffsetWidth:b,maxOffsetHeight:x}}function Cs(t,e){return ht(e>0?t[0]:t[1],e>0?t[1]:t[0])}function er(t,e){var r,n=0,i=0,a=0,o=0;if(t)if(t===document.body||t===document.documentElement){a=window.innerWidth,o=window.innerHeight;var s=[document.documentElement.scrollLeft||document.body.scrollLeft,document.documentElement.scrollTop||document.body.scrollTop];n=(r=[-s[0],-s[1]])[0],i=r[1]}else{var u=t.getBoundingClientRect();n=u.left,i=u.top,a=u.width,o=u.height}var l={left:n,top:i,width:a,height:o,right:n+a,bottom:i+o};return t&&e&&(l.clientLeft=t.clientLeft,l.clientTop=t.clientTop,l.clientWidth=t.clientWidth,l.clientHeight=t.clientHeight,l.scrollWidth=t.scrollWidth,l.scrollHeight=t.scrollHeight,l.overflow="visible"!==Bt(t).overflow),l}function Kn(t){if(t){var e=t.getAttribute("data-direction");if(e){var r=[0,0];return e.indexOf("w")>-1&&(r[0]=-1),e.indexOf("e")>-1&&(r[0]=1),e.indexOf("n")>-1&&(r[1]=-1),e.indexOf("s")>-1&&(r[1]=1),r}}}function Qn(t,e){return[K(e,t[0]),K(e,t[1]),K(e,t[2]),K(e,t[3])]}function Tt(t){return Qn([t.pos1,t.pos2,t.pos3,t.pos4],[t.left,t.top])}function Oe(t,e){var r;null===(r=t[e])||void 0===r||r.unset(),t[e]=null}function rr(t,e){if(e){var r=we(e);r.nextStyle=T(T({},r.nextStyle),t)}return{style:t,cssText:_e(t).map(function(n){return"".concat(n,": ").concat(t[n],";")}).join("")}}function _s(t,e,r){var n=e.afterTransform||e.transform;return T(T({},rr(T(T(T({},t.style),e.style),{transform:n}),r)),{afterTransform:n,transform:t.transform})}function q(t,e,r,n){var i=e.datas;i.datas||(i.datas={});var a=T(T({},r),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,stopDrag:function(){var o;null===(o=e.stop)||void 0===o||o.call(e)}});return i.isStartEvent?n||(i.lastEvent=a):i.isStartEvent=!0,a}function At(t,e,r){var n=e.datas,i="isDrag"in r?r.isDrag:e.isDrag;return n.datas||(n.datas={}),T(T({isDrag:i},r),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:n.lastEvent,isDouble:e.isDouble,datas:n.datas})}function ti(t,e,r){t._emitter.on(e,r)}function F(t,e,r,n){return t.triggerEvent(e,r,n)}function Bt(t,e){return window.getComputedStyle(t,e)}function Rr(t,e,r){var n={},i={};return t.filter(function(a){var o=a.name;if(n[o]||!e.some(function(s){return a[s]}))return!1;if(!r&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return n[o]=!0,!0})}function ei(t,e){return t===e||null==t&&null==e}function Te(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(r,n){return Math.abs(n)-Math.abs(r)}),t[0]}function Re(t,e,r){return Mt(Xt(t,r),ce(e,r),r)}function Ss(t,e){var r;return r=Re(t.rootMatrix,[e.distX,e.distY],t.is3d?4:3),e.distX=r[0],e.distY=r[1],e}function Pr(t,e,r,n,i){return j(St(t,K(r,e),i),n)}function Yt(t,e,r){return r?"".concat(t/e*100,"%"):"".concat(t,"px")}function Ar(t){return Math.abs(t)<=Dt?0:t}function ri(t,e){return void 0===e&&(e=[t]),function(r,n){if(n.isRequest)return!!e.some(function(a){return n.requestAble===a})&&n.parentDirection;var i=n.inputEvent.target;return _t(i,W("direction"))&&(!t||_t(i,W(t)))}}function Xf(t){var e={};for(var r in t)e[t[r]]=r;return e}function nr(t,e){return t?t instanceof Element?t:zt(t)?e?document.querySelector(t):t:eo(t)?t():"current"in t?t.current:t:null}function Es(t,e){return t?(function(t){return!(!t||!kt(t)||t instanceof Element)&&(Ut(t)||"length"in t)}(t)?[].slice.call(t):[t]).reduce(function(n,i){return zt(i)&&e?X(X([],n,!0),[].slice.call(document.querySelectorAll(i)),!0):(n.push(nr(i,e)),n)},[]):[]}function Ms(t,e){var n=t.is3d,a=Xt(t.rootMatrix,n?4:3);return n||(a=Zt(a,3,4)),a[12]=0,a[13]=0,a[14]=0,function(t,e){var r=Mt(t,[e[0],e[1]||0,e[2]||0,1],4),n=r[3]||1;return[r[0]/n,r[1]/n,r[2]/n]}(a,e)}function ys(t,e,r,n,i){var a=t[0],o=t[1],s=0,u=0;if(i&&a&&o){var l=ht([0,0],e),p=ht([0,0],n),f=Lt(e),c=Math.cos(l-p)*f;if(n[0])if(n[1]){var d=2*n[0]*a,v=2*n[1]*o,g=Lt([d+e[0],v+e[1]])-Lt([d,v]),m=ht([0,0],[r,1]);s=Math.cos(m)*g,u=Math.sin(m)*g}else u=(s=c)/r;else s=(u=c)*r}else s=n[0]*e[0],u=n[1]*e[1];return[s,u]}function Ds(t,e,r,n){var i,a=r.ratio,o=r.startOffsetWidth,s=r.startOffsetHeight,u=0,l=0,p=n.distX,f=n.distY,c=n.parentDistance,d=n.parentDist,v=n.parentScale,g=r.fixedDirection,m=[0,1].map(function(E){return Math.abs(t[E]-g[E])}),b=[0,1].map(function(E){var S=m[E];return 0!==S&&(S=2/S),S});if(d)u=d[0],l=d[1],e&&(u?l||(l=u/a):u=l*a);else if(v)u=(v[0]-1)*o,l=(v[1]-1)*s;else if(c){var x=o*m[0],C=s*m[1],_=Lt([x,C]);u=c/_*x*b[0],l=c/_*C*b[1]}else{var M=Vt({datas:r,distX:p,distY:f});u=(i=ys([o,s],M=b.map(function(E,S){return M[S]*E}),a,t,e))[0],l=i[1]}return{distWidth:u,distHeight:l}}var Uf=Je("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(t,e){var r=e.datas,n=e.targets,i=e.angle,a=e.originalDatas,o=t.props,s=o.pinchable,u=o.ables;if(!s)return!1;var l="onPinch".concat(n?"Group":"","Start"),p="drag".concat(n?"Group":"","ControlStart"),f=(!0===s?t.controlAbles:u.filter(function(g){return s.indexOf(g.name)>-1})).filter(function(g){return g.canPinch&&g[p]}),c=q(t,e,{});n&&(c.targets=n);var d=F(t,l,c);r.isPinch=!1!==d,r.ables=f;var v=r.isPinch;return!!v&&(f.forEach(function(g){if(a[g.name]=a[g.name]||{},g[p]){var m=T(T({},e),{datas:a[g.name],parentRotate:i,isPinch:!0});g[p](t,m)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},v)},pinch:function(t,e){var r=e.datas,a=e.originalDatas,o=e.inputEvent,s=e.targets,u=e.angle;if(r.isPinch){var l=e.distance*(1-1/e.scale),p=q(t,e,{});s&&(p.targets=s);var f="onPinch".concat(s?"Group":"");F(t,f,p);var c=r.ables,d="drag".concat(s?"Group":"","Control");return c.forEach(function(v){!v[d]||v[d](t,T(T({},e),{datas:a[v.name],inputEvent:o,parentDistance:l,parentRotate:u,isPinch:!0}))}),p}},pinchEnd:function(t,e){var r=e.datas,n=e.isPinch,i=e.inputEvent,a=e.targets,o=e.originalDatas;if(r.isPinch){var s="onPinch".concat(a?"Group":"","End"),u=At(t,e,{isDrag:n});a&&(u.targets=a),F(t,s,u);var l=r.ables,p="drag".concat(a?"Group":"","ControlEnd");return l.forEach(function(f){!f[p]||f[p](t,T(T({},e),{isDrag:n,datas:o[f.name],inputEvent:i,isPinch:!0}))}),n}},pinchGroupStart:function(t,e){return this.pinchStart(t,T(T({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,T(T({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,T(T({},e),{targets:t.props.targets}))}});function te(t,e,r){var n=r.originalDatas;n.groupable=n.groupable||{};var i=n.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(o,s){return a[s]=a[s]||{},a[s][e]=a[s][e]||{},T(T({},r),{datas:a[s][e],originalDatas:a[s]})})}function ni(t,e,r,n,i,a,o){var s=!!r.match(/Start$/g),u=!!r.match(/End$/g),l=i.isPinch,p=i.datas,f=te(t,e.name,i),c=t.moveables,d=f.map(function(v,g){var m=c[g],b=m.state,x=b.gestos,C=v;if(s)C=new De(o).dragStart(n,v);else{if(x[o]||(x[o]=p.childGestos[g]),!x[o])return;C=Ke(v,b,n,l,a,o)}var _=e[r](m,T(T({},C),{parentFlag:!0}));return u&&(x[o]=null),_});return s&&(p.childGestos=c.map(function(v){return v.state.gestos[o]})),d}function qt(t,e,r,n,i,a){void 0===i&&(i=function(p,f){return f});var o=!!r.match(/End$/g),s=te(t,e.name,n),u=t.moveables;return s.map(function(p,f){var d,c=u[f];d=i(c,p);var v=e[r](c,T(T({},d),{parentFlag:!0}));return v&&a&&a(c,p,v,f),o&&(c.state.gestos={}),v})}var Jf=["left","right","center"],$f=["top","bottom","middle"],ee={start:"left",end:"right",center:"center"},re={start:"top",end:"bottom",center:"middle"};function Pe(t,e){var r=t.props,n=r.snappable,i=r.bounds,a=r.innerBounds,o=r.verticalGuidelines,s=r.horizontalGuidelines,u=r.snapGridWidth,l=r.snapGridHeight,p=t.state,f=p.guidelines;return!(!n||!p.enableSnap||e&&!0!==n&&n.indexOf(e)<0||!(u||l||i||a||f&&f.length||o&&o.length||s&&s.length))}function ii(t){return!1===t?{}:!0!==t&&t?t:{left:!0,right:!0,top:!0,bottom:!0}}function ai(t,e){var r=function(t,e){var r=ii(t),n={};for(var i in r)i in e&&r[i]&&(n[i]=e[i]);return n}(t,e),n=$f.filter(function(a){return a in r}),i=Jf.filter(function(a){return a in r});return{horizontal:n.map(function(a){return r[a]}),vertical:i.map(function(a){return r[a]})}}function zr(t,e,r,n){var a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.length-1,n=0;n<r;++n){var i=t[n];if(!fr(i))return i}return t[r]}(n,t.props.snapThreshold,5);return ws(t.state.guidelines,e,r,a)}function ws(t,e,r,n){return{vertical:Ts(t,"vertical",e,n),horizontal:Ts(t,"horizontal",r,n)}}function Os(t,e,r){var n=ai(t.props.snapDirections,e);return zr(t,n.vertical,n.horizontal,r)}function oi(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=t.posInfos[0],n=r.guidelineInfos[0];return{isSnap:e,offset:n.offset,dist:n.dist,pos:r.pos,guideline:n.guideline}}function Ts(t,e,r,n){if(!t||!t.length)return{isSnap:!1,index:-1,posInfos:[]};var a="vertical"===e?0:1,o=r.map(function(u,l){var p=t.map(function(f){var d=u-f.pos[a];return{offset:d,dist:Math.abs(d),guideline:f}}).filter(function(f){return!(f.guideline.type!==e||f.dist>n)}).sort(function(f,c){return f.dist-c.dist});return{pos:u,index:l,guidelineInfos:p}}).filter(function(u){return u.guidelineInfos.length>0}).sort(function(u,l){return u.guidelineInfos[0].dist-l.guidelineInfos[0].dist}),s=o.length>0;return{isSnap:s,index:s?o[0].index:-1,posInfos:o}}function Rs(t,e){var r=Math.abs(t.offset),n=Math.abs(e.offset);return t.isBound&&e.isBound?n-r:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?n-r:t.isSnap?-1:e.isSnap||r<Dt?1:n<Dt?-1:r-n}function Gr(t,e){return t.slice().sort(function(r,n){return r.sign[e]?n.sign[e]?Rs({isBound:r.isBound,isSnap:r.isSnap,offset:r.offset[e]},{isBound:n.isBound,isSnap:n.isSnap,offset:n.offset[e]}):-1:1})[0]}function Ps(t,e){var r=rn([e[0][0],e[1][0]]),n=rn([e[0][1],e[1][1]]);return{vertical:r<=t[0],horizontal:n<=t[1]}}function si(t,e){var o,s,r=e[0],n=e[1],i=n[0]-r[0],a=n[1]-r[1];return Math.abs(i)<Dt&&(i=0),Math.abs(a)<Dt&&(a=0),i?a?(o=a/i*(t[0]-r[0])+r[1],s=t[1]):(o=r[1],s=t[1]):(o=r[0],s=t[0]),o-s}function As(t,e,r,n){return void 0===n&&(n=Dt),t.every(function(i){var a=si(i,e);return a<=0===r||Math.abs(a)<=n})}function zs(t,e,r,n,i){return void 0===i&&(i=0),n&&e-i<=t||!n&&t<=r+i?{isBound:!0,offset:n?e-t:r-t}:{isBound:!1,offset:0}}function ne(t,e,r,n,i,a){var o=e[0],s=e[1],u=t[0],l=r[0],p=r[1],f=Ar(p[1]-l[1]),d=s,v=o,g=-o/s;if(!Ar(p[0]-l[0]))return a&&!v?{isBound:!1,offset:0}:d?zs(g*(l[0]-u[0])+u[1],l[1],p[1],n,i):(b=l[0]-u[0],{isBound:x=Math.abs(b)<=(i||0),offset:x?b:0});if(!f){if(a&&!d)return{isBound:!1,offset:0};if(v)return zs((l[1]-u[1])/g+u[0],l[0],p[0],n,i);var x,b=l[1]-u[1];return{isBound:x=Math.abs(b)<=(i||0),offset:x?b:0}}return{isBound:!1,offset:0}}function Gs(t,e,r){return e.map(function(n){var i=function(t,e){var r=e.line,i=e.verticalSign,a=e.horizontalSign,o=e.lineConstants,s=t.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=s.left,l=s.top,p=s.width,f=s.height,c=[[u,l],[u,l+f]],d=[[u,l],[u+p,l]],v=[[u+p,l],[u+p,l+f]],g=[[u,l+f],[u+p,l+f]];if(As([[u,l],[u+p,l],[u,l+f],[u+p,l+f]],r,e.centerSign))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var m=ne(r,o,d,i),b=ne(r,o,g,i),x=ne(r,o,c,a),C=ne(r,o,v,a),_=m.isBound&&b.isBound,M=m.isBound||b.isBound,E=x.isBound&&C.isBound,S=x.isBound||C.isBound,w=Te(m.offset,b.offset),y=Te(x.offset,C.offset),D=[0,0],P=!1,O=!1;return Math.abs(y)<Math.abs(w)?(D=[w,0],P=M,O=_):(D=[0,y],P=S,O=E),{isAllBound:O,isVerticalBound:M,isHorizontalBound:S,isBound:P,offset:D}}(t,n),a=i.isBound,o=i.offset,s=i.isVerticalBound,u=i.isHorizontalBound,l=n.multiple,p=Vt({datas:r,distX:o[0],distY:o[1]}).map(function(f,c){return f*(l[c]?2/l[c]:0)});return{sign:l,isBound:a,isVerticalBound:s,isHorizontalBound:u,isSnap:!1,offset:p}})}function ui(t,e,r,n){var i=t.state,s=he(i.allMatrix,100,100,i.is3d?4:3),u=gt(s,[0,0]);return function(t,e){var r=[],n=t[0],i=t[1];return n&&i?r.push([[0,2*i],t,[-n,i]],[[2*n,0],t,[n,-i]]):n?(r.push([[2*n,0],[n,1],[n,-1]]),e&&r.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):i?(r.push([[0,2*i],[1,i],[-1,i]]),e&&r.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):r.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),r}(r,n).map(function(l){var p=l[0],f=l[1],c=l[2],d=[gt(s,f),gt(s,c)],v=function(t){var e=t[0],r=t[1],n=r[0]-e[0],i=r[1]-e[1];Math.abs(n)<bt&&(n=0),Math.abs(i)<bt&&(i=0);var a=0,o=0,s=0;return n?i?(o=1,s=(a=-i/n)*e[0]-e[1]):(o=1,s=-e[1]):(a=-1,s=e[0]),[a,o,s].map(function(u){return J(u,bt)})}(d),g=Ps(u,d),m=g.vertical,b=g.horizontal;return{multiple:p,centerSign:si(u,d)<=0,verticalSign:m,horizontalSign:b,lineConstants:v,line:[gt(e,f),gt(e,c)]}})}function Is(t,e,r,n){var i=n?t.map(function(a){return Qt(a,n)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var o=si(r,a)<=0;return!As(e,a,o)})}function li(t,e,r){var n=t||{},i=n.position,o=n.left,u=n.top,p=n.right,c=n.bottom,v={position:void 0===i?"client":i,left:void 0===o?-1/0:o,top:void 0===u?-1/0:u,right:void 0===p?1/0:p,bottom:void 0===c?1/0:c};return{vertical:Bs(v,e,!0),horizontal:Bs(v,r,!1)}}function Ir(t,e){var r=t.state,n=r.containerClientRect,o=n.clientLeft,s=n.clientTop,u=r.snapOffset,l=u.left,p=u.top,d=e||t.props.bounds||{},g="css"===(d.position||"client"),m=d.left,x=d.top,_=d.right,M=void 0===_?g?-1/0:1/0:_,E=d.bottom,S=void 0===E?g?-1/0:1/0:E;return g&&(M=n.clientWidth+u.right-l-M,S=n.clientHeight+u.bottom-p-S),{left:(void 0===m?-1/0:m)+l-o,right:M+l-o,top:(void 0===x?-1/0:x)+p-s,bottom:S+p-s}}function Bs(t,e,r){var n=t[r?"left":"top"],i=t[r?"right":"bottom"],a=Math.min.apply(Math,e),o=Math.max.apply(Math,e),s=[];return n+1>a&&s.push({isBound:!0,offset:a-n,pos:n}),i-1<o&&s.push({isBound:!0,offset:o-i,pos:i}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(u,l){return Math.abs(l.offset)-Math.abs(u.offset)})}function ks(t,e,r){return(r?t.map(function(i){return Qt(i,r)}):t).some(function(i){return i[0]<e.left&&Math.abs(i[0]-e.left)>.1||i[0]>e.right&&Math.abs(i[0]-e.right)>.1||i[1]<e.top&&Math.abs(i[1]-e.top)>.1||i[1]>e.bottom&&Math.abs(i[1]-e.bottom)>.1})}function ci(t,e){return function(t,e){var r,a=t.size,o=t.pos,s=t.zoom,l="horizontal"===t.direction,p=l?"Y":"X";return e.createElement("div",{key:t.key,className:t.classNames.join(" "),style:(r={},r[l?"width":"height"]="".concat(a),r.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(p,"(-50%) scale").concat(p,"(").concat(s,")"),r)})}(T(T({},t),{classNames:X([W("line","guideline",t.direction)],t.classNames,!0).filter(function(r){return r}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(r){return"".concat(J(r,.1),"px")})}),e)}function Ns(t,e,r,n,i,a,o,s){var u=t.props.zoom;return r.map(function(l,p){var f=l.type,c=l.pos,d=[0,0];return d[o]=n,d[o?0:1]=-i+c,ci({key:"".concat(e,"TargetGuideline").concat(p),classNames:[W("target","bold",f)],posValue:d,sizeValue:a,zoom:u,direction:e},s)})}function Fs(t,e,r,n,i,a){var o=t.props,s=o.zoom,u=o.isDisplayInnerSnapDigit,l="horizontal"===e?ee:re,p=i[l.start],f=i[l.end];return r.filter(function(c){var v=c.elementRect;if(c.hide)return!1;if(u&&v){var g=v.rect;if(g[l.start]<=p&&f<=g[l.end])return!1}return!0}).map(function(c,d){var v=c.pos,g=c.size,m=c.element,b=c.className,x=[-n[0]+v[0],-n[1]+v[1]];return ci({key:"".concat(e,"-default-guideline-").concat(d),classNames:m?[W("bold"),b]:[W("normal"),b],direction:e,posValue:x,sizeValue:g,zoom:s},a)})}function ir(t,e,r,n,i,a,o,s){var u,l=t.props,p=l.snapDigit,f=void 0===p?0:p,c=l.isDisplaySnapDigit,d=void 0===c||c,v=l.snapDistFormat,g=void 0===v?function(M,E){return M}:v,m=l.zoom,b="horizontal"===e?"X":"Y",x="vertical"===e?"height":"width",C=Math.abs(i),_=d?parseFloat(C.toFixed(f)):0;return s.createElement("div",{key:"".concat(e,"-").concat(r,"-guideline-").concat(n),className:W("guideline-group",e),style:(u={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},u[x]="".concat(C,"px"),u)},ci({direction:e,classNames:[W(r),o],size:"100%",posValue:[0,0],sizeValue:C,zoom:m},s),s.createElement("div",{className:W("size-value","gap"),style:{transform:"translate".concat(b,"(-50%) scale(").concat(m,")")}},_>0?g(_,e):""))}function fi(t,e,r,n,i){var a=function(t,e,r,n){var i=e[0]-t[0],a=e[1]-t[1];if(Math.abs(i)<bt&&(i=0),Math.abs(a)<bt&&(a=0),!i)return n?[0,0]:[0,r];if(!a)return n?[r,0]:[0,0];var o=a/i,s=t[1]-o*t[0];return n?[r,o*(e[0]+r)+s-e[1]]:[(e[1]+r-s)/o-e[0],r]}(t,e,r,n);if(!a)return{isOutside:!1,offset:[0,0]};var o=Nt(t,e),s=Nt(a,t),u=Nt(a,e),l=s>o||u>o,p=Vt({datas:i,distX:a[0],distY:a[1]});return{offset:[p[0],p[1]],isOutside:l}}function Br(t,e){return t.isBound?t.offset:e.isSnap?oi(e).offset:0}function Cp(t,e,r,n,i,a){if(!Pe(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=Qn(a.absolutePoses,[e,r]),s=It(o),u=s.left,l=s.right,p=s.top,f=s.bottom,c={horizontal:o.map(function(z){return z[1]}),vertical:o.map(function(z){return z[0]})},g=kr(t,i,ai(ii(t.props.snapDirections),{left:u,right:l,top:p,bottom:f,center:(u+l)/2,middle:(p+f)/2}),c),m=g.vertical,b=g.horizontal,x=function(t,e,r){var n,a=Gs(t,ui(t,e,[0,0],!1).map(function(c){return T(T({},c),{multiple:c.multiple.map(function(d){return 2*Math.abs(d)})})}),r),o=Gr(a,0),s=Gr(a,1),u=0,l=0,p=o.isVerticalBound||s.isVerticalBound,f=o.isHorizontalBound||s.isHorizontalBound;return(p||f)&&(u=(n=function(t,e){var r=t.datas,p=r.absoluteOrigin,f=r.is3d?4:3;return j(Mt(r.matrix,K(r.startDragDist,[t.distX,t.distY]),f),p)}({datas:r,distX:-o.offset[0],distY:-s.offset[1]}))[0],l=n[1]),{vertical:{isBound:p,offset:u},horizontal:{isBound:f,offset:l}}}(t,o,a),C=x.vertical,_=x.horizontal,M=m.isSnap,E=b.isSnap,S=m.isBound||C.isBound,w=b.isBound||_.isBound,P=function(t,e,r,n,i){var a=e[0],o=e[1],s=r[0],u=r[1],l=n[0],p=n[1],f=i[0],c=i[1],d=-f,v=-c;if(t&&a&&o){d=0,v=0;var g=[];if(s&&u?g.push([0,c],[f,0]):s?g.push([f,0]):u?g.push([0,c]):l&&p?g.push([0,c],[f,0]):l?g.push([f,0]):p&&g.push([0,c]),g.length){g.sort(function(C,_){return Lt(j([a,o],C))-Lt(j([a,o],_))});var m=g[0];if(m[0]&&Math.abs(a)>bt)d=-m[0],v=o*Math.abs(a+d)/Math.abs(a)-o;else if(m[1]&&Math.abs(o)>bt){var b=o;v=-m[1],d=a*Math.abs(o+v)/Math.abs(b)-a}if(t&&u&&s)if(Math.abs(d)>bt&&Math.abs(d)<Math.abs(f))d*=x=Math.abs(f)/Math.abs(d),v*=x;else if(Math.abs(v)>bt&&Math.abs(v)<Math.abs(c)){var x;d*=x=Math.abs(c)/Math.abs(v),v*=x}else d=Te(-f,d),v=Te(-c,v)}}else d=a||s?-f:0,v=o||u?-c:0;return[d,v]}(n,[e,r],[S,w],[M,E],[Te(m.offset,C.offset),Te(b.offset,_.offset)]);return[{isBound:S,isSnap:M,offset:P[0]},{isBound:w,isSnap:E,offset:P[1]}]}function kr(t,e,r,n){void 0===n&&(n=r);var i=li(Ir(t),n.vertical,n.horizontal),a=i.horizontal,o=i.vertical,s=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:zr(t,r.vertical,r.horizontal),u=s.horizontal,l=s.vertical,p=Br(a[0],u),f=Br(o[0],l),c=Math.abs(p),d=Math.abs(f);return{horizontal:{isBound:a[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:p,dist:c,bounds:a,snap:u},vertical:{isBound:o[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:d,bounds:o,snap:l}}}function Ls(t,e,r,n,i){var a=li(e,r,n),o=a.horizontal,s=a.vertical,u=ws(t,r,n,i),l=u.horizontal,p=u.vertical,f=Br(o[0],l),c=Br(s[0],p),d=Math.abs(f),v=Math.abs(c);return{horizontal:{isBound:o[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:d,bounds:o,snap:l},vertical:{isBound:s[0].isBound,isSnap:p.isSnap,snapIndex:p.index,offset:c,dist:v,bounds:s,snap:p}}}function Ys(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function pi(t){var e=t.state,r=e.snapOffset,n=e.containerClientRect,i=n.overflow,a=n.scrollHeight,o=n.scrollWidth,s=n.clientHeight,u=n.clientWidth,l=n.clientLeft,p=n.clientTop,f=t.props,c=f.snapGap,d=void 0===c||c,v=f.verticalGuidelines,g=f.horizontalGuidelines,m=f.snapThreshold,b=void 0===m?5:m,x=f.snapGridWidth,C=void 0===x?0:x,_=f.snapGridHeight,M=void 0===_?0:_,E=f.maxSnapElementGuidelineDistance,S=void 0===E?1/0:E,w=It(Tt(t.state)),y=w.top,D=w.left,P=w.bottom,O=w.right,R={top:y,left:D,bottom:P,right:O,center:(D+O)/2,middle:(y+P)/2},A=X([],function(t){var e=t.state,r=t.props.elementGuidelines,n=void 0===r?[]:r;if(!n.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(c){return!c.refresh}),a=n.map(function(c){return kt(c)&&"element"in c?T(T({},c),{element:nr(c.element,!0)}):{element:nr(c,!0)}}).filter(function(c){return c.element}),o=function(t,e){return lr(t,e,Ao)}(i.map(function(c){return c.element}),a.map(function(c){return c.element})),u=o.added,l=[];o.maintained.forEach(function(c){l[c[1]]=i[c[0]]}),function(t,e){if(!e.length)return[];var r=t.state,i=r.targetClientRect,a=i.top,o=i.left,s=r.rootMatrix,l=r.is3d?4:3,p=function(t,e,r){var n=St(t,[e.clientLeft,e.clientTop],r);return[e.left+n[0],e.top+n[1]]}(s,r.containerClientRect,l),f=p[0],c=p[1],v=gr(Tt(r)),b=j([v.minX,v.minY],Re(s,[o-f,a-c],l)).map(function(_){return function(t){return Math.round(t%1==-.5?t-1:t)}(_)}),x=b[0],C=b[1];return e.map(function(_){var M=_.element.getBoundingClientRect(),E=M.left-f,S=M.top-c,w=S+M.height,y=E+M.width,D=Re(s,[E,S],l),P=D[0],O=D[1],R=Re(s,[y,w],l),z=R[0],A=R[1];return T(T({},_),{rect:{left:P+x,right:z+x,top:O+C,bottom:A+C,center:(P+z)/2+x,middle:(O+A)/2+C}})})}(t,u.map(function(c){return a[c]})).map(function(c,d){l[u[d]]=c}),e.elementRects=l;var p=ii(t.props.elementSnapDirections),f=[];return l.forEach(function(c){var d=c.element,v=c.top,m=c.left,x=c.right,_=c.bottom,E=c.center,w=c.middle,D=c.className,P=c.rect,O=ai({top:void 0===v?p.top:v,right:void 0===x?p.right:x,left:void 0===m?p.left:m,bottom:void 0===_?p.bottom:_,center:void 0===E?p.center:E,middle:void 0===w?p.middle:w},P),R=O.horizontal,A=P.top,I=P.left,N=P.right-I,Y=P.bottom-A,G=[N,Y];O.vertical.forEach(function(B){f.push({type:"vertical",element:d,pos:[J(B,.1),A],size:Y,sizes:G,className:D,elementRect:c})}),R.forEach(function(B){f.push({type:"horizontal",element:d,pos:[I,J(B,.1)],size:N,sizes:G,className:D,elementRect:c})})}),f}(t),!0);return d&&A.push.apply(A,function(t,e,r){var n=t.props,i=n.maxSnapElementGuidelineDistance,a=void 0===i?1/0:i,o=n.maxSnapElementGapDistance,s=void 0===o?1/0:o,u=t.state.elementRects,l=[];return[["vertical",ee,re],["horizontal",re,ee]].forEach(function(p){var f=p[0],c=p[1],d=p[2],v=e[c.start],g=e[c.end],m=e[c.center],b=e[d.start],x=e[d.end];function C(E){var S=E.rect;return S[c.end]<v+r?v-S[c.end]:g-r<S[c.start]?S[c.start]-g:-1}var _=u.filter(function(E){var S=E.rect;return!(S[d.start]>x||S[d.end]<b)&&C(E)>0}).sort(function(E,S){return C(E)-C(S)}),M=[];_.forEach(function(E){_.forEach(function(S){if(E!==S){var w=E.rect,y=S.rect;w[d.start]>y[d.end]||y[d.start]>w[d.end]||M.push([E,S])}})}),M.forEach(function(E){var S=E[0],w=E[1],y=S.rect,D=w.rect,P=y[c.start],O=y[c.end],R=D[c.start],z=D[c.end],A=0,I=0,N=!1,Y=!1,G=!1;if(O<=v&&g<=R){if(Y=!0,I=O+(A=(R-O-(g-v))/2)+(g-v)/2,Math.abs(I-m)>r)return}else if(O<R&&z<v+r){if(N=!0,I=z+(A=R-O),Math.abs(I-v)>r)return}else{if(!(O<R&&g-r<P))return;if(G=!0,I=P-(A=R-O),Math.abs(I-g)>r)return}!A||!Ws(e,D,f,a)||A>s||l.push({type:f,pos:"vertical"===f?[I,0]:[0,I],element:w.element,size:0,className:w.className,isStart:N,isCenter:Y,isEnd:G,gap:A,hide:!0,gapRects:[S,w]})})}),l}(t,R,b)),A.push.apply(A,function(t,e,r,n,i,a){void 0===i&&(i=0),void 0===a&&(a=0);var o=[];if(e)for(var s=0;s<=n;s+=e)o.push({type:"horizontal",pos:[0,J(s-a,.1)],size:r,hide:!0});if(t)for(s=0;s<=r;s+=t)o.push({type:"vertical",pos:[J(s-i,.1),0],size:n,hide:!0});return o}(C,M,i?o:u,i?a:s,l,p)),A.push.apply(A,Hs(g||!1,v||!1,i?o:u,i?a:s,l,p,r)),A.filter(function(I){var Y=I.elementRect;return!I.element||!Y||Ws(R,Y.rect,I.type,S)})}function Ws(t,e,r,n){return"horizontal"===r?Math.abs(t.right-e.left)<=n||Math.abs(t.left-e.right)<=n||t.left<=e.right&&e.left<=t.right:"vertical"!==r||Math.abs(t.bottom-e.top)<=n||Math.abs(t.top-e.bottom)<=n||t.top<=e.bottom&&e.top<=t.bottom}function Hs(t,e,r,n,i,a,o){void 0===i&&(i=0),void 0===a&&(a=0),void 0===o&&(o={left:0,top:0,right:0,bottom:0});var s=[],u=o.left,l=o.top,c=r+o.right-u,d=n+o.bottom-l;return t&&t.forEach(function(v){var g=kt(v)?v:{pos:v};s.push({type:"horizontal",pos:[u,J(g.pos-a+l,.1)],size:c,className:g.className})}),e&&e.forEach(function(v){var g=kt(v)?v:{pos:v};s.push({type:"vertical",pos:[J(g.pos-i+u,.1),l],size:d,className:g.className})}),s}function di(t){var e=t.state;if(!e.guidelines||!e.guidelines.length){var r=t.state.container,n=t.props.snapContainer||r,i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(r!==n){var o=nr(n,!0);if(o){var s=er(o),u=Ms(e,[s.left-i.left,s.top-i.top]),l=Ms(e,[s.right-i.right,s.bottom-i.bottom]);a.left=J(u[0],1e-5),a.top=J(u[1],1e-5),a.right=J(l[0],1e-5),a.bottom=J(l[1],1e-5)}}e.snapOffset=a,e.guidelines=pi(t),e.enableSnap=!0}}function Xs(t,e,r,n,i,a){var o=he(t,e,r,a?4:3);return Qn(o,j(i,gt(o,n)))}function Tp(t,e,r,n,i,a){var s=function(t,e,r){var n=[];if(r)1!==Math.abs(e[0])||1!==Math.abs(e[1])?n.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):n.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),n.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(s){var u=[o*i[0],s*i[1]];e[0]===u[0]&&e[1]===u[1]||n.push([e,u])})})}else t[0]?(1===Math.abs(e[0])?[1]:[1,-1]).forEach(function(o){n.push([[e[0],-1],[o*t[0],-1]],[[e[0],0],[o*t[0],0]],[[e[0],1],[o*t[0],1]])}):t[1]&&(1===Math.abs(e[1])?[1]:[1,-1]).forEach(function(s){n.push([[-1,e[1]],[-1,s*t[1]]],[[0,e[1]],[0,s*t[1]]],[[1,e[1]],[1,s*t[1]]])});return n}(r,a.fixedDirection,n),u=ui(t,e,r,n),l=X(X([],function(t,e,r,n,i,a){return r.map(function(o){var s=o[0],u=o[1],l=gt(e,s),p=gt(e,u),f=n?function(t,e,r,n){var i=function(t,e,r){var n=Ir(t),i=n.left,a=n.top,o=n.right,s=n.bottom,u=r[0],l=r[1],p=j(r,e),f=p[0],c=p[1];Math.abs(f)<Dt&&(f=0),Math.abs(c)<Dt&&(c=0);var d=c>0,v=f>0,g={isBound:!1,offset:0,pos:0},m={isBound:!1,offset:0,pos:0};if(0===f&&0===c)return{vertical:g,horizontal:m};if(0===f)d?s<l&&(m.pos=s,m.offset=l-s):a>l&&(m.pos=a,m.offset=l-a);else if(0===c)v?o<u&&(g.pos=o,g.offset=u-o):i>u&&(g.pos=i,g.offset=u-i);else{var b=c/f,x=r[1]-b*u,C=0,_=0,M=!1;v&&o<=u?(C=b*o+x,_=o,M=!0):!v&&u<=i&&(C=b*i+x,_=i,M=!0),M&&(C<a||C>s)&&(M=!1),M||(d&&s<=l?(_=((C=s)-x)/b,M=!0):!d&&l<=a&&(_=((C=a)-x)/b,M=!0)),M&&(g.isBound=!0,g.pos=_,g.offset=u-_,m.isBound=!0,m.pos=C,m.offset=l-C)}return{vertical:g,horizontal:m}}(t,e,r),a=i.horizontal,o=i.vertical,s=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,r){var n=r[0],i=r[1],a=e[0],o=e[1],s=j(r,e),u=s[0],l=s[1],p=l>0,f=u>0;u=Ar(u),l=Ar(l);var c={isSnap:!1,offset:0,pos:0},d={isSnap:!1,offset:0,pos:0};if(0===u&&0===l)return{vertical:c,horizontal:d};var v=zr(t,u?[n]:[],l?[i]:[]),g=v.vertical,m=v.horizontal;g.posInfos.filter(function(z){var A=z.pos;return f?A>=a:A<=a}),m.posInfos.filter(function(z){var A=z.pos;return p?A>=o:A<=o}),g.isSnap=g.posInfos.length>0,m.isSnap=m.posInfos.length>0;var b=oi(g),x=b.isSnap,C=b.guideline,_=oi(m),M=_.isSnap,E=_.guideline,S=M?E.pos[1]:0,w=x?C.pos[0]:0;if(0===u)M&&(d.isSnap=!0,d.pos=E.pos[1],d.offset=i-d.pos);else if(0===l)x&&(c.isSnap=!0,c.pos=w,c.offset=n-w);else{var y=l/u,D=r[1]-y*n,P=0,O=0,R=!1;x?(P=y*(O=w)+D,R=!0):M&&(O=((P=S)-D)/y,R=!0),R&&(c.isSnap=!0,c.pos=O,c.offset=n-O,d.isSnap=!0,d.pos=P,d.offset=i-P)}return{vertical:c,horizontal:d}}(t,e,r),u=s.horizontal,l=s.vertical,p=Ys(a,u),f=Ys(o,l),c=Math.abs(p),d=Math.abs(f);return{horizontal:{isBound:a.isBound,isSnap:u.isSnap,offset:p,dist:c},vertical:{isBound:o.isBound,isSnap:l.isSnap,offset:f,dist:d}}}(t,l,p,i):kr(t,i,{vertical:[p[0]],horizontal:[p[1]]}),c=f.horizontal,d=c.offset,v=c.isBound,g=c.isSnap,m=f.vertical,b=m.offset,x=m.isBound,C=m.isSnap,_=j(u,s);if(!b&&!d)return{isBound:x||v,isSnap:C||g,sign:_,offset:[0,0]};var M=function(t,e,r,n){var i=ht(t,e)/Math.PI*180,a=r.vertical,l=r.horizontal,d=i%180,v=d<3||d>177,g=d>87&&d<93;return l.dist<a.dist&&(a.isBound||a.isSnap&&!g&&(!n||!v))?"vertical":!l.isBound&&(!l.isSnap||v||n&&g)?"":"horizontal"}(l,p,f,n);if(!M)return{sign:_,isBound:!1,isSnap:!1,offset:[0,0]};var E="vertical"===M,S=[0,0];return S=(S=n||1!==Math.abs(u[0])||1!==Math.abs(u[1])||s[0]===u[0]||s[1]===u[1]?fi(l,p,-(E?b:d),E,a).offset:Vt({datas:a,distX:-b,distY:-d})).map(function(w,y){return w*(_[y]?2/_[y]:0)}),{sign:_,isBound:E?x:v,isSnap:E?C:g,offset:S}})}(t,e,s,n,i,a),!0),Gs(t,u,a),!0),p=Gr(l,0),f=Gr(l,1);return{width:{isBound:p.isBound,offset:p.offset[0]},height:{isBound:f.isBound,offset:f.offset[1]}}}function Zs(t,e,r,n,i,a,o,s){for(var u=Tt(t.state),l=t.props.keepRatio,p=0,f=0,c=0;c<2;++c){var v=Tp(t,e(p,f),i,l,o,s),g=v.width,m=v.height,b=g.isBound,x=m.isBound,C=g.offset,_=m.offset;if(1===c&&(b||(C=0),x||(_=0)),0===c&&o&&!b&&!x)return[0,0];if(l){var M=Math.abs(C)*(r?1/r:1),E=Math.abs(_)*(n?1/n:1);(b&&x?M<E:x||!b&&M<E)?C=r*_/n:_=n*C/r}p+=C,f+=_}if(i[0]&&i[1]){var w=function(t,e,r,n,i){var a=[-r[0],-r[1]],o=t.state,s=o.width,u=o.height,l=t.props.bounds,p=1/0,f=1/0;if(l){var d=l.left,v=void 0===d?-1/0:d,g=l.top,m=void 0===g?-1/0:g,b=l.right,x=void 0===b?1/0:b,C=l.bottom,_=void 0===C?1/0:C;[[r[0],-r[1]],[-r[0],r[1]]].forEach(function(M){var E=M[0]!==a[0],S=M[1]!==a[1],w=gt(e,M),y=360*ht(n,w)/Math.PI;if(S){var D=w.slice();(Math.abs(y-360)<2||Math.abs(y-180)<2)&&(D[1]=n[1]);var P=fi(n,D,(n[1]<w[1]?_:m)-w[1],!1,i),R=P.offset[1],z=P.isOutside;isNaN(R)||(f=u+(z?1:-1)*Math.abs(R))}if(E){D=w.slice(),(Math.abs(y-90)<2||Math.abs(y-270)<2)&&(D[0]=n[0]);var A=fi(n,D,(n[0]<w[0]?x:v)-w[0],!0,i),I=A.offset[0],N=A.isOutside;isNaN(I)||(p=s+(N?1:-1)*Math.abs(I))}})}return{maxWidth:p,maxHeight:f}}(t,u,i,a,s),y=w.maxWidth,D=w.maxHeight,P=function(t,e,r,n,i,a,o,s,u){var l=gt(e,o),p=kr(t,s,{vertical:[l[0]],horizontal:[l[1]]}),f=p.horizontal.offset,c=p.vertical.offset;if(c||f){var d=Vt({datas:u,distX:-c,distY:-f}),g=d[1];return[Math.min(i||1/0,r+o[0]*d[0])-r,Math.min(a||1/0,n+o[1]*g)-n]}return[0,0]}(t,e(p,f).map(function(z){return z.map(function(A){return J(A,1e-4)})}),r+p,n+f,y,D,i,o,s);p+=C=P[0],f+=_=P[1]}return[p,f]}function Vs(t){var e=[];return t.forEach(function(r){r.guidelineInfos.forEach(function(n){var i=n.guideline;e.indexOf(i)>-1||e.push(i)})}),e}function js(t,e,r,n,i,a){var o=li(Ir(t,a),e,r),u=o.horizontal;o.vertical.forEach(function(c){c.isBound&&n.push({type:"bounds",pos:c.pos})}),u.forEach(function(c){c.isBound&&i.push({type:"bounds",pos:c.pos})});var l=function(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var r=t.getRect(),s=[r.pos1,r.pos2,r.pos3,r.pos4],u=gt(s,[0,0]),l=e.left,p=e.top,f=e.width,c=e.height,d=[[l,p],[l,p+c]],v=[[l,p],[l+f,p]],g=[[l+f,p],[l+f,p+c]],m=[[l,p+c],[l+f,p+c]],b=ui(t,s,[0,0],!1),x=[],C=[],_={top:!1,bottom:!1,left:!1,right:!1};return b.forEach(function(M){var E=M.line,S=M.lineConstants,w=Ps(u,E),y=w.horizontal,D=w.vertical,P=ne(E,S,v,D,1,!0),O=ne(E,S,m,D,1,!0),R=ne(E,S,d,y,1,!0),z=ne(E,S,g,y,1,!0);P.isBound&&!_.top&&(x.push(p),_.top=!0),O.isBound&&!_.bottom&&(x.push(p+c),_.bottom=!0),R.isBound&&!_.left&&(C.push(l),_.left=!0),z.isBound&&!_.right&&(C.push(l+f),_.right=!0)}),{horizontal:x,vertical:C}}(t),f=l.horizontal;l.vertical.forEach(function(c){jt(n,function(d){return"bounds"===d.type&&d.pos===c})>=0||n.push({type:"bounds",pos:c})}),f.forEach(function(c){jt(i,function(d){return"bounds"===d.type&&d.pos===c})>=0||i.push({type:"bounds",pos:c})})}var Ip=ri("",["resizable","scalable"]),Bp={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function,maxSnapElementGuidelineDistance:Number,maxSnapElementGapDistance:Number},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(t,e){var r=t.state,n=r.top,i=r.left,a=r.pos1,o=r.pos2,s=r.pos3,u=r.pos4,l=r.snapRenderInfo;if(!l||!Pe(t,""))return[];r.guidelines=pi(t);var p=Math.min(a[0],o[0],s[0],u[0]),f=Math.min(a[1],o[1],s[1],u[1]),c=l.externalPoses||[],d=Tt(t.state),v=[],g=[],m=[],b=[],x=[],C=It(d),_=C.width,M=C.height,E=C.top,S=C.left,w=C.bottom,y=C.right,D={left:S,right:y,top:E,bottom:w,center:(S+y)/2,middle:(E+w)/2},P=c.length>0,O=P?It(c):{};if(!l.request){if(l.direction&&x.push(function(t,e,r){var n=[];if(r[0]&&r[1])n=[r,[-r[0],r[1]],[r[0],-r[1]]].map(function(o){return gt(e,o)});else if(r[0]||r[1])t.props.keepRatio?n=[[-1,-1],[-1,1],[1,-1],[1,1],r].map(function(o){return gt(e,o)}):(n=function(t,e){return as(e).map(function(r){return t[r]})}(e,r)).length>1&&n.push([(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]);else for(var i=[e[0],e[1],e[3],e[2],e[0]],a=0;a<4;++a)n.push(i[a]),n.push([(i[a][0]+i[a+1][0])/2,(i[a][1]+i[a+1][1])/2]);return zr(t,n.map(function(o){return o[0]}),n.map(function(o){return o[1]}),1)}(t,d,l.direction)),l.snap){var R=It(d);l.center&&(R.middle=(R.top+R.bottom)/2,R.center=(R.left+R.right)/2),x.push(Os(t,R,1))}P&&(l.center&&(O.middle=(O.top+O.bottom)/2,O.center=(O.left+O.right)/2),x.push(Os(t,O,1))),x.forEach(function(N){var Y=N.vertical.posInfos,G=N.horizontal.posInfos;v.push.apply(v,Y.filter(function(B){return B.guidelineInfos.some(function(Z){return!Z.guideline.hide})}).map(function(B){return{type:"snap",pos:B.pos}})),g.push.apply(g,G.filter(function(B){return B.guidelineInfos.some(function(Z){return!Z.guideline.hide})}).map(function(B){return{type:"snap",pos:B.pos}})),m.push.apply(m,Vs(Y)),b.push.apply(b,Vs(G))})}js(t,[S,y],[E,w],v,g),P&&js(t,[O.left,O.right],[O.top,O.bottom],v,g,l.externalBounds);var z=X(X([],m,!0),b,!0),A=z.filter(function(N){return N.element&&!N.gapRects}),I=z.filter(function(N){return N.gapRects}).sort(function(N,Y){return N.gap-Y.gap});return F(t,"onSnap",{guidelines:z.filter(function(N){return!N.element}),elements:A,gaps:I},!0),X(X(X(X(X(X([],function(t,e,r,n,i){var a=t.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(s){var u=e.filter(function(m){return m.type===s}),l="vertical"===s?1:0,p=l?0:1,f=function(t,e,r,n){var i="vertical"===t?0:1,a="vertical"===t?1:0,o=i?ee:re,s=r[o.start],u=r[o.end];return function(t,e){var r=[],n=[];return t.forEach(function(i,a){var o=e(i),s=n.indexOf(o),u=r[s]||[];-1===s&&(n.push(o),r.push(u)),u.push(i)}),r}(e,function(l){return l.pos[i]}).map(function(l){var p=[],f=[];return l.forEach(function(d){var v,g,m=d.element,b=d.elementRect.rect;if(b[o.end]<s)p.push(d);else if(u<b[o.start])f.push(d);else if(b[o.start]<=s&&u<=b[o.end]&&n){var x=d.pos,C={element:m,rect:T(T({},b),(v={},v[o.end]=b[o.start],v))},_={element:m,rect:T(T({},b),(g={},g[o.start]=b[o.end],g))},M=[0,0],E=[0,0];M[i]=x[i],M[a]=x[a],E[i]=x[i],E[a]=x[a]+d.size,p.push({type:t,pos:M,size:0,elementRect:C}),f.push({type:t,pos:E,size:0,elementRect:_})}}),p.sort(function(d,v){return v.pos[a]-d.pos[a]}),f.sort(function(d,v){return d.pos[a]-v.pos[a]}),{total:l,start:p,end:f,inner:[]}})}(s,u,n,a),c=l?re:ee,d=l?ee:re,v=n[c.start],g=n[c.end];f.forEach(function(m){var C=m.end,_=m.inner,M=r[p]+m.total[0].pos[p]-n[d.start],E=n;m.start.forEach(function(S){var w=S.elementRect.rect,y=E[c.start]-w[c.end];if(y>0){var D=[0,0];D[l]=r[l]+E[c.start]-v-y,D[p]=M,o.push(ir(t,s,"dashed",o.length,y,D,S.className,i))}E=w}),E=n,C.forEach(function(S){var w=S.elementRect.rect,y=w[c.start]-E[c.end];if(y>0){var D=[0,0];D[l]=r[l]+E[c.end]-v,D[p]=M,o.push(ir(t,s,"dashed",o.length,y,D,S.className,i))}E=w}),_.forEach(function(S){var w=S.elementRect.rect,y=v-w[c.start],D=w[c.end]-g,P=[0,0],O=[0,0];P[l]=r[l]-y,P[p]=M,O[l]=r[l]+g-v,O[p]=M,o.push(ir(t,s,"dashed",o.length,y,P,S.className,i)),o.push(ir(t,s,"dashed",o.length,D,O,S.className,i))})})}),o}(t,A,[p,f],D,e),!0),function(t,e,r,n,i){var a=[];return["horizontal","vertical"].forEach(function(o){var s=e.filter(function(m){return m.type===o}).slice(0,1),u="vertical"===o?0:1,l=u?0:1,p=u?re:ee,f=u?ee:re,c=n[p.start],d=n[p.end],v=n[f.start],g=n[f.end];s.forEach(function(m){var b=m.gap,x=m.gapRects,C=Math.max.apply(Math,X([v],x.map(function(E){return E.rect[f.start]}),!1)),_=Math.min.apply(Math,X([g],x.map(function(E){return E.rect[f.end]}),!1)),M=(C+_)/2;C===_||M===(v+g)/2||x.forEach(function(E){var S=E.rect,w=E.className,y=[r[0],r[1]];if(S[p.end]<c)y[u]+=S[p.end]-c;else{if(!(d<S[p.start]))return;y[u]+=S[p.start]-c-b}y[l]+=M-v,a.push(ir(t,u?"vertical":"horizontal","gap",a.length,b,y,w,i))})})}),a}(t,I,[p,f],D,e),!0),Fs(t,"horizontal",b,[i,n],D,e),!0),Fs(t,"vertical",m,[i,n],D,e),!0),Ns(t,"horizontal",g,p,n,_,0,e),!0),Ns(t,"vertical",v,f,i,M,1,e),!0)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},di(t)},drag:function(t){t.state.guidelines=pi(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){return!(!Ip(t,e)&&!bi(t,e))||(!e.isRequest&&e.inputEvent?_t(e.inputEvent.target,W("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,di(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,di(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function qs(t,e,r,n){var i=t.state,a=i.renderPoses,o=i.rotation,s=i.direction,u=ge(t.props,e).zoom,l=s>0?1:-1,p=o/Math.PI*180,f={},c=t.renderState;c.renderDirectionMap||(c.renderDirectionMap={});var d=c.renderDirectionMap;return r.forEach(function(v){f[v.dir]=!0}),r.map(function(v){var g=v.data,m=v.classNames,b=v.dir,x=Xn[b];if(!x||!f[b])return null;d[b]=!0;var C=(J(p,15)+l*ts[b]+720)%180,_={};return _e(g).forEach(function(M){_["data-".concat(M)]=g[M]}),n.createElement("div",T({className:W.apply(void 0,X(["control","direction",b,e],m,!1)),"data-rotation":C,"data-direction":b},_,{key:"direction-".concat(b),style:$n.apply(void 0,X([o,u],x.map(function(M){return a[M]}),!1))}))})}function Us(t,e,r,n){var i=ge(t.props,r).renderDirections,a=void 0===i?e:i;return a?qs(t,r,(!0===a?Hn:a).map(function(s){return{data:{},classNames:[],dir:s}}),n):[]}function Nr(t,e,r,n,i,a){for(var o=[],s=6;s<arguments.length;s++)o[s-6]=arguments[s];var u=ht(r,n),l=e?J(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line".concat(a),className:W.apply(void 0,X(["line","direction",e?"edge":"",e],o,!1)),"data-rotation":l,"data-line-index":a,"data-direction":e,style:tr(r,n,i,u)})}function Js(t,e,r,n,i){return(!0===r?vf:r).map(function(o,s){var u=Xn[o],p=u[1];if(null!=p)return Nr(t,o,n[u[0]],n[p],i,"".concat(e,"Edge").concat(s),e)}).filter(Boolean)}function $s(t){return function(e,r){var n=ge(e.props,t).edge;return n&&(!0===n||n.length)?X(X([],Js(r,t,n,e.state.renderPoses,e.props.zoom),!0),function(t,e,r){return Us(t,["nw","ne","sw","se"],e,r)}(e,t,r),!0):Ks(e,t,r)}}function Ks(t,e,r){return Us(t,Hn,e,r)}var wt={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,e){var r=t.props,i=r.zoom,a=t.state,o=a.dragInfo,s=a.beforeOrigin;if(!r.throttleDragRotate||!o)return[];var u=o.dist;if(!u[0]&&!u[1])return[];var l=Lt(u),p=ht(u,[0,0]);return[e.createElement("div",{className:W("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(l,"px"),transform:"translate(".concat(s[0],"px, ").concat(s[1],"px) rotate(").concat(p,"rad) scaleY(").concat(i,")")}})]},dragStart:function(t,e){var r=e.datas,n=e.parentEvent,a=t.state,o=a.target,s=a.gestos;if(s.draggable)return!1;s.draggable=e.parentGesto||t.targetGesto;var u=Bt(o);r.datas={},r.left=parseFloat(u.left||"")||0,r.top=parseFloat(u.top||"")||0,r.bottom=parseFloat(u.bottom||"")||0,r.right=parseFloat(u.right||"")||0,r.startValue=[0,0],ve(t,e),yr(e,"translate"),function(t,e){e.absolutePoses=Tt(t.state)}(t,r),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1,r.deltaOffset=[0,0];var l=q(t,e,T({set:function(f){r.startValue=f}},Mr(e)));return!1!==(n||F(t,"onDragStart",l))?(r.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,r.isPinch=!1),!!r.isDrag&&l},drag:function(t,e){if(e){Sr(e,"translate");var r=e.datas,n=e.parentEvent,i=e.parentFlag,a=e.isPinch,o=e.isRequest,s=e.deltaOffset,u=e.distX,l=e.distY,f=r.prevDist,c=r.prevBeforeDist,d=r.startValue;if(r.isDrag){s&&(u+=s[0],l+=s[1]);var v=t.props,g=v.parentMoveable,m=n?0:v.throttleDrag||0,b=n?0:v.throttleDragRotate||0,x=!1,C=0;if(!n&&b>0&&(u||l)){var _=v.startDragRotate||0,M=J(_+180*ht([0,0],[u,l])/Math.PI,b)-_,E=l*Math.abs(Math.cos((M-90)/180*Math.PI)),w=Lt([u*Math.abs(Math.cos(M/180*Math.PI)),E]);C=M*Math.PI/180,u=w*Math.cos(C),l=w*Math.sin(C)}if(!a&&!n&&!i&&(!b||u||l)){var y=Cp(t,u,l,b,o||s,r),D=y[0],P=y[1];x=D.isSnap||P.isSnap||D.isBound||P.isBound,u+=D.offset,l+=P.offset}var Y=K(is({datas:r,distX:u,distY:l}),d),G=K(function(t){var e=t.datas,i=is({datas:e,distX:t.distX,distY:t.distY});return Mt(ns(e,function(t,e){for(var r=pt(4),n=0;n<3;++n)r[12+n]=t[n]||0;return r}([i[0],i[1]])),ce([0,0,0],4),4)}({datas:r,distX:u,distY:l}),d);!b&&!x&&(dr(G,m),dr(Y,m)),dr(G,Dt),dr(Y,Dt);var B=j(Y,d),L=j(G,d),Z=j(L,f),nt=j(B,c);r.prevDist=L,r.prevBeforeDist=B,r.passDelta=Z,r.passDist=L;var U=r.left+B[0],tt=r.top+B[1],Q=r.right-B[0],it=r.bottom-B[1],ct=Er(r,"translate(".concat(G[0],"px, ").concat(G[1],"px)"),"translate(".concat(L[0],"px, ").concat(L[1],"px)"));if(Vn(e,ct),t.state.dragInfo.dist=n?[0,0]:L,n||g||!Z.every(function($){return!$})||!nt.some(function($){return!$})){var at=t.state,Ct=q(t,e,T({transform:ct,dist:L,delta:Z,translate:G,beforeDist:B,beforeDelta:nt,beforeTranslate:Y,left:U,top:tt,right:Q,bottom:it,width:at.width,height:at.height,isPinch:a},rr({transform:ct},e)));return!n&&F(t,"onDrag",Ct),Ct}}}},dragAfter:function(t,e){var r=e.datas,n=r.deltaOffset;return!(!n[0]&&!n[1])&&(r.deltaOffset=[0,0],this.drag(t,T(T({},e),{deltaOffset:n})))},dragEnd:function(t,e){var r=e.parentEvent,n=e.datas;if(t.state.dragInfo=null,n.isDrag){n.isDrag=!1;var i=At(t,e,{});return!r&&F(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var r=e.datas,n=e.clientX,i=e.clientY,a=this.dragStart(t,e);if(!a)return!1;var o=ni(t,this,"dragStart",[n||0,i||0],e,!1,"draggable"),u=F(t,"onDragGroupStart",T(T({},a),{targets:t.props.targets,events:o}));return r.isDrag=!1!==u,!!r.isDrag&&a},dragGroup:function(t,e){if(e.datas.isDrag){var n=this.drag(t,e),a=ni(t,this,"drag",e.datas.passDelta,e,!1,"draggable");if(n){var o=T({targets:t.props.targets,events:a},n);return F(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,e){var r=e.isDrag;if(e.datas.isDrag){this.dragEnd(t,e);var i=ni(t,this,"dragEnd",[0,0],e,!1,"draggable");return F(t,"onDragGroupEnd",At(t,e,{targets:t.props.targets,events:i})),r}},request:function(t){var e={},r=t.getRect(),n=0,i=0;return{isControl:!1,requestStart:function(){return{datas:e}},request:function(a){return"x"in a?n=a.x-r.left:"deltaX"in a&&(n+=a.deltaX),"y"in a?i=a.y-r.top:"deltaY"in a&&(i+=a.deltaY),{datas:e,distX:n,distY:i}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}},Qs=ri("resizable"),vi={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function,keepRatioFinally:Boolean,edge:Boolean},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:$s("resizable"),dragControlCondition:Qs,dragControlStart:function(t,e){var r,i=e.isPinch,a=e.isGroup,s=e.parentGesto,u=e.datas,l=e.parentFixedDirection,p=e.parentEvent,f=e.parentDirection||(i?[0,0]:Kn(e.inputEvent.target)),c=t.state,v=c.width,g=c.height,m=c.gestos;if(!f||!c.target||m.resizable)return!1;m.resizable=s||t.controlGesto,!i&&ve(t,e),u.datas={},u.direction=f,u.startOffsetWidth=v,u.startOffsetHeight=g,u.prevWidth=0,u.prevHeight=0,u.minSize=[0,0],u.startWidth=c.cssWidth,u.startHeight=c.cssHeight,u.maxSize=[1/0,1/0],a||(u.minSize=[c.minOffsetWidth,c.minOffsetHeight],u.maxSize=[c.maxOffsetWidth,c.maxOffsetHeight]);var b=t.props.transformOrigin||"% %";function x(w){u.ratio=w&&isFinite(w)?w:0}function C(w){u.fixedDirection=w,u.fixedPosition=gt(u.startPositions,w)}function _(w){u.minSize=[ft("".concat(w[0]),0)||0,ft("".concat(w[1]),0)||0]}function M(w){var y=[w[0]||1/0,w[1]||1/0];(!$r(y[0])||isFinite(y[0]))&&(y[0]=ft("".concat(y[0]),0)||1/0),(!$r(y[1])||isFinite(y[1]))&&(y[1]=ft("".concat(y[1]),0)||1/0),u.maxSize=y}u.transformOrigin=b&&zt(b)?b.split(" "):b,u.startOffsetMatrix=c.offsetMatrix,u.startTransformOrigin=c.transformOrigin,u.isWidth=null!==(r=null==e?void 0:e.parentIsWidth)&&void 0!==r?r:!f[0]&&!f[1]||f[0]||!f[1],u.startPositions=Tt(t.state),x(v/g),C(l||[-f[0],-f[1]]),u.setFixedDirection=C,u.setMin=_,u.setMax=M;var E=q(t,e,{direction:f,startRatio:u.ratio,set:function(w){var D=w[1];u.startWidth=w[0],u.startHeight=D},setMin:_,setMax:M,setRatio:x,setFixedDirection:C,setOrigin:function(w){u.transformOrigin=w},dragStart:wt.dragStart(t,(new De).dragStart([0,0],e))}),S=p||F(t,"onResizeStart",E);return u.startFixedDirection=u.fixedDirection,!1!==S&&(u.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:f}),!!u.isResize&&E},dragControl:function(t,e){var r,n=e.datas,i=e.parentFlag,a=e.isPinch,o=e.parentKeepRatio,s=e.dragClient,u=e.parentDist,l=e.isRequest,p=e.isGroup,f=e.parentEvent,v=n.transformOrigin,g=n.startWidth,m=n.startHeight,b=n.prevWidth,x=n.prevHeight,C=n.minSize,_=n.maxSize,M=n.ratio,E=n.startOffsetWidth,S=n.startOffsetHeight,w=n.isWidth;if(n.isResize){if(e.resolveMatrix){var D=n.startOffsetMatrix,P=n.startTransformOrigin,O=t.state.is3d?4:3,R=Ze(os(e)),z=Math.sqrt(R.length);O!==z&&(R=Zt(R,z,O));var A=Qe(D,R,P,O),I=he(A,E,S,O);n.startPositions=I,n.nextTargetMatrix=R,n.nextAllMatrix=A}var N=ge(t.props,"resizable"),Y=N.resizeFormat,G=N.throttleResize,B=void 0===G?i?0:1:G,L=N.parentMoveable,Z=N.keepRatioFinally,nt=n.direction,U=nt,tt=0,Q=0;!nt[0]&&!nt[1]&&(U=[1,1]);var it=M&&(null!=o?o:N.keepRatio)||!1,at=ct(),V=at[0],H=at[1];f||(n.setFixedDirection(n.fixedDirection),F(t,"onBeforeResize",q(t,e,{startFixedDirection:n.startFixedDirection,setFixedDirection:function(mt){var Wt;return n.setFixedDirection(mt),Wt=ct(),[V=Wt[0],H=Wt[1]]},boundingWidth:V,boundingHeight:H,setSize:function(mt){V=mt[0],H=mt[1]}},!0)));var Ct=s;s||(Ct=!i&&a?ps(t,[0,0]):n.fixedPosition);var $=[0,0];if(a||($=function(t,e,r,n,i,a,o){if(!Pe(t,"resizable"))return[0,0];var s=o.fixedDirection,u=o.nextAllMatrix,l=t.state,p=l.allMatrix,f=l.is3d;return Zs(t,function(c,d){return Xs(u||p,e+c,r+d,s,i,f)},e,r,n,i,a,o)}(t,V,H,nt,Ct,l,n)),u&&(!u[0]&&($[0]=0),!u[1]&&($[1]=0)),it){U[0]&&U[1]&&$[0]&&$[1]&&(Math.abs($[0])>Math.abs($[1])?$[1]=0:$[0]=0);var et=!$[0]&&!$[1];et&&ot(),U[0]&&!U[1]||$[0]&&!$[1]||et&&w?H=(V+=$[0])/M:(!U[0]&&U[1]||!$[0]&&$[1]||et&&!w)&&(V=(H+=$[1])*M)}else V+=$[0],H+=$[1],V=Math.max(0,V),H=Math.max(0,H);r=function(t,e,r,n){if(!n)return t.map(function(d,v){return en(d,e[v],r[v])});var i=t[0],a=t[1],o=!0===n?i/a:n,s=ao(t,e,!1,o),u=s[0],l=s[1],p=ao(t,r,!0,o),f=p[0],c=p[1];return i<u||a<l?(i=u,a=l):(i>f||a>c)&&(i=f,a=c),[i,a]}([V,H],C,_,!!it&&M),V=r[0],H=r[1],ot(),it&&(p||Z)&&(w?H=V/M:V=H*M);var dt=[(tt=V-E)-b,(Q=H-S)-x];n.prevWidth=tt,n.prevHeight=Q;var vt=function(t,e,r,n,i,a){var o=t.props.groupable,s=t.state,l=s.offsetMatrix,d=s.left,v=s.top,g=a.fixedDirection,m=a.nextTargetMatrix||s.targetMatrix,b=s.is3d?4:3,x=function(t,e,r,n,i,a){return void 0===n&&(n=e),void 0===i&&(i=r),void 0===a&&(a=[0,0]),t?t.map(function(o,s){var u=Ne(o),l=u.value,p=u.unit,f=s?i:n,c=s?r:e;return"%"===o||isNaN(l)?c*(f?a[s]/f:0):"%"!==p?l:c*l/100}):a}(i,e,r,s.width,s.height,s.transformOrigin),C=o?d:0,_=o?v:0;return j(function(t,e,r,n,i,a){var s=gt(he(e,r,n,i),a);return[t[0]-s[0],t[1]-s[1]]}(n,Qe(l,m,x,b),e,r,b,g),[C,_])}(t,V,H,Ct,v,n);if(L||!dt.every(function(mt){return!mt})||!vt.every(function(mt){return!mt})){var lt=wt.drag(t,Ke(e,t.state,vt,!!a,!1,"draggable")),rt=lt.transform,Rt=g+tt,ae=m+Q,Zr=q(t,e,T({width:Rt,height:ae,offsetWidth:Math.round(V),offsetHeight:Math.round(H),startRatio:M,boundingWidth:V,boundingHeight:H,direction:nt,dist:[tt,Q],delta:dt,isPinch:!!a,drag:lt},_s({style:{width:"".concat(Rt,"px"),height:"".concat(ae,"px")},transform:rt},lt,e)));return!f&&F(t,"onResize",Zr),Zr}}function ct(){var mt=n.fixedDirection,Wt=Ds(U,it,n,e);tt=Wt.distWidth,Q=Wt.distHeight;var Ge=U[0]-mt[0]||it?Math.max(E+tt,Dt):E,Ie=U[1]-mt[1]||it?Math.max(S+Q,Dt):S;return it&&E&&S&&(w?Ie=Ge/M:Ge=Ie*M),[Ge,Ie]}function ot(){var mt;Y&&(mt=Y([V,H]),V=mt[0],H=mt[1]),V=J(V,B),H=J(H,B)}},dragControlAfter:function(t,e){var r=e.datas;if(r.isResize){var u=t.state,f=u.width-(r.startOffsetWidth+r.prevWidth),c=u.height-(r.startOffsetHeight+r.prevHeight),d=Math.abs(f)>3,v=Math.abs(c)>3;if(d&&(r.startWidth+=f,r.startOffsetWidth+=f,r.prevWidth+=f),v&&(r.startHeight+=c,r.startOffsetHeight+=c,r.prevHeight+=c),d||v)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var r=e.datas,n=e.parentEvent;if(r.isResize){r.isResize=!1;var i=At(t,e,{});return!n&&F(t,"onResizeEnd",i),i}},dragGroupControlCondition:Qs,dragGroupControlStart:function(t,e){var r=e.datas,n=this.dragControlStart(t,T(T({},e),{isGroup:!0}));if(!n)return!1;var i=te(t,"resizable",e);function a(v,g){var m=r.fixedDirection,b=r.fixedPosition,C=gt(g.datas.startPositions||Tt(v.state),m),_=Mt(Se(-t.rotation/180*Math.PI,3),[C[0]-b[0],C[1]-b[1],1],3),E=_[1];return g.datas.originalX=_[0],g.datas.originalY=E,g}var o=r.startOffsetWidth,s=r.startOffsetHeight;function u(){var v=r.minSize;i.forEach(function(g){var m=g.datas,b=m.minSize,x=m.startOffsetWidth,C=m.startOffsetHeight,M=s*(C?b[1]/C:0);v[0]=Math.max(v[0],o*(x?b[0]/x:0)),v[1]=Math.max(v[1],M)})}function l(){var v=r.maxSize;i.forEach(function(g){var m=g.datas,b=m.maxSize,x=m.startOffsetWidth,C=m.startOffsetHeight,M=s*(C?b[1]/C:0);v[0]=Math.min(v[0],o*(x?b[0]/x:0)),v[1]=Math.min(v[1],M)})}var p=qt(t,this,"dragControlStart",e,function(v,g){return a(v,g)});u(),l();var f=function(v){n.setFixedDirection(v),p.forEach(function(g,m){g.setFixedDirection(v),a(g.moveable,i[m])})};r.setFixedDirection=f;var c=T(T({},n),{targets:t.props.targets,events:p.map(function(v){return T(T({},v),{setMin:function(g){v.setMin(g),u()},setMax:function(g){v.setMax(g),l()}})}),setFixedDirection:f,setMin:function(v){n.setMin(v),u()},setMax:function(v){n.setMax(v),l()}}),d=F(t,"onResizeGroupStart",c);return r.isResize=!1!==d,!!r.isResize&&n},dragGroupControl:function(t,e){var r=e.datas;if(r.isResize){var n=ge(t.props,"resizable");ti(t,"onBeforeResize",function(d){F(t,"onBeforeResizeGroup",q(t,e,T(T({},d),{targets:n.targets}),!0))});var i=this.dragControl(t,T(T({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,o=i.boundingHeight,s=i.dist,u=n.keepRatio,l=[a/(a-s[0]),o/(o-s[1])],p=r.fixedPosition,f=qt(t,this,"dragControl",e,function(d,v){var g=Mt(Se(t.rotation/180*Math.PI,3),[v.datas.originalX*l[0],v.datas.originalY*l[1],1],3),m=g[0],b=g[1];return T(T({},v),{parentDist:null,parentScale:l,dragClient:K(p,[m,b]),parentKeepRatio:u})}),c=T({targets:n.targets,events:f},i);return F(t,"onResizeGroup",c),c}}},dragGroupControlEnd:function(t,e){var r=e.isDrag;if(e.datas.isResize){this.dragControlEnd(t,e);var i=qt(t,this,"dragControlEnd",e);return F(t,"onResizeGroupEnd",At(t,e,{targets:t.props.targets,events:i})),r}},request:function(t){var e={},r=0,n=0,i=t.getRect();return{isControl:!0,requestStart:function(a){var o;return{datas:e,parentDirection:a.direction||[1,1],parentIsWidth:null===(o=null==a?void 0:a.horizontal)||void 0===o||o}},request:function(a){return"offsetWidth"in a?r=a.offsetWidth-i.offsetWidth:"deltaWidth"in a&&(r+=a.deltaWidth),"offsetHeight"in a?n=a.offsetHeight-i.offsetHeight:"deltaHeight"in a&&(n+=a.deltaHeight),{datas:e,parentDist:[r,n],parentKeepRatio:a.keepRatio}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.gestos.resizable=null}};function hi(t,e,r,n,i){var o=t.state,s=o.is3d?4:3,u=e.origin,l=St(t.state.rootMatrix,j([u[0],u[1]],t.props.groupable?[0,0]:[o.left,o.top]),s),p=K([i.left,i.top],l);e.startAbsoluteOrigin=p,e.prevDeg=ht(p,[r,n])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=Nt(p,[r,n])}function Fr(t,e,r){var n=r.defaultDeg,i=r.prevDeg,a=i%360,o=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++o:a<t&&a<90&&t>270&&--o;var s=e*(360*o+t-n);return r.prevDeg=n+s,s}function gi(t,e,r,n){return Fr(ht(n.startAbsoluteOrigin,[t,e])/Math.PI*180,r,n)}function mi(t,e,r,n,i,a){var o=t.props.throttleRotate,s=void 0===o?0:o,u=n,l=r.prevSnapDeg;a&&(u=function(t,e,r,n){if(!Pe(t,"rotatable"))return n;var u=n*Math.PI/180,l=[e.pos1,e.pos2,e.pos3,e.pos4].map(function(c){return j(c,r)}),p=l.map(function(c){return Qt(c,u)}),f=X(X([],function(t,e,r,n,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,o=Ir(t),f=o.left-n[0],c=o.right-n[0],d=o.top-n[1],v=o.bottom-n[1],g={left:f,top:d,right:c,bottom:v};if(!ks(r,g,0))return[];var m=[];return[[f,0],[c,0],[d,1],[v,1]].forEach(function(b){var x=b[0],C=b[1];r.forEach(function(_){var M=ht([0,0],_);m.push.apply(m,function(t,e,r){var n=Lt(t),i=Math.sqrt(n*n-e*e)||0;return[i,-i].sort(function(a,o){return Math.abs(a-t[r?0:1])-Math.abs(o-t[r?0:1])}).map(function(a){return ht([0,0],r?[a,e]:[e,a])})}(_,x,C).map(function(E){return a+E-M}).filter(function(E){return!ks(e,g,E)}).map(function(E){return J(180*E/Math.PI,Dt)}))})}),m}(t,l,p,r,n),!0),function(t,e,r,n,i){var a=t.props.innerBounds,o=i*Math.PI/180;if(!a)return[];var s=a.left,u=a.top,f=s-n[0],c=s+a.width-n[0],d=u-n[1],v=u+a.height-n[1],g=[[f,d],[c,d],[f,v],[c,v]],m=gt(r,[0,0]);if(!Is(r,g,m,0))return[];var b=[],x=g.map(function(C){return[Lt(C),ht([0,0],C)]});return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach(function(C){var _=ht([0,0],function(t){var e=t[0],r=t[1],n=r[0]-e[0],i=r[1]-e[1];if(!n)return[e[0],0];if(!i)return[0,e[1]];var a=i/n,o=-a*e[0]+e[1];return[-o/(a+1/a),o/(a*a+1)]}(C)),M=function(t){var e=t[0],r=t[1],n=r[0]-e[0],i=r[1]-e[1];if(!n)return Math.abs(e[0]);if(!i)return Math.abs(e[1]);var a=i/n;return Math.abs((-a*e[0]+e[1])/Math.sqrt(Math.pow(a,2)+1))}(C);b.push.apply(b,x.filter(function(E){var S=E[0];return S&&M<=S}).map(function(E){var S=E[0],w=E[1],y=Math.acos(S?M/S:0);return[o+(w+y)-_,o+(w-y)-_]}).reduce(function(E,S){return E.push.apply(E,S),E},[]).filter(function(E){return!Is(e,g,m,E)}).map(function(E){return J(180*E/Math.PI,Dt)}))}),b}(t,l,p,r,n),!0);return f.sort(function(c,d){return Math.abs(c-n)-Math.abs(d-n)}),f.length?f[0]:n}(t,e,r.origin,u));var p=J(i+u,s),f=p-i;return r.prevSnapDeg=f,[f-l,u,p]}function bi(t,e){if(e.isRequest)return"rotatable"===e.requestAble;var r=e.inputEvent.target;if(_t(r,W("rotation-control"))||_t(r,W("around-control"))||_t(r,W("control"))&&_t(r,W("rotatable")))return!0;var n=t.props.rotationTarget;return!!n&&Es(n,!0).some(function(i){return!!i&&(r===i||r.contains(i))})}var Lp=Hn.map(function(t){var e="",r="",n="center",i="center";return t.indexOf("n")>-1&&(e="top: -20px;",i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(r="left: -20px;",n="right"),t.indexOf("e")>-1&&(r="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(t,'"] {\n        ').concat(r).concat(e,"\n        transform-origin: ").concat(n," ").concat(i,";\n    }")}).join("\n"),Yp=".rotation {\n    position: absolute;\n    height: 40px;\n    width: 1px;\n    transform-origin: 50% 100%;\n    height: calc(40px * var(--zoom));\n    top: auto;\n    left: 0;\n    bottom: 100%;\n    will-change: transform;\n}\n.rotation .rotation-line {\n    display: block;\n    width: 100%;\n    height: 100%;\n    transform-origin: 50% 50%;\n}\n.rotation .rotation-control {\n    border-color: #4af;\n    border-color: var(--moveable-color);\n    background:#fff;\n    cursor: alias;\n}\n.rotatable.direction.control {\n    cursor: alias;\n}\n.around-control {\n    position: absolute;\n    will-change: transform;\n    width: 20px;\n    height: 20px;\n    left: -10px;\n    top: -10px;\n    box-sizing: border-box;\n    background: transparent;\n    z-index: 8;\n    cursor: alias;\n    transform-origin: center center;\n}\n.rotatable.direction.control.move {\n    cursor: move;\n}\n".concat(Lp,"\n"),Wp={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object,rotateAroundControls:Boolean,edge:Boolean,resolveAblesWithRotatable:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[Yp],render:function(t,e){var r=ge(t.props,"rotatable"),a=r.zoom,o=r.renderDirections,s=r.rotateAroundControls,u=r.resolveAblesWithRotatable,l=t.state;if(!r.rotatable)return null;var c=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3];if("none"!==t){var s=(t||"top").split("-"),u=s[0],l=s[1],p=[n,i];"left"===u?p=[a,n]:"right"===u?p=[i,o]:"bottom"===u&&(p=[o,a]);var f=[(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2],c=Cs(p,r);if(l){var d="top"===l||"left"===l,v="bottom"===u||"left"===u;f=p[d&&!v||!d&&v?0:1]}return[f,c]}}(r.rotationPosition,l.renderPoses,l.direction),d=[];if(c){var v=c[0],g=c[1];d.push(e.createElement("div",{key:"rotation",className:W("rotation"),style:{transform:"translate(-50%) translate(".concat(v[0],"px, ").concat(v[1],"px) rotate(").concat(g,"rad)")}},e.createElement("div",{className:W("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:W("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}if(o){var m=_e(u||{}),b={};m.forEach(function(C){u[C].forEach(function(_){b[_]=C})});var x=[];Ut(o)&&(x=o.map(function(C){var _=b[C];return{data:_?{resolve:_}:{},classNames:_?["move"]:[],dir:C}})),d.push.apply(d,qs(t,"rotatable",x,e))}return s&&d.push.apply(d,function(t,e){var r=t.renderState;r.renderDirectionMap||(r.renderDirectionMap={});var n=t.state,i=n.renderPoses,a=n.rotation,u=t.props.zoom,l=n.direction>0?1:-1,p=a/Math.PI*180;return _e(r.renderDirectionMap).map(function(f){var c=Xn[f];if(!c)return null;var d=(J(p,15)+l*ts[f]+720)%180;return e.createElement("div",{className:W("around-control"),"data-rotation":d,"data-direction":f,key:"direction-around-".concat(f),style:$n.apply(void 0,X([a,u],c.map(function(v){return i[v]}),!1))})})}(t,e)),d},dragControlCondition:bi,dragControlStart:function(t,e){var r,n,i=e.datas,a=e.clientX,o=e.clientY,s=e.parentRotate,u=e.parentFlag,l=e.isPinch,p=e.isRequest,f=t.state,d=f.left,v=f.top,g=f.direction,m=f.beforeDirection,b=f.targetTransform,x=f.moveableClientRect,C=f.offsetMatrix,_=f.targetMatrix,M=f.allMatrix,E=f.width,S=f.height;if(!p&&!f.target)return!1;var w=t.getRect();i.rect=w,i.transform=b,i.left=d,i.top=v;var y=function(U){i.fixedDirection=U,i.fixedPosition=fs(t,U),B&&B.setFixedDirection(U)},D=a,P=o;if(p||l||u){var O=s||0;i.beforeInfo={origin:w.beforeOrigin,prevDeg:O,defaultDeg:O,prevSnapDeg:0,startDist:0},i.afterInfo=T(T({},i.beforeInfo),{origin:w.origin}),i.absoluteInfo=T(T({},i.beforeInfo),{origin:w.origin,startValue:O})}else{var R=null===(n=e.inputEvent)||void 0===n?void 0:n.target;if(R){var z=R.getAttribute("data-direction")||"",A=hf[z];if(A){i.isControl=!0,i.isAroundControl=_t(R,W("around-control")),i.controlDirection=A;var I=R.getAttribute("data-resolve");I&&(i.resolveAble=I),r=gt(function(t,e,r){var i=16===t.length?4:3,a=e.map(function(u){return St(t,u,i)}),o=r.left,s=r.top;return a.map(function(u){return[u[0]+o,u[1]+s]})}(f.rootMatrix,f.renderPoses,x),A),D=r[0],P=r[1]}}i.beforeInfo={origin:w.beforeOrigin},i.afterInfo={origin:w.origin},i.absoluteInfo={origin:w.origin,startValue:w.rotation};var Y=y;y=function(U){var tt=f.is3d?4:3,Q=gt([[0,0],[E,0],[0,S],[E,S]],U),it=K(wo(_,tt),Q),V=Mt(C,ce([it[0],it[1]],tt)),H=Mt(M,ce([Q[0],Q[1]],tt));Y(U),i.beforeInfo.origin=V,i.afterInfo.origin=H,i.absoluteInfo.origin=H,hi(t,i.beforeInfo,D,P,x),hi(t,i.afterInfo,D,P,x),hi(t,i.absoluteInfo,D,P,x)}}i.startClientX=D,i.startClientY=P,i.direction=g,i.beforeDirection=m,i.startValue=0,i.datas={},yr(e,"rotate");var G=!1,B=!1;i.isControl&&i.resolveAble&&"resizable"===i.resolveAble&&(B=vi.dragControlStart(t,T(T({},new De("resizable").dragStart([0,0],e)),{parentDirection:i.controlDirection,parentFixedDirection:i.fixedDirection}))),B||(G=wt.dragStart(t,(new De).dragStart([0,0],e))),y(function(t){var e=t.state,i=e.transformOrigin;return[i[0]/(e.width/2)-1,i[1]/(e.height/2)-1]}(t));var Z=q(t,e,T(T({set:function(U){i.startValue=U*Math.PI/180},setFixedDirection:y},Mr(e)),{dragStart:G,resizeStart:B})),nt=F(t,"onRotateStart",Z);return i.isRotate=!1!==nt,f.snapRenderInfo={request:e.isRequest},!!i.isRotate&&Z},dragControl:function(t,e){var r,n,i,a=e.datas,o=e.distX,s=e.distY,u=e.parentRotate,l=e.parentFlag,p=e.isPinch,f=e.groupDelta,c=a.beforeDirection,d=a.beforeInfo,v=a.afterInfo,g=a.absoluteInfo,b=a.startValue,x=a.rect,C=a.startClientX,_=a.startClientY;if(a.isRotate){Sr(e,"rotate");var w,y,D,P,O,R,z,A,I,E=c*function(t){return Or(t.datas.beforeTransform,[50,50],100,100).direction}(e),S=t.props.parentMoveable,N=180/Math.PI*b,Y=g.startValue,G=!1,B=C+o,L=_+s;if(!l&&"parentDist"in e){var Z=e.parentDist;y=Z,O=Z,A=Z}else p||l?(y=Fr(u,c,d),O=Fr(u,E,v),A=Fr(u,E,g)):(y=gi(B,L,c,d),O=gi(B,L,E,v),A=gi(B,L,E,g),G=!0);if(F(t,"onBeforeRotate",q(t,e,{beforeRotation:N+y,rotation:N+O,absoluteRotation:Y+A,setRotation:function(Ct){y=O=Ct-N,A=O}},!0)),w=(r=mi(t,x,d,y,N,G))[0],y=r[1],D=r[2],P=(n=mi(t,x,v,O,N,G))[0],O=n[1],R=n[2],i=mi(t,x,g,A,Y,G),A=i[1],I=i[2],(z=i[0])||P||w||S){var nt=Er(a,"rotate(".concat(R,"deg)"),"rotate(".concat(O,"deg)")),U=function(t,e,r){var n=r.fixedDirection,i=r.fixedPosition;return cs(t,"rotate(".concat(e,"deg)"),n,i,r)}(t,O,a),tt=j(K(f||[0,0],U),a.prevInverseDist||[0,0]);a.prevInverseDist=U,a.requestValue=null;var Q=ls(t,nt,tt,p,e),it=Q,ct=Nt([B,L],g.startAbsoluteOrigin)-g.startDist,at=void 0;if("resizable"===a.resolveAble){var V=vi.dragControl(t,T(T({},Ke(e,t.state,[e.deltaX,e.deltaY],!!p,!1,"resizable")),{resolveMatrix:!0,parentDistance:ct}));V&&(at=V,it=_s(it,V,e))}var H=q(t,e,T(T({delta:P,dist:O,rotate:R,rotation:R,beforeDist:y,beforeDelta:w,beforeRotate:D,beforeRotation:D,absoluteDist:A,absoluteDelta:z,absoluteRotate:I,absoluteRotation:I,isPinch:!!p,resize:at},Q),it));return F(t,"onRotate",H),H}}},dragControlAfter:function(t,e){},dragControlEnd:function(t,e){var r=e.datas;if(r.isRotate){r.isRotate=!1;var n=At(t,e,{});return F(t,"onRotateEnd",n),n}},dragGroupControlCondition:bi,dragGroupControlStart:function(t,e){var r=e.datas,n=t.state,i=n.left,a=n.top,o=n.beforeOrigin,s=this.dragControlStart(t,e);if(!s)return!1;s.set(r.beforeDirection*t.rotation);var u=qt(t,this,"dragControlStart",e,function(f,c){var d=f.state,m=d.beforeOrigin,b=K(j([d.left,d.top],[i,a]),j(m,o));return c.datas.groupClient=b,T(T({},c),{parentRotate:0})}),p=F(t,"onRotateGroupStart",T(T({},s),{targets:t.props.targets,events:u}));return r.isRotate=!1!==p,!!r.isRotate&&s},dragGroupControl:function(t,e){var r=e.datas;if(r.isRotate){ti(t,"onBeforeRotate",function(p){F(t,"onBeforeRotateGroup",q(t,e,T(T({},p),{targets:t.props.targets}),!0))});var n=this.dragControl(t,e);if(n){var i=r.beforeDirection,a=n.beforeDist,s=n.beforeDelta/180*Math.PI,u=qt(t,this,"dragControl",e,function(p,f){var c=f.datas.groupClient,d=c[0],v=c[1],g=Qt([d,v],s*i),m=g[0],b=g[1],x=[m-d,b-v];return f.datas.groupClient=[m,b],T(T({},f),{parentRotate:a,groupDelta:x})});t.rotation=i*n.beforeRotation;var l=T({targets:t.props.targets,events:u,set:function(p){t.rotation=p},setGroupRotation:function(p){t.rotation=p}},n);return F(t,"onRotateGroup",l),l}}},dragGroupControlEnd:function(t,e){var r=e.isDrag;if(e.datas.isRotate){this.dragControlEnd(t,e);var i=qt(t,this,"dragControlEnd",e);return F(t,"onRotateGroupEnd",At(t,e,{targets:t.props.targets,events:i})),r}},request:function(t){var e={},r=0,n=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?r+=i.deltaRotate:"rotate"in i&&(r=i.rotate-n),{datas:e,parentDist:r}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},tu=ri("scalable"),Hp={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean,edge:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:$s("scalable"),dragControlCondition:tu,dragControlStart:function(t,e){var r=e.datas,n=e.isPinch,o=e.parentDirection||(n?[0,0]:Kn(e.inputEvent.target)),s=t.state,u=s.width,l=s.height,p=s.targetTransform,c=s.pos1,d=s.pos2,v=s.pos4;if(!o||!s.target)return!1;n||ve(t,e),r.datas={},r.transform=p,r.prevDist=[1,1],r.direction=o,r.startOffsetWidth=u,r.startOffsetHeight=l,r.startValue=[1,1];var g=Nt(c,d),m=Nt(d,v),b=!o[0]&&!o[1]||o[0]||!o[1];function x(E){r.ratio=E&&isFinite(E)?E:0}function C(E){r.fixedDirection=E,r.fixedPosition=gt(r.startPositions,E)}r.scaleWidth=g,r.scaleHeight=m,r.scaleXRatio=g/u,r.scaleYRatio=m/l,yr(e,"scale"),r.isWidth=b,r.startPositions=Tt(t.state),r.setFixedDirection=C,x(Nt(c,d)/Nt(d,v)),C([-o[0],-o[1]]);var _=q(t,e,T(T({direction:o,set:function(E){r.startValue=E},setRatio:x,setFixedDirection:C},Mr(e)),{dragStart:wt.dragStart(t,(new De).dragStart([0,0],e))})),M=F(t,"onScaleStart",_);return r.startFixedDirection=r.fixedDirection,!1!==M&&(r.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),!!r.isScale&&_},dragControl:function(t,e){Sr(e,"scale");var r=e.datas,n=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,o=e.dragClient,s=e.isRequest,u=r.prevDist,l=r.direction,p=r.startOffsetWidth,f=r.startOffsetHeight,d=r.startValue,v=r.isWidth,g=r.ratio;if(!r.isScale)return!1;var m=t.props,b=m.throttleScale,x=m.parentMoveable,C=l;!l[0]&&!l[1]&&(C=[1,1]);var _=g&&(null!=n?n:m.keepRatio)||!1,M=t.state;function E(){var L=Ds(C,_,r,e),U=(p+L.distWidth)/p,tt=(f+L.distHeight)/f;return 0===(U=C[0]||_?U*d[0]:d[0])&&(U=1e-9*(u[0]>0?1:-1)),0===(tt=C[1]||_?tt*d[1]:d[1])&&(tt=1e-9*(u[1]>0?1:-1)),[U,tt]}var S=E();if(!a&&t.props.groupable){var y=(M.snapRenderInfo||{}).direction;Ut(y)&&(y[0]||y[1])&&(M.snapRenderInfo={direction:l,request:e.isRequest})}F(t,"onBeforeScale",q(t,e,{scale:S,setFixedDirection:function(L){return r.setFixedDirection(L),S=E()},startFixedDirection:r.startFixedDirection,setScale:function(L){S=L}},!0));var D=[S[0]/d[0],S[1]/d[1]],P=o,O=[0,0];if(o||(P=!i&&a?ps(t,[0,0]):r.fixedPosition),a||(O=function(t,e,r,n,i){if(!Pe(t,"scalable"))return[0,0];var a=i.startOffsetWidth,o=i.startOffsetHeight,s=i.fixedPosition,u=i.fixedDirection,l=i.is3d,p=Zs(t,function(f,c){return Xs(function(t,e){var r=t.transformOrigin,o=t.is3d?4:3;return Qe(t.offsetMatrix,st(t.targetMatrix,Ro(e,o),o),r,o)}(i,K(e,[f/a,c/o])),a,o,u,s,l)},a,o,r,s,n,i);return[p[0]/a,p[1]/o]}(t,D,l,s,r)),_){C[0]&&C[1]&&O[0]&&O[1]&&(Math.abs(O[0]*p)>Math.abs(O[1]*f)?O[1]=0:O[0]=0);var R=!O[0]&&!O[1];R&&(v?D[0]=J(D[0]*d[0],b)/d[0]:D[1]=J(D[1]*d[1],b)/d[1]),C[0]&&!C[1]||O[0]&&!O[1]||R&&v?(D[0]+=O[0],D[1]=p*D[0]*d[0]/g/f/d[1]):(!C[0]&&C[1]||!O[0]&&O[1]||R&&!v)&&(D[1]+=O[1],D[0]=f*D[1]*d[1]*g/p/d[0])}else D[0]+=O[0],D[1]+=O[1],O[0]||(D[0]=J(D[0]*d[0],b)/d[0]),O[1]||(D[1]=J(D[1]*d[1],b)/d[1]);0===D[0]&&(D[0]=1e-9*(u[0]>0?1:-1)),0===D[1]&&(D[1]=1e-9*(u[1]>0?1:-1));var I=[D[0]/u[0],D[1]/u[1]];S=function(t,e){return[t[0]*e[0],t[1]*e[1]]}(D,d);var N=function(t,e,r,n,i){return cs(t,"scale(".concat(e.join(", "),")"),r,n,i)}(t,D,r.fixedDirection,P,r),Y=j(N,r.prevInverseDist||[0,0]);if(r.prevDist=D,r.prevInverseDist=N,S[0]===u[0]&&S[1]===u[1]&&Y.every(function(L){return!L})&&!x)return!1;var G=Er(r,"scale(".concat(S.join(", "),")"),"scale(".concat(D.join(", "),")")),B=q(t,e,T({offsetWidth:p,offsetHeight:f,direction:l,scale:S,dist:D,delta:I,isPinch:!!a},ls(t,G,Y,a,e)));return F(t,"onScale",B),B},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;return!!r.isScale&&(r.isScale=!1,F(t,"onScaleEnd",At(t,e,{})),n)},dragGroupControlCondition:tu,dragGroupControlStart:function(t,e){var r=e.datas,n=this.dragControlStart(t,e);if(!n)return!1;var i=te(t,"resizable",e);function a(p,f){var c=r.fixedDirection,d=r.fixedPosition,g=gt(f.datas.startPositions||Tt(p.state),c),m=Mt(Se(-t.rotation/180*Math.PI,3),[g[0]-d[0],g[1]-d[1],1],3),x=m[1];return f.datas.originalX=m[0],f.datas.originalY=x,f}r.moveableScale=t.scale;var o=qt(t,this,"dragControlStart",e,function(p,f){return a(p,f)}),s=function(p){n.setFixedDirection(p),o.forEach(function(f,c){f.setFixedDirection(p),a(f.moveable,i[c])})};r.setFixedDirection=s;var u=T(T({},n),{targets:t.props.targets,events:o,setFixedDirection:s}),l=F(t,"onScaleGroupStart",u);return r.isScale=!1!==l,!!r.isScale&&u},dragGroupControl:function(t,e){var r=e.datas;if(r.isScale){ti(t,"onBeforeScale",function(f){F(t,"onBeforeScaleGroup",q(t,e,T(T({},f),{targets:t.props.targets}),!0))});var n=this.dragControl(t,e);if(n){var i=r.moveableScale;t.scale=[n.scale[0]*i[0],n.scale[1]*i[1]];var a=t.props.keepRatio,o=n.dist,s=n.scale,u=r.fixedPosition,l=qt(t,this,"dragControl",e,function(f,c){var d=Mt(Se(t.rotation/180*Math.PI,3),[c.datas.originalX*o[0],c.datas.originalY*o[1],1],3),v=d[0],g=d[1];return T(T({},c),{parentDist:null,parentScale:s,parentKeepRatio:a,dragClient:K(u,[v,g])})}),p=T({targets:t.props.targets,events:l},n);return F(t,"onScaleGroup",p),p}}},dragGroupControlEnd:function(t,e){var r=e.isDrag;if(e.datas.isScale){this.dragControlEnd(t,e);var i=qt(t,this,"dragControlEnd",e);return F(t,"onScaleGroupEnd",At(t,e,{targets:t.props.targets,events:i})),r}},request:function(){var t={},e=0,r=0;return{isControl:!0,requestStart:function(n){return{datas:t,parentDirection:n.direction||[1,1]}},request:function(n){return{datas:t,parentDist:[e+=n.deltaWidth,r+=n.deltaHeight],parentKeepRatio:n.keepRatio}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function ie(t,e){return t.map(function(r,n){return se(r,e[n],1,2)})}function eu(t,e,r){var n=ht(t,e),a=ht(t,r)-n;return a>=0?a:a+2*Math.PI}var Zp={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array,edge:Boolean},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,e){var r=t.props,o=r.zoom;if(r.resizable||r.scalable||!r.warpable)return[];var s=t.state,u=s.pos1,l=s.pos2,p=s.pos3,f=s.pos4,c=ie(u,l),d=ie(l,u),v=ie(u,p),g=ie(p,u),m=ie(p,f),b=ie(f,p),x=ie(l,f),C=ie(f,l);return X([e.createElement("div",{className:W("line"),key:"middeLine1",style:tr(c,m,o)}),e.createElement("div",{className:W("line"),key:"middeLine2",style:tr(d,b,o)}),e.createElement("div",{className:W("line"),key:"middeLine3",style:tr(v,x,o)}),e.createElement("div",{className:W("line"),key:"middeLine4",style:tr(g,C,o)})],Ks(t,"warpable",e),!0)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var r=e.inputEvent.target;return _t(r,W("direction"))&&_t(r,W("warpable"))},dragControlStart:function(t,e){var r=e.datas,i=t.props.target,o=Kn(e.inputEvent.target);if(!o||!i)return!1;var s=t.state,u=s.transformOrigin,l=s.is3d,p=s.targetTransform,f=s.targetMatrix,c=s.width,d=s.height,v=s.left,g=s.top;return r.datas={},r.targetTransform=p,r.warpTargetMatrix=l?f:Zt(f,3,4),r.targetInverseMatrix=Do(Xt(r.warpTargetMatrix,4),3,4),r.direction=o,r.left=v,r.top=g,r.poses=[[0,0],[c,0],[0,d],[c,d]].map(function(x){return j(x,u)}),r.nextPoses=r.poses.map(function(x){return Mt(r.warpTargetMatrix,[x[0],x[1],0,1],4)}),r.startValue=pt(4),r.prevMatrix=pt(4),r.absolutePoses=Tt(s),r.posIndexes=as(o),ve(t,e),yr(e,"matrix3d"),s.snapRenderInfo={request:e.isRequest,direction:o},!1!==F(t,"onWarpStart",q(t,e,T({set:function(x){r.startValue=x}},Mr(e))))&&(r.isWarp=!0),r.isWarp},dragControl:function(t,e){var r=e.datas,n=e.isRequest,i=e.distX,a=e.distY,o=r.targetInverseMatrix,s=r.prevMatrix,l=r.startValue,p=r.poses,f=r.posIndexes,c=r.absolutePoses;if(!r.isWarp)return!1;if(Sr(e,"matrix3d"),Pe(t,"warpable")){var d=f.map(function(y){return c[y]});d.length>1&&d.push([(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2]);var v=kr(t,n,{horizontal:d.map(function(y){return y[1]+a}),vertical:d.map(function(y){return y[0]+i})});a-=v.horizontal.offset,i-=v.vertical.offset}var b=Vt({datas:r,distX:i,distY:a},!0),x=r.nextPoses.slice();if(f.forEach(function(y){x[y]=K(x[y],b)}),!pf.every(function(y){return function(t,e){var r=eu(t[0],t[1],t[2]),n=eu(e[0],e[1],e[2]),i=Math.PI;return!(r>=i&&n<=i||r<=i&&n>=i)}(y.map(function(D){return p[D]}),y.map(function(D){return x[D]}))}))return!1;var C=Cn(p[0],p[2],p[1],p[3],x[0],x[2],x[1],x[3]);if(!C.length)return!1;var M=ns(r,st(o,C,4),!0),E=st(Xt(s,4),M,4);r.prevMatrix=M;var S=st(l,M,4),w=Er(r,"matrix3d(".concat(S.join(", "),")"),"matrix3d(".concat(M.join(", "),")"));return Vn(e,w),F(t,"onWarp",q(t,e,{delta:E,matrix:S,dist:M,multiply:st,transform:w})),!0},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;return!!r.isWarp&&(r.isWarp=!1,F(t,"onWarpEnd",At(t,e,{})),n)}},Vp=W("area-pieces"),Lr=W("area-piece"),ru=W("avoid");function xi(t){var e=t.areaElement;if(e){var r=t.state,n=r.width,i=r.height;(function(t,e){if(t.classList)t.classList.remove(e);else{var r=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(r," ")}})(e,ru),e.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(i,"px")}}function nu(t){return t.createElement("div",{key:"area_pieces",className:Vp},t.createElement("div",{className:Lr}),t.createElement("div",{className:Lr}),t.createElement("div",{className:Lr}),t.createElement("div",{className:Lr}))}var iu={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,e){var r=t.props,n=r.target,i=r.dragArea,a=r.groupable,s=t.state,u=s.width,l=s.height,p=s.renderPoses,f=r.passDragArea?W("area","pass"):W("area");if(a)return[e.createElement("div",{key:"area",ref:Ht(t,"areaElement"),className:f}),nu(e)];if(!n||!i)return[];var c=Cn([0,0],[u,0],[0,l],[u,l],p[0],p[1],p[2],p[3]),d=c.length?wr(c,!0):"none";return[e.createElement("div",{key:"area",ref:Ht(t,"areaElement"),className:f,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(l,"px"),transformOrigin:"0 0",transform:d}}),nu(e)]},dragStart:function(t,e){var n=e.clientX,i=e.clientY;if(!e.inputEvent)return!1;e.datas.isDragArea=!1;var o=t.areaElement,s=t.state,u=s.moveableClientRect,p=s.rootMatrix,f=s.is3d,c=u.left,d=u.top,v=It(s.renderPoses),g=v.left,m=v.top,b=v.width,x=v.height,_=Re(p,[n-c,i-d],f?4:3),M=_[0],E=_[1],S=[{left:g,top:m,width:b,height:(E-=m)-10},{left:g,top:m,width:(M-=g)-10,height:x},{left:g,top:m+E+10,width:b,height:x-E-10},{left:g+M+10,top:m,width:b-M-10,height:x}],w=[].slice.call(o.nextElementSibling.children);S.forEach(function(y,D){w[D].style.cssText="left: ".concat(y.left,"px;top: ").concat(y.top,"px; width: ").concat(y.width,"px; height: ").concat(y.height,"px;")}),function(t,e){t.classList?t.classList.add(e):t.className+=" "+e}(o,ru),s.disableNativeEvent=!0},drag:function(t,e){var r=e.datas,n=e.inputEvent;if(this.enableNativeEvent(t),!n)return!1;r.isDragArea||(r.isDragArea=!0,xi(t))},dragEnd:function(t,e){if(this.enableNativeEvent(t),!e.inputEvent)return!1;e.datas.isDragArea||xi(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){xi(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&io(function(){e.disableNativeEvent=!1})}},jp=Je("origin",{render:function(t,e){var r=t.props.zoom,n=t.state,i=n.beforeOrigin,a=n.rotation;return[e.createElement("div",{className:W("control","origin"),style:$n(a,r,i),key:"beforeOrigin"})]}});function qp(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var Up={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(t,e){var n=t.props.scrollContainer,i=void 0===n?t.getContainer():n,a=new Lc,o=nr(i,!0);e.datas.dragScroll=a;var s=e.isControl?"controlGesto":"targetGesto",u=e.targets;a.on("scroll",function(l){var c=q(t,e,{scrollContainer:l.container,direction:l.direction}),d=u?"onScrollGroup":"onScroll";u&&(c.targets=u),F(t,d,c)}).on("move",function(l){t[s].scrollBy(l.offsetX,l.offsetY,e.inputEvent,!1)}),a.dragStart(e,{container:o})},checkScroll:function(t,e){var r=e.datas.dragScroll;if(r){var n=t.props,i=n.scrollContainer,a=void 0===i?t.getContainer():i,o=n.scrollThreshold,u=n.getScrollPosition,l=void 0===u?qp:u;return r.drag(e,{container:a,threshold:void 0===o?0:o,getScrollPosition:function(p){return l({scrollContainer:p.container,direction:p.direction})}}),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,T(T({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,T(T({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,T(T({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,T(T({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,T(T({},e),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,e){return this.drag(t,T(T({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,T(T({},e),{targets:t.props.targets}))}},au={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Object,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object,flushSync:Function,stopPropagation:Boolean,preventClickEventOnDrag:Boolean,preventClickDefault:Boolean},events:{}},Jp=Je("padding",{render:function(t,e){var r=t.props;if(r.dragArea)return[];var n=r.padding||{},i=n.left,o=n.top,s=void 0===o?0:o,u=n.right,l=void 0===u?0:u,p=n.bottom,f=void 0===p?0:p,c=t.state,d=c.renderPoses,x=[c.pos1,c.pos2,c.pos3,c.pos4],C=[];return(void 0===i?0:i)>0&&C.push([0,2]),s>0&&C.push([0,1]),l>0&&C.push([1,3]),f>0&&C.push([2,3]),C.map(function(_,M){var E=_[0],S=_[1],O=Cn([0,0],[100,0],[0,100],[100,100],x[E],x[S],d[E],d[S]);if(O.length)return e.createElement("div",{key:"padding".concat(M),className:W("padding"),style:{transform:wr(O,!0)}})})}}),ou=["nw","ne","se","sw"];function Yr(t,e){var r=t[0]+t[1],n=r>e?e/r:1;return t[0]*=n,t[1]=e-t[1]*n,t}var $p=[1,2,5,6],Kp=[0,3,4,7],me=[1,-1,-1,1],be=[1,1,-1,-1];function Ci(t,e,r,n,i,a,o,s,u){void 0===a&&(a=0),void 0===o&&(o=0),void 0===s&&(s=n),void 0===u&&(u=i);var l=[],p=!1,f=t.map(function(c,d){var v=e[d],g=v.horizontal,m=v.vertical;if(m&&!p&&(p=!0,l.push("/")),p){var b=Math.max(0,1===m?c[1]-o:u-c[1]);return l.push(Yt(b,i,r)),b}return b=Math.max(0,1===g?c[0]-a:s-c[0]),l.push(Yt(b,n,r)),b});return{styles:l,raws:f}}function su(t){for(var e=[0,0],r=[0,0],n=t.length,i=0;i<n;++i){var a=t[i];!a.sub||(a.horizontal&&(0===e[1]&&(e[0]=i),e[1]=i-e[0]+1,r[0]=i+1),a.vertical&&(0===r[1]&&(r[0]=i),r[1]=i-r[0]+1))}return{horizontalRange:e,verticalRange:r}}function uu(t,e,r,n,i,a){var o,s,u,l;void 0===a&&(a=[0,0]);var p=t.indexOf("/"),f=(p>-1?t.slice(0,p):t).length,c=t.slice(0,f),d=t.slice(f+1),v=c[0],g=void 0===v?"0px":v,m=c[1],b=void 0===m?g:m,x=c[2],_=c[3],E=d[0],S=void 0===E?g:E,w=d[1],y=void 0===w?S:w,D=d[2],P=void 0===D?S:D,O=d[3],R=void 0===O?y:O,z=[g,b,void 0===x?g:x,void 0===_?b:_].map(function(B){return ft(B,e)}),A=[S,y,P,R].map(function(B){return ft(B,r)}),I=z.slice(),N=A.slice();o=Yr([I[0],I[1]],e),I[0]=o[0],I[1]=o[1],s=Yr([I[3],I[2]],e),I[3]=s[0],I[2]=s[1],u=Yr([N[0],N[3]],r),N[0]=u[0],N[3]=u[1],l=Yr([N[1],N[2]],r),N[1]=l[0],N[2]=l[1];var Y=I.slice(0,Math.max(a[0],c.length)),G=N.slice(0,Math.max(a[1],d.length));return X(X([],Y.map(function(B,L){return{horizontal:me[L],vertical:0,pos:[n+B,i+(-1===be[L]?r:0)],sub:!0,raw:z[L],direction:ou[L]}}),!0),G.map(function(B,L){return{horizontal:0,vertical:be[L],pos:[n+(-1===me[L]?e:0),i+B],sub:!0,raw:A[L],direction:ou[L]}}),!0)}function lu(t,e,r,n,i){void 0===i&&(i=e.length);var a=su(t.slice(n)),o=a.horizontalRange,s=a.verticalRange,u=r-n,l=0;if(0===u)l=i;else if(u>0&&u<o[1])l=o[1]-u;else{if(!(u>=s[0]))return;l=s[0]+s[1]-u}t.splice(r,l),e.splice(r,l)}function cu(t,e,r,n,i,a,o,s,u,l,p){void 0===l&&(l=0),void 0===p&&(p=0);var f=su(t.slice(r)),c=f.horizontalRange,d=f.verticalRange;if(n>-1)for(var v=1===me[n]?a-l:s-a,g=c[1];g<=n;++g){var b=0;if(n===g?b=a:0===g?b=l+v:-1===me[g]&&(b=s-(e[r][0]-l)),t.splice(r+g,0,{horizontal:me[g],vertical:0,pos:[b,m=1===be[g]?p:u]}),e.splice(r+g,0,[b,m]),0===g)break}else if(i>-1){var x=1===be[i]?o-p:u-o;if(0===c[1]&&0===d[1]){var C=[l+x,p];t.push({horizontal:me[0],vertical:0,pos:C}),e.push(C)}var _=d[0];for(g=d[1];g<=i;++g){var m=0;if(i===g?m=o:0===g?m=p+x:1===be[g]?m=e[r+_][1]:-1===be[g]&&(m=u-(e[r+_][1]-p)),t.push({horizontal:0,vertical:be[g],pos:[b=1===me[g]?l:s,m]}),e.push([b,m]),0===g)break}}}function fu(t,e){return void 0===e&&(e=t.map(function(i){return i.raw})),{horizontals:t.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return null!=i}),verticals:t.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return null!=i})}}var Qp=[[0,-1,"n"],[1,0,"e"]],td=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function _i(t,e,r){var n=t.props.clipRelative,i=t.state,a=i.width,o=i.height,u=e.type,l=e.poses,p="rect"===u,f="circle"===u;if("polygon"===u)return r.map(function(E){return"".concat(Yt(E[0],a,n)," ").concat(Yt(E[1],o,n))});if(p||"inset"===u){var c=r[1][1],d=r[3][0],v=r[7][0],g=r[5][1];if(p)return[c,d,g,v].map(function(E){return"".concat(E,"px")});var m=[c,a-d,o-g,v].map(function(E,S){return Yt(E,S%2?a:o,n)});if(r.length>8){var b=j(r[4],r[0]),x=b[0],C=b[1];m.push.apply(m,X(["round"],Ci(r.slice(8),l.slice(8),n,x,C,v,c,d,g).styles,!1))}return m}if(f||"ellipse"===u){var _=r[0],M=Yt(Math.abs(r[1][1]-_[1]),f?Math.sqrt((a*a+o*o)/2):o,n);return(m=f?[M]:[Yt(Math.abs(r[2][0]-_[0]),a,n),M]).push("at",Yt(_[0],a,n),Yt(_[1],o,n)),m}}function Wr(t,e,r,n){var i=[n,(n+e)/2,e],a=[t,(t+r)/2,r];return td.map(function(o){var s=o[0],u=o[1],l=o[2],p=i[s+1],f=a[u+1];return{vertical:Math.abs(u),horizontal:Math.abs(s),direction:l,pos:[p,f]}})}function pu(t){var e=[1/0,-1/0],r=[1/0,-1/0];return t.forEach(function(n){var i=n.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),r[0]=Math.min(r[0],i[1]),r[1]=Math.max(r[1],i[1])}),[Math.abs(e[1]-e[0]),Math.abs(r[1]-r[0])]}function du(t,e,r,n,i){var a,o,s,u,l,p,f,c=i;if(!c){var d=Bt(t),v=d.clipPath;c="none"!==v?v:d.clip}if(c&&"none"!==c&&"auto"!==c||(c=n)){var g=Qr(c),m=g.prefix,b=void 0===m?c:m,x=g.value,C=void 0===x?"":x,_="circle"===b,M=" ";if("polygon"===b)return M=",",{type:b,clipText:c,poses:S=(E=$t(C||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map(function(vt){var lt=vt.split(" "),Rt=lt[1];return{vertical:1,horizontal:1,pos:[ft(lt[0],e),ft(Rt,r)]}}),splitter:M};if(_||"ellipse"===b){var z,w="",y="",D=0,P=0,E=Jt(C);if(_)w=void 0===(o=E[2])?"50%":o,y=void 0===(s=E[3])?"50%":s,D=ft(void 0===(a=E[0])?"50%":a,Math.sqrt((e*e+r*r)/2)),P=D;else z=void 0===(l=E[1])?"50%":l,w=void 0===(p=E[3])?"50%":p,y=void 0===(f=E[4])?"50%":f,D=ft(void 0===(u=E[0])?"50%":u,e),P=ft(z,r);var A=[ft(w,e),ft(y,r)],S=X([{vertical:1,horizontal:1,pos:A,direction:"nesw"}],Qp.slice(0,_?1:2).map(function(rt){return{vertical:Math.abs(rt[1]),horizontal:rt[0],direction:rt[2],sub:!0,pos:[A[0]+rt[0]*D,A[1]+rt[1]*P]}}),!0);return{type:b,clipText:c,radiusX:D,radiusY:P,left:A[0]-D,top:A[1]-P,poses:S,splitter:M}}if("inset"===b){var I=(E=Jt(C||"0 0 0 0")).indexOf("round"),N=(I>-1?E.slice(0,I):E).length,Y=E.slice(N+1),G=E.slice(0,N),B=G[0],L=G[1],Z=void 0===L?B:L,nt=G[2],tt=G[3],Q=void 0===tt?Z:tt,it=[B,void 0===nt?B:nt].map(function(rt){return ft(rt,r)}),ct=it[0],at=it[1],V=[Q,Z].map(function(rt){return ft(rt,e)}),$=e-(Ct=V[1]),ot=r-at,et=uu(Y,$-(H=V[0]),ot-ct,H,ct);return{type:"inset",clipText:c,poses:S=X(X([],Wr(ct,$,ot,H),!0),et,!0),top:ct,left:H,right:$,bottom:ot,radius:Y,splitter:M}}if("rect"===b){M=",";var Ct,H,dt=(E=$t(C||"0px, ".concat(e,"px, ").concat(r,"px, 0px"))).map(function(mt){return Ne(mt).value});return{type:"rect",clipText:c,poses:S=Wr(ct=dt[0],Ct=dt[1],at=dt[2],H=dt[3]),top:ct,right:Ct,bottom:at,left:H,values:E,splitter:M}}}}var id={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,keepRatio:Boolean,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,e){var r=t.props,a=r.clipArea,o=r.zoom,s=t.state,u=s.target,l=s.width,p=s.height,f=s.allMatrix,c=s.is3d,d=s.left,v=s.top,g=s.pos1,m=s.pos2,b=s.pos3,x=s.pos4,_=s.snapBoundInfos,M=s.rotation;if(!u)return[];var E=du(u,l,p,r.defaultClipPath||"inset",s.clipPathState||r.customClipPath);if(!E)return[];var S=c?4:3,w=E.type,D=E.poses.map(function(ot){var et=St(f,ot.pos,S);return[et[0]-d,et[1]-v]}),P=[],O=[],R="rect"===w,z="inset"===w,A="polygon"===w;if(R||z||A){var I=z?D.slice(0,8):D;O=I.map(function(ot,et){var dt=0===et?I[I.length-1]:I[et-1],vt=ht(dt,ot),lt=bs(dt,ot);return e.createElement("div",{key:"clipLine".concat(et),className:W("line","clip-line","snap-control"),"data-clip-index":et,style:{width:"".concat(lt,"px"),transform:"translate(".concat(dt[0],"px, ").concat(dt[1],"px) rotate(").concat(vt,"rad) scaleY(").concat(o,")")}})})}if(P=D.map(function(ot,et){return e.createElement("div",{key:"clipControl".concat(et),className:W("control","clip-control","snap-control"),"data-clip-index":et,style:{transform:"translate(".concat(ot[0],"px, ").concat(ot[1],"px) rotate(").concat(M,"rad) scale(").concat(o,")")}})}),z&&P.push.apply(P,D.slice(8).map(function(ot,et){return e.createElement("div",{key:"clipRadiusControl".concat(et),className:W("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+et,style:{transform:"translate(".concat(ot[0],"px, ").concat(ot[1],"px) rotate(").concat(M,"rad) scale(").concat(o,")")}})})),"circle"===w||"ellipse"===w){var G=E.radiusX,B=E.radiusY,L=j(St(f,[E.left,E.top],S),St(f,[0,0],S)),Z=L[0],nt=L[1],U="none";if(!a){for(var tt=Math.max(10,G/5,B/5),Q=[],it=0;it<=tt;++it){var ct=2*Math.PI/tt*it;Q.push([G+(G-o)*Math.cos(ct),B+(B-o)*Math.sin(ct)])}Q.push([G,-2]),Q.push([-2,-2]),Q.push([-2,2*B+2]),Q.push([2*G+2,2*B+2]),Q.push([2*G+2,-2]),Q.push([G,-2]),U="polygon(".concat(Q.map(function(ot){return"".concat(ot[0],"px ").concat(ot[1],"px")}).join(", "),")")}P.push(e.createElement("div",{key:"clipEllipse",className:W("clip-ellipse","snap-control"),style:{width:"".concat(2*G,"px"),height:"".concat(2*B,"px"),clipPath:U,transform:"translate(".concat(-d+Z,"px, ").concat(-v+nt,"px) ").concat(wr(f))}}))}if(a){var at=It(X([g,m,b,x],D,!0)),V=at.width,H=at.height,Ct=at.left,$=at.top;(A||R||z)&&(Q=z?D.slice(0,8):D,P.push(e.createElement("div",{key:"clipArea",className:W("clip-area","snap-control"),style:{width:"".concat(V,"px"),height:"".concat(H,"px"),transform:"translate(".concat(Ct,"px, ").concat($,"px)"),clipPath:"polygon(".concat(Q.map(function(et){return"".concat(et[0]-Ct,"px ").concat(et[1]-$,"px")}).join(", "),")")}})))}return _&&["vertical","horizontal"].forEach(function(ot){var et=_[ot],dt="horizontal"===ot;et.isSnap&&O.push.apply(O,et.snap.posInfos.map(function(vt,lt){var rt=vt.pos,Rt=j(St(f,dt?[0,rt]:[rt,0],S),[d,v]),ae=j(St(f,dt?[l,rt]:[rt,p],S),[d,v]);return Nr(e,"",Rt,ae,o,"clip".concat(ot,"snap").concat(lt),"guideline")})),et.isBound&&O.push.apply(O,et.bounds.map(function(vt,lt){var rt=vt.pos,Rt=j(St(f,dt?[0,rt]:[rt,0],S),[d,v]),ae=j(St(f,dt?[l,rt]:[rt,p],S),[d,v]);return Nr(e,"",Rt,ae,o,"clip".concat(ot,"bounds").concat(lt),"guideline","bounds","bold")}))}),X(X([],P,!0),O,!0)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props.dragWithClip;return!(void 0===n||n)&&this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,T(T({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var r=t.state,n=t.props,i=n.defaultClipPath,a=n.customClipPath,o=r.target,s=r.width,u=r.height,l=e.inputEvent?e.inputEvent.target:null,p=l&&l.getAttribute("class")||"",f=e.datas,c=du(o,s,u,i||"inset",a);if(!c)return!1;var d=c.clipText;return!1===F(t,"onClipStart",q(t,e,{clipType:c.type,clipStyle:d,poses:c.poses.map(function(b){return b.pos})}))?(f.isClipStart=!1,!1):(f.isControl=p&&p.indexOf("clip-control")>-1,f.isLine=p.indexOf("clip-line")>-1,f.isArea=p.indexOf("clip-area")>-1||p.indexOf("clip-ellipse")>-1,f.clipIndex=l?parseInt(l.getAttribute("data-clip-index"),10):-1,f.clipPath=c,f.isClipStart=!0,r.clipPathState=d,ve(t,e),!0)},dragControl:function(t,e){var r,n=e.datas,i=e.originalDatas,a=e.isDragTarget;if(!n.isClipStart)return!1;var s=n.isControl,u=n.isLine,l=n.isArea,p=n.clipIndex,f=n.clipPath;if(!f)return!1;var c=ge(t.props,"clippable"),d=c.keepRatio,v=0,g=0,m=i.draggable,b=Vt(e);a&&m?(v=(r=m.prevBeforeDist)[0],g=r[1]):(v=b[0],g=b[1]);var x=[v,g],C=t.state,_=C.width,M=C.height,E=!l&&!s&&!u,S=f.type,w=f.poses,y=f.splitter,D=w.map(function(ut){return ut.pos});E&&(v=-v,g=-g);var P=!s||"nesw"===w[p].direction,O="inset"===S||"rect"===S,R=w.map(function(){return[0,0]});if(s&&!P){var z=w[p],I=z.vertical,N=[v*Math.abs(z.horizontal),g*Math.abs(I)];R=function(t,e,r,n,i){var a=t[e],o=a.direction,s=a.sub,u=t.map(function(){return[0,0]}),l=o?o.split(""):[];if(n&&e<8){var p=l.filter(function(R){return"w"===R||"e"===R}),f=l.filter(function(R){return"n"===R||"s"===R}),c=p[0],d=f[0];u[e]=r;var v=pu(t),g=v[0],m=v[1],b=g&&m?g/m:0;if(b&&i){var C=t[(e+4)%8].pos,_=[0,0];o.indexOf("w")>-1?_[0]=-1:o.indexOf("e")>-1&&(_[0]=1),o.indexOf("n")>-1?_[1]=-1:o.indexOf("s")>-1&&(_[1]=1);var M=ys([g,m],r,b,_,!0),E=g+M[0],S=m+M[1],w=C[1],y=C[1],D=C[0],P=C[0];-1===_[0]?D=P-E:1===_[0]?P=D+E:(D-=E/2,P+=E/2),-1===_[1]?w=y-S:(1===_[1]||(w=y-S/2),y=w+S);var O=Wr(w,P,y,D);t.forEach(function(R,z){u[z][0]=O[z].pos[0]-R.pos[0],u[z][1]=O[z].pos[1]-R.pos[1]})}else t.forEach(function(R,z){var A=R.direction;!A||(A.indexOf(c)>-1&&(u[z][0]=r[0]),A.indexOf(d)>-1&&(u[z][1]=r[1]))}),c&&(u[1][0]=r[0]/2,u[5][0]=r[0]/2),d&&(u[3][1]=r[1]/2,u[7][1]=r[1]/2)}else o&&!s?l.forEach(function(R){var z="n"===R||"s"===R;t.forEach(function(A,I){var N=A.direction,Y=A.horizontal,G=A.vertical;!N||-1===N.indexOf(R)||(u[I]=[z||!Y?0:r[0],z&&G?r[1]:0])})}):u[e]=r;return u}(w,p,N,O,d)}else P&&(R=D.map(function(){return[v,g]}));var Y=D.map(function(ut,Ot){return K(ut,R[Ot])}),G=X([],Y,!0);C.snapBoundInfos=null;var B="circle"===f.type,L="ellipse"===f.type;if(B||L){var Z=It(Y),nt=Math.abs(Z.bottom-Z.top),U=Math.abs(L?Z.right-Z.left:nt),tt=Y[0][1]+nt,Q=Y[0][0]-U,it=Y[0][0]+U;B&&(G.push([it,Z.bottom]),R.push([1,0])),G.push([Z.left,tt]),R.push([0,1]),G.push([Q,Z.bottom]),R.push([1,0])}var ct=Hs((c.clipHorizontalGuidelines||[]).map(function(ut){return ft("".concat(ut),M)}),(c.clipVerticalGuidelines||[]).map(function(ut){return ft("".concat(ut),_)}),_,M),at=[],V=[];if(B||L)at=[G[4][0],G[2][0]],V=[G[1][1],G[3][1]];else if(O){var Ct=[R[0],R[2],R[4],R[6]];at=(H=[G[0],G[2],G[4],G[6]]).filter(function(ut,Ot){return Ct[Ot][0]}).map(function(ut){return ut[0]}),V=H.filter(function(ut,Ot){return Ct[Ot][1]}).map(function(ut){return ut[1]})}else at=G.filter(function(ut,Ot){return R[Ot][0]}).map(function(ut){return ut[0]}),V=G.filter(function(ut,Ot){return R[Ot][1]}).map(function(ut){return ut[1]});var $=[0,0],ot=Ls(ct,c.clipTargetBounds&&{left:0,top:0,right:_,bottom:M},at,V,5),et=ot.horizontal,dt=ot.vertical,vt=et.offset,lt=dt.offset;if(et.isBound&&($[1]+=vt),dt.isBound&&($[0]+=lt),(L||B)&&0===R[0][0]&&0===R[0][1]){var rt=(Z=It(Y)).bottom-Z.top,Rt=L?Z.right-Z.left:rt;Rt-=dt.isBound?Math.abs(lt):0===dt.snapIndex?-lt:lt,rt-=et.isBound?Math.abs(vt):0===et.snapIndex?-vt:vt,B&&(Rt=rt=Rs(dt,et)>0?rt:Rt);var mt=G[0];G[1][1]=mt[1]-rt,G[2][0]=mt[0]+Rt,G[3][1]=mt[1]+rt,G[4][0]=mt[0]-Rt}else if(O&&d&&s){var Wt=pu(w),Ge=Wt[0],Ie=Wt[1],Tu=Ge&&Ie?Ge/Ie:0,Vr=w[p].direction||"",Ri=G[1][1];tt=G[5][1],Q=G[7][0],it=G[3][0],vt<=lt?vt=lt/Tu:lt=vt*Tu,Vr.indexOf("w")>-1?Q-=lt:Vr.indexOf("e")>-1?it-=lt:(Q+=lt/2,it-=lt/2),Vr.indexOf("n")>-1?Ri-=vt:Vr.indexOf("s")>-1?tt-=vt:(Ri+=vt/2,tt-=vt/2);var Kd=Wr(Ri,it,tt,Q);G.forEach(function(zu,rv){var Ai;zu[0]=(Ai=Kd[rv].pos)[0],zu[1]=Ai[1]})}else G.forEach(function(ut,Ot){var Au=R[Ot];Au[0]&&(ut[0]-=lt),Au[1]&&(ut[1]-=vt)});var Ru=_i(t,f,Y),Pu="".concat(S,"(").concat(Ru.join(y),")");if(C.clipPathState=Pu,B||L)at=[G[4][0],G[2][0]],V=[G[1][1],G[3][1]];else if(O){var H;at=(H=[G[0],G[2],G[4],G[6]]).map(function(Ot){return Ot[0]}),V=H.map(function(Ot){return Ot[1]})}else at=G.map(function(ut){return ut[0]}),V=G.map(function(ut){return ut[1]});if(C.snapBoundInfos=Ls(ct,c.clipTargetBounds&&{left:0,top:0,right:_,bottom:M},at,V,1),m){var Pi=$;a&&(Pi=[x[0]+$[0]-b[0],x[1]+$[1]-b[1]]),m.deltaOffset=st(C.allMatrix,[Pi[0],Pi[1],0,0],C.is3d?4:3)}return F(t,"onClip",q(t,e,{clipEventType:"changed",clipType:S,poses:Y,clipStyle:Pu,clipStyles:Ru,distX:v,distY:g})),!0},dragControlEnd:function(t,e){this.unset(t);var r=e.isDrag,n=e.datas,i=e.isDouble,a=n.isLine,s=n.isControl;return!!n.isClipStart&&(F(t,"onClipEnd",At(t,e,{})),i&&(s?function(t,e){var r=e.datas,n=r.clipPath,i=r.clipIndex,o=n.type,s=n.poses,u=n.splitter,l=s.map(function(c){return c.pos}),p=l.length;if("polygon"===o)s.splice(i,1),l.splice(i,1);else{if("inset"!==o)return;if(i<8||(lu(s,l,i,8,p),p===s.length))return}var f=_i(t,n,l);F(t,"onClip",q(t,e,{clipEventType:"removed",clipType:o,poses:l,clipStyles:f,clipStyle:"".concat(o,"(").concat(f.join(u),")"),distX:0,distY:0}))}(t,e):a&&function(t,e){var r=rs(t,e),n=r[0],i=r[1],a=e.datas,o=a.clipPath,s=a.clipIndex,l=o.type,p=o.poses,f=o.splitter,c=p.map(function(b){return b.pos});if("polygon"===l)c.splice(s,0,[n,i]);else{if("inset"!==l)return;var d=$p.indexOf(s),v=Kp.indexOf(s),g=p.length;if(cu(p,c,8,d,v,n,i,c[4][0],c[4][1],c[0][0],c[0][1]),g===p.length)return}var m=_i(t,o,c);F(t,"onClip",q(t,e,{clipEventType:"added",clipType:l,poses:c,clipStyles:m,clipStyle:"".concat(l,"(").concat(m.join(f),")"),distX:0,distY:0}))}(t,e)),i||r)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},ad={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t,e){return e.isRequest?"originDraggable"===e.requestAble:_t(e.inputEvent.target,W("origin"))},dragControlStart:function(t,e){var r=e.datas;ve(t,e);var n=q(t,e,{dragStart:wt.dragStart(t,(new De).dragStart([0,0],e))}),i=F(t,"onDragOriginStart",n);return r.startOrigin=t.state.transformOrigin,r.startTargetOrigin=t.state.targetOrigin,r.prevOrigin=[0,0],r.isDragOrigin=!0,!1===i?(r.isDragOrigin=!1,!1):n},dragControl:function(t,e){var r=e.datas,n=e.isPinch,i=e.isRequest;if(!r.isDragOrigin)return!1;var a=Vt(e),u=t.state,l=u.width,p=u.height,f=u.offsetMatrix,c=u.targetMatrix,v=t.props.originRelative,g=void 0===v||v,m=u.is3d?4:3,b=[a[0],a[1]];if(i){var x=e.distOrigin;(x[0]||x[1])&&(b=x)}var C=K(r.startOrigin,b),_=K(r.startTargetOrigin,b),M=j(b,r.prevOrigin),E=Qe(f,c,C,m),S=t.getRect(),w=It(he(E,l,p,m)),y=[S.left-w.left,S.top-w.top];r.prevOrigin=b;var P=q(t,e,{width:l,height:p,origin:C,dist:b,delta:M,transformOrigin:[Yt(_[0],l,g),Yt(_[1],p,g)].join(" "),drag:wt.drag(t,Ke(e,t.state,y,!!n,!1))});return F(t,"onDragOrigin",P),P},dragControlEnd:function(t,e){return!!e.datas.isDragOrigin&&(F(t,"onDragOriginEnd",At(t,e,{})),!0)},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){return!!this.dragControlStart(t,e)},dragGroupControl:function(t,e){var r=this.dragControl(t,e);return!!r&&(t.transformOrigin=r.transformOrigin,!0)},request:function(t){var e={},r=t.getRect(),n=0,i=0,a=r.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(s){return"deltaOrigin"in s?(o[0]+=s.deltaOrigin[0],o[1]+=s.deltaOrigin[1]):"origin"in s?(o[0]=s.origin[0]-a[0],o[1]=s.origin[1]-a[1]):("x"in s?n=s.x-r.left:"deltaX"in s&&(n+=s.deltaX),"y"in s?i=s.y-r.top:"deltaY"in s&&(i+=s.deltaY)),{datas:e,distX:n,distY:i,distOrigin:o}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function vu(t,e,r,n,i){var a;if(void 0===n&&(n=[0,0]),i)a=i;else{var s=Bt(t);a=s&&s.borderRadius||""}return uu(!a||!i&&"0px"===a?[]:Jt(a),e,r,0,0,n)}function hu(t,e,r,n,i,a){var o=t.state,s=o.width,u=o.height,l=Ci(a,i,t.props.roundRelative,s,u),f=l.styles,c=fu(i,l.raws),d=c.horizontals,v=c.verticals,g=f.join(" ");o.borderRadiusState=g,F(t,"onRound",q(t,e,{horizontals:d,verticals:v,borderRadius:g,width:s,height:u,delta:n,dist:r}))}var sd={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,e){var r=t.state,n=r.target,o=r.allMatrix,u=r.left,l=r.top,f=t.props,c=f.minRoundControls,v=f.maxRoundControls,g=void 0===v?[4,4]:v,m=f.zoom;if(!n)return null;var b=r.is3d?4:3,x=vu(n,r.width,r.height,void 0===c?[0,0]:c,r.borderRadiusState);if(!x)return null;var C=0,_=0;return x.map(function(M,E){_+=Math.abs(M.horizontal),C+=Math.abs(M.vertical);var S=j(St(o,M.pos,b),[u,l]),w=M.vertical?C<=g[1]:_<=g[0];return e.createElement("div",{key:"borderRadiusControl".concat(E),className:W("control","border-radius"),"data-radius-index":E,style:{display:w?"block":"none",transform:"translate(".concat(S[0],"px, ").concat(S[1],"px) scale(").concat(m,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var r=e.inputEvent.target.getAttribute("class")||"";return r.indexOf("border-radius")>-1||r.indexOf("moveable-line")>-1&&r.indexOf("moveable-direction")>-1},dragControlStart:function(t,e){var n=e.datas,i=e.inputEvent.target,a=i.getAttribute("class")||"",o=a.indexOf("border-radius")>-1,s=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,u=o?parseInt(i.getAttribute("data-radius-index"),10):-1,l=s?parseInt(i.getAttribute("data-line-index"),10):-1;if(!o&&!s)return!1;if(!1===F(t,"onRoundStart",q(t,e,{})))return!1;n.lineIndex=l,n.controlIndex=u,n.isControl=o,n.isLine=s,ve(t,e);var f=t.props,c=f.roundRelative,d=f.minRoundControls,v=void 0===d?[0,0]:d,g=t.state,m=g.target,b=g.width,x=g.height;n.isRound=!0,n.prevDist=[0,0];var C=vu(m,b,x,v)||[];return n.controlPoses=C,g.borderRadiusState=Ci(C.map(function(_){return _.pos}),C,c,b,x).styles.join(" "),!0},dragControl:function(t,e){var r=e.datas;if(!r.isRound||!r.isControl||!r.controlPoses.length)return!1;var n=r.controlIndex,i=r.controlPoses,a=Vt(e),o=a[0],s=a[1],u=[o,s],l=j(u,r.prevDist),p=t.props.maxRoundControls,f=void 0===p?[4,4]:p,c=t.state,d=c.width,v=c.height,g=i[n],m=g.vertical,b=g.horizontal,x=i.map(function(_){var M=_.horizontal,E=_.vertical,S=[M*b*u[0],E*m*u[1]];if(M){if(1===f[0])return S;if(f[0]<4&&M!==b)return S}else{if(0===f[1])return S[1]=E*b*u[0]/d*v,S;if(m){if(1===f[1])return S;if(f[1]<4&&E!==m)return S}}return[0,0]});x[n]=u;var C=i.map(function(_,M){return K(_.pos,x[M])});return r.prevDist=[o,s],hu(t,e,u,l,i,C),!0},dragControlEnd:function(t,e){var r=t.state;r.borderRadiusState="";var n=e.datas,i=e.isDouble;if(!n.isRound)return!1;var a=r.width,o=r.height,s=n.isControl,u=n.controlIndex,l=n.isLine,p=n.lineIndex,f=n.controlPoses,c=f.map(function(C){return C.pos}),d=c.length,v=t.props.roundClickable;if(i&&(void 0===v||v)){if(s)lu(f,c,u,0);else if(l){var m=rs(t,e);!function(t,e,r,n,i,a,o){var s=fu(t),p=s.horizontals.length,f=s.verticals.length,c=-1,d=-1;0===r?0===p?c=0:1===p&&(c=1):3===r&&(p<=2?c=2:p<=3&&(c=3)),2===r?0===f?d=0:f<4&&(d=3):1===r&&(f<=1?d=1:f<=2&&(d=2)),cu(t,e,0,c,d,n,i,a,o)}(f,c,p,m[0],m[1],a,o)}d!==f.length&&hu(t,e,[0,0],[0,0],f,c)}return F(t,"onRoundEnd",At(t,e,{})),r.borderRadiusState="",!0},unset:function(t){t.state.borderRadiusState=""}},gu={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,e){var r=t.state,n=r.is3d,i=r.target,a=r.targetMatrix,o=null==i?void 0:i.style.transform,s=n?"matrix3d(".concat(a.join(","),")"):"matrix(".concat(Oo(a,!0),")"),u=o&&"none"!==o?o:s;e.datas.startTransforms=function(t,e){var n=pt(e?4:3);return t==="matrix".concat(e?"3d":"","(").concat(n.join(","),")")||"matrix(1,0,0,1,0,0)"===t}(u,n)?[]:Jt(u)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return q(t,e,{setTransform:function(r){e.datas.startTransforms=Ut(r)?r:Jt(r)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return q(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),F(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){this.resetStyle(e),e.datas.nextStyle={},F(t,"onBeforeRender",q(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){F(t,"onBeforeRenderEnd",q(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var r=this;this.dragStart(t,e);var n=te(t,"beforeRenderable",e),i=t.moveables,a=n.map(function(o,s){var u=i[s];return r.setTransform(u,o),r.fillDragStartParams(u,o)});F(t,"onBeforeRenderGroupStart",q(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,e){var r=this;this.drag(t,e);var n=te(t,"beforeRenderable",e),i=t.moveables,a=n.map(function(o,s){var u=i[s];return r.resetStyle(o),e.datas.nextStyle={},r.fillDragParams(u,o)});F(t,"onBeforeRenderGroup",q(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),F(t,"onBeforeRenderGroupEnd",q(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},mu={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,e){F(t,"onRenderStart",q(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){F(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){if(e.resultCount)return this.drag(t,e)},dragEnd:function(t,e){F(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){F(t,"onRenderGroupStart",q(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var r=this,n=te(t,"beforeRenderable",e),i=t.moveables,a=n.map(function(o,s){return r.fillDragParams(i[s],o)});F(t,"onRenderGroup",q(t,e,T(T({isPinch:!!e.isPinch,targets:t.props.targets,transform:ss(e)},rr(us(e))),{events:a})))},dragGroupEnd:function(t,e){var r=this,n=te(t,"beforeRenderable",e),i=t.moveables,a=n.map(function(o,s){return r.fillDragEndParams(i[s],o)});F(t,"onRenderGroupEnd",q(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:a}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){return q(t,e,T({isPinch:!!e.isPinch,transform:ss(e)},rr(us(e))))},fillDragEndParams:function(t,e){return q(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag})}};function ar(t,e,r,n,i,a,o){var s="Start"===i,l=a.isRequest;if(!t.state.target||s&&n.indexOf("Control")>-1&&!l&&t.areaElement===a.inputEvent.target)return!1;var p="".concat(r).concat(n).concat(i),f="".concat(r).concat(n,"Condition"),c="End"===i,d="After"===i,v=s&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());v&&t.updateRect(i,!0,!1),""===i&&!l&&Ss(t.state,a);var g=X([],t[e],!0);if(l){var m=a.requestAble;g.some(function(O){return O.name===m})||g.push.apply(g,t.props.ables.filter(function(O){return O.name===m}))}if(!g.length)return!1;var b=X(X([gu],g,!0),[mu],!1).filter(function(O){return O[p]}),x=a.datas;v&&b.forEach(function(O){O.unset&&O.unset(t)});var _,C=a.inputEvent;c&&C&&(_=document.elementFromPoint(a.clientX,a.clientY)||C.target);var M=0,E=!1,S=function(){var O;E=!0,null===(O=a.stop)||void 0===O||O.call(a)},y=b.filter(function(O){var R=O.name,z=x[R]||(x[R]={});if(s&&(z.isEventStart=!O[f]||O[f](t,a)),z.isEventStart){var A=O[p](t,T(T({},a),{stop:S,resultCount:M,datas:z,originalDatas:x,inputTarget:_}));return t._emitter.off(),s&&!1===A&&(z.isEventStart=!1),M+=A?1:0,A}return!1}).length,D=!1;return s&&(E||b.length&&!y)&&(D=E||0===b.filter(function(O){var z=x[O.name];return!(!z.isEventStart||"strong"===O.dragRelation&&(z.isEventStart=!1,1))}).length),(c||D)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(O){O.state.gestos={}})),v&&D&&b.forEach(function(O){O.unset&&O.unset(t)}),s&&!D&&!l&&y&&(null==a||a.preventDefault()),!t.isUnmounted&&!D&&((!s&&y&&!o||c)&&(t.props.flushSync||ds)(function(){t.updateRect(c?i:"",!0,!1),t.forceUpdate()}),!s&&!c&&!d&&y&&!o&&ar(t,e,r,n,i+"After",a),!0)}function bu(t,e,r){var n=t.controlBox.getElement(),i=[];i.push(n),(!t.props.dragArea||t.props.dragTarget)&&i.push(e);var a=function(o){var s=o.inputEvent.target;return s===t.areaElement||!t.isMoveableElement(s)&&!t.controlBox.getElement().contains(s)||_t(s,"moveable-area")||_t(s,"moveable-padding")};return Si(t,i,"targetAbles",r,{dragStart:a,pinchStart:a})}function Si(t,e,r,n,i){void 0===i&&(i={});var a="targetAbles"===r,o=t.props,c={preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,container:window,pinchThreshold:o.pinchThreshold,pinchOutside:o.pinchOutside,preventClickEventOnDrag:!!a&&o.preventClickEventOnDrag,preventClickEventOnDragStart:!!a&&o.preventClickDefault,preventClickEventByCondition:a?null:function(g){return t.controlBox.getElement().contains(g.target)},checkInput:!!a&&o.checkInput},d=new jc(e,c),v="Control"===n;return["drag","pinch"].forEach(function(g){["Start","","End"].forEach(function(m){d.on("".concat(g).concat(m),function(b){var x,C=b.eventType;(!i[C]||i[C](b))&&ar(t,r,g,n,m,b)?(t.props.stopPropagation||"Start"===m&&v)&&(null===(x=null==b?void 0:b.inputEvent)||void 0===x||x.stopPropagation()):b.stop()})})}),d}var ld=function(){function t(r,n,i){var a=this;this.target=r,this.moveable=n,this.eventName=i,this.ables=[],this._onEvent=function(o){var s=a.eventName,u=a.moveable;u.state.disableNativeEvent||a.ables.forEach(function(l){l[s](u,{inputEvent:o})})},r.addEventListener(i.toLowerCase(),this._onEvent)}var e=t.prototype;return e.setAbles=function(r){this.ables=r},e.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function xu(t,e,r,n){void 0===r&&(r=e);var i=0,a=0,o=0,s={},u=xs(t);if(t&&(i=u.offsetWidth,a=u.offsetHeight),t){var l=function(t,e,r,n){var i;void 0===r&&(r=e);var a=gs(t,e),o=a.matrixes,s=a.is3d,u=a.targetMatrix,l=a.transformOrigin,p=a.targetOrigin,f=a.offsetContainer,c=a.hasFixed,d=gs(f,r,!0),v=d.matrixes,g=d.is3d,m=d.offsetContainer,b=n||g||s,x=b?4:3,C="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,_=u,M=pt(x),E=pt(x),S=pt(x),w=pt(x),y=o.length;v.reverse(),o.reverse(),!s&&b&&(_=Zt(_,3,4),Un(o)),!g&&b&&Un(v),v.forEach(function(A){E=st(E,A.matrix,x)});var D=r||document.body,P=(null===(i=v[0])||void 0===i?void 0:i.target)||Dr(D,D,!0).offsetParent,O=v.slice(1).reduce(function(A,I){return st(A,I.matrix,x)},pt(x));o.forEach(function(A,I){if(y-2===I&&(S=M.slice()),y-1===I&&(w=M.slice()),!A.matrix){var Y=function(t,e,r,n,i){var a,o=t.target,s=t.origin,u=e.matrix,l=xs(o),p=l.offsetWidth,f=l.offsetHeight,c=r.getBoundingClientRect(),d=[0,0];r===document.body&&(d=hs(o,!0));for(var v=o.getBoundingClientRect(),g=v.left-c.left+r.scrollLeft-(r.clientLeft||0)+d[0],m=v.top-c.top+r.scrollTop-(r.clientTop||0)+d[1],b=v.width,x=v.height,C=bn(n,i,u),_=ms(C,p,f,n),M=_.left,E=_.top,S=_.width,w=_.height,y=St(C,s,n),D=j(y,[M,E]),P=[g+D[0]*b/S,m+D[1]*x/w],O=[0,0],R=0;++R<10;){var z=Xt(i,n);a=j(St(z,P,n),St(z,y,n)),O[0]=a[0],O[1]=a[1];var I=ms(bn(n,i,Xe(O,n),u),p,f,n),G=I.left-g,B=I.top-m;if(Math.abs(G)<2&&Math.abs(B)<2)break;P[0]-=G,P[1]-=B}return O.map(function(L){return Math.round(L)})}(A,o[I+1],P,x,st(O,M,x));A.matrix=Xe(Y,x)}M=st(M,A.matrix,x)});var R=!C&&s;_||(_=pt(R?4:3));var z=wr(C&&16===_.length?Zt(_,4,3):_,R);return{hasFixed:c,rootMatrix:E=Do(E,x,x),beforeMatrix:S,offsetMatrix:w,allMatrix:M,targetMatrix:_,targetTransform:z,transformOrigin:l,targetOrigin:p,is3d:b,offsetContainer:f,offsetRootContainer:m}}(t,e,r,n),p=Or(l.allMatrix,l.transformOrigin,i,a);s=T(T({},l),p);var f=Or(l.allMatrix,[50,50],100,100);o=Cs([f.pos1,f.pos2],f.direction)}var c=n?4:3;return T(T(T({width:i,height:a,rotation:o},u),{rootMatrix:pt(c),beforeMatrix:pt(c),offsetMatrix:pt(c),allMatrix:pt(c),targetMatrix:pt(c),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!n,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null}),s)}function Ei(t,e,r,n,i){var a=1,o=[0,0],s={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},u={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},l={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},p={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},f=xu(e,r,i,!0);if(e){var d=Or(f.offsetMatrix,K(f.transformOrigin,wo(f.targetMatrix,f.is3d?4:3)),f.width,f.height);a=d.direction,o=K(d.origin,[d.left-f.left,d.top-f.top]),s=er(e),l=er(Dr(n,n,!0).offsetParent||f.offsetRootContainer,!0),p=er(f.offsetRootContainer),t&&(u=er(t))}return T({targetClientRect:s,containerClientRect:l,moveableClientRect:u,rootContainerClientRect:p,beforeDirection:a,beforeOrigin:o,originalBeforeOrigin:o,target:e},f)}var Ae=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.state=T({container:null,gestos:{},renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1},Ei(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new On,n._prevTarget=null,n._prevDragArea=!1,n._onChangetarget=null,n._isPropTargetChanged=!1,n._observer=null,n._observerId=0,n.checkUpdateRect=function(){if(!n.isDragging()){var i=n.props.parentMoveable;if(i)return void i.checkUpdateRect();Cl(n._observerId),n._observerId=io(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(i){i.stopPropagation(),i.preventDefault()},n}ye(e,t);var r=e.prototype;return r.render=function(){var n=this.props,i=this.state,a=n.parentPosition,o=n.className,s=n.target,u=n.zoom,l=n.cspNonce,p=n.translateZ,f=n.cssStyled,c=n.portalContainer;this.checkUpdate(),this.updateRenderPoses();var d=a||{left:0,top:0},v=d.left,g=d.top,m=i.left,b=i.top,C=i.direction,_=i.hasFixed,M=n.targets,E=(M&&M.length||s)&&i.target,S=this.isDragging(),w={};return this.getEnabledAbles().forEach(function(y){w["data-able-".concat(y.name.toLowerCase())]=!0}),Gt(f,T({cspNonce:l,ref:Ht(this,"controlBox"),className:"".concat(W("control-box",-1===C?"reverse":"",S?"dragging":"")," ").concat(o)},w,{onClick:this._onPreventClick,portalContainer:c,style:{position:_?"fixed":"absolute",display:E?"block":"none",transform:"translate3d(".concat(m-v,"px, ").concat(b-g,"px, ").concat(p,")"),"--zoom":u,"--zoompx":"".concat(u,"px")}}),this.renderAbles(),this._renderLines())},r.componentDidMount=function(){this.isUnmounted=!1,this.controlBox.getElement();var n=this.props,i=n.parentMoveable,a=n.container,o=n.wrapperMoveable;this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),!a&&!i&&!o&&this.updateRect("",!1,!0),this.updateCheckInput(),this._updateObserver(this.props)},r.componentDidUpdate=function(n){var i;this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(n),this._isPropTargetChanged&&(null===(i=this._onChangetarget)||void 0===i||i.call(this))},r.componentWillUnmount=function(){this.isUnmounted=!0,this._emitter.off(),Oe(this,"targetGesto"),Oe(this,"controlGesto");var n=this.events;for(var i in n){var a=n[i];a&&a.destroy()}},r.getAble=function(n){return ue(this.props.ables||[],function(a){return a.name===n})},r.getContainer=function(){var n=this.props,i=n.parentMoveable,a=n.wrapperMoveable;return n.container||a&&a.getContainer()||i&&i.getContainer()||this.controlBox.getElement().parentElement},r.isMoveableElement=function(n){return n&&(n.getAttribute("class")||"").indexOf(Wn)>-1},r.dragStart=function(n){var i=this.targetGesto;return i&&!i.isFlag()&&i.triggerDragStart(n),this},r.hitTest=function(n){var f,i=this.state,o=i.pos1,s=i.pos2,u=i.pos3,l=i.pos4,p=i.targetClientRect;if(!i.target)return 0;if(n instanceof Element){var c=n.getBoundingClientRect();f={left:c.left,top:c.top,width:c.width,height:c.height}}else f=T({width:0,height:0},n);var d=f.left,v=f.top,g=f.width,m=f.height,b=Go([o,s,l,u],p),x=vc(b,[[d,v],[d+g,v],[d+g,v+m],[d,v+m]]),C=zo(b);return x&&C?Math.min(100,x/C*100):0},r.isInside=function(n,i){var a=this.state;return!!a.target&&Sn([n,i],Go([a.pos1,a.pos2,a.pos4,a.pos3],a.targetClientRect))},r.updateRect=function(n,i,a){void 0===a&&(a=!0);var o=this.props,s=o.parentMoveable,l=this.state.target||this.props.target,p=this.getContainer(),f=s?s.props.rootContainer:o.rootContainer;this.updateState(Ei(this.controlBox&&this.controlBox.getElement(),l,p,p,f||p),!s&&a)},r.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},r.updateTarget=function(n){this.updateRect(n,!0)},r.getRect=function(){var n=this.state,i=Tt(this.state),a=i[0],o=i[1],s=i[2],u=i[3],l=It(i),p=n.width,f=n.height,c=l.width,d=l.height,v=l.left,g=l.top,m=[n.left,n.top],b=K(m,n.origin);return{width:c,height:d,left:v,top:g,pos1:a,pos2:o,pos3:s,pos4:u,offsetWidth:p,offsetHeight:f,beforeOrigin:K(m,n.beforeOrigin),origin:b,transformOrigin:n.transformOrigin,rotation:this.getRotation()}},r.getManager=function(){return this},r.getRotation=function(){var n=this.state;return function(t,e,r){var n=ht(t,e)/Math.PI*180;return(n=r>=0?n:180-n)>=0?n:360+n}(n.pos1,n.pos2,n.direction)},r.request=function(n,i,a){void 0===i&&(i={});var o=this.props,u=o.groupable,l=o.ables.filter(function(m){return m.name===n})[0];if(this.isDragging()||!l||!l.request)return{request:function(){return this},requestEnd:function(){return this}};var p=this,f=l.request(this),c=a||i.isInstant,d=f.isControl?"controlAbles":"targetAbles",v="".concat(u?"Group":"").concat(f.isControl?"Control":""),g={request:function(m){return ar(p,d,"drag",v,"",T(T({},f.request(m)),{requestAble:n,isRequest:!0}),c),this},requestEnd:function(){return ar(p,d,"drag",v,"End",T(T({},f.requestEnd()),{requestAble:n,isRequest:!0}),c),this}};return ar(p,d,"drag",v,"Start",T(T({},f.requestStart(i)),{requestAble:n,isRequest:!0}),c),c?g.request(i).requestEnd():g},r.destroy=function(){this.componentWillUnmount()},r.updateRenderPoses=function(){var n=this.state,i=this.props,a=n.originalBeforeOrigin,o=n.transformOrigin,s=n.allMatrix,l=n.pos1,p=n.pos2,f=n.pos3,c=n.pos4,g=i.padding||{},m=g.left,b=void 0===m?0:m,x=g.top,C=void 0===x?0:x,_=g.bottom,M=void 0===_?0:_,E=g.right,S=void 0===E?0:E,w=n.is3d?4:3,y=i.groupable?a:K(a,[n.left,n.top]);n.renderPoses=[K(l,Pr(s,[-b,-C],o,y,w)),K(p,Pr(s,[S,-C],o,y,w)),K(f,Pr(s,[-b,M],o,y,w)),K(c,Pr(s,[S,M],o,y,w))]},r.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,i=n.target,a=n.container,o=n.parentMoveable,s=this.state,u=s.target,l=s.container;if(u||i){this.updateAbles();var p=!ei(u,i);if(p||!ei(l,a)){var c=a||this.controlBox;c&&this.unsetAbles(),this.updateState({target:i,container:a}),!o&&c&&this.updateRect("End",!1,!1),this._isPropTargetChanged=p}}},r.waitToChangeTarget=function(){var i,n=this;return this._onChangetarget=function(){n._onChangetarget=null,i()},new Promise(function(a){i=a})},r.triggerEvent=function(n,i){this._emitter.trigger(n,i);var a=this.props[n];return a&&a(i)},r.useCSS=function(n,i){var a=this.props.customStyledMap,o=n+i;return a[o]||(a[o]=Jo(n,i)),a[o]},r.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(i){i.unset&&i.unset(n)})},r.updateAbles=function(n,i){void 0===n&&(n=this.props.ables),void 0===i&&(i="");var a=this.props,o=a.triggerAblesSimultaneously,s=n.filter(function(d){return d&&(d.always&&!1!==a[d.name]||a[d.name])}),u="drag".concat(i,"Start"),l="pinch".concat(i,"Start"),p="drag".concat(i,"ControlStart"),f=Rr(s,[u,l],o),c=Rr(s,[p],o);this.enabledAbles=s,this.targetAbles=f,this.controlAbles=c},r.updateState=function(n,i){if(i){if(this.isUnmounted)return;this.setState(n)}else{var a=this.state;for(var o in n)a[o]=n[o]}},r.getEnabledAbles=function(){var n=this.props;return n.ables.filter(function(a){return a&&n[a.name]})},r.renderAbles=function(){var n=this,a=this.props.triggerAblesSimultaneously,o={createElement:Gt};return this.renderState={},function(t,e){var r=[],n={};return t.forEach(function(i,a){var o=function(s){return s.key}(i),s=n[o];s||(n[o]=s=[],r.push(s)),s.push(i)}),r}(function(t){return t.reduce(function(e,r){return e.concat(r)},[])}(Rr(this.getEnabledAbles(),["render"],a).map(function(s){return(0,s.render)(n,o)||[]})).filter(function(s){return s})).map(function(s){return s[0]})},r.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},r._updateObserver=function(n){var i,a=this.props,o=a.target;if(window.ResizeObserver&&o&&a.useResizeObserver){if(n.target!==o||!this._observer){var s=new ResizeObserver(this.checkUpdateRect);s.observe(o,{box:"border-box"}),this._observer=s}}else null===(i=this._observer)||void 0===i||i.disconnect()},r._updateEvents=function(){var n=this.controlBox.getElement(),i=this.targetAbles.length,a=this.controlAbles.length,o=this.props,s=o.dragTarget||o.target;(!i&&this.targetGesto||this._isTargetChanged(!0))&&(Oe(this,"targetGesto"),this.updateState({gesto:null})),a||Oe(this,"controlGesto"),s&&i&&!this.targetGesto&&(this.targetGesto=bu(this,s,"")),!this.controlGesto&&a&&(this.controlGesto=Si(this,n,"controlAbles","Control"))},r._updateTargets=function(){var n=this.props;this._prevTarget=n.dragTarget||n.target,this._prevDragArea=n.dragArea},r._renderLines=function(){var n=this.props,a=n.zoom;if(n.hideDefaultLines||n.parentMoveable&&n.hideChildMoveableDefaultLines)return[];var l=this.state.renderPoses,p={createElement:Gt};return[[0,1],[1,3],[3,2],[2,0]].map(function(f,c){return Nr(p,"",l[f[0]],l[f[1]],a,c)})},r._isTargetChanged=function(n){var i=this.props,u=i.dragArea;return!u&&this._prevTarget!==(i.dragTarget||i.target)||(n||u)&&this._prevDragArea!==u},r._updateNativeEvents=function(){var n=this,a=this.props.dragArea?this.areaElement:this.state.target,o=this.events,s=_e(o);if(this._isTargetChanged())for(var u in o){var l=o[u];l&&l.destroy(),o[u]=null}if(a){var p=this.enabledAbles;s.forEach(function(f){var c=Rr(p,[f]),v=o[f];c.length>0?(v||(v=new ld(a,n,f),o[f]=v),v.setAbles(c)):v&&(v.destroy(),o[f]=null)})}},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,useResizeObserver:!1,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:ds},e}(fn),Mi={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean,hideChildMoveableDefaultLines:Boolean},events:{},render:function(t,e){var r=t.props.targets||[];t.moveables=[];var n=t.state,o={left:n.left,top:n.top},s=t.props;return r.map(function(u,l){return e.createElement(Ae,{key:"moveable"+l,ref:Va(t,"moveables",l),target:u,origin:!1,cssStyled:s.cssStyled,customStyledMap:s.customStyledMap,useResizeObserver:s.useResizeObserver,hideChildMoveableDefaultLines:s.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:o})})}},fd=Je("clickable",{props:{clickable:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){this.dragStart()},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var r=t.state.target,n=e.inputEvent,i=e.inputTarget,o=!t.isMoveableElement(i)&&t.controlBox.getElement().contains(i);if(n&&i&&!e.isDrag&&!t.isMoveableElement(i)&&!o){var s=r.contains(i);F(t,"onClick",q(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:r===i,containsTarget:s}))}},dragGroupEnd:function(t,e){var n=e.inputTarget;if(e.inputEvent&&n&&!e.isDrag&&!t.isMoveableElement(n)&&e.datas.inputTarget!==n){var i=t.props.targets,a=i.indexOf(n),o=a>-1,s=!1;-1===a&&(s=(a=jt(i,function(u){return u.contains(n)}))>-1),F(t,"onClickGroup",q(t,e,{isDouble:e.isDouble,targets:i,inputTarget:n,targetIndex:a,isTarget:o,containsTarget:s}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function ze(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),T(T({},t),{datas:e})}var pd=Je("edgeDraggable",{css:[".edge.edgeDraggable.line {\n    cursor: move;\n}"],render:function(t,e){var r=t.props,n=r.edgeDraggable;return n?Js(e,"edgeDraggable",n,t.state.renderPoses,r.zoom):[]},dragControlCondition:function(t,e){if(!t.props.edgeDraggable||!e.inputEvent)return!1;var r=e.inputEvent.target;return _t(r,W("direction"))&&_t(r,W("edge"))&&_t(r,W("edgeDraggable"))},dragControlStart:function(t,e){return t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},wt.dragStart(t,ze(e))},dragControl:function(t,e){return wt.drag(t,ze(e))},dragControlEnd:function(t,e){return wt.dragEnd(t,ze(e))},dragGroupControlCondition:function(t,e){if(!t.props.edgeDraggable||!e.inputEvent)return!1;var r=e.inputEvent.target;return _t(r,W("direction"))&&_t(r,W("line"))},dragGroupControlStart:function(t,e){return wt.dragGroupStart(t,ze(e))},dragGroupControl:function(t,e){return wt.dragGroup(t,ze(e))},dragGroupControlEnd:function(t,e){return wt.dragGroupEnd(t,ze(e))},unset:function(t){return wt.unset(t)}}),Cu={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},yi=[gu,au,Bp,Uf,wt,pd,vi,Hp,Zp,Wp,Up,Jp,jp,ad,id,sd,Mi,Cu,fd,iu,mu],dd=yi.reduce(function(t,e){return T(T({},t),"events"in e?e.events:{})},{}),_u=yi.reduce(function(t,e){return T(T({},t),e.props)},{}),hd=Object.keys(Xf(dd)),gd=Object.keys(_u);function Hr(t,e){return Math.max.apply(Math,t.map(function(r){return Math.max(r[0][e],r[1][e],r[2][e],r[3][e])}))}function Xr(t,e){return Math.min.apply(Math,t.map(function(r){return Math.min(r[0][e],r[1][e],r[2][e],r[3][e])}))}var bd=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.differ=new ac,n.moveables=[],n.transformOrigin="50% 50%",n}ye(e,t);var r=e.prototype;return r.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},r.updateRect=function(n,i,a){if(void 0===a&&(a=!0),this.controlBox){this.moveables.forEach(function(R){R.updateRect(n,!1,!1)});var o=this.state,s=this.props,u=o.target||s.target;(!i||""!==n&&s.updateGroup)&&(this.rotation=s.defaultGroupRotate,this.transformOrigin=s.defaultGroupOrigin||"50% 50%",this.scale=[1,1]);var l=this.rotation,p=this.scale,f=function(t,e){if(!t.length)return[0,0,0,0];var r=t.map(function(g){return Tt(g.state)}),n=$e,i=$e,a=0,o=0,s=J(e,Dt);if(s%90){var u=s/180*Math.PI,l=Math.tan(u),p=-1/l,f=[Qo,$e],c=[Qo,$e];r.forEach(function(g){g.forEach(function(m){var b=m[1]-l*m[0],x=m[1]-p*m[0];f[0]=Math.max(f[0],b),f[1]=Math.min(f[1],b),c[0]=Math.max(c[0],x),c[1]=Math.min(c[1],x)})}),f.forEach(function(g){c.forEach(function(m){var b=(m-g)/(l-p),x=l*b+g;n=Math.min(n,b),i=Math.min(i,x)})});var d=r.map(function(g){var b=g[1],x=g[2],C=g[3];return[Qt(g[0],-u),Qt(b,-u),Qt(x,-u),Qt(C,-u)]});a=Hr(d,0)-Xr(d,0),o=Hr(d,1)-Xr(d,1)}else if(n=Xr(r,0),i=Xr(r,1),a=Hr(r,0)-n,o=Hr(r,1)-i,s%180){var v=a;a=o,o=v}return[n,i,a,o]}(this.moveables,l),c=f[0],d=f[1],v=f[2],g=f[3],m="rotate(".concat(l,"deg) scale(").concat(p[0]>=0?1:-1,", ").concat(p[1]>=0?1:-1,")");u.style.cssText+="left:0px;top:0px; transform-origin: ".concat(this.transformOrigin,"; width:").concat(v,"px; height:").concat(g,"px;")+"transform:".concat(m),o.width=v,o.height=g;var b=this.getContainer(),x=Ei(this.controlBox.getElement(),u,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||b),C=[x.left,x.top],_=Tt(x),M=_[0],E=_[1],S=_[2],w=_[3],y=gr([M,E,S,w]),D=[y.minX,y.minY];x.pos1=j(M,D),x.pos2=j(E,D),x.pos3=j(S,D),x.pos4=j(w,D),x.left=c-x.left+D[0],x.top=d-x.top+D[1],x.origin=j(K(C,x.origin),D),x.beforeOrigin=j(K(C,x.beforeOrigin),D),x.originalBeforeOrigin=K(C,x.originalBeforeOrigin);var P=x.targetClientRect,O=p[0]*p[1]>0?1:-1;P.top+=x.top-o.top,P.left+=x.left-o.left,u.style.transform="translate(".concat(-D[0],"px, ").concat(-D[1],"px) ").concat(m),this.updateState(T(T({},x),{direction:O,beforeDirection:O}),a)}},r.getRect=function(){return T(T({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},r.triggerEvent=function(n,i,a){if(a||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,i);this._emitter.trigger(n,i)},r.updateAbles=function(){t.prototype.updateAbles.call(this,X(X([],this.props.ables,!0),[Mi],!1),"Group")},r._updateTargets=function(){t.prototype._updateTargets.call(this),this._prevTarget=this.props.dragTarget||this.areaElement},r._updateEvents=function(){var n=this.state,i=this.props,o=i.dragTarget||this.areaElement;this._prevTarget!==o&&(Oe(this,"targetGesto"),Oe(this,"controlGesto"),n.target=null),n.target||(n.target=this.areaElement,this.controlBox.getElement().style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=bu(this,o,"Group")),this.controlGesto||(this.controlGesto=Si(this,this.controlBox.getElement(),"controlAbles","GroupControl")));var s=!ei(n.container,i.container);s&&(n.container=i.container);var u=this.differ.update(i.targets),c=u.added.length||u.removed.length;(s||c||u.changed.length)&&this.updateRect(),this._isPropTargetChanged=!!c},r._updateObserver=function(){},e.defaultProps=T(T({},Ae.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(Ae),xd=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.moveables=[],n}ye(e,t);var r=e.prototype;return r.render=function(){var n=this,i=this.props,s=i.targets;return Gt(i.cssStyled,{cspNonce:i.cspNonce,ref:Ht(this,"controlBox"),className:W("control-box")},s.map(function(u,l){return Gt(Ae,T({key:"moveable"+l,ref:Va(n,"moveables",l)},n.props,{target:u,wrapperMoveable:n}))}))},r.componentDidUpdate=function(){},r.updateRect=function(n,i,a){void 0===a&&(a=!0),this.moveables.forEach(function(o){o.updateRect(n,i,a)})},r.getRect=function(){return T(T({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},r.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},r.dragStart=function(){return this},r.hitTest=function(){return 0},r.isInside=function(){return!1},r.isDragging=function(){return!1},r.updateRenderPoses=function(){},r.checkUpdate=function(){},r.triggerEvent=function(){},r.updateAbles=function(){},r._updateEvents=function(){},r._updateObserver=function(){},e}(Ae),_d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ye(e,t),e.defaultAbles=yi,e}(function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n}ye(e,t);var r=e.prototype;return e.makeStyled=function(){var n={};this.getTotalAbles().forEach(function(o){var s=o.css;!s||s.forEach(function(u){n[u]=!0})});var a=_e(n).join("\n");this.defaultStyled=Jo("div",function(t,e){return e.replace(/([^}{]*){/gm,function(r,n){return n.replace(/\.([^{,\s\d.]+)/g,".moveable-$1")+"{"})}(0,ff+a))},e.getTotalAbles=function(){return X([au,Mi,Cu,iu],this.defaultAbles,!0)},r.render=function(){var n=this.constructor;n.defaultStyled||n.makeStyled();var i=this.props,a=i.ables,o=i.props,s=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}(i,["ables","props"]),l=function(t,e){var r=[];return t.forEach(function(n){if(n){if(zt(n))return void(e[n]&&r.push.apply(r,e[n]));r.push(n)}}),r}(this._updateRefs(!0),this.selectorMap),p=l.length>1,c=X(X([],n.getTotalAbles(),!0),a||[],!0),d=T(T(T({},s),o||{}),{ables:c,cssStyled:n.defaultStyled,customStyledMap:n.customStyledMap});return p?s.individualGroupable?Gt(xd,T({key:"individual-group",ref:Ht(this,"moveable")},d,{target:null,targets:l})):Gt(bd,T({key:"group",ref:Ht(this,"moveable")},d,{target:null,targets:l})):Gt(Ae,T({key:"single",ref:Ht(this,"moveable")},d,{target:l[0]}))},r.componentDidMount=function(){this._updateRefs()},r.componentDidUpdate=function(){this._updateRefs()},r.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},r.getManager=function(){return this.moveable},r._updateRefs=function(n){var i=this.refTargets,a=Es(this.props.target||this.props.targets),o="undefined"!=typeof document,s=i.length!==a.length||i.some(function(p,f){var c=a[f];return!(!p&&!c)&&p!==c}),u=this.selectorMap,l={};return this.refTargets.forEach(function(p){zt(p)&&(u[p]?l[p]=u[p]:o&&(s=!0,l[p]=[].slice.call(document.querySelectorAll(p))))}),this.refTargets=a,this.selectorMap=l,!n&&s&&this.forceUpdate(),a},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);i>3&&a&&Object.defineProperty(e,r,a)}([qa(es)],e.prototype,"moveable",void 0),e}(fn)),Di=function(t,e){return(Di=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};function wi(t,e){function r(){this.constructor=t}Di(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var or=function(){return(or=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++)for(var a in r=arguments[n])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},Ed=function(t){function e(n){var i=t.call(this,n)||this;return i.state={},i.state=i.props,i}return wi(e,t),e.prototype.render=function(){return function(t,e){return Gt(kl,{element:t,container:e})}(Gt(_d,or({ref:Ht(this,"moveable")},this.state)),this.state.parentElement)},e}(cn),Eu=gd,Mu=es,Oi=hd,Ti=function(){return(Ti=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++)for(var a in r=arguments[n])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},yu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wi(e,t),e}(function(t){function e(n,i){void 0===i&&(i={});var a=t.call(this)||this;a.tempElement=document.createElement("div");var o=or({},i),s={};Oi.forEach(function(l){s[function(t){return t.replace(/[\s-_]([a-z])/g,function(e,r){return r.toUpperCase()})}("on ".concat(l))]=function(p){return a.trigger(l,p)}}),go(Gt(Ed,or({ref:Ht(a,"innerMoveable"),parentElement:n},o,s)),a.tempElement);var u=o.target;return Ut(u)&&u.length>1&&a.updateRect(),a}wi(e,t);var r=e.prototype;return r.setState=function(n,i){this.innerMoveable.setState(n,i)},r.forceUpdate=function(n){this.innerMoveable.forceUpdate(n)},r.dragStart=function(n){this.innerMoveable.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(n)},r.destroy=function(){go(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},r.getMoveable=function(){return this.innerMoveable.moveable},function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a}([ja(Mu,function(n,i){n[i]||(n[i]=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var s=this.getMoveable();if(s&&s[i])return s[i].apply(s,a)})}),ja(Eu,function(n,i){Object.defineProperty(n,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var o;this.setState(((o={})[i]=a,o))},enumerable:!0,configurable:!0})})],e)}(function(){function t(){this._events={}}var e=t.prototype;return e.on=function(r,n){if(kt(r))for(var i in r)this.on(i,r[i]);else this._addEvent(r,n,{});return this},e.off=function(r,n){if(r)if(kt(r))for(var i in r)this.off(i);else if(n){var a=this._events[r];if(a){var o=jt(a,function(s){return s.listener===n});o>-1&&a.splice(o,1)}}else this._events[r]=[];else this._events={};return this},e.once=function(r,n){var i=this;return n&&this._addEvent(r,n,{once:!0}),new Promise(function(a){i._addEvent(r,a,{once:!0})})},e.emit=function(r,n){var i=this;void 0===n&&(n={});var a=this._events[r];if(!r||!a)return!0;var o=!1;return n.eventType=r,n.stop=function(){o=!0},n.currentTarget=this,function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}(a).forEach(function(s){s.listener(n),s.once&&i.off(r,s.listener)}),!o},e.trigger=function(r,n){return void 0===n&&(n={}),this.emit(r,n)},e._addEvent=function(r,n,i){var a=this._events;a[r]=a[r]||[],a[r].push(Ti({listener:n},i))},t}())),Du=k(4762);let Od=(()=>{class t{}return(0,Du.gn)([qa(Mu,{dragStart:"ngDragStart"}),(0,Du.w6)("design:type",yu)],t.prototype,"moveable",void 0),t})(),Td=(()=>{class t extends Od{constructor(r){super(),this._elementRef=r,Oi.forEach(n=>{this[n]=new h.vpe})}ngOnInit(){const r={},n={};Eu.forEach(a=>{r[a]=this[a]}),Oi.forEach(a=>{n[a]=o=>{this[a].emit(o)}});const i=this._elementRef.nativeElement;this.moveable=new yu(i,Object.assign(Object.assign({},r),{portalContainer:i})),this.moveable.on(n)}ngOnChanges(r){const n=this.moveable;if(n)for(const i in r){const{previousValue:a,currentValue:o}=r[i];a!==o&&(n[i]=o)}}ngOnDestroy(){this.moveable.destroy()}}return t.\u0275fac=function(r){return new(r||t)(h.Y36(h.SBq))},t.\u0275cmp=h.Xpm({type:t,selectors:[["ngx-moveable"]],inputs:{target:"target",dragTarget:"dragTarget",container:"container",portalContainer:"portalContainer",rootContainer:"rootContainer",useResizeObserver:"useResizeObserver",zoom:"zoom",transformOrigin:"transformOrigin",edge:"edge",ables:"ables",className:"className",pinchThreshold:"pinchThreshold",pinchOutside:"pinchOutside",triggerAblesSimultaneously:"triggerAblesSimultaneously",checkInput:"checkInput",cspNonce:"cspNonce",translateZ:"translateZ",hideDefaultLines:"hideDefaultLines",props:"props",flushSync:"flushSync",stopPropagation:"stopPropagation",preventClickEventOnDrag:"preventClickEventOnDrag",preventClickDefault:"preventClickDefault",snappable:"snappable",snapContainer:"snapContainer",snapDirections:"snapDirections",elementSnapDirections:"elementSnapDirections",snapGap:"snapGap",snapGridWidth:"snapGridWidth",snapGridHeight:"snapGridHeight",isDisplaySnapDigit:"isDisplaySnapDigit",isDisplayInnerSnapDigit:"isDisplayInnerSnapDigit",snapDigit:"snapDigit",snapThreshold:"snapThreshold",horizontalGuidelines:"horizontalGuidelines",verticalGuidelines:"verticalGuidelines",elementGuidelines:"elementGuidelines",bounds:"bounds",innerBounds:"innerBounds",snapDistFormat:"snapDistFormat",maxSnapElementGuidelineDistance:"maxSnapElementGuidelineDistance",maxSnapElementGapDistance:"maxSnapElementGapDistance",pinchable:"pinchable",draggable:"draggable",throttleDrag:"throttleDrag",throttleDragRotate:"throttleDragRotate",startDragRotate:"startDragRotate",edgeDraggable:"edgeDraggable",resizable:"resizable",throttleResize:"throttleResize",renderDirections:"renderDirections",keepRatio:"keepRatio",resizeFormat:"resizeFormat",keepRatioFinally:"keepRatioFinally",scalable:"scalable",throttleScale:"throttleScale",warpable:"warpable",rotatable:"rotatable",rotationPosition:"rotationPosition",throttleRotate:"throttleRotate",rotationTarget:"rotationTarget",rotateAroundControls:"rotateAroundControls",resolveAblesWithRotatable:"resolveAblesWithRotatable",scrollable:"scrollable",scrollContainer:"scrollContainer",scrollThreshold:"scrollThreshold",getScrollPosition:"getScrollPosition",padding:"padding",origin:"origin",originDraggable:"originDraggable",originRelative:"originRelative",clippable:"clippable",defaultClipPath:"defaultClipPath",customClipPath:"customClipPath",clipRelative:"clipRelative",clipArea:"clipArea",dragWithClip:"dragWithClip",clipTargetBounds:"clipTargetBounds",clipVerticalGuidelines:"clipVerticalGuidelines",clipHorizontalGuidelines:"clipHorizontalGuidelines",clipSnapThreshold:"clipSnapThreshold",roundable:"roundable",roundRelative:"roundRelative",minRoundControls:"minRoundControls",maxRoundControls:"maxRoundControls",roundClickable:"roundClickable",defaultGroupRotate:"defaultGroupRotate",defaultGroupOrigin:"defaultGroupOrigin",groupable:"groupable",hideChildMoveableDefaultLines:"hideChildMoveableDefaultLines",individualGroupable:"individualGroupable",clickable:"clickable",dragArea:"dragArea",passDragArea:"passDragArea"},outputs:{beforeRenderStart:"beforeRenderStart",beforeRender:"beforeRender",beforeRenderEnd:"beforeRenderEnd",beforeRenderGroupStart:"beforeRenderGroupStart",beforeRenderGroup:"beforeRenderGroup",beforeRenderGroupEnd:"beforeRenderGroupEnd",snap:"snap",pinchStart:"pinchStart",pinch:"pinch",pinchEnd:"pinchEnd",pinchGroupStart:"pinchGroupStart",pinchGroup:"pinchGroup",pinchGroupEnd:"pinchGroupEnd",dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd",dragGroupStart:"dragGroupStart",dragGroup:"dragGroup",dragGroupEnd:"dragGroupEnd",resizeStart:"resizeStart",beforeResize:"beforeResize",resize:"resize",resizeEnd:"resizeEnd",resizeGroupStart:"resizeGroupStart",beforeResizeGroup:"beforeResizeGroup",resizeGroup:"resizeGroup",resizeGroupEnd:"resizeGroupEnd",scaleStart:"scaleStart",beforeScale:"beforeScale",scale:"scale",scaleEnd:"scaleEnd",scaleGroupStart:"scaleGroupStart",beforeScaleGroup:"beforeScaleGroup",scaleGroup:"scaleGroup",scaleGroupEnd:"scaleGroupEnd",warpStart:"warpStart",warp:"warp",warpEnd:"warpEnd",rotateStart:"rotateStart",beforeRotate:"beforeRotate",rotate:"rotate",rotateEnd:"rotateEnd",rotateGroupStart:"rotateGroupStart",beforeRotateGroup:"beforeRotateGroup",rotateGroup:"rotateGroup",rotateGroupEnd:"rotateGroupEnd",scroll:"scroll",scrollGroup:"scrollGroup",dragOriginStart:"dragOriginStart",dragOrigin:"dragOrigin",dragOriginEnd:"dragOriginEnd",clipStart:"clipStart",clip:"clip",clipEnd:"clipEnd",roundStart:"roundStart",round:"round",roundEnd:"roundEnd",click:"click",clickGroup:"clickGroup",renderStart:"renderStart",render:"render",renderEnd:"renderEnd",renderGroupStart:"renderGroupStart",renderGroup:"renderGroup",renderGroupEnd:"renderGroupEnd"},features:[h.qOj,h.TTD],decls:0,vars:0,template:function(r,n){},encapsulation:2}),t})(),Rd=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[[]]}),t})();var wu=k(4828);const Pd=["textareaScene"],Ad=["textareaOptions"],zd=["textareaMockData"];let Gd=(()=>{class t{constructor(){this.options={},this.demoData={},this.scene={},this.changeSetting=new h.vpe}ngOnInit(){this.loadOptons()}ngOnChanges(){this.loadOptons()}loadOptons(){this.textareaScene&&(this.textareaScene.nativeElement.value=JSON.stringify(this.scene,null,2)),this.textareaOptions&&(this.textareaOptions.nativeElement.value=JSON.stringify(this.options||{},null,2)),this.textareaMockData&&(this.textareaMockData.nativeElement.value=JSON.stringify(this.demoData||{},null,2))}sceneOnchange(){this.scene=JSON.parse(this.textareaScene.nativeElement.value),this.changeSetting.emit({scene:this.scene})}optionsOnchange(){this.options=JSON.parse(this.textareaOptions.nativeElement.value),this.changeSetting.emit({options:this.options})}demoDataOnchange(){this.demoData=JSON.parse(this.textareaMockData.nativeElement.value),this.changeSetting.emit({demoData:this.demoData})}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-setting"]],viewQuery:function(r,n){if(1&r&&(h.Gf(Pd,5),h.Gf(Ad,5),h.Gf(zd,5)),2&r){let i;h.iGM(i=h.CRH())&&(n.textareaScene=i.first),h.iGM(i=h.CRH())&&(n.textareaOptions=i.first),h.iGM(i=h.CRH())&&(n.textareaMockData=i.first)}},inputs:{options:"options",demoData:"demoData",scene:"scene"},outputs:{changeSetting:"changeSetting"},features:[h.TTD],decls:14,vars:0,consts:[["nzTitle","scene"],["cols","30","rows","20",1,"area",3,"change"],["textareaScene",""],["nzTitle","options"],["textareaOptions",""],["nzTitle","mockdata"],["textareaMockData",""]],template:function(r,n){1&r&&(h.TgZ(0,"div"),h.TgZ(1,"nz-tabset"),h.TgZ(2,"nz-tab",0),h.TgZ(3,"textarea",1,2),h.NdJ("change",function(){return n.sceneOnchange()}),h._uU(5," "),h.qZA(),h.qZA(),h.TgZ(6,"nz-tab",3),h.TgZ(7,"textarea",1,4),h.NdJ("change",function(){return n.optionsOnchange()}),h._uU(9," "),h.qZA(),h.qZA(),h.TgZ(10,"nz-tab",5),h.TgZ(11,"textarea",1,6),h.NdJ("change",function(){return n.demoDataOnchange()}),h._uU(13," "),h.qZA(),h.qZA(),h.qZA(),h.qZA())},directives:[wu.xH,wu.xw],styles:["nz-tabset[_ngcontent-%COMP%]{background:white;min-height:520px;padding:0 10px}"]}),t})();const Id=["target"],Bd=["moveable"];function kd(t,e){if(1&t){const r=h.EpF();h.TgZ(0,"li",20),h.NdJ("click",function(){const a=h.CHM(r).$implicit;return h.oxw().wlistclick(a,"mulcoms")}),h._uU(1),h.qZA()}if(2&t){const r=e.$implicit;h.xp6(1),h.hij(" ",r," ")}}function Nd(t,e){if(1&t){const r=h.EpF();h.TgZ(0,"li",20),h.NdJ("click",function(){const a=h.CHM(r).$implicit;return h.oxw(2).wlistclick(a)}),h._uU(1),h.qZA()}if(2&t){const r=e.$implicit;h.xp6(1),h.hij(" ",r.title," ")}}function Fd(t,e){if(1&t&&(h.TgZ(0,"li",21),h.TgZ(1,"ul"),h.YNc(2,Nd,2,1,"li",7),h.qZA(),h.qZA()),2&t){const r=e.$implicit;h.s9C("nzTitle",r.title),h.xp6(2),h.Q6J("ngForOf",r.children)}}const Ou=function(t){return{transform:t}};function Ld(t,e){if(1&t){const r=h.EpF();h.TgZ(0,"app-widget",23),h.NdJ("click",function(i){h.CHM(r);const a=h.oxw().$implicit;return h.oxw().appWidgetClick(a,i)})("eventEmit",function(i){return h.CHM(r),h.oxw(2).onGetInstance(i)}),h.qZA()}if(2&t){const r=h.oxw().$implicit;h.Akn(h.VKq(11,Ou,"rotate("+r.position.rotate+"deg)")),h.Udp("top",r.position.top,"px")("left",r.position.left,"px")("width",r.position.width,"px")("height",r.position.height,"px"),h.Q6J("widgetConfig",r)}}function Yd(t,e){if(1&t){const r=h.EpF();h.TgZ(0,"app-mulwidget",23),h.NdJ("click",function(i){h.CHM(r);const a=h.oxw().$implicit;return h.oxw().appWidgetClick(a,i)})("eventEmit",function(i){return h.CHM(r),h.oxw(2).onGetInstance(i)}),h.qZA()}if(2&t){const r=h.oxw().$implicit;h.Akn(h.VKq(11,Ou,"rotate("+r.position.rotate+"deg)")),h.Udp("top",r.position.top,"px")("left",r.position.left,"px")("width",r.position.width,"px")("height",r.position.height,"px"),h.Q6J("widgetConfig",r)}}function Wd(t,e){if(1&t&&(h.TgZ(0,"div"),h.YNc(1,Ld,1,13,"app-widget",22),h.YNc(2,Yd,1,13,"app-mulwidget",22),h.qZA()),2&t){const r=e.$implicit;h.xp6(1),h.Q6J("ngIf","mulcoms"!=r.type),h.xp6(1),h.Q6J("ngIf","mulcoms"===r.type)}}const Hd=function(){return["/home"]},Xd=function(t){return["/editer/preview",t]},Zd=function(t,e,r,n){return{transform:t,width:e,height:r,background:n}},Vd=[{path:"list",component:Ni},{path:"edit/:id",component:(()=>{class t{constructor(r,n,i){this.route=r,this.router=n,this.editService=i,this.isCollapsed=!1,this.displaySetting=!0,this.scaleK=1,this.cwidgets=Zu,this.nowwidget=null,this.configarr=Object.keys(Ce.O),this.position={left:100,top:100,width:400,height:400,rotate:0},this.options={},this.optionsData={},this.demoData={},this.widgetInstances={},this.scalable=!0,this.resizable=!0,this.warpable=!1}ngOnInit(){this.route.paramMap.subscribe(r=>{const n=r.get("id");this.sceneId=n,n.toString().length<6?this.editService.loadJsonScene(n).subscribe(i=>{this.sceneAllData=i}):this.editService.getScene(n).subscribe(i=>{const a=i;this.sceneAllData=a,(a.components||[]).forEach(o=>{o.uuid||(o.uuid=sr())})})})}wlistclick(r,n){var i,a;this.options=null,this.demoData=null;let o={};if("mulcoms"===n){let v={left:100,top:100,width:null===(i=Ce.O[r])||void 0===i?void 0:i.width,height:null===(a=Ce.O[r])||void 0===a?void 0:a.height,rotate:0};o={selector:r,position:Object.assign(JSON.parse(JSON.stringify(this.position)),v||{}),uuid:sr(),type:n||"mulcoms"}}else o={selector:r.selector,position:Object.assign(JSON.parse(JSON.stringify(this.position)),r.position||{}),uuid:sr(),type:n||"sincoms"};this.sceneAllData.components.push(o),this.nowwidget=o;const{width:s,height:u,left:l,top:p,rotate:f}=o.position;this.setTargetPosition(s,u,l,p,f),setTimeout(()=>{var c,d;this.options=(null===(c=this.widgetInstances[o.uuid])||void 0===c?void 0:c.options)||{},this.options=JSON.parse(JSON.stringify(this.options)),this.demoData=(null===(d=this.widgetInstances[o.uuid])||void 0===d?void 0:d.demoData)||{},this.demoData=JSON.parse(JSON.stringify(this.demoData)),this.nowwidget.options=this.options,this.nowwidget.demoData=this.demoData},10),this.appWidgetClick(o,null)}onMoving(r,n){}onMoveEnd(r,n){}onResizeStart(r,n){this._width=n.size.width}onResizing(r,n){r.position.width=this._width+2*(n.size.width-this._width)}onResizeStop(r,n){var i,a;let o=n.size.width;r.position.top=n.position.top,r.position.left=n.position.left,r.position.width=this._width+2*(o-this._width),r.position.height=n.size.height,this._width=n.size.width,this.widgetInstances[r.uuid]&&(null===(a=(i=this.widgetInstances[r.uuid]).onResize)||void 0===a||a.call(i))}clearScene(){this.sceneAllData.components=[],this.clearSomething()}saveScene(){this.editService.saveScene(this.sceneId,this.sceneAllData),localStorage.setItem("scene",JSON.stringify(this.sceneAllData))}innerContentClick(r){r.preventDefault(),r.stopPropagation(),(r.target.classList.contains("nz-content")||r.target.classList.contains("inner-content"))&&this.clearSomething()}clearSomething(){this.nowwidget=null,this.options=null,this.demoData=null,this.targetdiv.nativeElement.style.display="none",this.targetdiv.nativeElement.style.width="0px",this.targetdiv.nativeElement.style.height="0px",this.moveable.updateTarget()}setTargetPosition(r,n,i,a,o=0){this.targetdiv.nativeElement&&(this.targetdiv.nativeElement.style.width=r+"px",this.targetdiv.nativeElement.style.height=n+"px",this.targetdiv.nativeElement.style.left=i+"px",this.targetdiv.nativeElement.style.top=a+"px",this.targetdiv.nativeElement.style.transform=`rotate(${o}deg)`),this.nowwidget&&(this.nowwidget.position.width=r,this.nowwidget.position.height=n,this.nowwidget.position.left=i,this.nowwidget.position.top=a,this.nowwidget.position.rotate=o)}appWidgetClick(r,n){if(r.selector){this.nowwidget=r,this.targetdiv.nativeElement&&(this.targetdiv.nativeElement.style.display="block");const{width:i,height:a,left:o,top:s,rotate:u}=r.position;this.setTargetPosition(i,a,o,s,u),setTimeout(()=>{var l,p;this.moveable.updateTarget(),this.options=(null===(l=this.widgetInstances[r.uuid])||void 0===l?void 0:l.options)||{},this.demoData=(null===(p=this.widgetInstances[r.uuid])||void 0===p?void 0:p.demoData)||{},this.options=JSON.parse(JSON.stringify(this.options)),this.demoData=JSON.parse(JSON.stringify(this.demoData))},10)}}deleteComponent(){this.sceneAllData.components=this.sceneAllData.components.filter(r=>r.uuid!==this.nowwidget.uuid),this.clearSomething()}onChangeSetting(r){var n,i,a,o;r.options&&this.widgetInstances[this.nowwidget.uuid]&&(null===(i=(n=this.widgetInstances[this.nowwidget.uuid]).onchangeOption)||void 0===i||i.call(n,r.options),this.widgetInstances[this.nowwidget.uuid].options=r.options,this.nowwidget.options=r.options),r.demoData&&this.widgetInstances[this.nowwidget.uuid]&&(null===(o=(a=this.widgetInstances[this.nowwidget.uuid]).onchangeDemoData)||void 0===o||o.call(a,r.demoData),this.widgetInstances[this.nowwidget.uuid].demoData=r.demoData,this.nowwidget.demoData=r.demoData),r.scene&&(this.sceneAllData.options=r.scene)}onGetInstance(r){r.uuid&&(this.widgetInstances[r.uuid]=r.comInstance)}onPinch({}){}onDrag({target:r,top:a,left:o}){r.style.left=`${o}px`,r.style.top=`${a}px`,this.nowwidget&&(this.nowwidget.position.left=o,this.nowwidget.position.top=a)}onScale({target:r,delta:n}){r.style.transform=`scale(${n})`}onRotate({target:r,beforeRotate:o}){r.style.transform=`rotate(${o}deg)`,this.nowwidget&&(this.nowwidget.position.rotate=o)}onResize({target:r,width:a,height:o,drag:s}){r.style.width=`${a}px`,r.style.height=`${o}px`,r.style.left=s.beforeTranslate[0]+"px",r.style.top=s.beforeTranslate[1]+"px",this.setTargetPosition(a,o,s.beforeTranslate[0],s.beforeTranslate[1],this.nowwidget.position.rotate),this.moveable.updateTarget()}onWarp({}){}onEnd(){var r,n,i,a;if(this.nowwidget){const o=this.nowwidget.uuid;null===(n=null===(r=this.widgetInstances[o])||void 0===r?void 0:r.onResize)||void 0===n||n.call(r),null===(a=null===(i=this.widgetInstances[o])||void 0===i?void 0:i.resize)||void 0===a||a.call(i)}}}return t.\u0275fac=function(r){return new(r||t)(h.Y36(oe.gz),h.Y36(oe.F0),h.Y36(Ur))},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-edit"]],viewQuery:function(r,n){if(1&r&&(h.Gf(Id,5),h.Gf(Bd,5)),2&r){let i;h.iGM(i=h.CRH())&&(n.targetdiv=i.first),h.iGM(i=h.CRH())&&(n.moveable=i.first)}},decls:39,vars:44,consts:[[1,"app-layout"],["nzCollapsible","","nzWidth","150px","nzBreakpoint","md",1,"menu-sidebar",3,"nzCollapsed","nzTrigger","nzCollapsedChange"],[1,"sidebar-logo"],["nz-icon","",2,"color","white",3,"nzType","click"],[3,"routerLink"],["nz-menu","","nzTheme","dark",3,"nzMode"],["nz-submenu","","nzTitle","\u5355\u72ec\u7c7b","nzIcon","appstore"],["nz-menu-item","",3,"click",4,"ngFor","ngForOf"],["nz-submenu","","nzIcon","appstore",3,"nzTitle",4,"ngFor","ngForOf"],[3,"click"],["target","_blank",3,"routerLink"],[2,"position","absolute","width","150px","top","16px",3,"ngModel","nzMin","nzMax","nzStep","nzDefaultValue","ngModelChange"],[1,"nz-content",3,"click"],[1,"inner-content"],[4,"ngFor","ngForOf"],[1,"moveable",2,"position","absolute","left","-10000px","width","0px","height","0px","z-index","99","background-color","rgba(127, 255, 212, 0.108)"],["target",""],[3,"target","draggable","origin","rotatable","pinchable","scalable","resizable","warpable","keepRatio","throttleDrag","throttleScale","throttleRotate","throttleResize","drag","resize","scale","warp","rotate","pinch","dragEnd","resizeEnd","scaleEnd","warpEnd","rotateEnd","pinchEnd"],["moveable",""],[1,"setting",3,"options","demoData","scene","changeSetting"],["nz-menu-item","",3,"click"],["nz-submenu","","nzIcon","appstore",3,"nzTitle"],["style","position: absolute;",3,"widgetConfig","style","top","left","width","height","click","eventEmit",4,"ngIf"],[2,"position","absolute",3,"widgetConfig","click","eventEmit"]],template:function(r,n){if(1&r&&(h.TgZ(0,"nz-layout",0),h.TgZ(1,"nz-sider",1),h.NdJ("nzCollapsedChange",function(a){return n.isCollapsed=a}),h.TgZ(2,"div",2),h.TgZ(3,"i",3),h.NdJ("click",function(){return n.isCollapsed=!n.isCollapsed}),h.qZA(),h.TgZ(4,"h1"),h.TgZ(5,"a",4),h._uU(6,"Home"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(7,"ul",5),h.TgZ(8,"li",6),h.TgZ(9,"ul"),h.YNc(10,kd,2,1,"li",7),h.qZA(),h.qZA(),h.YNc(11,Fd,3,2,"li",8),h.qZA(),h.qZA(),h.TgZ(12,"nz-layout"),h.TgZ(13,"nz-header"),h.TgZ(14,"span"),h.TgZ(15,"a",9),h.NdJ("click",function(){return n.saveScene()}),h._uU(16,"Save"),h.qZA(),h.qZA(),h.TgZ(17,"span"),h.TgZ(18,"a",9),h.NdJ("click",function(){return n.displaySetting=!n.displaySetting}),h._uU(19,"Options"),h.qZA(),h.qZA(),h.TgZ(20,"span"),h.TgZ(21,"a",9),h.NdJ("click",function(){return n.deleteComponent()}),h._uU(22,"Delete"),h.qZA(),h.qZA(),h.TgZ(23,"span"),h.TgZ(24,"a",9),h.NdJ("click",function(){return n.clearScene()}),h._uU(25,"Clear"),h.qZA(),h.qZA(),h.TgZ(26,"span"),h.TgZ(27,"a",10),h._uU(28,"Preview"),h.qZA(),h.qZA(),h.TgZ(29,"span"),h.TgZ(30,"nz-slider",11),h.NdJ("ngModelChange",function(a){return n.scaleK=a}),h.qZA(),h.qZA(),h.qZA(),h.TgZ(31,"nz-content",12),h.NdJ("click",function(a){return n.innerContentClick(a)}),h.TgZ(32,"div",13),h.YNc(33,Wd,3,2,"div",14),h._UZ(34,"div",15,16),h.TgZ(36,"ngx-moveable",17,18),h.NdJ("drag",function(a){return n.onDrag(a)})("resize",function(a){return n.onResize(a)})("scale",function(a){return n.onScale(a)})("warp",function(a){return n.onWarp(a)})("rotate",function(a){return n.onRotate(a)})("pinch",function(a){return n.onPinch(a)})("dragEnd",function(){return n.onEnd()})("resizeEnd",function(){return n.onEnd()})("scaleEnd",function(){return n.onEnd()})("warpEnd",function(){return n.onEnd()})("rotateEnd",function(){return n.onEnd()})("pinchEnd",function(){return n.onEnd()}),h.qZA(),h.qZA(),h.TgZ(38,"app-setting",19),h.NdJ("changeSetting",function(a){return n.onChangeSetting(a)}),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&r){const i=h.MAs(35);h.xp6(1),h.Q6J("nzCollapsed",n.isCollapsed)("nzTrigger",null),h.xp6(2),h.Q6J("nzType","home"),h.xp6(2),h.Q6J("routerLink",h.DdM(36,Hd)),h.xp6(2),h.Q6J("nzMode","vertical"),h.xp6(3),h.Q6J("ngForOf",n.configarr),h.xp6(1),h.Q6J("ngForOf",n.cwidgets),h.xp6(16),h.Q6J("routerLink",h.VKq(37,Xd,n.sceneId)),h.xp6(3),h.Q6J("ngModel",n.scaleK)("nzMin",.1)("nzMax",2)("nzStep",.1)("nzDefaultValue",.5),h.xp6(2),h.Akn(h.l5B(39,Zd,"scale("+n.scaleK+")",n.sceneAllData.options.width+"px",n.sceneAllData.options.height+"px",n.sceneAllData.options.bgColor)),h.xp6(1),h.Q6J("ngForOf",n.sceneAllData.components),h.xp6(3),h.Udp("opacity",null===n.nowwidget?0:1),h.Q6J("target",i)("draggable",!0)("origin",!1)("rotatable",!0)("pinchable",!0)("scalable",n.scalable)("resizable",n.resizable)("warpable",n.warpable)("keepRatio",!1)("throttleDrag",1)("throttleScale",.01)("throttleRotate",.2)("throttleResize",1),h.xp6(2),h.Udp("display",n.displaySetting?"unset":"none"),h.Q6J("options",n.options)("demoData",n.demoData)("scene",n.sceneAllData.options)}},directives:[ur.hw,ur.t7,Bi.w,Qu.Ls,oe.yS,Jr.wO,Jr.rY,xe.sg,ur.E8,tl.jS,jr.JJ,jr.On,ur.OK,Td,Gd,Jr.r9,xe.O5,Ha,Xa],styles:["[_nghost-%COMP%]{display:flex;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.app-layout[_ngcontent-%COMP%]{height:100vh}.menu-sidebar[_ngcontent-%COMP%]{position:relative;z-index:10;min-height:100vh;box-shadow:2px 0 6px #11111259}.header-trigger[_ngcontent-%COMP%]{height:64px;padding:20px 24px;font-size:20px;cursor:pointer;transition:all .3s,padding 0s}.trigger[_ngcontent-%COMP%]:hover{color:#1890ff}.sidebar-logo[_ngcontent-%COMP%]{position:relative;height:64px;padding-left:24px;overflow:hidden;line-height:64px;background:#001529;transition:all .3s}.sidebar-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:inline-block;height:32px;width:32px;vertical-align:middle}.sidebar-logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:inline-block;margin:0 0 0 20px;color:#fff;font-weight:600;font-size:14px;font-family:Avenir,Helvetica Neue,Arial,Helvetica,sans-serif;vertical-align:middle}nz-header[_ngcontent-%COMP%]{padding:0;width:100%;z-index:2}nz-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:20px}.app-header[_ngcontent-%COMP%]{position:relative;height:64px;padding:0;background:#fff;box-shadow:0 1px 4px #00152914}nz-content[_ngcontent-%COMP%]{margin:12px}.inner-content[_ngcontent-%COMP%]{color:#fff;min-height:600px;background-color:#000;position:absolute;width:1920px;height:1080px;transform:scale(.5);transform-origin:top left}.inner-dragbox[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:.5}.mborder[_ngcontent-%COMP%]{box-shadow:#0197f9 0 0 1px 2px;background-color:#ffffff3d}.setting[_ngcontent-%COMP%]{position:absolute;right:0px;z-index:100}"]}),t})()},{path:"preview/:id",component:Ku},{path:"",component:Ni}];let jd=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[[oe.Bz.forChild(Vd)],oe.Bz]}),t})();var qd=k(9284),Ud=k(1610);let Jd=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[[xe.ez,jr.u5,Gu.YY,jd,qd.b,Ud.m,Rd]]}),t})()}}]);